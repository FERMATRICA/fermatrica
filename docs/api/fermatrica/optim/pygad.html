<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>fermatrica.optim.pygad API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../optim.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;fermatrica.optim</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#GA">GA</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GA.__init__">GA</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.supported_int_types">supported_int_types</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.supported_float_types">supported_float_types</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.supported_int_float_types">supported_int_float_types</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.random_seed">random_seed</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.mutation_by_replacement">mutation_by_replacement</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.gene_space_nested">gene_space_nested</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.gene_space">gene_space</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.random_mutation_min_val">random_mutation_min_val</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.random_mutation_max_val">random_mutation_max_val</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.initial_population">initial_population</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.population">population</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.num_parents_mating">num_parents_mating</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.crossover_type">crossover_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.mutation_type">mutation_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.K_tournament">K_tournament</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.keep_parents">keep_parents</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.keep_elitism">keep_elitism</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.args">args</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.allow_duplicate_genes">allow_duplicate_genes</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.stop_criteria">stop_criteria</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.supported_stop_words">supported_stop_words</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.run_completed">run_completed</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.generations_completed">generations_completed</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.valid_parameters">valid_parameters</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.num_generations">num_generations</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.parent_selection_type">parent_selection_type</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.mutation_percent_genes">mutation_percent_genes</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.mutation_num_genes">mutation_num_genes</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.best_solutions_fitness">best_solutions_fitness</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.best_solution_generation">best_solution_generation</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.save_best_solutions">save_best_solutions</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.best_solutions">best_solutions</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.save_solutions">save_solutions</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.solutions">solutions</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.solutions_fitness">solutions_fitness</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.last_generation_fitness">last_generation_fitness</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.last_generation_parents">last_generation_parents</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.last_generation_offspring_crossover">last_generation_offspring_crossover</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.last_generation_offspring_mutation">last_generation_offspring_mutation</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.previous_generation_fitness">previous_generation_fitness</a>
                        </li>
                        <li>
                                <a class="variable" href="#GA.last_generation_elitism">last_generation_elitism</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.round_genes">round_genes</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.initialize_population">initialize_population</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.cal_pop_fitness">cal_pop_fitness</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.steady_state_selection">steady_state_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.rank_selection">rank_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.random_selection">random_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.tournament_selection">tournament_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.roulette_wheel_selection">roulette_wheel_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.stochastic_universal_selection">stochastic_universal_selection</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.single_point_crossover">single_point_crossover</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.two_points_crossover">two_points_crossover</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.uniform_crossover">uniform_crossover</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.scattered_crossover">scattered_crossover</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.random_mutation">random_mutation</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.mutation_by_space">mutation_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.mutation_probs_by_space">mutation_probs_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.mutation_randomly">mutation_randomly</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.mutation_probs_randomly">mutation_probs_randomly</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.swap_mutation">swap_mutation</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.inversion_mutation">inversion_mutation</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.scramble_mutation">scramble_mutation</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation_population_fitness">adaptive_mutation_population_fitness</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation">adaptive_mutation</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation_by_space">adaptive_mutation_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation_randomly">adaptive_mutation_randomly</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation_probs_by_space">adaptive_mutation_probs_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.adaptive_mutation_probs_randomly">adaptive_mutation_probs_randomly</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.solve_duplicate_genes_randomly">solve_duplicate_genes_randomly</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.solve_duplicate_genes_by_space">solve_duplicate_genes_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.solve_duplicate_genes_by_space_OLD">solve_duplicate_genes_by_space_OLD</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.unique_int_gene_from_range">unique_int_gene_from_range</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.unique_genes_by_space">unique_genes_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.unique_gene_by_space">unique_gene_by_space</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.best_solution">best_solution</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.plot_result">plot_result</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.plot_fitness">plot_fitness</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.plot_new_solution_rate">plot_new_solution_rate</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.plot_genes">plot_genes</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.close_parallel">close_parallel</a>
                        </li>
                        <li>
                                <a class="function" href="#GA.save">save</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#load">load</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../fermatrica.html">fermatrica</a><wbr>.<a href="./../optim.html">optim</a><wbr>.pygad    </h1>

                        <div class="docstring"><p>Genetic Algorithm to optimise outer layer of the model.</p>

<p>Derived from <a href="https://github.com/ahmedfgad/GeneticAlgorithmPython">https://github.com/ahmedfgad/GeneticAlgorithmPython</a> with some changes.</p>

<p>The main goal of this "fork" is to adapt algo for multiprocessing and arguments for objective function.
As the original library is under development the issues mentioned could some time go away,
and then we are hope to switch back to the original library. Maybe.</p>

<hr />

<p>This file has the specific license, different form the license of the other source code of the whole project
and is redistributed under BSD-3-Clause License:</p>

<p>"
Copyright GeneticAlgorithmPython Contributors</p>

<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>

<ol>
<li><p>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</p></li>
<li><p>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</p></li>
<li><p>Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.</p></li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
"</p>
</div>

                        <input id="mod-pygad-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-pygad-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="sd">Genetic Algorithm to optimise outer layer of the model.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">Derived from https://github.com/ahmedfgad/GeneticAlgorithmPython with some changes.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">The main goal of this &quot;fork&quot; is to adapt algo for multiprocessing and arguments for objective function.</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="sd">As the original library is under development the issues mentioned could some time go away,</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="sd">and then we are hope to switch back to the original library. Maybe.</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="sd">-----------------------------------------------</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="sd">This file has the specific license, different form the license of the other source code of the whole project</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="sd">and is redistributed under BSD-3-Clause License:</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="sd">&quot;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="sd">Copyright GeneticAlgorithmPython Contributors</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">Redistribution and use in source and binary forms, with or without</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">modification, are permitted provided that the following conditions are</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">met:</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="sd">1. Redistributions of source code must retain the above copyright</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">   notice, this list of conditions and the following disclaimer.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">2. Redistributions in binary form must reproduce the above copyright</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">   notice, this list of conditions and the following disclaimer in the</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">   documentation and/or other materials provided with the distribution.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">3. Neither the name of the copyright holder nor the names of its</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">   contributors may be used to endorse or promote products derived from</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">   this software without specific prior written permission.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">&quot;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="kn">import</span> <span class="nn">ipyparallel.serialize.codeutil</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="kn">import</span> <span class="nn">numpy</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="kn">import</span> <span class="nn">random</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="kn">import</span> <span class="nn">multiprocessing</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="kn">import</span> <span class="nn">pickle</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="kn">import</span> <span class="nn">time</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="kn">import</span> <span class="nn">warnings</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="kn">import</span> <span class="nn">concurrent.futures</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="k">class</span> <span class="nc">GA</span><span class="p">:</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>    <span class="n">supported_int_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int8</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>                           <span class="n">numpy</span><span class="o">.</span><span class="n">uint16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint64</span><span class="p">]</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>    <span class="n">supported_float_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>    <span class="n">supported_int_float_types</span> <span class="o">=</span> <span class="n">supported_int_types</span> <span class="o">+</span> <span class="n">supported_float_types</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>                 <span class="n">num_generations</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>                 <span class="n">num_parents_mating</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>                 <span class="n">fitness_func</span><span class="p">,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>                 <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>                 <span class="n">initial_population</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>                 <span class="n">sol_per_pop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>                 <span class="n">num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>                 <span class="n">init_range_low</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>                 <span class="n">init_range_high</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>                 <span class="n">gene_type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>                 <span class="n">parent_selection_type</span><span class="o">=</span><span class="s2">&quot;sss&quot;</span><span class="p">,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>                 <span class="n">keep_parents</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a>                 <span class="n">keep_elitism</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>                 <span class="n">K_tournament</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>                 <span class="n">crossover_type</span><span class="o">=</span><span class="s2">&quot;single_point&quot;</span><span class="p">,</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>                 <span class="n">crossover_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>                 <span class="n">mutation_type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>                 <span class="n">mutation_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>                 <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>                 <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>                 <span class="n">mutation_num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>                 <span class="n">random_mutation_min_val</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>                 <span class="n">random_mutation_max_val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>                 <span class="n">gene_space</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>                 <span class="n">allow_duplicate_genes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>                 <span class="n">on_start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>                 <span class="n">on_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>                 <span class="n">on_parents</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>                 <span class="n">on_crossover</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>                 <span class="n">on_mutation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>                 <span class="n">callback_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>                 <span class="n">on_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>                 <span class="n">on_stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>                 <span class="n">delay_after_gen</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>                 <span class="n">save_best_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>                 <span class="n">save_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>                 <span class="n">suppress_warnings</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>                 <span class="n">stop_criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>                 <span class="n">ftol_abs</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>                 <span class="n">parallel_processing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>                 <span class="n">random_seed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">        The constructor of the GA class accepts all parameters required to create an instance of the GA class. It validates such parameters.</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">        num_generations: Number of generations.</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">        num_parents_mating: Number of solutions to be selected as parents in the mating pool.</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">        fitness_func: Accepts a function that must accept 2 parameters (a single solution and its index in the population) and return the fitness value of the solution. Available starting from PyGAD 1.0.17 until 1.0.20 with a single parameter representing the solution. Changed in PyGAD 2.0.0 and higher to include the second parameter representing the solution index.</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">        initial_population: A user-defined initial population. It is useful when the user wants to start the generations with a custom initial population. It defaults to None which means no initial population is specified by the user. In this case, PyGAD creates an initial population using the &#39;sol_per_pop&#39; and &#39;num_genes&#39; parameters. An exception is raised if the &#39;initial_population&#39; is None while any of the 2 parameters (&#39;sol_per_pop&#39; or &#39;num_genes&#39;) is also None.</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">        sol_per_pop: Number of solutions in the population.</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a><span class="sd">        num_genes: Number of parameters in the function.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">        init_range_low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">        init_range_high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">        # It is OK to set the value of any of the 2 parameters (&#39;init_range_low&#39; and &#39;init_range_high&#39;) to be equal, higher or lower than the other parameter (i.e. init_range_low is not needed to be lower than init_range_high).</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a><span class="sd">        gene_type: The type of the gene. It is assigned to any of these types (int, float, numpy.int, numpy.int8, numpy.int16, numpy.int32, numpy.int64, numpy.uint, numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64, numpy.float, numpy.float16, numpy.float32, numpy.float64) and forces all the genes to be of that type.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a><span class="sd">        parent_selection_type: Type of parent selection.</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">        keep_parents: If 0, this means no parent in the current population will be used in the next population. If -1, this means all parents in the current population will be used in the next population. If set to a value &gt; 0, then the specified value refers to the number of parents in the current population to be used in the next population. Some parent selection operators such as rank selection, favor population diversity and therefore keeping the parents in the next generation can be beneficial. However, some other parent selection operators, such as roulette wheel selection (RWS), have higher selection pressure and keeping more than one parent in the next generation can seriously harm population diversity. This parameter have an effect only when the keep_elitism parameter is 0. Thanks to Prof. Fernando Jiménez Barrionuevo (http://webs.um.es/fernan) for editing this sentence.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">        K_tournament: When the value of &#39;parent_selection_type&#39; is &#39;tournament&#39;, the &#39;K_tournament&#39; parameter specifies the number of solutions from which a parent is selected randomly.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">        keep_elitism: Added in PyGAD 2.18.0. It can take the value 0 or a positive integer that satisfies (0 &lt;= keep_elitism &lt;= sol_per_pop). It defaults to 1 which means only the best solution in the current generation is kept in the next generation. If assigned 0, this means it has no effect. If assigned a positive integer K, then the best K solutions are kept in the next generation. It cannot be assigned a value greater than the value assigned to the sol_per_pop parameter. If this parameter has a value different than 0, then the keep_parents parameter will have no effect.</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">        crossover_type: Type of the crossover opreator. If  crossover_type=None, then the crossover step is bypassed which means no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">        crossover_probability: The probability of selecting a solution for the crossover operation. If the solution probability is &lt;= crossover_probability, the solution is selected. The value must be between 0 and 1 inclusive.</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="sd">        mutation_type: Type of the mutation opreator. If mutation_type=None, then the mutation step is bypassed which means no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">        mutation_probability: The probability of selecting a gene for the mutation operation. If the gene probability is &lt;= mutation_probability, the gene is selected. It accepts either a single value for fixed mutation or a list/tuple/numpy.ndarray of 2 values for adaptive mutation. The values must be between 0 and 1 inclusive. If specified, then no need for the 2 parameters mutation_percent_genes and mutation_num_genes.</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a><span class="sd">        mutation_by_replacement: An optional bool parameter. It works only when the selected type of mutation is random (mutation_type=&quot;random&quot;). In this case, setting mutation_by_replacement=True means replace the gene by the randomly generated value. If False, then it has no effect and random mutation works by adding the random value to the gene.</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">        mutation_percent_genes: Percentage of genes to mutate which defaults to the string &#39;default&#39; which means 10%. This parameter has no action if any of the 2 parameters mutation_probability or mutation_num_genes exist.</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="sd">        mutation_num_genes: Number of genes to mutate which defaults to None. If the parameter mutation_num_genes exists, then no need for the parameter mutation_percent_genes. This parameter has no action if the mutation_probability parameter exists.</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="sd">        random_mutation_min_val: The minimum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to -1.0.</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">        random_mutation_max_val: The maximum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to 1.0.</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">        gene_space: It accepts a list of all possible values of the gene. This list is used in the mutation step. Should be used only if the gene space is a set of discrete values. No need for the 2 parameters (random_mutation_min_val and random_mutation_max_val) if the parameter gene_space exists. Added in PyGAD 2.5.0. In PyGAD 2.11.0, the gene_space can be assigned a dict.</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="sd">        on_start: Accepts a function to be called only once before the genetic algorithm starts its evolution. This function must accept a single parameter representing the instance of the genetic algorithm. Added in PyGAD 2.6.0.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">        on_fitness: Accepts a function to be called after calculating the fitness values of all solutions in the population. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of all solutions&#39; fitness values. Added in PyGAD 2.6.0.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        on_parents: Accepts a function to be called after selecting the parents that mates. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the selected parents. Added in PyGAD 2.6.0.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">        on_crossover: Accepts a function to be called each time the crossover operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring generated using crossover. Added in PyGAD 2.6.0.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        on_mutation: Accepts a function to be called each time the mutation operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring after applying the mutation. Added in PyGAD 2.6.0.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">        callback_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and should be replaced by the on_generation parameter.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">        on_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Added in PyGAD 2.6.0.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">        on_stop: Accepts a function to be called only once exactly before the genetic algorithm stops or when it completes all the generations. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of fitness values of the last population&#39;s solutions. Added in PyGAD 2.6.0.</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a><span class="sd">        delay_after_gen: Added in PyGAD 2.4.0. It accepts a non-negative number specifying the number of seconds to wait after a generation completes and before going to the next generation. It defaults to 0.0 which means no delay after the generation.</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">        save_best_solutions: Added in PyGAD 2.9.0 and its type is bool. If True, then the best solution in each generation is saved into the &#39;best_solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations or the number of genes is large.</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">        save_solutions: Added in PyGAD 2.15.0 and its type is bool. If True, then all solutions in each generation are saved into the &#39;solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="sd">        suppress_warnings: Added in PyGAD 2.10.0 and its type is bool. If True, then no warning messages will be displayed. It defaults to False.</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">        allow_duplicate_genes: Added in PyGAD 2.13.0. If True, then a solution/chromosome may have duplicate gene values. If False, then each gene will have a unique value in its solution.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">        stop_criteria: Added in PyGAD 2.15.0. It is assigned to some criteria to stop the evolution if at least one criterion holds.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a><span class="sd">        parallel_processing: Added in PyGAD 2.17.0. Defaults to `None` which means no parallel processing is used. If a positive integer is assigned, it specifies the number of threads to be used. If a list or a tuple of exactly 2 elements is assigned, then: 1) The first element can be either &quot;process&quot; or &quot;thread&quot; to specify whether processes or threads are used, respectively. 2) The second element can be: 1) A positive integer to select the maximum number of processes or threads to be used. 2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;. 3) None to use the default value as calculated by the concurrent.futures module.</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">        random_seed: Added in PyGAD 2.18.0. It defines the random seed to be used by the random function generators (we use random functions in the NumPy and random modules). This helps to reproduce the same results by setting the same random seed.</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span> <span class="o">=</span> <span class="n">random_seed</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>        <span class="k">if</span> <span class="n">random_seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>            <span class="k">pass</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>        <span class="c1"># If suppress_warnings is bool and its valud is False, then print warning messages.</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span> <span class="o">=</span> <span class="n">suppress_warnings</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>                <span class="s2">&quot;The expected type of the &#39;suppress_warnings&#39; parameter is bool but </span><span class="si">{suppress_warnings_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>                    <span class="n">suppress_warnings_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)))</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>        <span class="c1"># Validating mutation_by_replacement</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_by_replacement&#39; parameter is bool but (</span><span class="si">{mutation_by_replacement_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>                    <span class="n">mutation_by_replacement_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)))</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span> <span class="o">=</span> <span class="n">mutation_by_replacement</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>        <span class="c1"># Validate gene_space</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>            <span class="k">pass</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;gene_space&#39; cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="p">)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>                                <span class="s2">&quot;The element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39; with type </span><span class="si">{el_type}</span><span class="s2"> cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>                                    <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>                            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">el</span><span class="p">:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>                                        <span class="s2">&quot;All values in the sublists inside the &#39;gene_space&#39; attribute must be numeric of type int/float/None but (</span><span class="si">{val}</span><span class="s2">) of type </span><span class="si">{typ}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>                                            <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)))</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>                        <span class="k">pass</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>                        <span class="c1"># self.gene_space_nested = True</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>                                <span class="k">pass</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>                        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>                                <span class="k">pass</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                                <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                                    <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>                    <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>                            <span class="s2">&quot;Unexpected type </span><span class="si">{el_type}</span><span class="s2"> for the element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39;. The accepted types are list/tuple/range/numpy.ndarray of numbers, a single number (int/float), or None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>                                <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>                    <span class="k">pass</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>                    <span class="k">pass</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>                    <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>                        <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                <span class="s2">&quot;The expected type of &#39;gene_space&#39; is list, tuple, range, or numpy.ndarray but (</span><span class="si">{gene_space_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                    <span class="n">gene_space_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)))</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="o">=</span> <span class="n">gene_space</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="c1"># Validate init_range_low and init_range_high</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span> <span class="o">=</span> <span class="n">init_range_low</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span> <span class="o">=</span> <span class="n">init_range_high</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>                    <span class="s2">&quot;The value passed to the &#39;init_range_high&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_high_value}</span><span class="s2">) of type </span><span class="si">{init_range_high_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>                        <span class="n">init_range_high_value</span><span class="o">=</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">init_range_high_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)))</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>                <span class="s2">&quot;The value passed to the &#39;init_range_low&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_low_value}</span><span class="s2">) of type </span><span class="si">{init_range_low_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>                    <span class="n">init_range_low_value</span><span class="o">=</span><span class="n">init_range_low</span><span class="p">,</span> <span class="n">init_range_low_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)))</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="c1"># Validate random_mutation_min_val and random_mutation_max_val</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>                <span class="k">if</span> <span class="n">random_mutation_min_val</span> <span class="o">==</span> <span class="n">random_mutation_max_val</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>                        <span class="s2">&quot;The values of the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39; are equal and this causes a fixed change to all genes.&quot;</span><span class="p">)</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>                    <span class="s2">&quot;The expected type of the &#39;random_mutation_max_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_max_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>                        <span class="n">random_mutation_max_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)))</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>                <span class="s2">&quot;The expected type of the &#39;random_mutation_min_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_min_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>                    <span class="n">random_mutation_min_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)))</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span> <span class="o">=</span> <span class="n">random_mutation_min_val</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span> <span class="o">=</span> <span class="n">random_mutation_max_val</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="c1"># Validate gene_type</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="k">if</span> <span class="n">gene_type</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>        <span class="c1"># A single data type of float with precision.</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>                <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">or</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="n">num_genes</span><span class="p">:</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_type&#39; is nested, then it can be either [float, int&lt;precision&gt;] or with length equal to the value passed to the &#39;num_genes&#39; parameter. Instead, value </span><span class="si">{gene_type_val}</span><span class="s2"> with len(gene_type) (</span><span class="si">{len_gene_type}</span><span class="s2">) != len(num_genes) (</span><span class="si">{num_genes}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">len_gene_type</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="k">for</span> <span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_type</span><span class="p">):</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>                <span class="k">if</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>                    <span class="c1"># If the gene type is float and no precision is passed, set it to None.</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>                <span class="k">elif</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>                    <span class="c1"># A float type is expected in a list/tuple/numpy.ndarray of length 2.</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>                        <span class="k">if</span> <span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>                                <span class="k">pass</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>                                    <span class="s2">&quot;In the &#39;gene_type&#39; parameter, the precision for float gene data types must be an integer but the element </span><span class="si">{gene_type_val}</span><span class="s2"> at index </span><span class="si">{gene_type_idx}</span><span class="s2"> has a precision of </span><span class="si">{gene_type_precision_val}</span><span class="s2"> with type </span><span class="si">{gene_type_type}</span><span class="s2"> .&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>                                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_precision_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>                                        <span class="n">gene_type_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>                                <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is expected only for float gene data types but the element </span><span class="si">{gene_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">. Note that the data type must be at index 0 followed by precision at index 1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>                                    <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>                            <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is specified in a list/tuple/numpy.ndarray of length 2 but value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> with length </span><span class="si">{gene_type_length}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>                                <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                                <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)))</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>                        <span class="s2">&quot;When a list/tuple/numpy.ndarray is assigned to the &#39;gene_type&#39; parameter, then its elements must be of integer, floating-point, list, tuple, or numpy.ndarray data types but the value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>                            <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>                            <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>                <span class="s2">&quot;The value passed to the &#39;gene_type&#39; parameter must be either a single integer, floating-point, list, tuple, or numpy.ndarray but (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>                    <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)))</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="c1"># Build the initial population</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>        <span class="k">if</span> <span class="n">initial_population</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">sol_per_pop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>                    <span class="s2">&quot;Error creating the initial population</span><span class="se">\n\n</span><span class="s2">When the parameter initial_population is None, then neither of the 2 parameters sol_per_pop and num_genes can be None at the same time.</span><span class="se">\n</span><span class="s2">There are 2 options to prepare the initial population:</span><span class="se">\n</span><span class="s2">1) Create an initial population and assign it to the initial_population parameter. In this case, the values of the 2 parameters sol_per_pop and num_genes will be deduced.</span><span class="se">\n</span><span class="s2">2) Allow the genetic algorithm to create the initial population automatically by passing valid integer values to the sol_per_pop and num_genes parameters.&quot;</span><span class="p">)</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>                <span class="c1"># Validating the number of solutions in the population (sol_per_pop)</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>                <span class="k">if</span> <span class="n">sol_per_pop</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>                        <span class="s2">&quot;The number of solutions in the population (sol_per_pop) must be &gt; 0 but (</span><span class="si">{sol_per_pop}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>                            <span class="n">sol_per_pop</span><span class="o">=</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>                <span class="c1"># Validating the number of gene.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>                        <span class="s2">&quot;The number of genes cannot be &lt;= 0 but (</span><span class="si">{num_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>                <span class="c1"># When initial_population=None and the 2 parameters sol_per_pop and num_genes have valid integer values, then the initial population is created.</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>                <span class="c1"># Inside the initialize_population() method, the initial_population attribute is assigned to keep the initial population accessible.</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="n">num_genes</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>                <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>                            <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>                                <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="n">sol_per_pop</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>                                           <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>                    <span class="s2">&quot;The expected type of both the sol_per_pop and num_genes parameters is int but (</span><span class="si">{sol_per_pop_type}</span><span class="s2">) and </span><span class="si">{num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>                        <span class="n">sol_per_pop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">),</span> <span class="n">num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)))</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>        <span class="k">elif</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>                <span class="s2">&quot;A 2D list is expected to the initail_population parameter but a (</span><span class="si">{initial_population_ndim}</span><span class="s2">-D) list found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>                    <span class="n">initial_population_ndim</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span><span class="p">))</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>            <span class="c1"># Forcing the initial_population array to have the data type assigned to the gene_type parameter.</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>                                                          <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>                <span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>                                                      <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>                                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>                            <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>                                          <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population size.</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        <span class="c1"># Round initial_population and population</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>        <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{len_num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>                        <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">len_num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>        <span class="c1"># Validating the number of parents to be selected for mating (num_parents_mating)</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>        <span class="k">if</span> <span class="n">num_parents_mating</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a>                <span class="s2">&quot;The number of parents mating (num_parents_mating) parameter must be &gt; 0 but (</span><span class="si">{num_parents_mating}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">))</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>        <span class="c1"># Validating the number of parents to be selected for mating: num_parents_mating</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">num_parents_mating</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>                <span class="s2">&quot;The number of parents to select for mating (</span><span class="si">{num_parents_mating}</span><span class="s2">) cannot be greater than the number of solutions in the population (</span><span class="si">{sol_per_pop}</span><span class="s2">) (i.e., num_parents_mating must always be &lt;= sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="o">=</span> <span class="n">num_parents_mating</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>        <span class="c1"># crossover: Refers to the method that applies the crossover operator based on the selected type of crossover in the crossover_type property.</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>        <span class="c1"># Validating the crossover type: crossover_type</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>            <span class="c1"># Check if the crossover_type is a function that accepts 2 paramaters.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>                <span class="c1"># The crossover function assigned to the crossover_type parameter is validated.</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>                    <span class="s2">&quot;When &#39;crossover_type&#39; is assigned to a function, then this crossover function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The selected parents.</span><span class="se">\n</span><span class="s2">2) The size of the offspring to be produced.3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed crossover function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>                <span class="s2">&quot;The expected type of the &#39;crossover_type&#39; parameter is either callable or str but (</span><span class="si">{crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>                    <span class="n">crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)))</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type crossover_type is str</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>            <span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;single_point&quot;</span><span class="p">):</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">single_point_crossover</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;two_points&quot;</span><span class="p">):</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">two_points_crossover</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">):</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uniform_crossover</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;scattered&quot;</span><span class="p">):</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scattered_crossover</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>                    <span class="s2">&quot;Undefined crossover type. </span><span class="se">\n</span><span class="s2">The assigned value to the crossover_type (</span><span class="si">{crossover_type}</span><span class="s2">) parameter does not refer to one of the supported crossover types which are: </span><span class="se">\n</span><span class="s2">-single_point (for single point crossover)</span><span class="se">\n</span><span class="s2">-two_points (for two points crossover)</span><span class="se">\n</span><span class="s2">-uniform (for uniform crossover)</span><span class="se">\n</span><span class="s2">-scattered (for scattered crossover).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>                        <span class="n">crossover_type</span><span class="o">=</span><span class="n">crossover_type</span><span class="p">))</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>        <span class="c1"># Calculate the value of crossover_probability</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>        <span class="k">if</span> <span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>            <span class="k">if</span> <span class="n">crossover_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">crossover_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="n">crossover_probability</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>                    <span class="s2">&quot;The value assigned to the &#39;crossover_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>                        <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">))</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>                <span class="s2">&quot;Unexpected type for the &#39;crossover_probability&#39; parameter. Float is expected but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) of type </span><span class="si">{crossover_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>                    <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">,</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>                    <span class="n">crossover_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)))</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>        <span class="c1"># mutation: Refers to the method that applies the mutation operator based on the selected type of mutation in the mutation_type property.</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>        <span class="c1"># Validating the mutation type: mutation_type</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>        <span class="c1"># &quot;adaptive&quot; mutation is supported starting from PyGAD 2.10.0</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>        <span class="k">if</span> <span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>            <span class="c1"># Check if the mutation_type is a function that accepts 1 paramater.</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>                <span class="c1"># The mutation function assigned to the mutation_type parameter is validated.</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>                    <span class="s2">&quot;When &#39;mutation_type&#39; is assigned to a function, then this mutation function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The offspring to be mutated.</span><span class="se">\n</span><span class="s2">2) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed mutation function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_type&#39; parameter is either callable or str but (</span><span class="si">{mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>                    <span class="n">mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)))</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type mutation_type is str</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>            <span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;swap&quot;</span><span class="p">):</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">swap_mutation</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;scramble&quot;</span><span class="p">):</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scramble_mutation</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;inversion&quot;</span><span class="p">):</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inversion_mutation</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>                    <span class="s2">&quot;Undefined mutation type. </span><span class="se">\n</span><span class="s2">The assigned string value to the &#39;mutation_type&#39; parameter (</span><span class="si">{mutation_type}</span><span class="s2">) does not refer to one of the supported mutation types which are: </span><span class="se">\n</span><span class="s2">-random (for random mutation)</span><span class="se">\n</span><span class="s2">-swap (for swap mutation)</span><span class="se">\n</span><span class="s2">-inversion (for inversion mutation)</span><span class="se">\n</span><span class="s2">-scramble (for scramble mutation)</span><span class="se">\n</span><span class="s2">-adaptive (for adaptive mutation).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>                        <span class="n">mutation_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>        <span class="c1"># Calculate the value of mutation_probability</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>            <span class="k">if</span> <span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>                <span class="c1"># Mutation probability is fixed not adaptive.</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>                    <span class="k">if</span> <span class="n">mutation_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">mutation_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>                            <span class="s2">&quot;The value assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>                                <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">))</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>                <span class="c1"># Mutation probability is adaptive not fixed.</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>                                <span class="k">if</span> <span class="n">el</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>                                    <span class="k">pass</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>                                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>                                        <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>                        <span class="k">if</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_probability&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_probability&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_probability_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>                                <span class="n">mutation_probability_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>            <span class="k">pass</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>        <span class="c1"># Calculate the value of mutation_num_genes</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>                <span class="c1"># The mutation_num_genes parameter does not exist. Checking whether adaptive mutation is used.</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>                    <span class="c1"># The percent of genes to mutate is fixed not adaptive.</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>                    <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>                        <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>                        <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                        <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>                        <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>                                    <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>                                        <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="n">mutation_percent_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mutation_percent_genes</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>                                <span class="s2">&quot;The percentage of selected genes for mutation (mutation_percent_genes) must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>                                    <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>                            <span class="c1"># If mutation_percent_genes equals the string &quot;default&quot;, then it is replaced by the numeric value 10.</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>                                <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>                            <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>                            <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>                            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>                                <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>                            <span class="s2">&quot;Unexpected value or type of the &#39;mutation_percent_genes&#39; parameter. It only accepts the string &#39;default&#39; or a numeric value but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>                                <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>                                <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>                    <span class="c1"># The percent of genes to mutate is adaptive not fixed.</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">):</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>                                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>                                    <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">el</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>                                            <span class="s2">&quot;The values assigned to the &#39;mutation_percent_genes&#39; must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>                                                <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                                        <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_percent_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                                            <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                                <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_percent_genes&#39; is validated.</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                                <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                                <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">(</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>                                    <span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>                                <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                                <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>                                            <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]))</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>                                    <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>                                    <span class="s2">&quot;The first element in the &#39;mutation_percent_genes&#39; parameter is (</span><span class="si">{first_el}</span><span class="s2">) which is smaller than the second element (</span><span class="si">{second_el}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions.</span><span class="se">\n</span><span class="s2">Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>                                        <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>                            <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_percent_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>                                <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_percent_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>                                    <span class="n">mutation_percent_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>                                <span class="s2">&quot;Unexpected type for the &#39;mutation_percent_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter should exist and assigned a list/tuple/numpy.ndarray with 2 values but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>                                    <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>            <span class="c1"># The mutation_num_genes parameter exists. Checking whether adaptive mutation is used.</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>                <span class="c1"># Number of genes to mutate is fixed not adaptive.</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes) cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>                    <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes), which is (</span><span class="si">{mutation_num_genes}</span><span class="s2">), cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>                        <span class="s2">&quot;The &#39;mutation_num_genes&#39; parameter is expected to be a positive integer but the value (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>                <span class="c1"># Number of genes to mutate is adaptive not fixed.</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_num_genes</span><span class="p">:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>                                <span class="k">elif</span> <span class="p">(</span><span class="n">el</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">) but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_num_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>                                        <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>                            <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_num_genes&#39; is validated.</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_num_genes&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>                        <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_num_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_num_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_num_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>                                <span class="n">mutation_num_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_num_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>            <span class="k">pass</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>        <span class="c1"># Validating mutation_by_replacement and mutation_type</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;random&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>                <span class="s2">&quot;The mutation_by_replacement parameter is set to True while the mutation_type parameter is not set to random but (</span><span class="si">{mut_type}</span><span class="s2">). Note that the mutation_by_replacement parameter has an effect only when mutation_type=&#39;random&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>                    <span class="n">mut_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>        <span class="c1"># Check if crossover and mutation are both disabled.</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>                <span class="s2">&quot;The 2 parameters mutation_type and crossover_type are None. This disables any type of evolution the genetic algorithm can make. As a result, the genetic algorithm cannot find a better solution that the best solution in the initial population.&quot;</span><span class="p">)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>        <span class="c1"># select_parents: Refers to a method that selects the parents based on the parent selection type specified in the parent_selection_type attribute.</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>        <span class="c1"># Validating the selected type of parent selection: parent_selection_type</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>            <span class="c1"># Check if the parent_selection_type is a function that accepts 3 paramaters.</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>                <span class="c1"># population: Added in PyGAD 2.16.0. It should used only to support custom parent selection functions. Otherwise, it should be left to None to retirve the population by self.population.</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>                <span class="c1"># The parent selection function assigned to the parent_selection_type parameter is validated.</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>                    <span class="s2">&quot;When &#39;parent_selection_type&#39; is assigned to a user-defined function, then this parent selection function must accept 3 parameters:</span><span class="se">\n</span><span class="s2">1) The fitness values of the current population.</span><span class="se">\n</span><span class="s2">2) The number of parents needed.</span><span class="se">\n</span><span class="s2">3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed parent selection function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>                        <span class="n">argcount</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>                <span class="s2">&quot;The expected type of the &#39;parent_selection_type&#39; parameter is either callable or str but (</span><span class="si">{parent_selection_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>                    <span class="n">parent_selection_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)))</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>            <span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span><span class="p">):</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rws&quot;</span><span class="p">):</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roulette_wheel_selection</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sus&quot;</span><span class="p">):</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_universal_selection</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_selection</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tournament_selection</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rank&quot;</span><span class="p">):</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_selection</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>                    <span class="s2">&quot;Undefined parent selection type: </span><span class="si">{parent_selection_type}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the &#39;parent_selection_type&#39; parameter does not refer to one of the supported parent selection techniques which are: </span><span class="se">\n</span><span class="s2">-sss (for steady state selection)</span><span class="se">\n</span><span class="s2">-rws (for roulette wheel selection)</span><span class="se">\n</span><span class="s2">-sus (for stochastic universal selection)</span><span class="se">\n</span><span class="s2">-rank (for rank selection)</span><span class="se">\n</span><span class="s2">-random (for random selection)</span><span class="se">\n</span><span class="s2">-tournament (for tournament selection).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>                        <span class="n">parent_selection_type</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="p">))</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="c1"># For tournament selection, validate the K value.</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>                <span class="n">K_tournament</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>                    <span class="s2">&quot;K of the tournament selection (</span><span class="si">{K_tournament}</span><span class="s2">) should not be greater than the number of solutions within the population (</span><span class="si">{sol_per_pop}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">K will be clipped to be equal to the number of solutions in the population (sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>                        <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;K of the tournament selection cannot be &lt;=0 but (</span><span class="si">{K_tournament}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>                    <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">))</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span> <span class="o">=</span> <span class="n">K_tournament</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>        <span class="c1"># Validating the number of parents to keep in the next population: keep_parents</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_parents parameter. The value </span><span class="si">{keep_parents}</span><span class="s2"> of type </span><span class="si">{keep_parents_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">,</span> <span class="n">keep_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)))</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>                <span class="s2">&quot;Incorrect value to the keep_parents parameter: </span><span class="si">{keep_parents}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_parent parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Less than or equal to num_parents_mating</span><span class="se">\n</span><span class="s2">3) Greater than or equal to -1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">))</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">=</span> <span class="n">keep_parents</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>        <span class="k">if</span> <span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>                <span class="s2">&quot;The steady-state parent (sss) selection operator is used despite that no parents are kept in the next generation.&quot;</span><span class="p">)</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>        <span class="c1"># Validating the number of elitism to keep in the next population: keep_elitism</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_elitism parameter. The value </span><span class="si">{keep_elitism}</span><span class="s2"> of type </span><span class="si">{keep_elitism_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">,</span> <span class="n">keep_elitism_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)))</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_elitism</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_elitism</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>                <span class="s2">&quot;Incorrect value to the keep_elitism parameter: </span><span class="si">{keep_elitism}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_elitism parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Greater than or equal to 0.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">))</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">=</span> <span class="n">keep_elitism</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="c1"># Validate keep_parents.</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># Keep all parents in the next population.</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep no parents in the next population.</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep the specified number of parents in the next population.</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>        <span class="c1"># Check if the fitness_func is a function.</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">):</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>            <span class="c1"># Check if the fitness function accepts 2 paramaters.</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span> <span class="o">=</span> <span class="n">fitness_func</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>                    <span class="s2">&quot;The fitness function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) A solution to calculate its fitness value.</span><span class="se">\n</span><span class="s2">2) The solution&#39;s index within the population.</span><span class="se">\n\n</span><span class="s2">The passed fitness function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>                <span class="s2">&quot;The value assigned to the fitness_func parameter is expected to be of type function but (</span><span class="si">{fitness_func_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>                    <span class="n">fitness_func_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">)))</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>        <span class="c1"># Check if the on_start exists.</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>            <span class="c1"># Check if the on_start is a function.</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_start</span><span class="p">):</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>                <span class="c1"># Check if the on_start function accepts only a single paramater.</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="n">on_start</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>                        <span class="s2">&quot;The function assigned to the on_start parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>                    <span class="s2">&quot;The value assigned to the on_start parameter is expected to be of type function but (</span><span class="si">{on_start_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>                        <span class="n">on_start_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_start</span><span class="p">)))</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="c1"># Check if the on_fitness exists.</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>            <span class="c1"># Check if the on_fitness is a function.</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">):</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>                <span class="c1"># Check if the on_fitness function accepts 2 paramaters.</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="n">on_fitness</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>                        <span class="s2">&quot;The function assigned to the on_fitness parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>                    <span class="s2">&quot;The value assigned to the on_fitness parameter is expected to be of type function but (</span><span class="si">{on_fitness_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>                        <span class="n">on_fitness_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">)))</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="c1"># Check if the on_parents exists.</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>            <span class="c1"># Check if the on_parents is a function.</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_parents</span><span class="p">):</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>                <span class="c1"># Check if the on_parents function accepts 2 paramaters.</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="n">on_parents</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>                        <span class="s2">&quot;The function assigned to the on_parents parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>                    <span class="s2">&quot;The value assigned to the on_parents parameter is expected to be of type function but (</span><span class="si">{on_parents_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>                        <span class="n">on_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_parents</span><span class="p">)))</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>        <span class="c1"># Check if the on_crossover exists.</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>            <span class="c1"># Check if the on_crossover is a function.</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">):</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>                <span class="c1"># Check if the on_crossover function accepts 2 paramaters.</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="n">on_crossover</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>                        <span class="s2">&quot;The function assigned to the on_crossover parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring generated using crossover.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                    <span class="s2">&quot;The value assigned to the on_crossover parameter is expected to be of type function but (</span><span class="si">{on_crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                        <span class="n">on_crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">)))</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="c1"># Check if the on_mutation exists.</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>            <span class="c1"># Check if the on_mutation is a function.</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">):</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>                <span class="c1"># Check if the on_mutation function accepts 2 paramaters.</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="n">on_mutation</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>                        <span class="s2">&quot;The function assigned to the on_mutation parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring after applying the mutation operation.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>                    <span class="s2">&quot;The value assigned to the on_mutation parameter is expected to be of type function but (</span><span class="si">{on_mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>                        <span class="n">on_mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">)))</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>        <span class="c1"># Check if the callback_generation exists.</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">callback_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>            <span class="c1"># Check if the callback_generation is a function.</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">):</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>                <span class="c1"># Check if the callback_generation function accepts only a single paramater.</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>                    <span class="n">on_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>                        <span class="s2">&quot;Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and will be removed in a later release of PyGAD. Please use the on_generation parameter instead.&quot;</span><span class="p">)</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>                        <span class="s2">&quot;The function assigned to the callback_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>                            <span class="n">argcount</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>                    <span class="s2">&quot;The value assigned to the callback_generation parameter is expected to be of type function but (</span><span class="si">{callback_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>                        <span class="n">callback_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">)))</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>        <span class="c1"># Check if the on_generation exists.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>            <span class="c1"># Check if the on_generation is a function.</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_generation</span><span class="p">):</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>                <span class="c1"># Check if the on_generation function accepts only a single paramater.</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="n">on_generation</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>                        <span class="s2">&quot;The function assigned to the on_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>                    <span class="s2">&quot;The value assigned to the on_generation parameter is expected to be of type function but (</span><span class="si">{on_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>                        <span class="n">on_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_generation</span><span class="p">)))</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>        <span class="c1"># Check if the on_stop exists.</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="c1"># Check if the on_stop is a function.</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_stop</span><span class="p">):</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                <span class="c1"># Check if the on_stop function accepts 2 paramaters.</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="n">on_stop</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>                        <span class="s2">&quot;The function assigned to the on_stop parameter must accept 2 parameters representing the instance of the genetic algorithm and a list of the fitness values of the solutions in the last population.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>                    <span class="s2">&quot;The value assigned to the &#39;on_stop&#39; parameter is expected to be of type function but (</span><span class="si">{on_stop_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>                        <span class="n">on_stop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_stop</span><span class="p">)))</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>        <span class="c1"># Validate delay_after_gen</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>            <span class="k">if</span> <span class="n">delay_after_gen</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span> <span class="o">=</span> <span class="n">delay_after_gen</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>                    <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be a non-negative number. The value passed is </span><span class="si">{delay_after_gen}</span><span class="s2"> of type </span><span class="si">{delay_after_gen_type}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>                        <span class="n">delay_after_gen</span><span class="o">=</span><span class="n">delay_after_gen</span><span class="p">,</span> <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>                <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be of type int or float but (</span><span class="si">{delay_after_gen_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>                    <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>        <span class="c1"># Validate save_best_solutions</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>            <span class="k">if</span> <span class="n">save_best_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                    <span class="s2">&quot;Use the &#39;save_best_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations or number of genes is large.&quot;</span><span class="p">)</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>                <span class="s2">&quot;The value passed to the &#39;save_best_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_best_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>                    <span class="n">save_best_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)))</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>        <span class="c1"># Validate save_solutions</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="k">if</span> <span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>                    <span class="s2">&quot;Use the &#39;save_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.&quot;</span><span class="p">)</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>                <span class="s2">&quot;The value passed to the &#39;save_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>                    <span class="n">save_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)))</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="c1"># Validate allow_duplicate_genes</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>                <span class="s2">&quot;The expected type of the &#39;allow_duplicate_genes&#39; parameter is bool but (</span><span class="si">{allow_duplicate_genes_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>                    <span class="n">allow_duplicate_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)))</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">=</span> <span class="n">allow_duplicate_genes</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;reach&quot;</span><span class="p">,</span> <span class="s2">&quot;saturate&quot;</span><span class="p">]</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>            <span class="c1"># None: Stop after passing through all generations.</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>            <span class="c1"># reach_{target_fitness}: Stop if the target fitness value is reached.</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>            <span class="c1"># saturate_{num_generations}: Stop if the fitness value does not change (saturates) for the given number of generations.</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>            <span class="n">criterion</span> <span class="o">=</span> <span class="n">stop_criteria</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>                <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>                <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>                    <span class="k">pass</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a>                        <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are &#39;</span><span class="si">{supported_stop_words}</span><span class="s2">&#39; but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a>                            <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>                <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>                    <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>                        <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>                            <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>                    <span class="s2">&quot;For format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but &#39;</span><span class="si">{stop_criteria}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>                        <span class="n">stop_criteria</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>            <span class="c1"># Remove duplicate criterira by converting the list to a set then back to a list.</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>            <span class="n">stop_criteria</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">):</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>                        <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>                        <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>                        <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>                            <span class="k">pass</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>                                <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are </span><span class="si">{supported_stop_words}</span><span class="s2"> but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>                                    <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>                        <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>                            <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                                <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>                                    <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>                            <span class="s2">&quot;The format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but </span><span class="si">{stop_criteria}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>                                <span class="n">stop_criteria</span><span class="o">=</span><span class="n">criterion</span><span class="p">))</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>                        <span class="s2">&quot;When the &#39;stop_criteria&#39; parameter is assigned a tuple/list/numpy.ndarray, then its elements must be strings but the value &#39;</span><span class="si">{stop_criteria_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_criteria_val_type}</span><span class="s2"> found at index </span><span class="si">{stop_criteria_val_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>                            <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">stop_criteria_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">stop_criteria_val_idx</span><span class="o">=</span><span class="n">idx</span><span class="p">))</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>                <span class="s2">&quot;The expected value of the &#39;stop_criteria&#39; is a single string or a list/tuple/numpy.ndarray of strings but the value </span><span class="si">{stop_criteria_val}</span><span class="s2"> of type </span><span class="si">{stop_criteria_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>                    <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">,</span> <span class="n">stop_criteria_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)))</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>        <span class="k">if</span> <span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>            <span class="k">if</span> <span class="n">parallel_processing</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thread&quot;</span><span class="p">,</span> <span class="n">parallel_processing</span><span class="p">]</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>                    <span class="s2">&quot;When the &#39;parallel_processing&#39; parameter is assigned an integer, then the integer must be positive but the value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                        <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">))</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">]:</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>                    <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;thread&quot;</span><span class="p">]:</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">and</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>                                <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>                            <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>                                <span class="c1"># If the number of processes/threads is 0, this means no parallel processing is used. It is equivelant to setting parallel_processing=None.</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>                                <span class="c1"># Whether the second value is None or a positive integer.</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="n">parallel_processing</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>                                <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the second element must be an integer but the value (</span><span class="si">{second_value}</span><span class="s2">) of type (</span><span class="si">{second_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>                                    <span class="n">second_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                                    <span class="n">second_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>                            <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the value of the first element must be either &#39;process&#39; or &#39;thread&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>                                <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>                        <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the first element must be of type &#39;str&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) of type (</span><span class="si">{first_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>                            <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">first_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>                    <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then it must have 2 elements but (</span><span class="si">{num_elements}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>                        <span class="n">num_elements</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>                <span class="s2">&quot;Unexpected value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) of type (</span><span class="si">{parallel_processing_type}</span><span class="s2">) assigned to the &#39;parallel_processing&#39; parameter. The accepted values for this parameter are:</span><span class="se">\n</span><span class="s2">1) None: (Default) It means no parallel processing is used.</span><span class="se">\n</span><span class="s2">2) A positive integer referring to the number of threads to be used (i.e. threads, not processes, are used.</span><span class="se">\n</span><span class="s2">3) list/tuple: If a list or a tuple of exactly 2 elements is assigned, then:</span><span class="se">\n\t</span><span class="s2">*1) The first element can be either &#39;process&#39; or &#39;thread&#39; to specify whether processes or threads are used, respectively.</span><span class="se">\n\t</span><span class="s2">*2) The second element can be:</span><span class="se">\n\t\t</span><span class="s2">**1) A positive integer to select the maximum number of processes or threads to be used.</span><span class="se">\n\t\t</span><span class="s2">**2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;.</span><span class="se">\n\t\t</span><span class="s2">**3) None to use the default value as calculated by the concurrent.futures module.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>                    <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">,</span> <span class="n">parallel_processing_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>        <span class="c1"># Set the `run_completed` property to False. It is set to `True` only after the `run()` method is complete.</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>        <span class="c1"># The number of completed generations.</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>        <span class="c1"># At this point, all necessary parameters validation is done successfully and we are sure that the parameters are valid.</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True when all the parameters passed in the GA class constructor are valid.</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>        <span class="c1"># Parameters of the genetic algorithm.</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num_generations</span><span class="p">)</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>        <span class="c1"># Parameters of the mutation operation.</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="n">mutation_percent_genes</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">mutation_num_genes</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>        <span class="c1"># Even such this parameter is declared in the class header, it is assigned to the object here to access it after saving the object.</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># A list holding the fitness value of the best solution for each generation.</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># The generation number at which the best fitness value is reached. It is only assigned the generation number after the `run()` method completes. Otherwise, its value is -1.</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span> <span class="o">=</span> <span class="n">save_best_solutions</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the best solution in each generation.</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">=</span> <span class="n">save_solutions</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the solutions in each generation.</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the fitness of the solutions in each generation.</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the fitness values of all solutions in the last generation.</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the parents of the last generation.</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying crossover in the last generation.</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying mutation in the last generation.</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Holds the fitness values of one generation before the fitness values saved in the last_generation_fitness attribute. Added in PyGAD 2.26.2</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Added in PyGAD 2.18.0. A NumPy array holding the elitism in the current generation according to the value passed in the keep_elitism parameter.</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>    <span class="k">def</span> <span class="nf">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">):</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>        <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span><span class="p">:</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>                                                                       <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>        <span class="k">return</span> <span class="n">solutions</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>    <span class="k">def</span> <span class="nf">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">):</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a><span class="sd">        Creates an initial population randomly as a NumPy array. The array is saved in the instance attribute named &#39;population&#39;.</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a><span class="sd">        low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a><span class="sd">        high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="sd">        This method assigns the values of the following 3 instance attributes:</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a><span class="sd">            1. pop_size: Size of the population.</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="sd">            2. population: Initially, holds the initial population and later updated after each generation.</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a><span class="sd">            3. init_population: Keeping the initial population.</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>        <span class="c1"># Population size = (number of chromosomes, number of genes per chromosome)</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population will have sol_per_pop chromosome where each chromosome has num_genes genes.</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>            <span class="c1"># Creating the initial population randomly.</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>                                                    <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>                <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>                <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>                    <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>                    <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>                    <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>                <span class="k">for</span> <span class="n">solution_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>                    <span class="c1"># print(&quot;Before&quot;, self.population[solution_idx])</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>                    <span class="c1"># print(&quot;After&quot;, self.population[solution_idx])</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">range</span><span class="p">:</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>                            <span class="c1"># The following commented code replace the None value with a single number that will not change again.</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>                            <span class="c1"># This means the gene value will be the same across all solutions.</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>                            <span class="c1">#                high=high,</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>                            <span class="c1">#                size=1), dtype=self.gene_type[0])[0]</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>                            <span class="c1"># The above problem is solved by keeping the None value in the gene_space parameter. This forces PyGAD to generate this value for each solution.</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>                                                                                                    <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>                                                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a>                                                                               <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>                            <span class="c1">#                                                                high=high,</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>                            <span class="c1">#                                                                size=1),</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a>                            <span class="c1">#                                           dtype=self.gene_type[gene_idx][0])[0]</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>                                                                      <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>                                                                      <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>                                                 <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>                                                                                  <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>                                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>                    <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a>                                                                                         <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>                                                                                         <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>                                                                            <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>                                                            <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>                                                        <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>                <span class="k">for</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>                                                                                       <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>                                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>                                                                  <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>                                                                 <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>                                                                 <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>                        <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>                        <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>        <span class="c1"># Keeping the initial population in the initial_population attribute.</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>    <span class="k">def</span> <span class="nf">cal_pop_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a><span class="sd">        Calculating the fitness values of all solutions in the current population.</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a><span class="sd">        It returns:</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a><span class="sd">            -fitness: An array of the calculated fitness values.</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>                <span class="s2">&quot;ERROR calling the cal_pop_fitness() method: </span><span class="se">\n</span><span class="s2">Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;undefined&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>                        <span class="k">pass</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>                            <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>                                <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>                <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>            <span class="c1"># Decide which class to use based on whether the user selected &quot;process&quot; or &quot;thread&quot;</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>            <span class="c1"># if self.parallel_processing[0] == &quot;process&quot;:</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ProcessPoolExecutor</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>            <span class="c1"># else:</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ThreadPoolExecutor</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>            <span class="c1"># with multiprocessing.Pool(self.parallel_processing[1]) as pool:</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>            <span class="n">solutions_to_submit_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>            <span class="n">solutions_to_submit</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>                <span class="c1"># The &quot;undefined&quot; value means that the fitness of this solution must be calculated.</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>                <span class="k">if</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">:</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>                    <span class="n">solutions_to_submit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>                    <span class="n">solutions_to_submit_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol_idx</span><span class="p">)</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>            <span class="n">worker</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">fitness</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>                    <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">starmap</span><span class="p">(</span><span class="n">worker</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>                        <span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>                            <span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span><span class="p">)))</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>                                   <span class="p">)):</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>                        <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>                            <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">)</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>        <span class="k">return</span> <span class="n">pop_fitness</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a><span class="sd">        Runs the genetic algorithm. This is the main method in which the genetic algorithm is evolved through a number of generations.</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>                <span class="s2">&quot;Error calling the run() method: </span><span class="se">\n</span><span class="s2">The run() method cannot be executed with invalid parameters. Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>        <span class="c1"># Starting from PyGAD 2.18.0, the 4 properties (best_solutions, best_solutions_fitness, solutions, and solutions_fitness) are no longer reset with each call to the run() method. Instead, they are extended.</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>        <span class="c1"># For example, if there are 50 generations and the user set save_best_solutions=True, then the length of the 2 properties best_solutions and best_solutions_fitness will be 50 after the first call to the run() method, then 100 after the second call, 150 after the third, and so on.</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>        <span class="c1"># self.best_solutions: Holds the best solution in each generation.</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>        <span class="c1"># self.best_solutions_fitness: A list holding the fitness value of the best solution for each generation.</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>        <span class="c1"># self.solutions: Holds the solutions in each generation.</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>        <span class="c1"># self.solutions_fitness: Holds the fitness of the solutions in each generation.</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>        <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>        <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>        <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a>            <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>        <span class="c1"># Appending the best solution in the initial population to the best_solutions list.</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>        <span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span><span class="p">):</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a>            <span class="c1"># Appending the fitness value of the best solution in the current generation to the best_solutions_fitness attribute.</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>            <span class="c1"># Appending the solutions in the current generation to the solutions list.</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>                <span class="c1"># self.solutions.extend(self.population.copy())</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a>            <span class="c1"># Selecting the best parents in the population for mating.</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">)</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">)</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a>            <span class="c1"># If self.crossover_type=None, then no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a>                    <span class="n">num_parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="n">num_parents_to_keep</span><span class="p">:</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>                    <span class="c1"># The steady_state_selection() method is called to select the best solutions (i.e. elitism). The keep_elitism parameter defines the number of these solutions.</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a>                    <span class="c1"># The steady_state_selection() method is still called here even if its output may not be used given that the condition of the next if statement is True. The reason is that it will be used later.</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a>                                                                                  <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">:</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a>                <span class="c1"># Generating offspring using crossover.</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a>                                                                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a>                                                                              <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>                                                                              <span class="n">offspring_size</span><span class="o">=</span><span class="p">(</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>                                                                              <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>            <span class="c1"># If self.mutation_type=None, then no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>                <span class="c1"># Adding some variations to the offspring using mutation.</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">,</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>                                                                            <span class="bp">self</span><span class="p">)</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span><span class="p">)</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>            <span class="c1"># Update the population attribute according to the offspring generated.</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a>                <span class="c1"># If the keep_elitism parameter is 0, then the keep_parents parameter will be used to decide if the parents are kept in the next generation.</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a>                    <span class="c1"># Creating the new population based on the parents and offspring.</span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a>                    <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a>                                                                     <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a>                                                                              <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="n">generation</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># The generations_completed attribute holds the number of the last completed generation.</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>            <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>            <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>                <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>            <span class="c1"># Appending the best solution in the current generation to the best_solutions list.</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>            <span class="c1"># If the callback_generation attribute is not None, then cal the callback function after the generation.</span>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a>                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a>                    <span class="c1"># Before aborting the loop, save the fitness value of the best solution.</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>                    <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a>                    <span class="k">break</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a>                <span class="k">for</span> <span class="n">criterion</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="p">:</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a>                    <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;reach&quot;</span><span class="p">:</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>                        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>                            <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a>                            <span class="k">break</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a>                    <span class="k">elif</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;saturate&quot;</span><span class="p">:</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>                        <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="o">&lt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>                                <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>                                <span class="k">break</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>            <span class="k">if</span> <span class="n">stop_run</span><span class="p">:</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>                <span class="k">break</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span><span class="p">)</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a>        <span class="c1"># Save the fitness of the last generation.</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>        <span class="c1"># Save the fitness value of the best solution.</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> \
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)))[</span><span class="mi">0</span><span class="p">][</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>            <span class="mi">0</span><span class="p">]</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>        <span class="c1"># After the run() method completes, the run_completed flag is changed from False to True.</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True only after the run() method completes gracefully.</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>        <span class="c1"># Converting the &#39;best_solutions&#39; list into a NumPy array.</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>        <span class="c1"># Converting the &#39;solutions&#39; list into a NumPy array.</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>        <span class="c1"># self.solutions = numpy.array(self.solutions)</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>    <span class="k">def</span> <span class="nf">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a><span class="sd">        Selects the parents using the steady-state selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a>    <span class="k">def</span> <span class="nf">rank_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a><span class="sd">        Selects the parents using the rank selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>    <span class="k">def</span> <span class="nf">random_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a><span class="sd">        Selects the parents randomly. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>        <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">num_parents</span><span class="p">)</span>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">rand_indices</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a>    <span class="k">def</span> <span class="nf">tournament_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a><span class="sd">        Selects the parents using the tournament selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>            <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span><span class="p">)</span>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>            <span class="n">K_fitnesses</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">]</span>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a>            <span class="n">selected_parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">K_fitnesses</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">K_fitnesses</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>            <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">])</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>    <span class="k">def</span> <span class="nf">roulette_wheel_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a><span class="sd">        Selects the parents using the roulette wheel selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>            <span class="n">rand_prob</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_prob</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_prob</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>                    <span class="k">break</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>    <span class="k">def</span> <span class="nf">stochastic_universal_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a><span class="sd">        Selects the parents using the stochastic universal selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a>        <span class="n">pointers_distance</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>  <span class="c1"># Distance between different pointers.</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a>        <span class="n">first_pointer</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">pointers_distance</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Location of the first pointer.</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>            <span class="n">rand_pointer</span> <span class="o">=</span> <span class="n">first_pointer</span> <span class="o">+</span> <span class="n">parent_num</span> <span class="o">*</span> <span class="n">pointers_distance</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_pointer</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_pointer</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a>                    <span class="k">break</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a>    <span class="k">def</span> <span class="nf">single_point_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a><span class="sd">        Applies the single-point crossover. It selects a point randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a>            <span class="c1"># The point at which crossover takes place between two parents. Usually, it is at the center.</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a>            <span class="n">crossover_point</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a>                    <span class="k">continue</span>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a>            <span class="c1"># The new offspring has its first half of its genes from the first parent.</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a>            <span class="c1"># The new offspring has its second half of its genes from the second parent.</span>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>    <span class="k">def</span> <span class="nf">two_points_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a><span class="sd">        Applies the 2 points crossover. It selects the 2 points randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a>
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a>                <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># If the chromosome has only a single gene. In this case, this gene is copied from the second parent.</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a>            <span class="n">crossover_point2</span> <span class="o">=</span> <span class="n">crossover_point1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a>                <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># The second point must always be greater than the first point.</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a>
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a>
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>                    <span class="k">continue</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a>            <span class="c1"># The genes from the beginning of the chromosome up to the first point are copied from the first parent.</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span>
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a>            <span class="c1"># The genes from the second point up to the end of the chromosome are copied from the first parent.</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a>            <span class="c1"># The genes between the 2 points are copied from the second parent.</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a>
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a>    <span class="k">def</span> <span class="nf">uniform_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a><span class="sd">        Applies the uniform crossover. For each gene, a parent out of the 2 mating parents is selected randomly and the gene is copied from it.</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a>                    <span class="k">continue</span>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a>            <span class="n">genes_source</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a>                    <span class="c1"># The gene will be copied from the first parent if the current gene index is 0.</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a>                    <span class="c1"># The gene will be copied from the second parent if the current gene index is 1.</span>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a>    <span class="k">def</span> <span class="nf">scattered_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a><span class="sd">        Applies the scattered crossover. It randomly selects the gene from one of the 2 parents.</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a>                    <span class="k">continue</span>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a>            <span class="c1"># A 0/1 vector where 0 means the gene is taken from the first parent and 1 means the gene is taken from the second parent.</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a>            <span class="n">gene_sources</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gene_sources</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="p">:],</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="p">:])</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a>    <span class="k">def</span> <span class="nf">random_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a><span class="sd">        Applies the random mutation which changes the values of a number of genes randomly.</span>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a>        <span class="c1"># If the mutation values are selected from the mutation space, the attribute &#39;gene_space&#39; is not None. Otherwise, it is None.</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a>    <span class="k">def</span> <span class="nf">mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space.</span>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a>
</span><span id="L-2309"><a href="#L-2309"><span class="linenos">2309</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="L-2310"><a href="#L-2310"><span class="linenos">2310</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-2311"><a href="#L-2311"><span class="linenos">2311</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="L-2312"><a href="#L-2312"><span class="linenos">2312</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2313"><a href="#L-2313"><span class="linenos">2313</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2314"><a href="#L-2314"><span class="linenos">2314</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2315"><a href="#L-2315"><span class="linenos">2315</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2316"><a href="#L-2316"><span class="linenos">2316</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2317"><a href="#L-2317"><span class="linenos">2317</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2318"><a href="#L-2318"><span class="linenos">2318</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="L-2319"><a href="#L-2319"><span class="linenos">2319</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2320"><a href="#L-2320"><span class="linenos">2320</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="L-2321"><a href="#L-2321"><span class="linenos">2321</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2322"><a href="#L-2322"><span class="linenos">2322</span></a>                        <span class="c1"># The gene&#39;s space of type dict specifies the lower and upper limits of a gene.</span>
</span><span id="L-2323"><a href="#L-2323"><span class="linenos">2323</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2324"><a href="#L-2324"><span class="linenos">2324</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2325"><a href="#L-2325"><span class="linenos">2325</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2326"><a href="#L-2326"><span class="linenos">2326</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2327"><a href="#L-2327"><span class="linenos">2327</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2328"><a href="#L-2328"><span class="linenos">2328</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2329"><a href="#L-2329"><span class="linenos">2329</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2330"><a href="#L-2330"><span class="linenos">2330</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2331"><a href="#L-2331"><span class="linenos">2331</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2332"><a href="#L-2332"><span class="linenos">2332</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2333"><a href="#L-2333"><span class="linenos">2333</span></a>                        <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2334"><a href="#L-2334"><span class="linenos">2334</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="L-2335"><a href="#L-2335"><span class="linenos">2335</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2336"><a href="#L-2336"><span class="linenos">2336</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2337"><a href="#L-2337"><span class="linenos">2337</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="L-2338"><a href="#L-2338"><span class="linenos">2338</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2339"><a href="#L-2339"><span class="linenos">2339</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2340"><a href="#L-2340"><span class="linenos">2340</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2341"><a href="#L-2341"><span class="linenos">2341</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2342"><a href="#L-2342"><span class="linenos">2342</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2343"><a href="#L-2343"><span class="linenos">2343</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2344"><a href="#L-2344"><span class="linenos">2344</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2345"><a href="#L-2345"><span class="linenos">2345</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2346"><a href="#L-2346"><span class="linenos">2346</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2347"><a href="#L-2347"><span class="linenos">2347</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2348"><a href="#L-2348"><span class="linenos">2348</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="L-2349"><a href="#L-2349"><span class="linenos">2349</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2350"><a href="#L-2350"><span class="linenos">2350</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2351"><a href="#L-2351"><span class="linenos">2351</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2352"><a href="#L-2352"><span class="linenos">2352</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2353"><a href="#L-2353"><span class="linenos">2353</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2354"><a href="#L-2354"><span class="linenos">2354</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2355"><a href="#L-2355"><span class="linenos">2355</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2356"><a href="#L-2356"><span class="linenos">2356</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2357"><a href="#L-2357"><span class="linenos">2357</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2358"><a href="#L-2358"><span class="linenos">2358</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2359"><a href="#L-2359"><span class="linenos">2359</span></a>                        <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="L-2360"><a href="#L-2360"><span class="linenos">2360</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2361"><a href="#L-2361"><span class="linenos">2361</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2362"><a href="#L-2362"><span class="linenos">2362</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2363"><a href="#L-2363"><span class="linenos">2363</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2364"><a href="#L-2364"><span class="linenos">2364</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2365"><a href="#L-2365"><span class="linenos">2365</span></a>                    <span class="c1"># value_from_space = random.choice(self.gene_space)</span>
</span><span id="L-2366"><a href="#L-2366"><span class="linenos">2366</span></a>
</span><span id="L-2367"><a href="#L-2367"><span class="linenos">2367</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2368"><a href="#L-2368"><span class="linenos">2368</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2369"><a href="#L-2369"><span class="linenos">2369</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2370"><a href="#L-2370"><span class="linenos">2370</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2371"><a href="#L-2371"><span class="linenos">2371</span></a>
</span><span id="L-2372"><a href="#L-2372"><span class="linenos">2372</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="L-2373"><a href="#L-2373"><span class="linenos">2373</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2374"><a href="#L-2374"><span class="linenos">2374</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2375"><a href="#L-2375"><span class="linenos">2375</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2376"><a href="#L-2376"><span class="linenos">2376</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2377"><a href="#L-2377"><span class="linenos">2377</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2378"><a href="#L-2378"><span class="linenos">2378</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2379"><a href="#L-2379"><span class="linenos">2379</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2380"><a href="#L-2380"><span class="linenos">2380</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2381"><a href="#L-2381"><span class="linenos">2381</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2382"><a href="#L-2382"><span class="linenos">2382</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2383"><a href="#L-2383"><span class="linenos">2383</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2384"><a href="#L-2384"><span class="linenos">2384</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2385"><a href="#L-2385"><span class="linenos">2385</span></a>
</span><span id="L-2386"><a href="#L-2386"><span class="linenos">2386</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2387"><a href="#L-2387"><span class="linenos">2387</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="L-2388"><a href="#L-2388"><span class="linenos">2388</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2389"><a href="#L-2389"><span class="linenos">2389</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2390"><a href="#L-2390"><span class="linenos">2390</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2391"><a href="#L-2391"><span class="linenos">2391</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2392"><a href="#L-2392"><span class="linenos">2392</span></a>
</span><span id="L-2393"><a href="#L-2393"><span class="linenos">2393</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2394"><a href="#L-2394"><span class="linenos">2394</span></a>
</span><span id="L-2395"><a href="#L-2395"><span class="linenos">2395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2396"><a href="#L-2396"><span class="linenos">2396</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space and the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated based on the mutation space.</span>
</span><span id="L-2397"><a href="#L-2397"><span class="linenos">2397</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2398"><a href="#L-2398"><span class="linenos">2398</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2399"><a href="#L-2399"><span class="linenos">2399</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="L-2400"><a href="#L-2400"><span class="linenos">2400</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2401"><a href="#L-2401"><span class="linenos">2401</span></a>
</span><span id="L-2402"><a href="#L-2402"><span class="linenos">2402</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="L-2403"><a href="#L-2403"><span class="linenos">2403</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2404"><a href="#L-2404"><span class="linenos">2404</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2405"><a href="#L-2405"><span class="linenos">2405</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-2406"><a href="#L-2406"><span class="linenos">2406</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="L-2407"><a href="#L-2407"><span class="linenos">2407</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-2408"><a href="#L-2408"><span class="linenos">2408</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2409"><a href="#L-2409"><span class="linenos">2409</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-2410"><a href="#L-2410"><span class="linenos">2410</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2411"><a href="#L-2411"><span class="linenos">2411</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2412"><a href="#L-2412"><span class="linenos">2412</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2413"><a href="#L-2413"><span class="linenos">2413</span></a>
</span><span id="L-2414"><a href="#L-2414"><span class="linenos">2414</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="L-2415"><a href="#L-2415"><span class="linenos">2415</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-2416"><a href="#L-2416"><span class="linenos">2416</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="L-2417"><a href="#L-2417"><span class="linenos">2417</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2418"><a href="#L-2418"><span class="linenos">2418</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2419"><a href="#L-2419"><span class="linenos">2419</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2420"><a href="#L-2420"><span class="linenos">2420</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2421"><a href="#L-2421"><span class="linenos">2421</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2422"><a href="#L-2422"><span class="linenos">2422</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2423"><a href="#L-2423"><span class="linenos">2423</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="L-2424"><a href="#L-2424"><span class="linenos">2424</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2425"><a href="#L-2425"><span class="linenos">2425</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="L-2426"><a href="#L-2426"><span class="linenos">2426</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2427"><a href="#L-2427"><span class="linenos">2427</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2428"><a href="#L-2428"><span class="linenos">2428</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2429"><a href="#L-2429"><span class="linenos">2429</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2430"><a href="#L-2430"><span class="linenos">2430</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2431"><a href="#L-2431"><span class="linenos">2431</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2432"><a href="#L-2432"><span class="linenos">2432</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2433"><a href="#L-2433"><span class="linenos">2433</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2434"><a href="#L-2434"><span class="linenos">2434</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2435"><a href="#L-2435"><span class="linenos">2435</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2436"><a href="#L-2436"><span class="linenos">2436</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2437"><a href="#L-2437"><span class="linenos">2437</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2438"><a href="#L-2438"><span class="linenos">2438</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2439"><a href="#L-2439"><span class="linenos">2439</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="L-2440"><a href="#L-2440"><span class="linenos">2440</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2441"><a href="#L-2441"><span class="linenos">2441</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2442"><a href="#L-2442"><span class="linenos">2442</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="L-2443"><a href="#L-2443"><span class="linenos">2443</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2444"><a href="#L-2444"><span class="linenos">2444</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2445"><a href="#L-2445"><span class="linenos">2445</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2446"><a href="#L-2446"><span class="linenos">2446</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2447"><a href="#L-2447"><span class="linenos">2447</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2448"><a href="#L-2448"><span class="linenos">2448</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2449"><a href="#L-2449"><span class="linenos">2449</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2450"><a href="#L-2450"><span class="linenos">2450</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2451"><a href="#L-2451"><span class="linenos">2451</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2452"><a href="#L-2452"><span class="linenos">2452</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2453"><a href="#L-2453"><span class="linenos">2453</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2454"><a href="#L-2454"><span class="linenos">2454</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2455"><a href="#L-2455"><span class="linenos">2455</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2456"><a href="#L-2456"><span class="linenos">2456</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2457"><a href="#L-2457"><span class="linenos">2457</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2458"><a href="#L-2458"><span class="linenos">2458</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2459"><a href="#L-2459"><span class="linenos">2459</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2460"><a href="#L-2460"><span class="linenos">2460</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2461"><a href="#L-2461"><span class="linenos">2461</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2462"><a href="#L-2462"><span class="linenos">2462</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2463"><a href="#L-2463"><span class="linenos">2463</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2464"><a href="#L-2464"><span class="linenos">2464</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2465"><a href="#L-2465"><span class="linenos">2465</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2466"><a href="#L-2466"><span class="linenos">2466</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2467"><a href="#L-2467"><span class="linenos">2467</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2468"><a href="#L-2468"><span class="linenos">2468</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2469"><a href="#L-2469"><span class="linenos">2469</span></a>
</span><span id="L-2470"><a href="#L-2470"><span class="linenos">2470</span></a>                    <span class="c1"># Assigning the selected value from the space to the gene.</span>
</span><span id="L-2471"><a href="#L-2471"><span class="linenos">2471</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2472"><a href="#L-2472"><span class="linenos">2472</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2473"><a href="#L-2473"><span class="linenos">2473</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2474"><a href="#L-2474"><span class="linenos">2474</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2475"><a href="#L-2475"><span class="linenos">2475</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2476"><a href="#L-2476"><span class="linenos">2476</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2477"><a href="#L-2477"><span class="linenos">2477</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2478"><a href="#L-2478"><span class="linenos">2478</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2479"><a href="#L-2479"><span class="linenos">2479</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="L-2480"><a href="#L-2480"><span class="linenos">2480</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2481"><a href="#L-2481"><span class="linenos">2481</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2482"><a href="#L-2482"><span class="linenos">2482</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2483"><a href="#L-2483"><span class="linenos">2483</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2484"><a href="#L-2484"><span class="linenos">2484</span></a>
</span><span id="L-2485"><a href="#L-2485"><span class="linenos">2485</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2486"><a href="#L-2486"><span class="linenos">2486</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="L-2487"><a href="#L-2487"><span class="linenos">2487</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2488"><a href="#L-2488"><span class="linenos">2488</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2489"><a href="#L-2489"><span class="linenos">2489</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2490"><a href="#L-2490"><span class="linenos">2490</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2491"><a href="#L-2491"><span class="linenos">2491</span></a>
</span><span id="L-2492"><a href="#L-2492"><span class="linenos">2492</span></a>    <span class="k">def</span> <span class="nf">mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2493"><a href="#L-2493"><span class="linenos">2493</span></a>
</span><span id="L-2494"><a href="#L-2494"><span class="linenos">2494</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2495"><a href="#L-2495"><span class="linenos">2495</span></a><span class="sd">        Applies the random mutation the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="L-2496"><a href="#L-2496"><span class="linenos">2496</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2497"><a href="#L-2497"><span class="linenos">2497</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2498"><a href="#L-2498"><span class="linenos">2498</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2499"><a href="#L-2499"><span class="linenos">2499</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2500"><a href="#L-2500"><span class="linenos">2500</span></a>
</span><span id="L-2501"><a href="#L-2501"><span class="linenos">2501</span></a>        <span class="c1"># Random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="L-2502"><a href="#L-2502"><span class="linenos">2502</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2503"><a href="#L-2503"><span class="linenos">2503</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="L-2504"><a href="#L-2504"><span class="linenos">2504</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="L-2505"><a href="#L-2505"><span class="linenos">2505</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="L-2506"><a href="#L-2506"><span class="linenos">2506</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2507"><a href="#L-2507"><span class="linenos">2507</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2508"><a href="#L-2508"><span class="linenos">2508</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2509"><a href="#L-2509"><span class="linenos">2509</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="L-2510"><a href="#L-2510"><span class="linenos">2510</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2511"><a href="#L-2511"><span class="linenos">2511</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2512"><a href="#L-2512"><span class="linenos">2512</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2513"><a href="#L-2513"><span class="linenos">2513</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2514"><a href="#L-2514"><span class="linenos">2514</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2515"><a href="#L-2515"><span class="linenos">2515</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2516"><a href="#L-2516"><span class="linenos">2516</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2517"><a href="#L-2517"><span class="linenos">2517</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="L-2518"><a href="#L-2518"><span class="linenos">2518</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2519"><a href="#L-2519"><span class="linenos">2519</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2520"><a href="#L-2520"><span class="linenos">2520</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2521"><a href="#L-2521"><span class="linenos">2521</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2522"><a href="#L-2522"><span class="linenos">2522</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2523"><a href="#L-2523"><span class="linenos">2523</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2524"><a href="#L-2524"><span class="linenos">2524</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2525"><a href="#L-2525"><span class="linenos">2525</span></a>
</span><span id="L-2526"><a href="#L-2526"><span class="linenos">2526</span></a>                <span class="c1"># Round the gene</span>
</span><span id="L-2527"><a href="#L-2527"><span class="linenos">2527</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2528"><a href="#L-2528"><span class="linenos">2528</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2529"><a href="#L-2529"><span class="linenos">2529</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2530"><a href="#L-2530"><span class="linenos">2530</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2531"><a href="#L-2531"><span class="linenos">2531</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2532"><a href="#L-2532"><span class="linenos">2532</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2533"><a href="#L-2533"><span class="linenos">2533</span></a>
</span><span id="L-2534"><a href="#L-2534"><span class="linenos">2534</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="L-2535"><a href="#L-2535"><span class="linenos">2535</span></a>
</span><span id="L-2536"><a href="#L-2536"><span class="linenos">2536</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2537"><a href="#L-2537"><span class="linenos">2537</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="L-2538"><a href="#L-2538"><span class="linenos">2538</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2539"><a href="#L-2539"><span class="linenos">2539</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2540"><a href="#L-2540"><span class="linenos">2540</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2541"><a href="#L-2541"><span class="linenos">2541</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2542"><a href="#L-2542"><span class="linenos">2542</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2543"><a href="#L-2543"><span class="linenos">2543</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2544"><a href="#L-2544"><span class="linenos">2544</span></a>
</span><span id="L-2545"><a href="#L-2545"><span class="linenos">2545</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2546"><a href="#L-2546"><span class="linenos">2546</span></a>
</span><span id="L-2547"><a href="#L-2547"><span class="linenos">2547</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2548"><a href="#L-2548"><span class="linenos">2548</span></a>
</span><span id="L-2549"><a href="#L-2549"><span class="linenos">2549</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2550"><a href="#L-2550"><span class="linenos">2550</span></a><span class="sd">        Applies the random mutation using the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="L-2551"><a href="#L-2551"><span class="linenos">2551</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2552"><a href="#L-2552"><span class="linenos">2552</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2553"><a href="#L-2553"><span class="linenos">2553</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2554"><a href="#L-2554"><span class="linenos">2554</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2555"><a href="#L-2555"><span class="linenos">2555</span></a>
</span><span id="L-2556"><a href="#L-2556"><span class="linenos">2556</span></a>        <span class="c1"># Random mutation changes one or more gene in each offspring randomly.</span>
</span><span id="L-2557"><a href="#L-2557"><span class="linenos">2557</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2558"><a href="#L-2558"><span class="linenos">2558</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2559"><a href="#L-2559"><span class="linenos">2559</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-2560"><a href="#L-2560"><span class="linenos">2560</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="L-2561"><a href="#L-2561"><span class="linenos">2561</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="L-2562"><a href="#L-2562"><span class="linenos">2562</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2563"><a href="#L-2563"><span class="linenos">2563</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2564"><a href="#L-2564"><span class="linenos">2564</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2565"><a href="#L-2565"><span class="linenos">2565</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="L-2566"><a href="#L-2566"><span class="linenos">2566</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2567"><a href="#L-2567"><span class="linenos">2567</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2568"><a href="#L-2568"><span class="linenos">2568</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2569"><a href="#L-2569"><span class="linenos">2569</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2570"><a href="#L-2570"><span class="linenos">2570</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2571"><a href="#L-2571"><span class="linenos">2571</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2572"><a href="#L-2572"><span class="linenos">2572</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2573"><a href="#L-2573"><span class="linenos">2573</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="L-2574"><a href="#L-2574"><span class="linenos">2574</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2575"><a href="#L-2575"><span class="linenos">2575</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2576"><a href="#L-2576"><span class="linenos">2576</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2577"><a href="#L-2577"><span class="linenos">2577</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2578"><a href="#L-2578"><span class="linenos">2578</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="L-2579"><a href="#L-2579"><span class="linenos">2579</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2580"><a href="#L-2580"><span class="linenos">2580</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2581"><a href="#L-2581"><span class="linenos">2581</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2582"><a href="#L-2582"><span class="linenos">2582</span></a>
</span><span id="L-2583"><a href="#L-2583"><span class="linenos">2583</span></a>                    <span class="c1"># Round the gene</span>
</span><span id="L-2584"><a href="#L-2584"><span class="linenos">2584</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2585"><a href="#L-2585"><span class="linenos">2585</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2586"><a href="#L-2586"><span class="linenos">2586</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2587"><a href="#L-2587"><span class="linenos">2587</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2588"><a href="#L-2588"><span class="linenos">2588</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2589"><a href="#L-2589"><span class="linenos">2589</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2590"><a href="#L-2590"><span class="linenos">2590</span></a>
</span><span id="L-2591"><a href="#L-2591"><span class="linenos">2591</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="L-2592"><a href="#L-2592"><span class="linenos">2592</span></a>
</span><span id="L-2593"><a href="#L-2593"><span class="linenos">2593</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2594"><a href="#L-2594"><span class="linenos">2594</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="L-2595"><a href="#L-2595"><span class="linenos">2595</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2596"><a href="#L-2596"><span class="linenos">2596</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2597"><a href="#L-2597"><span class="linenos">2597</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2598"><a href="#L-2598"><span class="linenos">2598</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2599"><a href="#L-2599"><span class="linenos">2599</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2600"><a href="#L-2600"><span class="linenos">2600</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2601"><a href="#L-2601"><span class="linenos">2601</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2602"><a href="#L-2602"><span class="linenos">2602</span></a>
</span><span id="L-2603"><a href="#L-2603"><span class="linenos">2603</span></a>    <span class="k">def</span> <span class="nf">swap_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2604"><a href="#L-2604"><span class="linenos">2604</span></a>
</span><span id="L-2605"><a href="#L-2605"><span class="linenos">2605</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2606"><a href="#L-2606"><span class="linenos">2606</span></a><span class="sd">        Applies the swap mutation which interchanges the values of 2 randomly selected genes.</span>
</span><span id="L-2607"><a href="#L-2607"><span class="linenos">2607</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2608"><a href="#L-2608"><span class="linenos">2608</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2609"><a href="#L-2609"><span class="linenos">2609</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2610"><a href="#L-2610"><span class="linenos">2610</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2611"><a href="#L-2611"><span class="linenos">2611</span></a>
</span><span id="L-2612"><a href="#L-2612"><span class="linenos">2612</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2613"><a href="#L-2613"><span class="linenos">2613</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2614"><a href="#L-2614"><span class="linenos">2614</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2615"><a href="#L-2615"><span class="linenos">2615</span></a>
</span><span id="L-2616"><a href="#L-2616"><span class="linenos">2616</span></a>            <span class="n">temp</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span>
</span><span id="L-2617"><a href="#L-2617"><span class="linenos">2617</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span>
</span><span id="L-2618"><a href="#L-2618"><span class="linenos">2618</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="L-2619"><a href="#L-2619"><span class="linenos">2619</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2620"><a href="#L-2620"><span class="linenos">2620</span></a>
</span><span id="L-2621"><a href="#L-2621"><span class="linenos">2621</span></a>    <span class="k">def</span> <span class="nf">inversion_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2622"><a href="#L-2622"><span class="linenos">2622</span></a>
</span><span id="L-2623"><a href="#L-2623"><span class="linenos">2623</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2624"><a href="#L-2624"><span class="linenos">2624</span></a><span class="sd">        Applies the inversion mutation which selects a subset of genes and inverts them (in order).</span>
</span><span id="L-2625"><a href="#L-2625"><span class="linenos">2625</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2626"><a href="#L-2626"><span class="linenos">2626</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2627"><a href="#L-2627"><span class="linenos">2627</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2628"><a href="#L-2628"><span class="linenos">2628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2629"><a href="#L-2629"><span class="linenos">2629</span></a>
</span><span id="L-2630"><a href="#L-2630"><span class="linenos">2630</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2631"><a href="#L-2631"><span class="linenos">2631</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2632"><a href="#L-2632"><span class="linenos">2632</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2633"><a href="#L-2633"><span class="linenos">2633</span></a>
</span><span id="L-2634"><a href="#L-2634"><span class="linenos">2634</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">])</span>
</span><span id="L-2635"><a href="#L-2635"><span class="linenos">2635</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="L-2636"><a href="#L-2636"><span class="linenos">2636</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2637"><a href="#L-2637"><span class="linenos">2637</span></a>
</span><span id="L-2638"><a href="#L-2638"><span class="linenos">2638</span></a>    <span class="k">def</span> <span class="nf">scramble_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2639"><a href="#L-2639"><span class="linenos">2639</span></a>
</span><span id="L-2640"><a href="#L-2640"><span class="linenos">2640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2641"><a href="#L-2641"><span class="linenos">2641</span></a><span class="sd">        Applies the scramble mutation which selects a subset of genes and shuffles their order randomly.</span>
</span><span id="L-2642"><a href="#L-2642"><span class="linenos">2642</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2643"><a href="#L-2643"><span class="linenos">2643</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2644"><a href="#L-2644"><span class="linenos">2644</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2645"><a href="#L-2645"><span class="linenos">2645</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2646"><a href="#L-2646"><span class="linenos">2646</span></a>
</span><span id="L-2647"><a href="#L-2647"><span class="linenos">2647</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2648"><a href="#L-2648"><span class="linenos">2648</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2649"><a href="#L-2649"><span class="linenos">2649</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-2650"><a href="#L-2650"><span class="linenos">2650</span></a>            <span class="n">genes_range</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">mutation_gene1</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">mutation_gene2</span><span class="p">)</span>
</span><span id="L-2651"><a href="#L-2651"><span class="linenos">2651</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">genes_range</span><span class="p">)</span>
</span><span id="L-2652"><a href="#L-2652"><span class="linenos">2652</span></a>
</span><span id="L-2653"><a href="#L-2653"><span class="linenos">2653</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">])</span>
</span><span id="L-2654"><a href="#L-2654"><span class="linenos">2654</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="L-2655"><a href="#L-2655"><span class="linenos">2655</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2656"><a href="#L-2656"><span class="linenos">2656</span></a>
</span><span id="L-2657"><a href="#L-2657"><span class="linenos">2657</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2658"><a href="#L-2658"><span class="linenos">2658</span></a>
</span><span id="L-2659"><a href="#L-2659"><span class="linenos">2659</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2660"><a href="#L-2660"><span class="linenos">2660</span></a><span class="sd">        A helper method to calculate the average fitness of the solutions before applying the adaptive mutation.</span>
</span><span id="L-2661"><a href="#L-2661"><span class="linenos">2661</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2662"><a href="#L-2662"><span class="linenos">2662</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2663"><a href="#L-2663"><span class="linenos">2663</span></a><span class="sd">        It returns the average fitness to be used in adaptive mutation.</span>
</span><span id="L-2664"><a href="#L-2664"><span class="linenos">2664</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2665"><a href="#L-2665"><span class="linenos">2665</span></a>
</span><span id="L-2666"><a href="#L-2666"><span class="linenos">2666</span></a>        <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2667"><a href="#L-2667"><span class="linenos">2667</span></a>        <span class="n">temp_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="L-2668"><a href="#L-2668"><span class="linenos">2668</span></a>
</span><span id="L-2669"><a href="#L-2669"><span class="linenos">2669</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-2670"><a href="#L-2670"><span class="linenos">2670</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-2671"><a href="#L-2671"><span class="linenos">2671</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-2672"><a href="#L-2672"><span class="linenos">2672</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-2673"><a href="#L-2673"><span class="linenos">2673</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2674"><a href="#L-2674"><span class="linenos">2674</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="L-2675"><a href="#L-2675"><span class="linenos">2675</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-2676"><a href="#L-2676"><span class="linenos">2676</span></a>                <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="L-2677"><a href="#L-2677"><span class="linenos">2677</span></a>                                                                 <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="L-2678"><a href="#L-2678"><span class="linenos">2678</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="L-2679"><a href="#L-2679"><span class="linenos">2679</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2680"><a href="#L-2680"><span class="linenos">2680</span></a>            <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="L-2681"><a href="#L-2681"><span class="linenos">2681</span></a>                                                             <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="L-2682"><a href="#L-2682"><span class="linenos">2682</span></a>            <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="L-2683"><a href="#L-2683"><span class="linenos">2683</span></a>
</span><span id="L-2684"><a href="#L-2684"><span class="linenos">2684</span></a>        <span class="n">temp_population</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">offspring</span>
</span><span id="L-2685"><a href="#L-2685"><span class="linenos">2685</span></a>
</span><span id="L-2686"><a href="#L-2686"><span class="linenos">2686</span></a>        <span class="n">fitness</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span>
</span><span id="L-2687"><a href="#L-2687"><span class="linenos">2687</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">]</span>
</span><span id="L-2688"><a href="#L-2688"><span class="linenos">2688</span></a>
</span><span id="L-2689"><a href="#L-2689"><span class="linenos">2689</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2690"><a href="#L-2690"><span class="linenos">2690</span></a>            <span class="c1"># fitness[idx] = self.fitness_func(temp_population[idx], None)</span>
</span><span id="L-2691"><a href="#L-2691"><span class="linenos">2691</span></a>            <span class="n">fitness</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">temp_population</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># FERMATRICA FIX</span>
</span><span id="L-2692"><a href="#L-2692"><span class="linenos">2692</span></a>        <span class="n">average_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="L-2693"><a href="#L-2693"><span class="linenos">2693</span></a>
</span><span id="L-2694"><a href="#L-2694"><span class="linenos">2694</span></a>        <span class="k">return</span> <span class="n">average_fitness</span><span class="p">,</span> <span class="n">fitness</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):]</span>
</span><span id="L-2695"><a href="#L-2695"><span class="linenos">2695</span></a>
</span><span id="L-2696"><a href="#L-2696"><span class="linenos">2696</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2697"><a href="#L-2697"><span class="linenos">2697</span></a>
</span><span id="L-2698"><a href="#L-2698"><span class="linenos">2698</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2699"><a href="#L-2699"><span class="linenos">2699</span></a><span class="sd">        Applies the adaptive mutation which changes the values of a number of genes randomly. In adaptive mutation, the number of genes to mutate differs based on the fitness value of the solution.</span>
</span><span id="L-2700"><a href="#L-2700"><span class="linenos">2700</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2701"><a href="#L-2701"><span class="linenos">2701</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2702"><a href="#L-2702"><span class="linenos">2702</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2703"><a href="#L-2703"><span class="linenos">2703</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2704"><a href="#L-2704"><span class="linenos">2704</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2705"><a href="#L-2705"><span class="linenos">2705</span></a>
</span><span id="L-2706"><a href="#L-2706"><span class="linenos">2706</span></a>        <span class="c1"># If the attribute &#39;gene_space&#39; exists (i.e. not None), then the mutation values are selected from the &#39;gene_space&#39; parameter according to the space of values of each gene. Otherwise, it is selected randomly based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2707"><a href="#L-2707"><span class="linenos">2707</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="L-2708"><a href="#L-2708"><span class="linenos">2708</span></a>
</span><span id="L-2709"><a href="#L-2709"><span class="linenos">2709</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2710"><a href="#L-2710"><span class="linenos">2710</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="L-2711"><a href="#L-2711"><span class="linenos">2711</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2712"><a href="#L-2712"><span class="linenos">2712</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="L-2713"><a href="#L-2713"><span class="linenos">2713</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2714"><a href="#L-2714"><span class="linenos">2714</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2715"><a href="#L-2715"><span class="linenos">2715</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2716"><a href="#L-2716"><span class="linenos">2716</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2717"><a href="#L-2717"><span class="linenos">2717</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2718"><a href="#L-2718"><span class="linenos">2718</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="L-2719"><a href="#L-2719"><span class="linenos">2719</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2720"><a href="#L-2720"><span class="linenos">2720</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="L-2721"><a href="#L-2721"><span class="linenos">2721</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2722"><a href="#L-2722"><span class="linenos">2722</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2723"><a href="#L-2723"><span class="linenos">2723</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2724"><a href="#L-2724"><span class="linenos">2724</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2725"><a href="#L-2725"><span class="linenos">2725</span></a>
</span><span id="L-2726"><a href="#L-2726"><span class="linenos">2726</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2727"><a href="#L-2727"><span class="linenos">2727</span></a>
</span><span id="L-2728"><a href="#L-2728"><span class="linenos">2728</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2729"><a href="#L-2729"><span class="linenos">2729</span></a>
</span><span id="L-2730"><a href="#L-2730"><span class="linenos">2730</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2731"><a href="#L-2731"><span class="linenos">2731</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_num_genes&#39; and &#39;gene_space&#39;.</span>
</span><span id="L-2732"><a href="#L-2732"><span class="linenos">2732</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="L-2733"><a href="#L-2733"><span class="linenos">2733</span></a><span class="sd">        The random values are selected from the &#39;gene_space&#39; parameter.</span>
</span><span id="L-2734"><a href="#L-2734"><span class="linenos">2734</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2735"><a href="#L-2735"><span class="linenos">2735</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2736"><a href="#L-2736"><span class="linenos">2736</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2737"><a href="#L-2737"><span class="linenos">2737</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2738"><a href="#L-2738"><span class="linenos">2738</span></a>
</span><span id="L-2739"><a href="#L-2739"><span class="linenos">2739</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="L-2740"><a href="#L-2740"><span class="linenos">2740</span></a>
</span><span id="L-2741"><a href="#L-2741"><span class="linenos">2741</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2742"><a href="#L-2742"><span class="linenos">2742</span></a>
</span><span id="L-2743"><a href="#L-2743"><span class="linenos">2743</span></a>        <span class="c1"># Adaptive mutation changes one or more genes in each offspring randomly.</span>
</span><span id="L-2744"><a href="#L-2744"><span class="linenos">2744</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="L-2745"><a href="#L-2745"><span class="linenos">2745</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2746"><a href="#L-2746"><span class="linenos">2746</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="L-2747"><a href="#L-2747"><span class="linenos">2747</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2748"><a href="#L-2748"><span class="linenos">2748</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2749"><a href="#L-2749"><span class="linenos">2749</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2750"><a href="#L-2750"><span class="linenos">2750</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="L-2751"><a href="#L-2751"><span class="linenos">2751</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="L-2752"><a href="#L-2752"><span class="linenos">2752</span></a>
</span><span id="L-2753"><a href="#L-2753"><span class="linenos">2753</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-2754"><a href="#L-2754"><span class="linenos">2754</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2755"><a href="#L-2755"><span class="linenos">2755</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-2756"><a href="#L-2756"><span class="linenos">2756</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2757"><a href="#L-2757"><span class="linenos">2757</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2758"><a href="#L-2758"><span class="linenos">2758</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2759"><a href="#L-2759"><span class="linenos">2759</span></a>
</span><span id="L-2760"><a href="#L-2760"><span class="linenos">2760</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="L-2761"><a href="#L-2761"><span class="linenos">2761</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-2762"><a href="#L-2762"><span class="linenos">2762</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="L-2763"><a href="#L-2763"><span class="linenos">2763</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2764"><a href="#L-2764"><span class="linenos">2764</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2765"><a href="#L-2765"><span class="linenos">2765</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2766"><a href="#L-2766"><span class="linenos">2766</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2767"><a href="#L-2767"><span class="linenos">2767</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2768"><a href="#L-2768"><span class="linenos">2768</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2769"><a href="#L-2769"><span class="linenos">2769</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="L-2770"><a href="#L-2770"><span class="linenos">2770</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2771"><a href="#L-2771"><span class="linenos">2771</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="L-2772"><a href="#L-2772"><span class="linenos">2772</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2773"><a href="#L-2773"><span class="linenos">2773</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2774"><a href="#L-2774"><span class="linenos">2774</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2775"><a href="#L-2775"><span class="linenos">2775</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2776"><a href="#L-2776"><span class="linenos">2776</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2777"><a href="#L-2777"><span class="linenos">2777</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2778"><a href="#L-2778"><span class="linenos">2778</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2779"><a href="#L-2779"><span class="linenos">2779</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2780"><a href="#L-2780"><span class="linenos">2780</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2781"><a href="#L-2781"><span class="linenos">2781</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2782"><a href="#L-2782"><span class="linenos">2782</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2783"><a href="#L-2783"><span class="linenos">2783</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2784"><a href="#L-2784"><span class="linenos">2784</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2785"><a href="#L-2785"><span class="linenos">2785</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="L-2786"><a href="#L-2786"><span class="linenos">2786</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2787"><a href="#L-2787"><span class="linenos">2787</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2788"><a href="#L-2788"><span class="linenos">2788</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="L-2789"><a href="#L-2789"><span class="linenos">2789</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2790"><a href="#L-2790"><span class="linenos">2790</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2791"><a href="#L-2791"><span class="linenos">2791</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2792"><a href="#L-2792"><span class="linenos">2792</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2793"><a href="#L-2793"><span class="linenos">2793</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2794"><a href="#L-2794"><span class="linenos">2794</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2795"><a href="#L-2795"><span class="linenos">2795</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2796"><a href="#L-2796"><span class="linenos">2796</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2797"><a href="#L-2797"><span class="linenos">2797</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2798"><a href="#L-2798"><span class="linenos">2798</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2799"><a href="#L-2799"><span class="linenos">2799</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2800"><a href="#L-2800"><span class="linenos">2800</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2801"><a href="#L-2801"><span class="linenos">2801</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2802"><a href="#L-2802"><span class="linenos">2802</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2803"><a href="#L-2803"><span class="linenos">2803</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2804"><a href="#L-2804"><span class="linenos">2804</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2805"><a href="#L-2805"><span class="linenos">2805</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2806"><a href="#L-2806"><span class="linenos">2806</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2807"><a href="#L-2807"><span class="linenos">2807</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2808"><a href="#L-2808"><span class="linenos">2808</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2809"><a href="#L-2809"><span class="linenos">2809</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2810"><a href="#L-2810"><span class="linenos">2810</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2811"><a href="#L-2811"><span class="linenos">2811</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2812"><a href="#L-2812"><span class="linenos">2812</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2813"><a href="#L-2813"><span class="linenos">2813</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2814"><a href="#L-2814"><span class="linenos">2814</span></a>
</span><span id="L-2815"><a href="#L-2815"><span class="linenos">2815</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2816"><a href="#L-2816"><span class="linenos">2816</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2817"><a href="#L-2817"><span class="linenos">2817</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2818"><a href="#L-2818"><span class="linenos">2818</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2819"><a href="#L-2819"><span class="linenos">2819</span></a>
</span><span id="L-2820"><a href="#L-2820"><span class="linenos">2820</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="L-2821"><a href="#L-2821"><span class="linenos">2821</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2822"><a href="#L-2822"><span class="linenos">2822</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2823"><a href="#L-2823"><span class="linenos">2823</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2824"><a href="#L-2824"><span class="linenos">2824</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2825"><a href="#L-2825"><span class="linenos">2825</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2826"><a href="#L-2826"><span class="linenos">2826</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2827"><a href="#L-2827"><span class="linenos">2827</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2828"><a href="#L-2828"><span class="linenos">2828</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2829"><a href="#L-2829"><span class="linenos">2829</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-2830"><a href="#L-2830"><span class="linenos">2830</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2831"><a href="#L-2831"><span class="linenos">2831</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2832"><a href="#L-2832"><span class="linenos">2832</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-2833"><a href="#L-2833"><span class="linenos">2833</span></a>
</span><span id="L-2834"><a href="#L-2834"><span class="linenos">2834</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2835"><a href="#L-2835"><span class="linenos">2835</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="L-2836"><a href="#L-2836"><span class="linenos">2836</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2837"><a href="#L-2837"><span class="linenos">2837</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2838"><a href="#L-2838"><span class="linenos">2838</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2839"><a href="#L-2839"><span class="linenos">2839</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2840"><a href="#L-2840"><span class="linenos">2840</span></a>
</span><span id="L-2841"><a href="#L-2841"><span class="linenos">2841</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2842"><a href="#L-2842"><span class="linenos">2842</span></a>
</span><span id="L-2843"><a href="#L-2843"><span class="linenos">2843</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2844"><a href="#L-2844"><span class="linenos">2844</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_num_genes&#39; parameter.</span>
</span><span id="L-2845"><a href="#L-2845"><span class="linenos">2845</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="L-2846"><a href="#L-2846"><span class="linenos">2846</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2847"><a href="#L-2847"><span class="linenos">2847</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2848"><a href="#L-2848"><span class="linenos">2848</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2849"><a href="#L-2849"><span class="linenos">2849</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2850"><a href="#L-2850"><span class="linenos">2850</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2851"><a href="#L-2851"><span class="linenos">2851</span></a>
</span><span id="L-2852"><a href="#L-2852"><span class="linenos">2852</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2853"><a href="#L-2853"><span class="linenos">2853</span></a>
</span><span id="L-2854"><a href="#L-2854"><span class="linenos">2854</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="L-2855"><a href="#L-2855"><span class="linenos">2855</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="L-2856"><a href="#L-2856"><span class="linenos">2856</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2857"><a href="#L-2857"><span class="linenos">2857</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="L-2858"><a href="#L-2858"><span class="linenos">2858</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2859"><a href="#L-2859"><span class="linenos">2859</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2860"><a href="#L-2860"><span class="linenos">2860</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2861"><a href="#L-2861"><span class="linenos">2861</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="L-2862"><a href="#L-2862"><span class="linenos">2862</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="L-2863"><a href="#L-2863"><span class="linenos">2863</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="L-2864"><a href="#L-2864"><span class="linenos">2864</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2865"><a href="#L-2865"><span class="linenos">2865</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2866"><a href="#L-2866"><span class="linenos">2866</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2867"><a href="#L-2867"><span class="linenos">2867</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="L-2868"><a href="#L-2868"><span class="linenos">2868</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2869"><a href="#L-2869"><span class="linenos">2869</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2870"><a href="#L-2870"><span class="linenos">2870</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2871"><a href="#L-2871"><span class="linenos">2871</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2872"><a href="#L-2872"><span class="linenos">2872</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2873"><a href="#L-2873"><span class="linenos">2873</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2874"><a href="#L-2874"><span class="linenos">2874</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2875"><a href="#L-2875"><span class="linenos">2875</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="L-2876"><a href="#L-2876"><span class="linenos">2876</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2877"><a href="#L-2877"><span class="linenos">2877</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2878"><a href="#L-2878"><span class="linenos">2878</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2879"><a href="#L-2879"><span class="linenos">2879</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2880"><a href="#L-2880"><span class="linenos">2880</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-2881"><a href="#L-2881"><span class="linenos">2881</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-2882"><a href="#L-2882"><span class="linenos">2882</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2883"><a href="#L-2883"><span class="linenos">2883</span></a>
</span><span id="L-2884"><a href="#L-2884"><span class="linenos">2884</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2885"><a href="#L-2885"><span class="linenos">2885</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2886"><a href="#L-2886"><span class="linenos">2886</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2887"><a href="#L-2887"><span class="linenos">2887</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2888"><a href="#L-2888"><span class="linenos">2888</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2889"><a href="#L-2889"><span class="linenos">2889</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2890"><a href="#L-2890"><span class="linenos">2890</span></a>
</span><span id="L-2891"><a href="#L-2891"><span class="linenos">2891</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="L-2892"><a href="#L-2892"><span class="linenos">2892</span></a>
</span><span id="L-2893"><a href="#L-2893"><span class="linenos">2893</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-2894"><a href="#L-2894"><span class="linenos">2894</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="L-2895"><a href="#L-2895"><span class="linenos">2895</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-2896"><a href="#L-2896"><span class="linenos">2896</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2897"><a href="#L-2897"><span class="linenos">2897</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2898"><a href="#L-2898"><span class="linenos">2898</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-2899"><a href="#L-2899"><span class="linenos">2899</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-2900"><a href="#L-2900"><span class="linenos">2900</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-2901"><a href="#L-2901"><span class="linenos">2901</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-2902"><a href="#L-2902"><span class="linenos">2902</span></a>
</span><span id="L-2903"><a href="#L-2903"><span class="linenos">2903</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-2904"><a href="#L-2904"><span class="linenos">2904</span></a>
</span><span id="L-2905"><a href="#L-2905"><span class="linenos">2905</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2906"><a href="#L-2906"><span class="linenos">2906</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_probability&#39; and &#39;gene_space&#39;.</span>
</span><span id="L-2907"><a href="#L-2907"><span class="linenos">2907</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="L-2908"><a href="#L-2908"><span class="linenos">2908</span></a><span class="sd">        The random values are selected based on space of values for each gene.</span>
</span><span id="L-2909"><a href="#L-2909"><span class="linenos">2909</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-2910"><a href="#L-2910"><span class="linenos">2910</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-2911"><a href="#L-2911"><span class="linenos">2911</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-2912"><a href="#L-2912"><span class="linenos">2912</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2913"><a href="#L-2913"><span class="linenos">2913</span></a>
</span><span id="L-2914"><a href="#L-2914"><span class="linenos">2914</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="L-2915"><a href="#L-2915"><span class="linenos">2915</span></a>
</span><span id="L-2916"><a href="#L-2916"><span class="linenos">2916</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-2917"><a href="#L-2917"><span class="linenos">2917</span></a>
</span><span id="L-2918"><a href="#L-2918"><span class="linenos">2918</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="L-2919"><a href="#L-2919"><span class="linenos">2919</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="L-2920"><a href="#L-2920"><span class="linenos">2920</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-2921"><a href="#L-2921"><span class="linenos">2921</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="L-2922"><a href="#L-2922"><span class="linenos">2922</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2923"><a href="#L-2923"><span class="linenos">2923</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2924"><a href="#L-2924"><span class="linenos">2924</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-2925"><a href="#L-2925"><span class="linenos">2925</span></a>
</span><span id="L-2926"><a href="#L-2926"><span class="linenos">2926</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-2927"><a href="#L-2927"><span class="linenos">2927</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-2928"><a href="#L-2928"><span class="linenos">2928</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="L-2929"><a href="#L-2929"><span class="linenos">2929</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-2930"><a href="#L-2930"><span class="linenos">2930</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2931"><a href="#L-2931"><span class="linenos">2931</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-2932"><a href="#L-2932"><span class="linenos">2932</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-2933"><a href="#L-2933"><span class="linenos">2933</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2934"><a href="#L-2934"><span class="linenos">2934</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2935"><a href="#L-2935"><span class="linenos">2935</span></a>
</span><span id="L-2936"><a href="#L-2936"><span class="linenos">2936</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="L-2937"><a href="#L-2937"><span class="linenos">2937</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-2938"><a href="#L-2938"><span class="linenos">2938</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="L-2939"><a href="#L-2939"><span class="linenos">2939</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-2940"><a href="#L-2940"><span class="linenos">2940</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2941"><a href="#L-2941"><span class="linenos">2941</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2942"><a href="#L-2942"><span class="linenos">2942</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2943"><a href="#L-2943"><span class="linenos">2943</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2944"><a href="#L-2944"><span class="linenos">2944</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-2945"><a href="#L-2945"><span class="linenos">2945</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="L-2946"><a href="#L-2946"><span class="linenos">2946</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2947"><a href="#L-2947"><span class="linenos">2947</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="L-2948"><a href="#L-2948"><span class="linenos">2948</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2949"><a href="#L-2949"><span class="linenos">2949</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2950"><a href="#L-2950"><span class="linenos">2950</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2951"><a href="#L-2951"><span class="linenos">2951</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2952"><a href="#L-2952"><span class="linenos">2952</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2953"><a href="#L-2953"><span class="linenos">2953</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2954"><a href="#L-2954"><span class="linenos">2954</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2955"><a href="#L-2955"><span class="linenos">2955</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2956"><a href="#L-2956"><span class="linenos">2956</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2957"><a href="#L-2957"><span class="linenos">2957</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2958"><a href="#L-2958"><span class="linenos">2958</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2959"><a href="#L-2959"><span class="linenos">2959</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2960"><a href="#L-2960"><span class="linenos">2960</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2961"><a href="#L-2961"><span class="linenos">2961</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="L-2962"><a href="#L-2962"><span class="linenos">2962</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2963"><a href="#L-2963"><span class="linenos">2963</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2964"><a href="#L-2964"><span class="linenos">2964</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="L-2965"><a href="#L-2965"><span class="linenos">2965</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2966"><a href="#L-2966"><span class="linenos">2966</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2967"><a href="#L-2967"><span class="linenos">2967</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2968"><a href="#L-2968"><span class="linenos">2968</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2969"><a href="#L-2969"><span class="linenos">2969</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2970"><a href="#L-2970"><span class="linenos">2970</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-2971"><a href="#L-2971"><span class="linenos">2971</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2972"><a href="#L-2972"><span class="linenos">2972</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2973"><a href="#L-2973"><span class="linenos">2973</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-2974"><a href="#L-2974"><span class="linenos">2974</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-2975"><a href="#L-2975"><span class="linenos">2975</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-2976"><a href="#L-2976"><span class="linenos">2976</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2977"><a href="#L-2977"><span class="linenos">2977</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2978"><a href="#L-2978"><span class="linenos">2978</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-2979"><a href="#L-2979"><span class="linenos">2979</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2980"><a href="#L-2980"><span class="linenos">2980</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2981"><a href="#L-2981"><span class="linenos">2981</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-2982"><a href="#L-2982"><span class="linenos">2982</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-2983"><a href="#L-2983"><span class="linenos">2983</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2984"><a href="#L-2984"><span class="linenos">2984</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2985"><a href="#L-2985"><span class="linenos">2985</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="L-2986"><a href="#L-2986"><span class="linenos">2986</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="L-2987"><a href="#L-2987"><span class="linenos">2987</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2988"><a href="#L-2988"><span class="linenos">2988</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-2989"><a href="#L-2989"><span class="linenos">2989</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2990"><a href="#L-2990"><span class="linenos">2990</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-2991"><a href="#L-2991"><span class="linenos">2991</span></a>
</span><span id="L-2992"><a href="#L-2992"><span class="linenos">2992</span></a>                    <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2993"><a href="#L-2993"><span class="linenos">2993</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-2994"><a href="#L-2994"><span class="linenos">2994</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-2995"><a href="#L-2995"><span class="linenos">2995</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-2996"><a href="#L-2996"><span class="linenos">2996</span></a>
</span><span id="L-2997"><a href="#L-2997"><span class="linenos">2997</span></a>                    <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="L-2998"><a href="#L-2998"><span class="linenos">2998</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-2999"><a href="#L-2999"><span class="linenos">2999</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3000"><a href="#L-3000"><span class="linenos">3000</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-3001"><a href="#L-3001"><span class="linenos">3001</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3002"><a href="#L-3002"><span class="linenos">3002</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3003"><a href="#L-3003"><span class="linenos">3003</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-3004"><a href="#L-3004"><span class="linenos">3004</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3005"><a href="#L-3005"><span class="linenos">3005</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3006"><a href="#L-3006"><span class="linenos">3006</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="L-3007"><a href="#L-3007"><span class="linenos">3007</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-3008"><a href="#L-3008"><span class="linenos">3008</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3009"><a href="#L-3009"><span class="linenos">3009</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3010"><a href="#L-3010"><span class="linenos">3010</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-3011"><a href="#L-3011"><span class="linenos">3011</span></a>
</span><span id="L-3012"><a href="#L-3012"><span class="linenos">3012</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-3013"><a href="#L-3013"><span class="linenos">3013</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="L-3014"><a href="#L-3014"><span class="linenos">3014</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-3015"><a href="#L-3015"><span class="linenos">3015</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3016"><a href="#L-3016"><span class="linenos">3016</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-3017"><a href="#L-3017"><span class="linenos">3017</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-3018"><a href="#L-3018"><span class="linenos">3018</span></a>
</span><span id="L-3019"><a href="#L-3019"><span class="linenos">3019</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="L-3020"><a href="#L-3020"><span class="linenos">3020</span></a>
</span><span id="L-3021"><a href="#L-3021"><span class="linenos">3021</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3022"><a href="#L-3022"><span class="linenos">3022</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_probability&#39; parameter.</span>
</span><span id="L-3023"><a href="#L-3023"><span class="linenos">3023</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="L-3024"><a href="#L-3024"><span class="linenos">3024</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-3025"><a href="#L-3025"><span class="linenos">3025</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="L-3026"><a href="#L-3026"><span class="linenos">3026</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="L-3027"><a href="#L-3027"><span class="linenos">3027</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="L-3028"><a href="#L-3028"><span class="linenos">3028</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3029"><a href="#L-3029"><span class="linenos">3029</span></a>
</span><span id="L-3030"><a href="#L-3030"><span class="linenos">3030</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="L-3031"><a href="#L-3031"><span class="linenos">3031</span></a>
</span><span id="L-3032"><a href="#L-3032"><span class="linenos">3032</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="L-3033"><a href="#L-3033"><span class="linenos">3033</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="L-3034"><a href="#L-3034"><span class="linenos">3034</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="L-3035"><a href="#L-3035"><span class="linenos">3035</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="L-3036"><a href="#L-3036"><span class="linenos">3036</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3037"><a href="#L-3037"><span class="linenos">3037</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3038"><a href="#L-3038"><span class="linenos">3038</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-3039"><a href="#L-3039"><span class="linenos">3039</span></a>
</span><span id="L-3040"><a href="#L-3040"><span class="linenos">3040</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3041"><a href="#L-3041"><span class="linenos">3041</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-3042"><a href="#L-3042"><span class="linenos">3042</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="L-3043"><a href="#L-3043"><span class="linenos">3043</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="L-3044"><a href="#L-3044"><span class="linenos">3044</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3045"><a href="#L-3045"><span class="linenos">3045</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3046"><a href="#L-3046"><span class="linenos">3046</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3047"><a href="#L-3047"><span class="linenos">3047</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="L-3048"><a href="#L-3048"><span class="linenos">3048</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3049"><a href="#L-3049"><span class="linenos">3049</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3050"><a href="#L-3050"><span class="linenos">3050</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-3051"><a href="#L-3051"><span class="linenos">3051</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3052"><a href="#L-3052"><span class="linenos">3052</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="L-3053"><a href="#L-3053"><span class="linenos">3053</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-3054"><a href="#L-3054"><span class="linenos">3054</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3055"><a href="#L-3055"><span class="linenos">3055</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="L-3056"><a href="#L-3056"><span class="linenos">3056</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3057"><a href="#L-3057"><span class="linenos">3057</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3058"><a href="#L-3058"><span class="linenos">3058</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-3059"><a href="#L-3059"><span class="linenos">3059</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3060"><a href="#L-3060"><span class="linenos">3060</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="L-3061"><a href="#L-3061"><span class="linenos">3061</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="L-3062"><a href="#L-3062"><span class="linenos">3062</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-3063"><a href="#L-3063"><span class="linenos">3063</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3064"><a href="#L-3064"><span class="linenos">3064</span></a>
</span><span id="L-3065"><a href="#L-3065"><span class="linenos">3065</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3066"><a href="#L-3066"><span class="linenos">3066</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3067"><a href="#L-3067"><span class="linenos">3067</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3068"><a href="#L-3068"><span class="linenos">3068</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3069"><a href="#L-3069"><span class="linenos">3069</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3070"><a href="#L-3070"><span class="linenos">3070</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3071"><a href="#L-3071"><span class="linenos">3071</span></a>
</span><span id="L-3072"><a href="#L-3072"><span class="linenos">3072</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="L-3073"><a href="#L-3073"><span class="linenos">3073</span></a>
</span><span id="L-3074"><a href="#L-3074"><span class="linenos">3074</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-3075"><a href="#L-3075"><span class="linenos">3075</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="L-3076"><a href="#L-3076"><span class="linenos">3076</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="L-3077"><a href="#L-3077"><span class="linenos">3077</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3078"><a href="#L-3078"><span class="linenos">3078</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3079"><a href="#L-3079"><span class="linenos">3079</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-3080"><a href="#L-3080"><span class="linenos">3080</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3081"><a href="#L-3081"><span class="linenos">3081</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="L-3082"><a href="#L-3082"><span class="linenos">3082</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="L-3083"><a href="#L-3083"><span class="linenos">3083</span></a>
</span><span id="L-3084"><a href="#L-3084"><span class="linenos">3084</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3085"><a href="#L-3085"><span class="linenos">3085</span></a>                                       <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-3086"><a href="#L-3086"><span class="linenos">3086</span></a>
</span><span id="L-3087"><a href="#L-3087"><span class="linenos">3087</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3088"><a href="#L-3088"><span class="linenos">3088</span></a><span class="sd">        Solves the duplicates in a solution by randomly selecting new values for the duplicating genes.</span>
</span><span id="L-3089"><a href="#L-3089"><span class="linenos">3089</span></a>
</span><span id="L-3090"><a href="#L-3090"><span class="linenos">3090</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="L-3091"><a href="#L-3091"><span class="linenos">3091</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="L-3092"><a href="#L-3092"><span class="linenos">3092</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="L-3093"><a href="#L-3093"><span class="linenos">3093</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="L-3094"><a href="#L-3094"><span class="linenos">3094</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="L-3095"><a href="#L-3095"><span class="linenos">3095</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="L-3096"><a href="#L-3096"><span class="linenos">3096</span></a>
</span><span id="L-3097"><a href="#L-3097"><span class="linenos">3097</span></a><span class="sd">        Returns:</span>
</span><span id="L-3098"><a href="#L-3098"><span class="linenos">3098</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="L-3099"><a href="#L-3099"><span class="linenos">3099</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="L-3100"><a href="#L-3100"><span class="linenos">3100</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="L-3101"><a href="#L-3101"><span class="linenos">3101</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3102"><a href="#L-3102"><span class="linenos">3102</span></a>
</span><span id="L-3103"><a href="#L-3103"><span class="linenos">3103</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-3104"><a href="#L-3104"><span class="linenos">3104</span></a>
</span><span id="L-3105"><a href="#L-3105"><span class="linenos">3105</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3106"><a href="#L-3106"><span class="linenos">3106</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3107"><a href="#L-3107"><span class="linenos">3107</span></a>
</span><span id="L-3108"><a href="#L-3108"><span class="linenos">3108</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-3109"><a href="#L-3109"><span class="linenos">3109</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3110"><a href="#L-3110"><span class="linenos">3110</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="L-3111"><a href="#L-3111"><span class="linenos">3111</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="L-3112"><a href="#L-3112"><span class="linenos">3112</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3113"><a href="#L-3113"><span class="linenos">3113</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3114"><a href="#L-3114"><span class="linenos">3114</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="L-3115"><a href="#L-3115"><span class="linenos">3115</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="L-3116"><a href="#L-3116"><span class="linenos">3116</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="L-3117"><a href="#L-3117"><span class="linenos">3117</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="L-3118"><a href="#L-3118"><span class="linenos">3118</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-3119"><a href="#L-3119"><span class="linenos">3119</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3120"><a href="#L-3120"><span class="linenos">3120</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3121"><a href="#L-3121"><span class="linenos">3121</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="L-3122"><a href="#L-3122"><span class="linenos">3122</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="L-3123"><a href="#L-3123"><span class="linenos">3123</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3124"><a href="#L-3124"><span class="linenos">3124</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3125"><a href="#L-3125"><span class="linenos">3125</span></a>                                <span class="k">pass</span>
</span><span id="L-3126"><a href="#L-3126"><span class="linenos">3126</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3127"><a href="#L-3127"><span class="linenos">3127</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="L-3128"><a href="#L-3128"><span class="linenos">3128</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3129"><a href="#L-3129"><span class="linenos">3129</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3130"><a href="#L-3130"><span class="linenos">3130</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="L-3131"><a href="#L-3131"><span class="linenos">3131</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="L-3132"><a href="#L-3132"><span class="linenos">3132</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="L-3133"><a href="#L-3133"><span class="linenos">3133</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="L-3134"><a href="#L-3134"><span class="linenos">3134</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="L-3135"><a href="#L-3135"><span class="linenos">3135</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3136"><a href="#L-3136"><span class="linenos">3136</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3137"><a href="#L-3137"><span class="linenos">3137</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="L-3138"><a href="#L-3138"><span class="linenos">3138</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="L-3139"><a href="#L-3139"><span class="linenos">3139</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3140"><a href="#L-3140"><span class="linenos">3140</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3141"><a href="#L-3141"><span class="linenos">3141</span></a>                                <span class="k">pass</span>
</span><span id="L-3142"><a href="#L-3142"><span class="linenos">3142</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3143"><a href="#L-3143"><span class="linenos">3143</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="L-3144"><a href="#L-3144"><span class="linenos">3144</span></a>
</span><span id="L-3145"><a href="#L-3145"><span class="linenos">3145</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3146"><a href="#L-3146"><span class="linenos">3146</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3147"><a href="#L-3147"><span class="linenos">3147</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="L-3148"><a href="#L-3148"><span class="linenos">3148</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3149"><a href="#L-3149"><span class="linenos">3149</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3150"><a href="#L-3150"><span class="linenos">3150</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="L-3151"><a href="#L-3151"><span class="linenos">3151</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3152"><a href="#L-3152"><span class="linenos">3152</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3153"><a href="#L-3153"><span class="linenos">3153</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="L-3154"><a href="#L-3154"><span class="linenos">3154</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3155"><a href="#L-3155"><span class="linenos">3155</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3156"><a href="#L-3156"><span class="linenos">3156</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="L-3157"><a href="#L-3157"><span class="linenos">3157</span></a>
</span><span id="L-3158"><a href="#L-3158"><span class="linenos">3158</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-3159"><a href="#L-3159"><span class="linenos">3159</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-3160"><a href="#L-3160"><span class="linenos">3160</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3161"><a href="#L-3161"><span class="linenos">3161</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3162"><a href="#L-3162"><span class="linenos">3162</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="L-3163"><a href="#L-3163"><span class="linenos">3163</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="L-3164"><a href="#L-3164"><span class="linenos">3164</span></a>                        <span class="k">continue</span>
</span><span id="L-3165"><a href="#L-3165"><span class="linenos">3165</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3166"><a href="#L-3166"><span class="linenos">3166</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="L-3167"><a href="#L-3167"><span class="linenos">3167</span></a>                        <span class="k">break</span>
</span><span id="L-3168"><a href="#L-3168"><span class="linenos">3168</span></a>
</span><span id="L-3169"><a href="#L-3169"><span class="linenos">3169</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="L-3170"><a href="#L-3170"><span class="linenos">3170</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3171"><a href="#L-3171"><span class="linenos">3171</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3172"><a href="#L-3172"><span class="linenos">3172</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="L-3173"><a href="#L-3173"><span class="linenos">3173</span></a>
</span><span id="L-3174"><a href="#L-3174"><span class="linenos">3174</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="L-3175"><a href="#L-3175"><span class="linenos">3175</span></a>
</span><span id="L-3176"><a href="#L-3176"><span class="linenos">3176</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-3177"><a href="#L-3177"><span class="linenos">3177</span></a>
</span><span id="L-3178"><a href="#L-3178"><span class="linenos">3178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3179"><a href="#L-3179"><span class="linenos">3179</span></a><span class="sd">        Solves the duplicates in a solution by selecting values for the duplicating genes from the gene space.</span>
</span><span id="L-3180"><a href="#L-3180"><span class="linenos">3180</span></a>
</span><span id="L-3181"><a href="#L-3181"><span class="linenos">3181</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="L-3182"><a href="#L-3182"><span class="linenos">3182</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="L-3183"><a href="#L-3183"><span class="linenos">3183</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="L-3184"><a href="#L-3184"><span class="linenos">3184</span></a>
</span><span id="L-3185"><a href="#L-3185"><span class="linenos">3185</span></a><span class="sd">        Returns:</span>
</span><span id="L-3186"><a href="#L-3186"><span class="linenos">3186</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="L-3187"><a href="#L-3187"><span class="linenos">3187</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="L-3188"><a href="#L-3188"><span class="linenos">3188</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="L-3189"><a href="#L-3189"><span class="linenos">3189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3190"><a href="#L-3190"><span class="linenos">3190</span></a>
</span><span id="L-3191"><a href="#L-3191"><span class="linenos">3191</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-3192"><a href="#L-3192"><span class="linenos">3192</span></a>
</span><span id="L-3193"><a href="#L-3193"><span class="linenos">3193</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3194"><a href="#L-3194"><span class="linenos">3194</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3195"><a href="#L-3195"><span class="linenos">3195</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="L-3196"><a href="#L-3196"><span class="linenos">3196</span></a>
</span><span id="L-3197"><a href="#L-3197"><span class="linenos">3197</span></a>        <span class="c1"># First try to solve the duplicates.</span>
</span><span id="L-3198"><a href="#L-3198"><span class="linenos">3198</span></a>        <span class="c1"># For a solution like [3 2 0 0], the indices of the 2 duplicating genes are 2 and 3.</span>
</span><span id="L-3199"><a href="#L-3199"><span class="linenos">3199</span></a>        <span class="c1"># The next call to the find_unique_value() method tries to change the value of the gene with index 3 to solve the duplicate.</span>
</span><span id="L-3200"><a href="#L-3200"><span class="linenos">3200</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3201"><a href="#L-3201"><span class="linenos">3201</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="L-3202"><a href="#L-3202"><span class="linenos">3202</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="L-3203"><a href="#L-3203"><span class="linenos">3203</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3204"><a href="#L-3204"><span class="linenos">3204</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="L-3205"><a href="#L-3205"><span class="linenos">3205</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="L-3206"><a href="#L-3206"><span class="linenos">3206</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="L-3207"><a href="#L-3207"><span class="linenos">3207</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3208"><a href="#L-3208"><span class="linenos">3208</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="L-3209"><a href="#L-3209"><span class="linenos">3209</span></a>
</span><span id="L-3210"><a href="#L-3210"><span class="linenos">3210</span></a>        <span class="c1"># Do another try if there exist duplicate genes.</span>
</span><span id="L-3211"><a href="#L-3211"><span class="linenos">3211</span></a>        <span class="c1"># If there are no possible values for the gene 3 with index 3 to solve the duplicate, try to change the value of the other gene with index 2.</span>
</span><span id="L-3212"><a href="#L-3212"><span class="linenos">3212</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3213"><a href="#L-3213"><span class="linenos">3213</span></a>            <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">new_solution</span> <span class="o">==</span> <span class="n">new_solution</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="L-3214"><a href="#L-3214"><span class="linenos">3214</span></a>                <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])</span>
</span><span id="L-3215"><a href="#L-3215"><span class="linenos">3215</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="L-3216"><a href="#L-3216"><span class="linenos">3216</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="L-3217"><a href="#L-3217"><span class="linenos">3217</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3218"><a href="#L-3218"><span class="linenos">3218</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="L-3219"><a href="#L-3219"><span class="linenos">3219</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="L-3220"><a href="#L-3220"><span class="linenos">3220</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="L-3221"><a href="#L-3221"><span class="linenos">3221</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3222"><a href="#L-3222"><span class="linenos">3222</span></a>            <span class="c1"># If there exist duplicate genes, then changing either of the 2 duplicating genes (with indices 2 and 3) will not solve the problem.</span>
</span><span id="L-3223"><a href="#L-3223"><span class="linenos">3223</span></a>            <span class="c1"># This problem can be solved by randomly changing one of the non-duplicating genes that may make a room for a unique value in one the 2 duplicating genes.</span>
</span><span id="L-3224"><a href="#L-3224"><span class="linenos">3224</span></a>            <span class="c1"># For example, if gene_space=[[3, 0, 1], [4, 1, 2], [0, 2], [3, 2, 0]] and the solution is [3 2 0 0], then the values of the last 2 genes duplicate.</span>
</span><span id="L-3225"><a href="#L-3225"><span class="linenos">3225</span></a>            <span class="c1"># There are no possible changes in the last 2 genes to solve the problem. But it could be solved by changing the second gene from 2 to 4.</span>
</span><span id="L-3226"><a href="#L-3226"><span class="linenos">3226</span></a>            <span class="c1"># As a result, any of the last 2 genes can take the value 2 and solve the duplicates.</span>
</span><span id="L-3227"><a href="#L-3227"><span class="linenos">3227</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="L-3228"><a href="#L-3228"><span class="linenos">3228</span></a>
</span><span id="L-3229"><a href="#L-3229"><span class="linenos">3229</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="L-3230"><a href="#L-3230"><span class="linenos">3230</span></a>
</span><span id="L-3231"><a href="#L-3231"><span class="linenos">3231</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space_OLD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="L-3232"><a href="#L-3232"><span class="linenos">3232</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="L-3233"><a href="#L-3233"><span class="linenos">3233</span></a>        <span class="c1"># Just for testing purposes.</span>
</span><span id="L-3234"><a href="#L-3234"><span class="linenos">3234</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="L-3235"><a href="#L-3235"><span class="linenos">3235</span></a>
</span><span id="L-3236"><a href="#L-3236"><span class="linenos">3236</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-3237"><a href="#L-3237"><span class="linenos">3237</span></a>
</span><span id="L-3238"><a href="#L-3238"><span class="linenos">3238</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3239"><a href="#L-3239"><span class="linenos">3239</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3240"><a href="#L-3240"><span class="linenos">3240</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="L-3241"><a href="#L-3241"><span class="linenos">3241</span></a>
</span><span id="L-3242"><a href="#L-3242"><span class="linenos">3242</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-3243"><a href="#L-3243"><span class="linenos">3243</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3244"><a href="#L-3244"><span class="linenos">3244</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="L-3245"><a href="#L-3245"><span class="linenos">3245</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="L-3246"><a href="#L-3246"><span class="linenos">3246</span></a>                    <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3247"><a href="#L-3247"><span class="linenos">3247</span></a>                                                         <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="L-3248"><a href="#L-3248"><span class="linenos">3248</span></a>                                                         <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3249"><a href="#L-3249"><span class="linenos">3249</span></a>
</span><span id="L-3250"><a href="#L-3250"><span class="linenos">3250</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-3251"><a href="#L-3251"><span class="linenos">3251</span></a>                        <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="L-3252"><a href="#L-3252"><span class="linenos">3252</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-3253"><a href="#L-3253"><span class="linenos">3253</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3254"><a href="#L-3254"><span class="linenos">3254</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3255"><a href="#L-3255"><span class="linenos">3255</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">))</span>
</span><span id="L-3256"><a href="#L-3256"><span class="linenos">3256</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="L-3257"><a href="#L-3257"><span class="linenos">3257</span></a>                        <span class="k">continue</span>
</span><span id="L-3258"><a href="#L-3258"><span class="linenos">3258</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3259"><a href="#L-3259"><span class="linenos">3259</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="L-3260"><a href="#L-3260"><span class="linenos">3260</span></a>                        <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="L-3261"><a href="#L-3261"><span class="linenos">3261</span></a>                        <span class="k">break</span>
</span><span id="L-3262"><a href="#L-3262"><span class="linenos">3262</span></a>
</span><span id="L-3263"><a href="#L-3263"><span class="linenos">3263</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="L-3264"><a href="#L-3264"><span class="linenos">3264</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3265"><a href="#L-3265"><span class="linenos">3265</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3266"><a href="#L-3266"><span class="linenos">3266</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="L-3267"><a href="#L-3267"><span class="linenos">3267</span></a>
</span><span id="L-3268"><a href="#L-3268"><span class="linenos">3268</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="L-3269"><a href="#L-3269"><span class="linenos">3269</span></a>
</span><span id="L-3270"><a href="#L-3270"><span class="linenos">3270</span></a>    <span class="k">def</span> <span class="nf">unique_int_gene_from_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_index</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3271"><a href="#L-3271"><span class="linenos">3271</span></a>                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3272"><a href="#L-3272"><span class="linenos">3272</span></a>
</span><span id="L-3273"><a href="#L-3273"><span class="linenos">3273</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3274"><a href="#L-3274"><span class="linenos">3274</span></a><span class="sd">        Finds a unique integer value for the gene.</span>
</span><span id="L-3275"><a href="#L-3275"><span class="linenos">3275</span></a>
</span><span id="L-3276"><a href="#L-3276"><span class="linenos">3276</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="L-3277"><a href="#L-3277"><span class="linenos">3277</span></a><span class="sd">        gene_index: Index of the gene to find a unique value.</span>
</span><span id="L-3278"><a href="#L-3278"><span class="linenos">3278</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="L-3279"><a href="#L-3279"><span class="linenos">3279</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="L-3280"><a href="#L-3280"><span class="linenos">3280</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="L-3281"><a href="#L-3281"><span class="linenos">3281</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="L-3282"><a href="#L-3282"><span class="linenos">3282</span></a>
</span><span id="L-3283"><a href="#L-3283"><span class="linenos">3283</span></a><span class="sd">        Returns:</span>
</span><span id="L-3284"><a href="#L-3284"><span class="linenos">3284</span></a><span class="sd">            selected_value: The new value of the gene. It may be identical to the original gene value in case there are no possible unique values for the gene.</span>
</span><span id="L-3285"><a href="#L-3285"><span class="linenos">3285</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3286"><a href="#L-3286"><span class="linenos">3286</span></a>
</span><span id="L-3287"><a href="#L-3287"><span class="linenos">3287</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3288"><a href="#L-3288"><span class="linenos">3288</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3289"><a href="#L-3289"><span class="linenos">3289</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-3290"><a href="#L-3290"><span class="linenos">3290</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3291"><a href="#L-3291"><span class="linenos">3291</span></a>                <span class="c1"># For non-integer steps, the numpy.arange() function returns zeros id the dtype parameter is set to an integer data type. So, this returns zeros if step is non-integer and dtype is set to an int data type: numpy.arange(min_val, max_val, step, dtype=gene_type[0])</span>
</span><span id="L-3292"><a href="#L-3292"><span class="linenos">3292</span></a>                <span class="c1"># To solve this issue, the data type casting will not be handled inside numpy.arange(). The range is generated by numpy.arange() and then the data type is converted using the numpy.asarray() function.</span>
</span><span id="L-3293"><a href="#L-3293"><span class="linenos">3293</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-3294"><a href="#L-3294"><span class="linenos">3294</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3295"><a href="#L-3295"><span class="linenos">3295</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3296"><a href="#L-3296"><span class="linenos">3296</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-3297"><a href="#L-3297"><span class="linenos">3297</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3298"><a href="#L-3298"><span class="linenos">3298</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-3299"><a href="#L-3299"><span class="linenos">3299</span></a>
</span><span id="L-3300"><a href="#L-3300"><span class="linenos">3300</span></a>        <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3301"><a href="#L-3301"><span class="linenos">3301</span></a>            <span class="k">pass</span>
</span><span id="L-3302"><a href="#L-3302"><span class="linenos">3302</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3303"><a href="#L-3303"><span class="linenos">3303</span></a>            <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">all_gene_values</span> <span class="o">+</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="L-3304"><a href="#L-3304"><span class="linenos">3304</span></a>
</span><span id="L-3305"><a href="#L-3305"><span class="linenos">3305</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3306"><a href="#L-3306"><span class="linenos">3306</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3307"><a href="#L-3307"><span class="linenos">3307</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="L-3308"><a href="#L-3308"><span class="linenos">3308</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3309"><a href="#L-3309"><span class="linenos">3309</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3310"><a href="#L-3310"><span class="linenos">3310</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="L-3311"><a href="#L-3311"><span class="linenos">3311</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-3312"><a href="#L-3312"><span class="linenos">3312</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3313"><a href="#L-3313"><span class="linenos">3313</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="L-3314"><a href="#L-3314"><span class="linenos">3314</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3315"><a href="#L-3315"><span class="linenos">3315</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3316"><a href="#L-3316"><span class="linenos">3316</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="L-3317"><a href="#L-3317"><span class="linenos">3317</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3318"><a href="#L-3318"><span class="linenos">3318</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3319"><a href="#L-3319"><span class="linenos">3319</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="L-3320"><a href="#L-3320"><span class="linenos">3320</span></a>
</span><span id="L-3321"><a href="#L-3321"><span class="linenos">3321</span></a>        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="L-3322"><a href="#L-3322"><span class="linenos">3322</span></a>
</span><span id="L-3323"><a href="#L-3323"><span class="linenos">3323</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3324"><a href="#L-3324"><span class="linenos">3324</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3325"><a href="#L-3325"><span class="linenos">3325</span></a>                <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but there is no enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="L-3326"><a href="#L-3326"><span class="linenos">3326</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="L-3327"><a href="#L-3327"><span class="linenos">3327</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3328"><a href="#L-3328"><span class="linenos">3328</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-3329"><a href="#L-3329"><span class="linenos">3329</span></a>
</span><span id="L-3330"><a href="#L-3330"><span class="linenos">3330</span></a>        <span class="c1"># if self.gene_type_single == True:</span>
</span><span id="L-3331"><a href="#L-3331"><span class="linenos">3331</span></a>        <span class="c1">#    selected_value = gene_type[0](selected_value)</span>
</span><span id="L-3332"><a href="#L-3332"><span class="linenos">3332</span></a>        <span class="c1"># else:</span>
</span><span id="L-3333"><a href="#L-3333"><span class="linenos">3333</span></a>        <span class="c1">#    selected_value = gene_type[gene_index][0](selected_value)</span>
</span><span id="L-3334"><a href="#L-3334"><span class="linenos">3334</span></a>
</span><span id="L-3335"><a href="#L-3335"><span class="linenos">3335</span></a>        <span class="k">return</span> <span class="n">selected_value</span>
</span><span id="L-3336"><a href="#L-3336"><span class="linenos">3336</span></a>
</span><span id="L-3337"><a href="#L-3337"><span class="linenos">3337</span></a>    <span class="k">def</span> <span class="nf">unique_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="L-3338"><a href="#L-3338"><span class="linenos">3338</span></a>                              <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-3339"><a href="#L-3339"><span class="linenos">3339</span></a>
</span><span id="L-3340"><a href="#L-3340"><span class="linenos">3340</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3341"><a href="#L-3341"><span class="linenos">3341</span></a><span class="sd">        Loops through all the duplicating genes to find unique values that from their gene spaces to solve the duplicates.</span>
</span><span id="L-3342"><a href="#L-3342"><span class="linenos">3342</span></a><span class="sd">        For each duplicating gene, a call to the unique_gene_by_space() is made.</span>
</span><span id="L-3343"><a href="#L-3343"><span class="linenos">3343</span></a>
</span><span id="L-3344"><a href="#L-3344"><span class="linenos">3344</span></a><span class="sd">        new_solution: A solution with duplicate values.</span>
</span><span id="L-3345"><a href="#L-3345"><span class="linenos">3345</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="L-3346"><a href="#L-3346"><span class="linenos">3346</span></a><span class="sd">        not_unique_indices: Indices with duplicating values.</span>
</span><span id="L-3347"><a href="#L-3347"><span class="linenos">3347</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="L-3348"><a href="#L-3348"><span class="linenos">3348</span></a>
</span><span id="L-3349"><a href="#L-3349"><span class="linenos">3349</span></a><span class="sd">        Returns:</span>
</span><span id="L-3350"><a href="#L-3350"><span class="linenos">3350</span></a><span class="sd">            new_solution: Solution after trying to solve all of its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="L-3351"><a href="#L-3351"><span class="linenos">3351</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="L-3352"><a href="#L-3352"><span class="linenos">3352</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="L-3353"><a href="#L-3353"><span class="linenos">3353</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3354"><a href="#L-3354"><span class="linenos">3354</span></a>
</span><span id="L-3355"><a href="#L-3355"><span class="linenos">3355</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-3356"><a href="#L-3356"><span class="linenos">3356</span></a>        <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="L-3357"><a href="#L-3357"><span class="linenos">3357</span></a>            <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="L-3358"><a href="#L-3358"><span class="linenos">3358</span></a>                <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="L-3359"><a href="#L-3359"><span class="linenos">3359</span></a>                                                     <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="L-3360"><a href="#L-3360"><span class="linenos">3360</span></a>                                                     <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="L-3361"><a href="#L-3361"><span class="linenos">3361</span></a>                                                     <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="L-3362"><a href="#L-3362"><span class="linenos">3362</span></a>
</span><span id="L-3363"><a href="#L-3363"><span class="linenos">3363</span></a>                <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-3364"><a href="#L-3364"><span class="linenos">3364</span></a>                    <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="L-3365"><a href="#L-3365"><span class="linenos">3365</span></a>                    <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-3366"><a href="#L-3366"><span class="linenos">3366</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3367"><a href="#L-3367"><span class="linenos">3367</span></a>                        <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3368"><a href="#L-3368"><span class="linenos">3368</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="L-3369"><a href="#L-3369"><span class="linenos">3369</span></a>                <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="L-3370"><a href="#L-3370"><span class="linenos">3370</span></a>                    <span class="k">continue</span>
</span><span id="L-3371"><a href="#L-3371"><span class="linenos">3371</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3372"><a href="#L-3372"><span class="linenos">3372</span></a>                    <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="L-3373"><a href="#L-3373"><span class="linenos">3373</span></a>                    <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="L-3374"><a href="#L-3374"><span class="linenos">3374</span></a>                    <span class="k">break</span>
</span><span id="L-3375"><a href="#L-3375"><span class="linenos">3375</span></a>
</span><span id="L-3376"><a href="#L-3376"><span class="linenos">3376</span></a>        <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="L-3377"><a href="#L-3377"><span class="linenos">3377</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-3378"><a href="#L-3378"><span class="linenos">3378</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="L-3379"><a href="#L-3379"><span class="linenos">3379</span></a>        <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="L-3380"><a href="#L-3380"><span class="linenos">3380</span></a>
</span><span id="L-3381"><a href="#L-3381"><span class="linenos">3381</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="L-3382"><a href="#L-3382"><span class="linenos">3382</span></a>
</span><span id="L-3383"><a href="#L-3383"><span class="linenos">3383</span></a>    <span class="k">def</span> <span class="nf">unique_gene_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-3384"><a href="#L-3384"><span class="linenos">3384</span></a>
</span><span id="L-3385"><a href="#L-3385"><span class="linenos">3385</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3386"><a href="#L-3386"><span class="linenos">3386</span></a><span class="sd">        Returns a unique gene value for a single gene based on its value space to solve the duplicates.</span>
</span><span id="L-3387"><a href="#L-3387"><span class="linenos">3387</span></a>
</span><span id="L-3388"><a href="#L-3388"><span class="linenos">3388</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="L-3389"><a href="#L-3389"><span class="linenos">3389</span></a><span class="sd">        gene_idx: The index of the gene that duplicates its value with another gene.</span>
</span><span id="L-3390"><a href="#L-3390"><span class="linenos">3390</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="L-3391"><a href="#L-3391"><span class="linenos">3391</span></a>
</span><span id="L-3392"><a href="#L-3392"><span class="linenos">3392</span></a><span class="sd">        Returns:</span>
</span><span id="L-3393"><a href="#L-3393"><span class="linenos">3393</span></a><span class="sd">            A unique value, if exists, for the gene.</span>
</span><span id="L-3394"><a href="#L-3394"><span class="linenos">3394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3395"><a href="#L-3395"><span class="linenos">3395</span></a>
</span><span id="L-3396"><a href="#L-3396"><span class="linenos">3396</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="L-3397"><a href="#L-3397"><span class="linenos">3397</span></a>            <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="L-3398"><a href="#L-3398"><span class="linenos">3398</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="L-3399"><a href="#L-3399"><span class="linenos">3399</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-3400"><a href="#L-3400"><span class="linenos">3400</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3401"><a href="#L-3401"><span class="linenos">3401</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-3402"><a href="#L-3402"><span class="linenos">3402</span></a>
</span><span id="L-3403"><a href="#L-3403"><span class="linenos">3403</span></a>            <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="L-3404"><a href="#L-3404"><span class="linenos">3404</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="L-3405"><a href="#L-3405"><span class="linenos">3405</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="L-3406"><a href="#L-3406"><span class="linenos">3406</span></a>                <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="L-3407"><a href="#L-3407"><span class="linenos">3407</span></a>            <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3408"><a href="#L-3408"><span class="linenos">3408</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3409"><a href="#L-3409"><span class="linenos">3409</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3410"><a href="#L-3410"><span class="linenos">3410</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3411"><a href="#L-3411"><span class="linenos">3411</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3412"><a href="#L-3412"><span class="linenos">3412</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3413"><a href="#L-3413"><span class="linenos">3413</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3414"><a href="#L-3414"><span class="linenos">3414</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3415"><a href="#L-3415"><span class="linenos">3415</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3416"><a href="#L-3416"><span class="linenos">3416</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3417"><a href="#L-3417"><span class="linenos">3417</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3418"><a href="#L-3418"><span class="linenos">3418</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3419"><a href="#L-3419"><span class="linenos">3419</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3420"><a href="#L-3420"><span class="linenos">3420</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3421"><a href="#L-3421"><span class="linenos">3421</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3422"><a href="#L-3422"><span class="linenos">3422</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3423"><a href="#L-3423"><span class="linenos">3423</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="L-3424"><a href="#L-3424"><span class="linenos">3424</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3425"><a href="#L-3425"><span class="linenos">3425</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3426"><a href="#L-3426"><span class="linenos">3426</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3427"><a href="#L-3427"><span class="linenos">3427</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3428"><a href="#L-3428"><span class="linenos">3428</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3429"><a href="#L-3429"><span class="linenos">3429</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3430"><a href="#L-3430"><span class="linenos">3430</span></a>                            <span class="k">pass</span>
</span><span id="L-3431"><a href="#L-3431"><span class="linenos">3431</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3432"><a href="#L-3432"><span class="linenos">3432</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3433"><a href="#L-3433"><span class="linenos">3433</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3434"><a href="#L-3434"><span class="linenos">3434</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3435"><a href="#L-3435"><span class="linenos">3435</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3436"><a href="#L-3436"><span class="linenos">3436</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3437"><a href="#L-3437"><span class="linenos">3437</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3438"><a href="#L-3438"><span class="linenos">3438</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3439"><a href="#L-3439"><span class="linenos">3439</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3440"><a href="#L-3440"><span class="linenos">3440</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3441"><a href="#L-3441"><span class="linenos">3441</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3442"><a href="#L-3442"><span class="linenos">3442</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3443"><a href="#L-3443"><span class="linenos">3443</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3444"><a href="#L-3444"><span class="linenos">3444</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3445"><a href="#L-3445"><span class="linenos">3445</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3446"><a href="#L-3446"><span class="linenos">3446</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3447"><a href="#L-3447"><span class="linenos">3447</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3448"><a href="#L-3448"><span class="linenos">3448</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="L-3449"><a href="#L-3449"><span class="linenos">3449</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3450"><a href="#L-3450"><span class="linenos">3450</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3451"><a href="#L-3451"><span class="linenos">3451</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3452"><a href="#L-3452"><span class="linenos">3452</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3453"><a href="#L-3453"><span class="linenos">3453</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3454"><a href="#L-3454"><span class="linenos">3454</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3455"><a href="#L-3455"><span class="linenos">3455</span></a>                            <span class="k">pass</span>
</span><span id="L-3456"><a href="#L-3456"><span class="linenos">3456</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3457"><a href="#L-3457"><span class="linenos">3457</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3458"><a href="#L-3458"><span class="linenos">3458</span></a>
</span><span id="L-3459"><a href="#L-3459"><span class="linenos">3459</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3460"><a href="#L-3460"><span class="linenos">3460</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3461"><a href="#L-3461"><span class="linenos">3461</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3462"><a href="#L-3462"><span class="linenos">3462</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3463"><a href="#L-3463"><span class="linenos">3463</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3464"><a href="#L-3464"><span class="linenos">3464</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3465"><a href="#L-3465"><span class="linenos">3465</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3466"><a href="#L-3466"><span class="linenos">3466</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3467"><a href="#L-3467"><span class="linenos">3467</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3468"><a href="#L-3468"><span class="linenos">3468</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3469"><a href="#L-3469"><span class="linenos">3469</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3470"><a href="#L-3470"><span class="linenos">3470</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3471"><a href="#L-3471"><span class="linenos">3471</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3472"><a href="#L-3472"><span class="linenos">3472</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3473"><a href="#L-3473"><span class="linenos">3473</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3474"><a href="#L-3474"><span class="linenos">3474</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3475"><a href="#L-3475"><span class="linenos">3475</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3476"><a href="#L-3476"><span class="linenos">3476</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3477"><a href="#L-3477"><span class="linenos">3477</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3478"><a href="#L-3478"><span class="linenos">3478</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3479"><a href="#L-3479"><span class="linenos">3479</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3480"><a href="#L-3480"><span class="linenos">3480</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3481"><a href="#L-3481"><span class="linenos">3481</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3482"><a href="#L-3482"><span class="linenos">3482</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3483"><a href="#L-3483"><span class="linenos">3483</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3484"><a href="#L-3484"><span class="linenos">3484</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3485"><a href="#L-3485"><span class="linenos">3485</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3486"><a href="#L-3486"><span class="linenos">3486</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3487"><a href="#L-3487"><span class="linenos">3487</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3488"><a href="#L-3488"><span class="linenos">3488</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3489"><a href="#L-3489"><span class="linenos">3489</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3490"><a href="#L-3490"><span class="linenos">3490</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3491"><a href="#L-3491"><span class="linenos">3491</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3492"><a href="#L-3492"><span class="linenos">3492</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3493"><a href="#L-3493"><span class="linenos">3493</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3494"><a href="#L-3494"><span class="linenos">3494</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3495"><a href="#L-3495"><span class="linenos">3495</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3496"><a href="#L-3496"><span class="linenos">3496</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3497"><a href="#L-3497"><span class="linenos">3497</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3498"><a href="#L-3498"><span class="linenos">3498</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3499"><a href="#L-3499"><span class="linenos">3499</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3500"><a href="#L-3500"><span class="linenos">3500</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-3501"><a href="#L-3501"><span class="linenos">3501</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3502"><a href="#L-3502"><span class="linenos">3502</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3503"><a href="#L-3503"><span class="linenos">3503</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3504"><a href="#L-3504"><span class="linenos">3504</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3505"><a href="#L-3505"><span class="linenos">3505</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3506"><a href="#L-3506"><span class="linenos">3506</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3507"><a href="#L-3507"><span class="linenos">3507</span></a>                            <span class="k">pass</span>
</span><span id="L-3508"><a href="#L-3508"><span class="linenos">3508</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3509"><a href="#L-3509"><span class="linenos">3509</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3510"><a href="#L-3510"><span class="linenos">3510</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3511"><a href="#L-3511"><span class="linenos">3511</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3512"><a href="#L-3512"><span class="linenos">3512</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3513"><a href="#L-3513"><span class="linenos">3513</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3514"><a href="#L-3514"><span class="linenos">3514</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3515"><a href="#L-3515"><span class="linenos">3515</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3516"><a href="#L-3516"><span class="linenos">3516</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3517"><a href="#L-3517"><span class="linenos">3517</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3518"><a href="#L-3518"><span class="linenos">3518</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3519"><a href="#L-3519"><span class="linenos">3519</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3520"><a href="#L-3520"><span class="linenos">3520</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3521"><a href="#L-3521"><span class="linenos">3521</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3522"><a href="#L-3522"><span class="linenos">3522</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3523"><a href="#L-3523"><span class="linenos">3523</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3524"><a href="#L-3524"><span class="linenos">3524</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3525"><a href="#L-3525"><span class="linenos">3525</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3526"><a href="#L-3526"><span class="linenos">3526</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3527"><a href="#L-3527"><span class="linenos">3527</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3528"><a href="#L-3528"><span class="linenos">3528</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3529"><a href="#L-3529"><span class="linenos">3529</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3530"><a href="#L-3530"><span class="linenos">3530</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3531"><a href="#L-3531"><span class="linenos">3531</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3532"><a href="#L-3532"><span class="linenos">3532</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3533"><a href="#L-3533"><span class="linenos">3533</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3534"><a href="#L-3534"><span class="linenos">3534</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3535"><a href="#L-3535"><span class="linenos">3535</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3536"><a href="#L-3536"><span class="linenos">3536</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3537"><a href="#L-3537"><span class="linenos">3537</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3538"><a href="#L-3538"><span class="linenos">3538</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3539"><a href="#L-3539"><span class="linenos">3539</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3540"><a href="#L-3540"><span class="linenos">3540</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3541"><a href="#L-3541"><span class="linenos">3541</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3542"><a href="#L-3542"><span class="linenos">3542</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3543"><a href="#L-3543"><span class="linenos">3543</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3544"><a href="#L-3544"><span class="linenos">3544</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3545"><a href="#L-3545"><span class="linenos">3545</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3546"><a href="#L-3546"><span class="linenos">3546</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3547"><a href="#L-3547"><span class="linenos">3547</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3548"><a href="#L-3548"><span class="linenos">3548</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3549"><a href="#L-3549"><span class="linenos">3549</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3550"><a href="#L-3550"><span class="linenos">3550</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-3551"><a href="#L-3551"><span class="linenos">3551</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3552"><a href="#L-3552"><span class="linenos">3552</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3553"><a href="#L-3553"><span class="linenos">3553</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3554"><a href="#L-3554"><span class="linenos">3554</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3555"><a href="#L-3555"><span class="linenos">3555</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3556"><a href="#L-3556"><span class="linenos">3556</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3557"><a href="#L-3557"><span class="linenos">3557</span></a>                            <span class="k">pass</span>
</span><span id="L-3558"><a href="#L-3558"><span class="linenos">3558</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3559"><a href="#L-3559"><span class="linenos">3559</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3560"><a href="#L-3560"><span class="linenos">3560</span></a>
</span><span id="L-3561"><a href="#L-3561"><span class="linenos">3561</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3562"><a href="#L-3562"><span class="linenos">3562</span></a>                <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-3563"><a href="#L-3563"><span class="linenos">3563</span></a>                <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="L-3564"><a href="#L-3564"><span class="linenos">3564</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3565"><a href="#L-3565"><span class="linenos">3565</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3566"><a href="#L-3566"><span class="linenos">3566</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3567"><a href="#L-3567"><span class="linenos">3567</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the space of the gene with index </span><span class="si">{gene_idx}</span><span class="s2"> has only a single value. Thus, duplicates are possible.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3568"><a href="#L-3568"><span class="linenos">3568</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">))</span>
</span><span id="L-3569"><a href="#L-3569"><span class="linenos">3569</span></a>                <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="L-3570"><a href="#L-3570"><span class="linenos">3570</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3571"><a href="#L-3571"><span class="linenos">3571</span></a>                    <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="L-3572"><a href="#L-3572"><span class="linenos">3572</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3573"><a href="#L-3573"><span class="linenos">3573</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3574"><a href="#L-3574"><span class="linenos">3574</span></a>                            <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="L-3575"><a href="#L-3575"><span class="linenos">3575</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-3576"><a href="#L-3576"><span class="linenos">3576</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3577"><a href="#L-3577"><span class="linenos">3577</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-3578"><a href="#L-3578"><span class="linenos">3578</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3579"><a href="#L-3579"><span class="linenos">3579</span></a>            <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="L-3580"><a href="#L-3580"><span class="linenos">3580</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-3581"><a href="#L-3581"><span class="linenos">3581</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3582"><a href="#L-3582"><span class="linenos">3582</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3583"><a href="#L-3583"><span class="linenos">3583</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3584"><a href="#L-3584"><span class="linenos">3584</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3585"><a href="#L-3585"><span class="linenos">3585</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3586"><a href="#L-3586"><span class="linenos">3586</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3587"><a href="#L-3587"><span class="linenos">3587</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3588"><a href="#L-3588"><span class="linenos">3588</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3589"><a href="#L-3589"><span class="linenos">3589</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3590"><a href="#L-3590"><span class="linenos">3590</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3591"><a href="#L-3591"><span class="linenos">3591</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3592"><a href="#L-3592"><span class="linenos">3592</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3593"><a href="#L-3593"><span class="linenos">3593</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3594"><a href="#L-3594"><span class="linenos">3594</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3595"><a href="#L-3595"><span class="linenos">3595</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3596"><a href="#L-3596"><span class="linenos">3596</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3597"><a href="#L-3597"><span class="linenos">3597</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3598"><a href="#L-3598"><span class="linenos">3598</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3599"><a href="#L-3599"><span class="linenos">3599</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3600"><a href="#L-3600"><span class="linenos">3600</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3601"><a href="#L-3601"><span class="linenos">3601</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3602"><a href="#L-3602"><span class="linenos">3602</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3603"><a href="#L-3603"><span class="linenos">3603</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3604"><a href="#L-3604"><span class="linenos">3604</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3605"><a href="#L-3605"><span class="linenos">3605</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3606"><a href="#L-3606"><span class="linenos">3606</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3607"><a href="#L-3607"><span class="linenos">3607</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3608"><a href="#L-3608"><span class="linenos">3608</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3609"><a href="#L-3609"><span class="linenos">3609</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3610"><a href="#L-3610"><span class="linenos">3610</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3611"><a href="#L-3611"><span class="linenos">3611</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3612"><a href="#L-3612"><span class="linenos">3612</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3613"><a href="#L-3613"><span class="linenos">3613</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3614"><a href="#L-3614"><span class="linenos">3614</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3615"><a href="#L-3615"><span class="linenos">3615</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3616"><a href="#L-3616"><span class="linenos">3616</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3617"><a href="#L-3617"><span class="linenos">3617</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3618"><a href="#L-3618"><span class="linenos">3618</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="L-3619"><a href="#L-3619"><span class="linenos">3619</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3620"><a href="#L-3620"><span class="linenos">3620</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3621"><a href="#L-3621"><span class="linenos">3621</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3622"><a href="#L-3622"><span class="linenos">3622</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-3623"><a href="#L-3623"><span class="linenos">3623</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3624"><a href="#L-3624"><span class="linenos">3624</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3625"><a href="#L-3625"><span class="linenos">3625</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3626"><a href="#L-3626"><span class="linenos">3626</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3627"><a href="#L-3627"><span class="linenos">3627</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3628"><a href="#L-3628"><span class="linenos">3628</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3629"><a href="#L-3629"><span class="linenos">3629</span></a>                            <span class="k">pass</span>
</span><span id="L-3630"><a href="#L-3630"><span class="linenos">3630</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3631"><a href="#L-3631"><span class="linenos">3631</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3632"><a href="#L-3632"><span class="linenos">3632</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3633"><a href="#L-3633"><span class="linenos">3633</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="L-3634"><a href="#L-3634"><span class="linenos">3634</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3635"><a href="#L-3635"><span class="linenos">3635</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3636"><a href="#L-3636"><span class="linenos">3636</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3637"><a href="#L-3637"><span class="linenos">3637</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3638"><a href="#L-3638"><span class="linenos">3638</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3639"><a href="#L-3639"><span class="linenos">3639</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3640"><a href="#L-3640"><span class="linenos">3640</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3641"><a href="#L-3641"><span class="linenos">3641</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3642"><a href="#L-3642"><span class="linenos">3642</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3643"><a href="#L-3643"><span class="linenos">3643</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3644"><a href="#L-3644"><span class="linenos">3644</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3645"><a href="#L-3645"><span class="linenos">3645</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3646"><a href="#L-3646"><span class="linenos">3646</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3647"><a href="#L-3647"><span class="linenos">3647</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3648"><a href="#L-3648"><span class="linenos">3648</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3649"><a href="#L-3649"><span class="linenos">3649</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3650"><a href="#L-3650"><span class="linenos">3650</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3651"><a href="#L-3651"><span class="linenos">3651</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3652"><a href="#L-3652"><span class="linenos">3652</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3653"><a href="#L-3653"><span class="linenos">3653</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3654"><a href="#L-3654"><span class="linenos">3654</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3655"><a href="#L-3655"><span class="linenos">3655</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3656"><a href="#L-3656"><span class="linenos">3656</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3657"><a href="#L-3657"><span class="linenos">3657</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="L-3658"><a href="#L-3658"><span class="linenos">3658</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3659"><a href="#L-3659"><span class="linenos">3659</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3660"><a href="#L-3660"><span class="linenos">3660</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3661"><a href="#L-3661"><span class="linenos">3661</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="L-3662"><a href="#L-3662"><span class="linenos">3662</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="L-3663"><a href="#L-3663"><span class="linenos">3663</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3664"><a href="#L-3664"><span class="linenos">3664</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3665"><a href="#L-3665"><span class="linenos">3665</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-3666"><a href="#L-3666"><span class="linenos">3666</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-3667"><a href="#L-3667"><span class="linenos">3667</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="L-3668"><a href="#L-3668"><span class="linenos">3668</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-3669"><a href="#L-3669"><span class="linenos">3669</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="L-3670"><a href="#L-3670"><span class="linenos">3670</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-3671"><a href="#L-3671"><span class="linenos">3671</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3672"><a href="#L-3672"><span class="linenos">3672</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3673"><a href="#L-3673"><span class="linenos">3673</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="L-3674"><a href="#L-3674"><span class="linenos">3674</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3675"><a href="#L-3675"><span class="linenos">3675</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3676"><a href="#L-3676"><span class="linenos">3676</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="L-3677"><a href="#L-3677"><span class="linenos">3677</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="L-3678"><a href="#L-3678"><span class="linenos">3678</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3679"><a href="#L-3679"><span class="linenos">3679</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="L-3680"><a href="#L-3680"><span class="linenos">3680</span></a>                            <span class="k">pass</span>
</span><span id="L-3681"><a href="#L-3681"><span class="linenos">3681</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3682"><a href="#L-3682"><span class="linenos">3682</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="L-3683"><a href="#L-3683"><span class="linenos">3683</span></a>
</span><span id="L-3684"><a href="#L-3684"><span class="linenos">3684</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3685"><a href="#L-3685"><span class="linenos">3685</span></a>                <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="L-3686"><a href="#L-3686"><span class="linenos">3686</span></a>                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="L-3687"><a href="#L-3687"><span class="linenos">3687</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3688"><a href="#L-3688"><span class="linenos">3688</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3689"><a href="#L-3689"><span class="linenos">3689</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="L-3690"><a href="#L-3690"><span class="linenos">3690</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="L-3691"><a href="#L-3691"><span class="linenos">3691</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3692"><a href="#L-3692"><span class="linenos">3692</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="L-3693"><a href="#L-3693"><span class="linenos">3693</span></a>
</span><span id="L-3694"><a href="#L-3694"><span class="linenos">3694</span></a>        <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3695"><a href="#L-3695"><span class="linenos">3695</span></a>            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="L-3696"><a href="#L-3696"><span class="linenos">3696</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="L-3697"><a href="#L-3697"><span class="linenos">3697</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-3698"><a href="#L-3698"><span class="linenos">3698</span></a>
</span><span id="L-3699"><a href="#L-3699"><span class="linenos">3699</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="L-3700"><a href="#L-3700"><span class="linenos">3700</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3701"><a href="#L-3701"><span class="linenos">3701</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-3702"><a href="#L-3702"><span class="linenos">3702</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3703"><a href="#L-3703"><span class="linenos">3703</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3704"><a href="#L-3704"><span class="linenos">3704</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-3705"><a href="#L-3705"><span class="linenos">3705</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3706"><a href="#L-3706"><span class="linenos">3706</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3707"><a href="#L-3707"><span class="linenos">3707</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="L-3708"><a href="#L-3708"><span class="linenos">3708</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-3709"><a href="#L-3709"><span class="linenos">3709</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3710"><a href="#L-3710"><span class="linenos">3710</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="L-3711"><a href="#L-3711"><span class="linenos">3711</span></a>
</span><span id="L-3712"><a href="#L-3712"><span class="linenos">3712</span></a>        <span class="k">return</span> <span class="n">value_from_space</span>
</span><span id="L-3713"><a href="#L-3713"><span class="linenos">3713</span></a>
</span><span id="L-3714"><a href="#L-3714"><span class="linenos">3714</span></a>    <span class="k">def</span> <span class="nf">best_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3715"><a href="#L-3715"><span class="linenos">3715</span></a>
</span><span id="L-3716"><a href="#L-3716"><span class="linenos">3716</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3717"><a href="#L-3717"><span class="linenos">3717</span></a><span class="sd">        Returns information about the best solution found by the genetic algorithm.</span>
</span><span id="L-3718"><a href="#L-3718"><span class="linenos">3718</span></a><span class="sd">        Accepts the following parameters:</span>
</span><span id="L-3719"><a href="#L-3719"><span class="linenos">3719</span></a><span class="sd">            pop_fitness: An optional parameter holding the fitness values of the solutions in the current population. If None, then the cal_pop_fitness() method is called to calculate the fitness of the population.</span>
</span><span id="L-3720"><a href="#L-3720"><span class="linenos">3720</span></a><span class="sd">        The following are returned:</span>
</span><span id="L-3721"><a href="#L-3721"><span class="linenos">3721</span></a><span class="sd">            -best_solution: Best solution in the current population.</span>
</span><span id="L-3722"><a href="#L-3722"><span class="linenos">3722</span></a><span class="sd">            -best_solution_fitness: Fitness value of the best solution.</span>
</span><span id="L-3723"><a href="#L-3723"><span class="linenos">3723</span></a><span class="sd">            -best_match_idx: Index of the best solution in the current population.</span>
</span><span id="L-3724"><a href="#L-3724"><span class="linenos">3724</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3725"><a href="#L-3725"><span class="linenos">3725</span></a>
</span><span id="L-3726"><a href="#L-3726"><span class="linenos">3726</span></a>        <span class="c1"># Getting the best solution after finishing all generations.</span>
</span><span id="L-3727"><a href="#L-3727"><span class="linenos">3727</span></a>        <span class="c1"># At first, the fitness is calculated for each solution in the final generation.</span>
</span><span id="L-3728"><a href="#L-3728"><span class="linenos">3728</span></a>        <span class="k">if</span> <span class="n">pop_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3729"><a href="#L-3729"><span class="linenos">3729</span></a>            <span class="n">pop_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="L-3730"><a href="#L-3730"><span class="linenos">3730</span></a>        <span class="c1"># Then return the index of that solution corresponding to the best fitness.</span>
</span><span id="L-3731"><a href="#L-3731"><span class="linenos">3731</span></a>        <span class="n">best_match_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pop_fitness</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-3732"><a href="#L-3732"><span class="linenos">3732</span></a>
</span><span id="L-3733"><a href="#L-3733"><span class="linenos">3733</span></a>        <span class="n">best_solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-3734"><a href="#L-3734"><span class="linenos">3734</span></a>        <span class="n">best_solution_fitness</span> <span class="o">=</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">]</span>
</span><span id="L-3735"><a href="#L-3735"><span class="linenos">3735</span></a>        <span class="c1"># print(best_solution_fitness)</span>
</span><span id="L-3736"><a href="#L-3736"><span class="linenos">3736</span></a>        <span class="k">return</span> <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span>
</span><span id="L-3737"><a href="#L-3737"><span class="linenos">3737</span></a>
</span><span id="L-3738"><a href="#L-3738"><span class="linenos">3738</span></a>    <span class="k">def</span> <span class="nf">plot_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-3739"><a href="#L-3739"><span class="linenos">3739</span></a>                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="L-3740"><a href="#L-3740"><span class="linenos">3740</span></a>                    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="L-3741"><a href="#L-3741"><span class="linenos">3741</span></a>                    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="L-3742"><a href="#L-3742"><span class="linenos">3742</span></a>                    <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-3743"><a href="#L-3743"><span class="linenos">3743</span></a>                    <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="L-3744"><a href="#L-3744"><span class="linenos">3744</span></a>                    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="L-3745"><a href="#L-3745"><span class="linenos">3745</span></a>                    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="L-3746"><a href="#L-3746"><span class="linenos">3746</span></a>                    <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3747"><a href="#L-3747"><span class="linenos">3747</span></a>
</span><span id="L-3748"><a href="#L-3748"><span class="linenos">3748</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span>
</span><span id="L-3749"><a href="#L-3749"><span class="linenos">3749</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-3750"><a href="#L-3750"><span class="linenos">3750</span></a>                <span class="s2">&quot;Please use the plot_fitness() method instead of plot_result(). The plot_result() method will be removed in the future.&quot;</span><span class="p">)</span>
</span><span id="L-3751"><a href="#L-3751"><span class="linenos">3751</span></a>
</span><span id="L-3752"><a href="#L-3752"><span class="linenos">3752</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_fitness</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="L-3753"><a href="#L-3753"><span class="linenos">3753</span></a>                                 <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
</span><span id="L-3754"><a href="#L-3754"><span class="linenos">3754</span></a>                                 <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span>
</span><span id="L-3755"><a href="#L-3755"><span class="linenos">3755</span></a>                                 <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-3756"><a href="#L-3756"><span class="linenos">3756</span></a>                                 <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="L-3757"><a href="#L-3757"><span class="linenos">3757</span></a>                                 <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
</span><span id="L-3758"><a href="#L-3758"><span class="linenos">3758</span></a>                                 <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="L-3759"><a href="#L-3759"><span class="linenos">3759</span></a>                                 <span class="n">save_dir</span><span class="o">=</span><span class="n">save_dir</span><span class="p">)</span>
</span><span id="L-3760"><a href="#L-3760"><span class="linenos">3760</span></a>
</span><span id="L-3761"><a href="#L-3761"><span class="linenos">3761</span></a>    <span class="k">def</span> <span class="nf">plot_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-3762"><a href="#L-3762"><span class="linenos">3762</span></a>                     <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="L-3763"><a href="#L-3763"><span class="linenos">3763</span></a>                     <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="L-3764"><a href="#L-3764"><span class="linenos">3764</span></a>                     <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="L-3765"><a href="#L-3765"><span class="linenos">3765</span></a>                     <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-3766"><a href="#L-3766"><span class="linenos">3766</span></a>                     <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="L-3767"><a href="#L-3767"><span class="linenos">3767</span></a>                     <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="L-3768"><a href="#L-3768"><span class="linenos">3768</span></a>                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="L-3769"><a href="#L-3769"><span class="linenos">3769</span></a>                     <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3770"><a href="#L-3770"><span class="linenos">3770</span></a>
</span><span id="L-3771"><a href="#L-3771"><span class="linenos">3771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3772"><a href="#L-3772"><span class="linenos">3772</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes how the fitness value evolved by generation. Can only be called after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="L-3773"><a href="#L-3773"><span class="linenos">3773</span></a>
</span><span id="L-3774"><a href="#L-3774"><span class="linenos">3774</span></a><span class="sd">        Accepts the following:</span>
</span><span id="L-3775"><a href="#L-3775"><span class="linenos">3775</span></a><span class="sd">            title: Figure title.</span>
</span><span id="L-3776"><a href="#L-3776"><span class="linenos">3776</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="L-3777"><a href="#L-3777"><span class="linenos">3777</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="L-3778"><a href="#L-3778"><span class="linenos">3778</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="L-3779"><a href="#L-3779"><span class="linenos">3779</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="L-3780"><a href="#L-3780"><span class="linenos">3780</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="L-3781"><a href="#L-3781"><span class="linenos">3781</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="L-3782"><a href="#L-3782"><span class="linenos">3782</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="L-3783"><a href="#L-3783"><span class="linenos">3783</span></a>
</span><span id="L-3784"><a href="#L-3784"><span class="linenos">3784</span></a><span class="sd">        Returns the figure.</span>
</span><span id="L-3785"><a href="#L-3785"><span class="linenos">3785</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3786"><a href="#L-3786"><span class="linenos">3786</span></a>
</span><span id="L-3787"><a href="#L-3787"><span class="linenos">3787</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3788"><a href="#L-3788"><span class="linenos">3788</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3789"><a href="#L-3789"><span class="linenos">3789</span></a>                <span class="s2">&quot;The plot_fitness() (i.e. plot_result()) method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3790"><a href="#L-3790"><span class="linenos">3790</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="L-3791"><a href="#L-3791"><span class="linenos">3791</span></a>
</span><span id="L-3792"><a href="#L-3792"><span class="linenos">3792</span></a>        <span class="c1">#        if self.run_completed == False:</span>
</span><span id="L-3793"><a href="#L-3793"><span class="linenos">3793</span></a>        <span class="c1">#            if not self.suppress_warnings: warnings.warn(&quot;Warning calling the plot_result() method: \nGA is not executed yet and there are no results to display. Please call the run() method before calling the plot_result() method.\n&quot;)</span>
</span><span id="L-3794"><a href="#L-3794"><span class="linenos">3794</span></a>
</span><span id="L-3795"><a href="#L-3795"><span class="linenos">3795</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="L-3796"><a href="#L-3796"><span class="linenos">3796</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3797"><a href="#L-3797"><span class="linenos">3797</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3798"><a href="#L-3798"><span class="linenos">3798</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="L-3799"><a href="#L-3799"><span class="linenos">3799</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="L-3800"><a href="#L-3800"><span class="linenos">3800</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3801"><a href="#L-3801"><span class="linenos">3801</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="L-3802"><a href="#L-3802"><span class="linenos">3802</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="L-3803"><a href="#L-3803"><span class="linenos">3803</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3804"><a href="#L-3804"><span class="linenos">3804</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3805"><a href="#L-3805"><span class="linenos">3805</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3806"><a href="#L-3806"><span class="linenos">3806</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3807"><a href="#L-3807"><span class="linenos">3807</span></a>
</span><span id="L-3808"><a href="#L-3808"><span class="linenos">3808</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3809"><a href="#L-3809"><span class="linenos">3809</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="L-3810"><a href="#L-3810"><span class="linenos">3810</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="L-3811"><a href="#L-3811"><span class="linenos">3811</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-3812"><a href="#L-3812"><span class="linenos">3812</span></a>
</span><span id="L-3813"><a href="#L-3813"><span class="linenos">3813</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="L-3814"><a href="#L-3814"><span class="linenos">3814</span></a>
</span><span id="L-3815"><a href="#L-3815"><span class="linenos">3815</span></a>    <span class="k">def</span> <span class="nf">plot_new_solution_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-3816"><a href="#L-3816"><span class="linenos">3816</span></a>                               <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="L-3817"><a href="#L-3817"><span class="linenos">3817</span></a>                               <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="L-3818"><a href="#L-3818"><span class="linenos">3818</span></a>                               <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="L-3819"><a href="#L-3819"><span class="linenos">3819</span></a>                               <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-3820"><a href="#L-3820"><span class="linenos">3820</span></a>                               <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="L-3821"><a href="#L-3821"><span class="linenos">3821</span></a>                               <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="L-3822"><a href="#L-3822"><span class="linenos">3822</span></a>                               <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="L-3823"><a href="#L-3823"><span class="linenos">3823</span></a>                               <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3824"><a href="#L-3824"><span class="linenos">3824</span></a>
</span><span id="L-3825"><a href="#L-3825"><span class="linenos">3825</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3826"><a href="#L-3826"><span class="linenos">3826</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes the rate of exploring new solutions. This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="L-3827"><a href="#L-3827"><span class="linenos">3827</span></a>
</span><span id="L-3828"><a href="#L-3828"><span class="linenos">3828</span></a><span class="sd">        Accepts the following:</span>
</span><span id="L-3829"><a href="#L-3829"><span class="linenos">3829</span></a><span class="sd">            title: Figure title.</span>
</span><span id="L-3830"><a href="#L-3830"><span class="linenos">3830</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="L-3831"><a href="#L-3831"><span class="linenos">3831</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="L-3832"><a href="#L-3832"><span class="linenos">3832</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="L-3833"><a href="#L-3833"><span class="linenos">3833</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="L-3834"><a href="#L-3834"><span class="linenos">3834</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="L-3835"><a href="#L-3835"><span class="linenos">3835</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="L-3836"><a href="#L-3836"><span class="linenos">3836</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="L-3837"><a href="#L-3837"><span class="linenos">3837</span></a>
</span><span id="L-3838"><a href="#L-3838"><span class="linenos">3838</span></a><span class="sd">        Returns the figure.</span>
</span><span id="L-3839"><a href="#L-3839"><span class="linenos">3839</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3840"><a href="#L-3840"><span class="linenos">3840</span></a>
</span><span id="L-3841"><a href="#L-3841"><span class="linenos">3841</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3842"><a href="#L-3842"><span class="linenos">3842</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3843"><a href="#L-3843"><span class="linenos">3843</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3844"><a href="#L-3844"><span class="linenos">3844</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="L-3845"><a href="#L-3845"><span class="linenos">3845</span></a>
</span><span id="L-3846"><a href="#L-3846"><span class="linenos">3846</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="L-3847"><a href="#L-3847"><span class="linenos">3847</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3848"><a href="#L-3848"><span class="linenos">3848</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method works only when save_solutions=True in the constructor of the pygad.GA class.&quot;</span><span class="p">)</span>
</span><span id="L-3849"><a href="#L-3849"><span class="linenos">3849</span></a>
</span><span id="L-3850"><a href="#L-3850"><span class="linenos">3850</span></a>        <span class="n">unique_solutions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="L-3851"><a href="#L-3851"><span class="linenos">3851</span></a>        <span class="n">num_unique_solutions_per_generation</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-3852"><a href="#L-3852"><span class="linenos">3852</span></a>        <span class="k">for</span> <span class="n">generation_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">):</span>
</span><span id="L-3853"><a href="#L-3853"><span class="linenos">3853</span></a>
</span><span id="L-3854"><a href="#L-3854"><span class="linenos">3854</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="L-3855"><a href="#L-3855"><span class="linenos">3855</span></a>
</span><span id="L-3856"><a href="#L-3856"><span class="linenos">3856</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">generation_idx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="L-3857"><a href="#L-3857"><span class="linenos">3857</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="L-3858"><a href="#L-3858"><span class="linenos">3858</span></a>
</span><span id="L-3859"><a href="#L-3859"><span class="linenos">3859</span></a>            <span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]:</span>
</span><span id="L-3860"><a href="#L-3860"><span class="linenos">3860</span></a>                <span class="n">unique_solutions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">sol</span><span class="p">))</span>
</span><span id="L-3861"><a href="#L-3861"><span class="linenos">3861</span></a>
</span><span id="L-3862"><a href="#L-3862"><span class="linenos">3862</span></a>            <span class="n">len_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="L-3863"><a href="#L-3863"><span class="linenos">3863</span></a>
</span><span id="L-3864"><a href="#L-3864"><span class="linenos">3864</span></a>            <span class="n">generation_num_unique_solutions</span> <span class="o">=</span> <span class="n">len_after</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-3865"><a href="#L-3865"><span class="linenos">3865</span></a>            <span class="n">num_unique_solutions_per_generation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generation_num_unique_solutions</span><span class="p">)</span>
</span><span id="L-3866"><a href="#L-3866"><span class="linenos">3866</span></a>
</span><span id="L-3867"><a href="#L-3867"><span class="linenos">3867</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="L-3868"><a href="#L-3868"><span class="linenos">3868</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3869"><a href="#L-3869"><span class="linenos">3869</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_unique_solutions_per_generation</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3870"><a href="#L-3870"><span class="linenos">3870</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="L-3871"><a href="#L-3871"><span class="linenos">3871</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="L-3872"><a href="#L-3872"><span class="linenos">3872</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3873"><a href="#L-3873"><span class="linenos">3873</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="L-3874"><a href="#L-3874"><span class="linenos">3874</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="L-3875"><a href="#L-3875"><span class="linenos">3875</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-3876"><a href="#L-3876"><span class="linenos">3876</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3877"><a href="#L-3877"><span class="linenos">3877</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3878"><a href="#L-3878"><span class="linenos">3878</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3879"><a href="#L-3879"><span class="linenos">3879</span></a>
</span><span id="L-3880"><a href="#L-3880"><span class="linenos">3880</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-3881"><a href="#L-3881"><span class="linenos">3881</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="L-3882"><a href="#L-3882"><span class="linenos">3882</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="L-3883"><a href="#L-3883"><span class="linenos">3883</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-3884"><a href="#L-3884"><span class="linenos">3884</span></a>
</span><span id="L-3885"><a href="#L-3885"><span class="linenos">3885</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="L-3886"><a href="#L-3886"><span class="linenos">3886</span></a>
</span><span id="L-3887"><a href="#L-3887"><span class="linenos">3887</span></a>    <span class="k">def</span> <span class="nf">plot_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-3888"><a href="#L-3888"><span class="linenos">3888</span></a>                   <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Gene&quot;</span><span class="p">,</span>
</span><span id="L-3889"><a href="#L-3889"><span class="linenos">3889</span></a>                   <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Gene&quot;</span><span class="p">,</span>
</span><span id="L-3890"><a href="#L-3890"><span class="linenos">3890</span></a>                   <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span>
</span><span id="L-3891"><a href="#L-3891"><span class="linenos">3891</span></a>                   <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="L-3892"><a href="#L-3892"><span class="linenos">3892</span></a>                   <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="L-3893"><a href="#L-3893"><span class="linenos">3893</span></a>                   <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="L-3894"><a href="#L-3894"><span class="linenos">3894</span></a>                   <span class="n">graph_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="L-3895"><a href="#L-3895"><span class="linenos">3895</span></a>                   <span class="n">fill_color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="L-3896"><a href="#L-3896"><span class="linenos">3896</span></a>                   <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="L-3897"><a href="#L-3897"><span class="linenos">3897</span></a>                   <span class="n">solutions</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
</span><span id="L-3898"><a href="#L-3898"><span class="linenos">3898</span></a>                   <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-3899"><a href="#L-3899"><span class="linenos">3899</span></a>
</span><span id="L-3900"><a href="#L-3900"><span class="linenos">3900</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-3901"><a href="#L-3901"><span class="linenos">3901</span></a><span class="sd">        Creates, shows, and returns a figure with number of subplots equal to the number of genes. Each subplot shows the gene value for each generation.</span>
</span><span id="L-3902"><a href="#L-3902"><span class="linenos">3902</span></a><span class="sd">        This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="L-3903"><a href="#L-3903"><span class="linenos">3903</span></a><span class="sd">        It also works only after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="L-3904"><a href="#L-3904"><span class="linenos">3904</span></a>
</span><span id="L-3905"><a href="#L-3905"><span class="linenos">3905</span></a><span class="sd">        Accepts the following:</span>
</span><span id="L-3906"><a href="#L-3906"><span class="linenos">3906</span></a><span class="sd">            title: Figure title.</span>
</span><span id="L-3907"><a href="#L-3907"><span class="linenos">3907</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="L-3908"><a href="#L-3908"><span class="linenos">3908</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="L-3909"><a href="#L-3909"><span class="linenos">3909</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="L-3910"><a href="#L-3910"><span class="linenos">3910</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="L-3911"><a href="#L-3911"><span class="linenos">3911</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="L-3912"><a href="#L-3912"><span class="linenos">3912</span></a><span class="sd">            graph_type: Type of the graph which can be either &quot;plot&quot; (default), &quot;boxplot&quot;, or &quot;histogram&quot;.</span>
</span><span id="L-3913"><a href="#L-3913"><span class="linenos">3913</span></a><span class="sd">            fill_color: Fill color of the graph which defaults to &quot;#3870FF&quot;. This has no effect if graph_type=&quot;plot&quot;.</span>
</span><span id="L-3914"><a href="#L-3914"><span class="linenos">3914</span></a><span class="sd">            color: Color of the plot which defaults to &quot;black&quot;.</span>
</span><span id="L-3915"><a href="#L-3915"><span class="linenos">3915</span></a><span class="sd">            solutions: Defaults to &quot;all&quot; which means use all solutions. If &quot;best&quot; then only the best solutions are used.</span>
</span><span id="L-3916"><a href="#L-3916"><span class="linenos">3916</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="L-3917"><a href="#L-3917"><span class="linenos">3917</span></a>
</span><span id="L-3918"><a href="#L-3918"><span class="linenos">3918</span></a><span class="sd">        Returns the figure.</span>
</span><span id="L-3919"><a href="#L-3919"><span class="linenos">3919</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-3920"><a href="#L-3920"><span class="linenos">3920</span></a>
</span><span id="L-3921"><a href="#L-3921"><span class="linenos">3921</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3922"><a href="#L-3922"><span class="linenos">3922</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3923"><a href="#L-3923"><span class="linenos">3923</span></a>                <span class="s2">&quot;The plot_genes() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3924"><a href="#L-3924"><span class="linenos">3924</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="L-3925"><a href="#L-3925"><span class="linenos">3925</span></a>
</span><span id="L-3926"><a href="#L-3926"><span class="linenos">3926</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-3927"><a href="#L-3927"><span class="linenos">3927</span></a>            <span class="k">if</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="L-3928"><a href="#L-3928"><span class="linenos">3928</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="L-3929"><a href="#L-3929"><span class="linenos">3929</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="L-3930"><a href="#L-3930"><span class="linenos">3930</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3931"><a href="#L-3931"><span class="linenos">3931</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3932"><a href="#L-3932"><span class="linenos">3932</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;all&#39; can only be called if &#39;save_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="L-3933"><a href="#L-3933"><span class="linenos">3933</span></a>            <span class="k">elif</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;best&#39;</span><span class="p">:</span>
</span><span id="L-3934"><a href="#L-3934"><span class="linenos">3934</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="L-3935"><a href="#L-3935"><span class="linenos">3935</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span>
</span><span id="L-3936"><a href="#L-3936"><span class="linenos">3936</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3937"><a href="#L-3937"><span class="linenos">3937</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3938"><a href="#L-3938"><span class="linenos">3938</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;best&#39; can only be called if &#39;save_best_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="L-3939"><a href="#L-3939"><span class="linenos">3939</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3940"><a href="#L-3940"><span class="linenos">3940</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="L-3941"><a href="#L-3941"><span class="linenos">3941</span></a>                    <span class="s2">&quot;The solutions parameter can be either &#39;all&#39; or &#39;best&#39; but </span><span class="si">{solutions}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3942"><a href="#L-3942"><span class="linenos">3942</span></a>                        <span class="n">solutions</span><span class="o">=</span><span class="n">solutions</span><span class="p">))</span>
</span><span id="L-3943"><a href="#L-3943"><span class="linenos">3943</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-3944"><a href="#L-3944"><span class="linenos">3944</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The solutions parameter must be a string but </span><span class="si">{solutions_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-3945"><a href="#L-3945"><span class="linenos">3945</span></a>                <span class="n">solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)))</span>
</span><span id="L-3946"><a href="#L-3946"><span class="linenos">3946</span></a>
</span><span id="L-3947"><a href="#L-3947"><span class="linenos">3947</span></a>        <span class="k">if</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3948"><a href="#L-3948"><span class="linenos">3948</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="L-3949"><a href="#L-3949"><span class="linenos">3949</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="L-3950"><a href="#L-3950"><span class="linenos">3950</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="L-3951"><a href="#L-3951"><span class="linenos">3951</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="L-3952"><a href="#L-3952"><span class="linenos">3952</span></a>
</span><span id="L-3953"><a href="#L-3953"><span class="linenos">3953</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-3954"><a href="#L-3954"><span class="linenos">3954</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="L-3955"><a href="#L-3955"><span class="linenos">3955</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="L-3956"><a href="#L-3956"><span class="linenos">3956</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="L-3957"><a href="#L-3957"><span class="linenos">3957</span></a>                <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3958"><a href="#L-3958"><span class="linenos">3958</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3959"><a href="#L-3959"><span class="linenos">3959</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="L-3960"><a href="#L-3960"><span class="linenos">3960</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-3961"><a href="#L-3961"><span class="linenos">3961</span></a>                               <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3962"><a href="#L-3962"><span class="linenos">3962</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="L-3963"><a href="#L-3963"><span class="linenos">3963</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-3964"><a href="#L-3964"><span class="linenos">3964</span></a>                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3965"><a href="#L-3965"><span class="linenos">3965</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3966"><a href="#L-3966"><span class="linenos">3966</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-3967"><a href="#L-3967"><span class="linenos">3967</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-3968"><a href="#L-3968"><span class="linenos">3968</span></a>
</span><span id="L-3969"><a href="#L-3969"><span class="linenos">3969</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3970"><a href="#L-3970"><span class="linenos">3970</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-3971"><a href="#L-3971"><span class="linenos">3971</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="L-3972"><a href="#L-3972"><span class="linenos">3972</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3973"><a href="#L-3973"><span class="linenos">3973</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3974"><a href="#L-3974"><span class="linenos">3974</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-3975"><a href="#L-3975"><span class="linenos">3975</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-3976"><a href="#L-3976"><span class="linenos">3976</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="L-3977"><a href="#L-3977"><span class="linenos">3977</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="L-3978"><a href="#L-3978"><span class="linenos">3978</span></a>                        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3979"><a href="#L-3979"><span class="linenos">3979</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3980"><a href="#L-3980"><span class="linenos">3980</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="L-3981"><a href="#L-3981"><span class="linenos">3981</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-3982"><a href="#L-3982"><span class="linenos">3982</span></a>                                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3983"><a href="#L-3983"><span class="linenos">3983</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="L-3984"><a href="#L-3984"><span class="linenos">3984</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-3985"><a href="#L-3985"><span class="linenos">3985</span></a>                                              <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3986"><a href="#L-3986"><span class="linenos">3986</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-3987"><a href="#L-3987"><span class="linenos">3987</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-3988"><a href="#L-3988"><span class="linenos">3988</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-3989"><a href="#L-3989"><span class="linenos">3989</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</span><span id="L-3990"><a href="#L-3990"><span class="linenos">3990</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="L-3991"><a href="#L-3991"><span class="linenos">3991</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="L-3992"><a href="#L-3992"><span class="linenos">3992</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="L-3993"><a href="#L-3993"><span class="linenos">3993</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="L-3994"><a href="#L-3994"><span class="linenos">3994</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="L-3995"><a href="#L-3995"><span class="linenos">3995</span></a>                                <span class="k">break</span>
</span><span id="L-3996"><a href="#L-3996"><span class="linenos">3996</span></a>                            <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="L-3997"><a href="#L-3997"><span class="linenos">3997</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-3998"><a href="#L-3998"><span class="linenos">3998</span></a>                                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-3999"><a href="#L-3999"><span class="linenos">3999</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="L-4000"><a href="#L-4000"><span class="linenos">4000</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-4001"><a href="#L-4001"><span class="linenos">4001</span></a>                                                              <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-4002"><a href="#L-4002"><span class="linenos">4002</span></a>                                                              <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-4003"><a href="#L-4003"><span class="linenos">4003</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="L-4004"><a href="#L-4004"><span class="linenos">4004</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-4005"><a href="#L-4005"><span class="linenos">4005</span></a>                                                          <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="L-4006"><a href="#L-4006"><span class="linenos">4006</span></a>                                                          <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-4007"><a href="#L-4007"><span class="linenos">4007</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4008"><a href="#L-4008"><span class="linenos">4008</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-4009"><a href="#L-4009"><span class="linenos">4009</span></a>
</span><span id="L-4010"><a href="#L-4010"><span class="linenos">4010</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="L-4011"><a href="#L-4011"><span class="linenos">4011</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-4012"><a href="#L-4012"><span class="linenos">4012</span></a>
</span><span id="L-4013"><a href="#L-4013"><span class="linenos">4013</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;boxplot&quot;</span><span class="p">:</span>
</span><span id="L-4014"><a href="#L-4014"><span class="linenos">4014</span></a>            <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="L-4015"><a href="#L-4015"><span class="linenos">4015</span></a>
</span><span id="L-4016"><a href="#L-4016"><span class="linenos">4016</span></a>            <span class="c1"># Create an axes instance</span>
</span><span id="L-4017"><a href="#L-4017"><span class="linenos">4017</span></a>            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span><span id="L-4018"><a href="#L-4018"><span class="linenos">4018</span></a>            <span class="n">boxeplots</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">,</span>
</span><span id="L-4019"><a href="#L-4019"><span class="linenos">4019</span></a>                                   <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="L-4020"><a href="#L-4020"><span class="linenos">4020</span></a>                                   <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-4021"><a href="#L-4021"><span class="linenos">4021</span></a>            <span class="c1"># adding horizontal grid lines</span>
</span><span id="L-4022"><a href="#L-4022"><span class="linenos">4022</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-4023"><a href="#L-4023"><span class="linenos">4023</span></a>
</span><span id="L-4024"><a href="#L-4024"><span class="linenos">4024</span></a>            <span class="k">for</span> <span class="n">box</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">]:</span>
</span><span id="L-4025"><a href="#L-4025"><span class="linenos">4025</span></a>                <span class="c1"># change outline color</span>
</span><span id="L-4026"><a href="#L-4026"><span class="linenos">4026</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="L-4027"><a href="#L-4027"><span class="linenos">4027</span></a>                <span class="c1"># change fill color https://color.adobe.com/create/color-wheel</span>
</span><span id="L-4028"><a href="#L-4028"><span class="linenos">4028</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-4029"><a href="#L-4029"><span class="linenos">4029</span></a>
</span><span id="L-4030"><a href="#L-4030"><span class="linenos">4030</span></a>            <span class="k">for</span> <span class="n">whisker</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;whiskers&#39;</span><span class="p">]:</span>
</span><span id="L-4031"><a href="#L-4031"><span class="linenos">4031</span></a>                <span class="n">whisker</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="L-4032"><a href="#L-4032"><span class="linenos">4032</span></a>            <span class="k">for</span> <span class="n">median</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;medians&#39;</span><span class="p">]:</span>
</span><span id="L-4033"><a href="#L-4033"><span class="linenos">4033</span></a>                <span class="n">median</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="L-4034"><a href="#L-4034"><span class="linenos">4034</span></a>            <span class="k">for</span> <span class="n">cap</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;caps&#39;</span><span class="p">]:</span>
</span><span id="L-4035"><a href="#L-4035"><span class="linenos">4035</span></a>                <span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="L-4036"><a href="#L-4036"><span class="linenos">4036</span></a>
</span><span id="L-4037"><a href="#L-4037"><span class="linenos">4037</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4038"><a href="#L-4038"><span class="linenos">4038</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4039"><a href="#L-4039"><span class="linenos">4039</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4040"><a href="#L-4040"><span class="linenos">4040</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-4041"><a href="#L-4041"><span class="linenos">4041</span></a>
</span><span id="L-4042"><a href="#L-4042"><span class="linenos">4042</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;histogram&quot;</span><span class="p">:</span>
</span><span id="L-4043"><a href="#L-4043"><span class="linenos">4043</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="L-4044"><a href="#L-4044"><span class="linenos">4044</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="L-4045"><a href="#L-4045"><span class="linenos">4045</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="L-4046"><a href="#L-4046"><span class="linenos">4046</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="L-4047"><a href="#L-4047"><span class="linenos">4047</span></a>
</span><span id="L-4048"><a href="#L-4048"><span class="linenos">4048</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-4049"><a href="#L-4049"><span class="linenos">4049</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="L-4050"><a href="#L-4050"><span class="linenos">4050</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="L-4051"><a href="#L-4051"><span class="linenos">4051</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span>
</span><span id="L-4052"><a href="#L-4052"><span class="linenos">4052</span></a>                                                     <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="L-4053"><a href="#L-4053"><span class="linenos">4053</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="L-4054"><a href="#L-4054"><span class="linenos">4054</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4055"><a href="#L-4055"><span class="linenos">4055</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-4056"><a href="#L-4056"><span class="linenos">4056</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-4057"><a href="#L-4057"><span class="linenos">4057</span></a>
</span><span id="L-4058"><a href="#L-4058"><span class="linenos">4058</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-4059"><a href="#L-4059"><span class="linenos">4059</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-4060"><a href="#L-4060"><span class="linenos">4060</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-4061"><a href="#L-4061"><span class="linenos">4061</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="L-4062"><a href="#L-4062"><span class="linenos">4062</span></a>                             <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="L-4063"><a href="#L-4063"><span class="linenos">4063</span></a>                             <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="L-4064"><a href="#L-4064"><span class="linenos">4064</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4065"><a href="#L-4065"><span class="linenos">4065</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-4066"><a href="#L-4066"><span class="linenos">4066</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="L-4067"><a href="#L-4067"><span class="linenos">4067</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-4068"><a href="#L-4068"><span class="linenos">4068</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="L-4069"><a href="#L-4069"><span class="linenos">4069</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-4070"><a href="#L-4070"><span class="linenos">4070</span></a>                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="L-4071"><a href="#L-4071"><span class="linenos">4071</span></a>                                           <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="L-4072"><a href="#L-4072"><span class="linenos">4072</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4073"><a href="#L-4073"><span class="linenos">4073</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-4074"><a href="#L-4074"><span class="linenos">4074</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-4075"><a href="#L-4075"><span class="linenos">4075</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="L-4076"><a href="#L-4076"><span class="linenos">4076</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="L-4077"><a href="#L-4077"><span class="linenos">4077</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="L-4078"><a href="#L-4078"><span class="linenos">4078</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="L-4079"><a href="#L-4079"><span class="linenos">4079</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="L-4080"><a href="#L-4080"><span class="linenos">4080</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="L-4081"><a href="#L-4081"><span class="linenos">4081</span></a>                                <span class="k">break</span>
</span><span id="L-4082"><a href="#L-4082"><span class="linenos">4082</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="L-4083"><a href="#L-4083"><span class="linenos">4083</span></a>                                                       <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="L-4084"><a href="#L-4084"><span class="linenos">4084</span></a>                                                       <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="L-4085"><a href="#L-4085"><span class="linenos">4085</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="L-4086"><a href="#L-4086"><span class="linenos">4086</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-4087"><a href="#L-4087"><span class="linenos">4087</span></a>
</span><span id="L-4088"><a href="#L-4088"><span class="linenos">4088</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="L-4089"><a href="#L-4089"><span class="linenos">4089</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="L-4090"><a href="#L-4090"><span class="linenos">4090</span></a>
</span><span id="L-4091"><a href="#L-4091"><span class="linenos">4091</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-4092"><a href="#L-4092"><span class="linenos">4092</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="L-4093"><a href="#L-4093"><span class="linenos">4093</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="L-4094"><a href="#L-4094"><span class="linenos">4094</span></a>
</span><span id="L-4095"><a href="#L-4095"><span class="linenos">4095</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-4096"><a href="#L-4096"><span class="linenos">4096</span></a>
</span><span id="L-4097"><a href="#L-4097"><span class="linenos">4097</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="L-4098"><a href="#L-4098"><span class="linenos">4098</span></a>
</span><span id="L-4099"><a href="#L-4099"><span class="linenos">4099</span></a>
</span><span id="L-4100"><a href="#L-4100"><span class="linenos">4100</span></a>    <span class="k">def</span> <span class="nf">close_parallel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-4101"><a href="#L-4101"><span class="linenos">4101</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-4102"><a href="#L-4102"><span class="linenos">4102</span></a>            <span class="c1"># print(&#39;before close&#39;)</span>
</span><span id="L-4103"><a href="#L-4103"><span class="linenos">4103</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-4104"><a href="#L-4104"><span class="linenos">4104</span></a>            <span class="c1"># print(&#39;after close&#39;)</span>
</span><span id="L-4105"><a href="#L-4105"><span class="linenos">4105</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="L-4106"><a href="#L-4106"><span class="linenos">4106</span></a>            <span class="c1"># print(&#39;after join&#39;)</span>
</span><span id="L-4107"><a href="#L-4107"><span class="linenos">4107</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
</span><span id="L-4108"><a href="#L-4108"><span class="linenos">4108</span></a>            <span class="c1"># print(&#39;after terminate&#39;)</span>
</span><span id="L-4109"><a href="#L-4109"><span class="linenos">4109</span></a>
</span><span id="L-4110"><a href="#L-4110"><span class="linenos">4110</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="L-4111"><a href="#L-4111"><span class="linenos">4111</span></a>
</span><span id="L-4112"><a href="#L-4112"><span class="linenos">4112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4113"><a href="#L-4113"><span class="linenos">4113</span></a><span class="sd">        Saves the genetic algorithm instance:</span>
</span><span id="L-4114"><a href="#L-4114"><span class="linenos">4114</span></a><span class="sd">            -filename: Name of the file to save the instance. No extension is needed.</span>
</span><span id="L-4115"><a href="#L-4115"><span class="linenos">4115</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-4116"><a href="#L-4116"><span class="linenos">4116</span></a>
</span><span id="L-4117"><a href="#L-4117"><span class="linenos">4117</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.pkl&quot;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="L-4118"><a href="#L-4118"><span class="linenos">4118</span></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span><span id="L-4119"><a href="#L-4119"><span class="linenos">4119</span></a>
</span><span id="L-4120"><a href="#L-4120"><span class="linenos">4120</span></a>
</span><span id="L-4121"><a href="#L-4121"><span class="linenos">4121</span></a><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="L-4122"><a href="#L-4122"><span class="linenos">4122</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4123"><a href="#L-4123"><span class="linenos">4123</span></a><span class="sd">    Reads a saved instance of the genetic algorithm:</span>
</span><span id="L-4124"><a href="#L-4124"><span class="linenos">4124</span></a><span class="sd">        -filename: Name of the file to read the instance. No extension is needed.</span>
</span><span id="L-4125"><a href="#L-4125"><span class="linenos">4125</span></a><span class="sd">    Returns the genetic algorithm instance.</span>
</span><span id="L-4126"><a href="#L-4126"><span class="linenos">4126</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-4127"><a href="#L-4127"><span class="linenos">4127</span></a>
</span><span id="L-4128"><a href="#L-4128"><span class="linenos">4128</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-4129"><a href="#L-4129"><span class="linenos">4129</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.pkl&quot;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="L-4130"><a href="#L-4130"><span class="linenos">4130</span></a>            <span class="n">ga_in</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="L-4131"><a href="#L-4131"><span class="linenos">4131</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="L-4132"><a href="#L-4132"><span class="linenos">4132</span></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
</span><span id="L-4133"><a href="#L-4133"><span class="linenos">4133</span></a>            <span class="s2">&quot;Error reading the file </span><span class="si">{filename}</span><span class="s2">. Please check your inputs.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">))</span>
</span><span id="L-4134"><a href="#L-4134"><span class="linenos">4134</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="L-4135"><a href="#L-4135"><span class="linenos">4135</span></a>        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span>
</span><span id="L-4136"><a href="#L-4136"><span class="linenos">4136</span></a>            <span class="s2">&quot;Error loading the file. If the file already exists, please reload all the functions previously used (e.g. fitness function).&quot;</span><span class="p">)</span>
</span><span id="L-4137"><a href="#L-4137"><span class="linenos">4137</span></a>    <span class="k">return</span> <span class="n">ga_in</span>
</span></pre></div>


            </section>
                <section id="GA">
                            <input id="GA-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GA</span>:

                <label class="view-source-button" for="GA-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA-61"><a href="#GA-61"><span class="linenos">  61</span></a><span class="k">class</span> <span class="nc">GA</span><span class="p">:</span>
</span><span id="GA-62"><a href="#GA-62"><span class="linenos">  62</span></a>    <span class="n">supported_int_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int8</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span>
</span><span id="GA-63"><a href="#GA-63"><span class="linenos">  63</span></a>                           <span class="n">numpy</span><span class="o">.</span><span class="n">uint16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint64</span><span class="p">]</span>
</span><span id="GA-64"><a href="#GA-64"><span class="linenos">  64</span></a>    <span class="n">supported_float_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float16</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">]</span>
</span><span id="GA-65"><a href="#GA-65"><span class="linenos">  65</span></a>    <span class="n">supported_int_float_types</span> <span class="o">=</span> <span class="n">supported_int_types</span> <span class="o">+</span> <span class="n">supported_float_types</span>
</span><span id="GA-66"><a href="#GA-66"><span class="linenos">  66</span></a>
</span><span id="GA-67"><a href="#GA-67"><span class="linenos">  67</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA-68"><a href="#GA-68"><span class="linenos">  68</span></a>                 <span class="n">num_generations</span><span class="p">,</span>
</span><span id="GA-69"><a href="#GA-69"><span class="linenos">  69</span></a>                 <span class="n">num_parents_mating</span><span class="p">,</span>
</span><span id="GA-70"><a href="#GA-70"><span class="linenos">  70</span></a>                 <span class="n">fitness_func</span><span class="p">,</span>
</span><span id="GA-71"><a href="#GA-71"><span class="linenos">  71</span></a>                 <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-72"><a href="#GA-72"><span class="linenos">  72</span></a>                 <span class="n">initial_population</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-73"><a href="#GA-73"><span class="linenos">  73</span></a>                 <span class="n">sol_per_pop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-74"><a href="#GA-74"><span class="linenos">  74</span></a>                 <span class="n">num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-75"><a href="#GA-75"><span class="linenos">  75</span></a>                 <span class="n">init_range_low</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span>
</span><span id="GA-76"><a href="#GA-76"><span class="linenos">  76</span></a>                 <span class="n">init_range_high</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="GA-77"><a href="#GA-77"><span class="linenos">  77</span></a>                 <span class="n">gene_type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span id="GA-78"><a href="#GA-78"><span class="linenos">  78</span></a>                 <span class="n">parent_selection_type</span><span class="o">=</span><span class="s2">&quot;sss&quot;</span><span class="p">,</span>
</span><span id="GA-79"><a href="#GA-79"><span class="linenos">  79</span></a>                 <span class="n">keep_parents</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="GA-80"><a href="#GA-80"><span class="linenos">  80</span></a>                 <span class="n">keep_elitism</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="GA-81"><a href="#GA-81"><span class="linenos">  81</span></a>                 <span class="n">K_tournament</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA-82"><a href="#GA-82"><span class="linenos">  82</span></a>                 <span class="n">crossover_type</span><span class="o">=</span><span class="s2">&quot;single_point&quot;</span><span class="p">,</span>
</span><span id="GA-83"><a href="#GA-83"><span class="linenos">  83</span></a>                 <span class="n">crossover_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-84"><a href="#GA-84"><span class="linenos">  84</span></a>                 <span class="n">mutation_type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
</span><span id="GA-85"><a href="#GA-85"><span class="linenos">  85</span></a>                 <span class="n">mutation_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-86"><a href="#GA-86"><span class="linenos">  86</span></a>                 <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA-87"><a href="#GA-87"><span class="linenos">  87</span></a>                 <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
</span><span id="GA-88"><a href="#GA-88"><span class="linenos">  88</span></a>                 <span class="n">mutation_num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-89"><a href="#GA-89"><span class="linenos">  89</span></a>                 <span class="n">random_mutation_min_val</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="GA-90"><a href="#GA-90"><span class="linenos">  90</span></a>                 <span class="n">random_mutation_max_val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="GA-91"><a href="#GA-91"><span class="linenos">  91</span></a>                 <span class="n">gene_space</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-92"><a href="#GA-92"><span class="linenos">  92</span></a>                 <span class="n">allow_duplicate_genes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-93"><a href="#GA-93"><span class="linenos">  93</span></a>                 <span class="n">on_start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-94"><a href="#GA-94"><span class="linenos">  94</span></a>                 <span class="n">on_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-95"><a href="#GA-95"><span class="linenos">  95</span></a>                 <span class="n">on_parents</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-96"><a href="#GA-96"><span class="linenos">  96</span></a>                 <span class="n">on_crossover</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-97"><a href="#GA-97"><span class="linenos">  97</span></a>                 <span class="n">on_mutation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-98"><a href="#GA-98"><span class="linenos">  98</span></a>                 <span class="n">callback_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-99"><a href="#GA-99"><span class="linenos">  99</span></a>                 <span class="n">on_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-100"><a href="#GA-100"><span class="linenos"> 100</span></a>                 <span class="n">on_stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-101"><a href="#GA-101"><span class="linenos"> 101</span></a>                 <span class="n">delay_after_gen</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="GA-102"><a href="#GA-102"><span class="linenos"> 102</span></a>                 <span class="n">save_best_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA-103"><a href="#GA-103"><span class="linenos"> 103</span></a>                 <span class="n">save_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA-104"><a href="#GA-104"><span class="linenos"> 104</span></a>                 <span class="n">suppress_warnings</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA-105"><a href="#GA-105"><span class="linenos"> 105</span></a>                 <span class="n">stop_criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-106"><a href="#GA-106"><span class="linenos"> 106</span></a>                 <span class="n">ftol_abs</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="GA-107"><a href="#GA-107"><span class="linenos"> 107</span></a>                 <span class="n">parallel_processing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-108"><a href="#GA-108"><span class="linenos"> 108</span></a>                 <span class="n">random_seed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-109"><a href="#GA-109"><span class="linenos"> 109</span></a>
</span><span id="GA-110"><a href="#GA-110"><span class="linenos"> 110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-111"><a href="#GA-111"><span class="linenos"> 111</span></a><span class="sd">        The constructor of the GA class accepts all parameters required to create an instance of the GA class. It validates such parameters.</span>
</span><span id="GA-112"><a href="#GA-112"><span class="linenos"> 112</span></a>
</span><span id="GA-113"><a href="#GA-113"><span class="linenos"> 113</span></a><span class="sd">        num_generations: Number of generations.</span>
</span><span id="GA-114"><a href="#GA-114"><span class="linenos"> 114</span></a><span class="sd">        num_parents_mating: Number of solutions to be selected as parents in the mating pool.</span>
</span><span id="GA-115"><a href="#GA-115"><span class="linenos"> 115</span></a>
</span><span id="GA-116"><a href="#GA-116"><span class="linenos"> 116</span></a><span class="sd">        fitness_func: Accepts a function that must accept 2 parameters (a single solution and its index in the population) and return the fitness value of the solution. Available starting from PyGAD 1.0.17 until 1.0.20 with a single parameter representing the solution. Changed in PyGAD 2.0.0 and higher to include the second parameter representing the solution index.</span>
</span><span id="GA-117"><a href="#GA-117"><span class="linenos"> 117</span></a>
</span><span id="GA-118"><a href="#GA-118"><span class="linenos"> 118</span></a><span class="sd">        initial_population: A user-defined initial population. It is useful when the user wants to start the generations with a custom initial population. It defaults to None which means no initial population is specified by the user. In this case, PyGAD creates an initial population using the &#39;sol_per_pop&#39; and &#39;num_genes&#39; parameters. An exception is raised if the &#39;initial_population&#39; is None while any of the 2 parameters (&#39;sol_per_pop&#39; or &#39;num_genes&#39;) is also None.</span>
</span><span id="GA-119"><a href="#GA-119"><span class="linenos"> 119</span></a><span class="sd">        sol_per_pop: Number of solutions in the population.</span>
</span><span id="GA-120"><a href="#GA-120"><span class="linenos"> 120</span></a><span class="sd">        num_genes: Number of parameters in the function.</span>
</span><span id="GA-121"><a href="#GA-121"><span class="linenos"> 121</span></a>
</span><span id="GA-122"><a href="#GA-122"><span class="linenos"> 122</span></a><span class="sd">        init_range_low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="GA-123"><a href="#GA-123"><span class="linenos"> 123</span></a><span class="sd">        init_range_high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="GA-124"><a href="#GA-124"><span class="linenos"> 124</span></a><span class="sd">        # It is OK to set the value of any of the 2 parameters (&#39;init_range_low&#39; and &#39;init_range_high&#39;) to be equal, higher or lower than the other parameter (i.e. init_range_low is not needed to be lower than init_range_high).</span>
</span><span id="GA-125"><a href="#GA-125"><span class="linenos"> 125</span></a>
</span><span id="GA-126"><a href="#GA-126"><span class="linenos"> 126</span></a><span class="sd">        gene_type: The type of the gene. It is assigned to any of these types (int, float, numpy.int, numpy.int8, numpy.int16, numpy.int32, numpy.int64, numpy.uint, numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64, numpy.float, numpy.float16, numpy.float32, numpy.float64) and forces all the genes to be of that type.</span>
</span><span id="GA-127"><a href="#GA-127"><span class="linenos"> 127</span></a>
</span><span id="GA-128"><a href="#GA-128"><span class="linenos"> 128</span></a><span class="sd">        parent_selection_type: Type of parent selection.</span>
</span><span id="GA-129"><a href="#GA-129"><span class="linenos"> 129</span></a><span class="sd">        keep_parents: If 0, this means no parent in the current population will be used in the next population. If -1, this means all parents in the current population will be used in the next population. If set to a value &gt; 0, then the specified value refers to the number of parents in the current population to be used in the next population. Some parent selection operators such as rank selection, favor population diversity and therefore keeping the parents in the next generation can be beneficial. However, some other parent selection operators, such as roulette wheel selection (RWS), have higher selection pressure and keeping more than one parent in the next generation can seriously harm population diversity. This parameter have an effect only when the keep_elitism parameter is 0. Thanks to Prof. Fernando Jiménez Barrionuevo (http://webs.um.es/fernan) for editing this sentence.</span>
</span><span id="GA-130"><a href="#GA-130"><span class="linenos"> 130</span></a><span class="sd">        K_tournament: When the value of &#39;parent_selection_type&#39; is &#39;tournament&#39;, the &#39;K_tournament&#39; parameter specifies the number of solutions from which a parent is selected randomly.</span>
</span><span id="GA-131"><a href="#GA-131"><span class="linenos"> 131</span></a>
</span><span id="GA-132"><a href="#GA-132"><span class="linenos"> 132</span></a><span class="sd">        keep_elitism: Added in PyGAD 2.18.0. It can take the value 0 or a positive integer that satisfies (0 &lt;= keep_elitism &lt;= sol_per_pop). It defaults to 1 which means only the best solution in the current generation is kept in the next generation. If assigned 0, this means it has no effect. If assigned a positive integer K, then the best K solutions are kept in the next generation. It cannot be assigned a value greater than the value assigned to the sol_per_pop parameter. If this parameter has a value different than 0, then the keep_parents parameter will have no effect.</span>
</span><span id="GA-133"><a href="#GA-133"><span class="linenos"> 133</span></a>
</span><span id="GA-134"><a href="#GA-134"><span class="linenos"> 134</span></a><span class="sd">        crossover_type: Type of the crossover opreator. If  crossover_type=None, then the crossover step is bypassed which means no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="GA-135"><a href="#GA-135"><span class="linenos"> 135</span></a><span class="sd">        crossover_probability: The probability of selecting a solution for the crossover operation. If the solution probability is &lt;= crossover_probability, the solution is selected. The value must be between 0 and 1 inclusive.</span>
</span><span id="GA-136"><a href="#GA-136"><span class="linenos"> 136</span></a>
</span><span id="GA-137"><a href="#GA-137"><span class="linenos"> 137</span></a><span class="sd">        mutation_type: Type of the mutation opreator. If mutation_type=None, then the mutation step is bypassed which means no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="GA-138"><a href="#GA-138"><span class="linenos"> 138</span></a><span class="sd">        mutation_probability: The probability of selecting a gene for the mutation operation. If the gene probability is &lt;= mutation_probability, the gene is selected. It accepts either a single value for fixed mutation or a list/tuple/numpy.ndarray of 2 values for adaptive mutation. The values must be between 0 and 1 inclusive. If specified, then no need for the 2 parameters mutation_percent_genes and mutation_num_genes.</span>
</span><span id="GA-139"><a href="#GA-139"><span class="linenos"> 139</span></a>
</span><span id="GA-140"><a href="#GA-140"><span class="linenos"> 140</span></a><span class="sd">        mutation_by_replacement: An optional bool parameter. It works only when the selected type of mutation is random (mutation_type=&quot;random&quot;). In this case, setting mutation_by_replacement=True means replace the gene by the randomly generated value. If False, then it has no effect and random mutation works by adding the random value to the gene.</span>
</span><span id="GA-141"><a href="#GA-141"><span class="linenos"> 141</span></a>
</span><span id="GA-142"><a href="#GA-142"><span class="linenos"> 142</span></a><span class="sd">        mutation_percent_genes: Percentage of genes to mutate which defaults to the string &#39;default&#39; which means 10%. This parameter has no action if any of the 2 parameters mutation_probability or mutation_num_genes exist.</span>
</span><span id="GA-143"><a href="#GA-143"><span class="linenos"> 143</span></a><span class="sd">        mutation_num_genes: Number of genes to mutate which defaults to None. If the parameter mutation_num_genes exists, then no need for the parameter mutation_percent_genes. This parameter has no action if the mutation_probability parameter exists.</span>
</span><span id="GA-144"><a href="#GA-144"><span class="linenos"> 144</span></a><span class="sd">        random_mutation_min_val: The minimum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to -1.0.</span>
</span><span id="GA-145"><a href="#GA-145"><span class="linenos"> 145</span></a><span class="sd">        random_mutation_max_val: The maximum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to 1.0.</span>
</span><span id="GA-146"><a href="#GA-146"><span class="linenos"> 146</span></a>
</span><span id="GA-147"><a href="#GA-147"><span class="linenos"> 147</span></a><span class="sd">        gene_space: It accepts a list of all possible values of the gene. This list is used in the mutation step. Should be used only if the gene space is a set of discrete values. No need for the 2 parameters (random_mutation_min_val and random_mutation_max_val) if the parameter gene_space exists. Added in PyGAD 2.5.0. In PyGAD 2.11.0, the gene_space can be assigned a dict.</span>
</span><span id="GA-148"><a href="#GA-148"><span class="linenos"> 148</span></a>
</span><span id="GA-149"><a href="#GA-149"><span class="linenos"> 149</span></a><span class="sd">        on_start: Accepts a function to be called only once before the genetic algorithm starts its evolution. This function must accept a single parameter representing the instance of the genetic algorithm. Added in PyGAD 2.6.0.</span>
</span><span id="GA-150"><a href="#GA-150"><span class="linenos"> 150</span></a><span class="sd">        on_fitness: Accepts a function to be called after calculating the fitness values of all solutions in the population. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of all solutions&#39; fitness values. Added in PyGAD 2.6.0.</span>
</span><span id="GA-151"><a href="#GA-151"><span class="linenos"> 151</span></a><span class="sd">        on_parents: Accepts a function to be called after selecting the parents that mates. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the selected parents. Added in PyGAD 2.6.0.</span>
</span><span id="GA-152"><a href="#GA-152"><span class="linenos"> 152</span></a><span class="sd">        on_crossover: Accepts a function to be called each time the crossover operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring generated using crossover. Added in PyGAD 2.6.0.</span>
</span><span id="GA-153"><a href="#GA-153"><span class="linenos"> 153</span></a><span class="sd">        on_mutation: Accepts a function to be called each time the mutation operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring after applying the mutation. Added in PyGAD 2.6.0.</span>
</span><span id="GA-154"><a href="#GA-154"><span class="linenos"> 154</span></a><span class="sd">        callback_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and should be replaced by the on_generation parameter.</span>
</span><span id="GA-155"><a href="#GA-155"><span class="linenos"> 155</span></a><span class="sd">        on_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Added in PyGAD 2.6.0.</span>
</span><span id="GA-156"><a href="#GA-156"><span class="linenos"> 156</span></a><span class="sd">        on_stop: Accepts a function to be called only once exactly before the genetic algorithm stops or when it completes all the generations. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of fitness values of the last population&#39;s solutions. Added in PyGAD 2.6.0.</span>
</span><span id="GA-157"><a href="#GA-157"><span class="linenos"> 157</span></a>
</span><span id="GA-158"><a href="#GA-158"><span class="linenos"> 158</span></a><span class="sd">        delay_after_gen: Added in PyGAD 2.4.0. It accepts a non-negative number specifying the number of seconds to wait after a generation completes and before going to the next generation. It defaults to 0.0 which means no delay after the generation.</span>
</span><span id="GA-159"><a href="#GA-159"><span class="linenos"> 159</span></a>
</span><span id="GA-160"><a href="#GA-160"><span class="linenos"> 160</span></a><span class="sd">        save_best_solutions: Added in PyGAD 2.9.0 and its type is bool. If True, then the best solution in each generation is saved into the &#39;best_solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations or the number of genes is large.</span>
</span><span id="GA-161"><a href="#GA-161"><span class="linenos"> 161</span></a><span class="sd">        save_solutions: Added in PyGAD 2.15.0 and its type is bool. If True, then all solutions in each generation are saved into the &#39;solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.</span>
</span><span id="GA-162"><a href="#GA-162"><span class="linenos"> 162</span></a>
</span><span id="GA-163"><a href="#GA-163"><span class="linenos"> 163</span></a><span class="sd">        suppress_warnings: Added in PyGAD 2.10.0 and its type is bool. If True, then no warning messages will be displayed. It defaults to False.</span>
</span><span id="GA-164"><a href="#GA-164"><span class="linenos"> 164</span></a>
</span><span id="GA-165"><a href="#GA-165"><span class="linenos"> 165</span></a><span class="sd">        allow_duplicate_genes: Added in PyGAD 2.13.0. If True, then a solution/chromosome may have duplicate gene values. If False, then each gene will have a unique value in its solution.</span>
</span><span id="GA-166"><a href="#GA-166"><span class="linenos"> 166</span></a>
</span><span id="GA-167"><a href="#GA-167"><span class="linenos"> 167</span></a><span class="sd">        stop_criteria: Added in PyGAD 2.15.0. It is assigned to some criteria to stop the evolution if at least one criterion holds.</span>
</span><span id="GA-168"><a href="#GA-168"><span class="linenos"> 168</span></a>
</span><span id="GA-169"><a href="#GA-169"><span class="linenos"> 169</span></a><span class="sd">        parallel_processing: Added in PyGAD 2.17.0. Defaults to `None` which means no parallel processing is used. If a positive integer is assigned, it specifies the number of threads to be used. If a list or a tuple of exactly 2 elements is assigned, then: 1) The first element can be either &quot;process&quot; or &quot;thread&quot; to specify whether processes or threads are used, respectively. 2) The second element can be: 1) A positive integer to select the maximum number of processes or threads to be used. 2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;. 3) None to use the default value as calculated by the concurrent.futures module.</span>
</span><span id="GA-170"><a href="#GA-170"><span class="linenos"> 170</span></a>
</span><span id="GA-171"><a href="#GA-171"><span class="linenos"> 171</span></a><span class="sd">        random_seed: Added in PyGAD 2.18.0. It defines the random seed to be used by the random function generators (we use random functions in the NumPy and random modules). This helps to reproduce the same results by setting the same random seed.</span>
</span><span id="GA-172"><a href="#GA-172"><span class="linenos"> 172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-173"><a href="#GA-173"><span class="linenos"> 173</span></a>
</span><span id="GA-174"><a href="#GA-174"><span class="linenos"> 174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span> <span class="o">=</span> <span class="n">random_seed</span>
</span><span id="GA-175"><a href="#GA-175"><span class="linenos"> 175</span></a>        <span class="k">if</span> <span class="n">random_seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-176"><a href="#GA-176"><span class="linenos"> 176</span></a>            <span class="k">pass</span>
</span><span id="GA-177"><a href="#GA-177"><span class="linenos"> 177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-178"><a href="#GA-178"><span class="linenos"> 178</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="GA-179"><a href="#GA-179"><span class="linenos"> 179</span></a>            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="GA-180"><a href="#GA-180"><span class="linenos"> 180</span></a>
</span><span id="GA-181"><a href="#GA-181"><span class="linenos"> 181</span></a>        <span class="c1"># If suppress_warnings is bool and its valud is False, then print warning messages.</span>
</span><span id="GA-182"><a href="#GA-182"><span class="linenos"> 182</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA-183"><a href="#GA-183"><span class="linenos"> 183</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span> <span class="o">=</span> <span class="n">suppress_warnings</span>
</span><span id="GA-184"><a href="#GA-184"><span class="linenos"> 184</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-185"><a href="#GA-185"><span class="linenos"> 185</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-186"><a href="#GA-186"><span class="linenos"> 186</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-187"><a href="#GA-187"><span class="linenos"> 187</span></a>                <span class="s2">&quot;The expected type of the &#39;suppress_warnings&#39; parameter is bool but </span><span class="si">{suppress_warnings_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-188"><a href="#GA-188"><span class="linenos"> 188</span></a>                    <span class="n">suppress_warnings_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)))</span>
</span><span id="GA-189"><a href="#GA-189"><span class="linenos"> 189</span></a>
</span><span id="GA-190"><a href="#GA-190"><span class="linenos"> 190</span></a>        <span class="c1"># Validating mutation_by_replacement</span>
</span><span id="GA-191"><a href="#GA-191"><span class="linenos"> 191</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="GA-192"><a href="#GA-192"><span class="linenos"> 192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-193"><a href="#GA-193"><span class="linenos"> 193</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-194"><a href="#GA-194"><span class="linenos"> 194</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_by_replacement&#39; parameter is bool but (</span><span class="si">{mutation_by_replacement_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-195"><a href="#GA-195"><span class="linenos"> 195</span></a>                    <span class="n">mutation_by_replacement_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)))</span>
</span><span id="GA-196"><a href="#GA-196"><span class="linenos"> 196</span></a>
</span><span id="GA-197"><a href="#GA-197"><span class="linenos"> 197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span> <span class="o">=</span> <span class="n">mutation_by_replacement</span>
</span><span id="GA-198"><a href="#GA-198"><span class="linenos"> 198</span></a>
</span><span id="GA-199"><a href="#GA-199"><span class="linenos"> 199</span></a>        <span class="c1"># Validate gene_space</span>
</span><span id="GA-200"><a href="#GA-200"><span class="linenos"> 200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-201"><a href="#GA-201"><span class="linenos"> 201</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-202"><a href="#GA-202"><span class="linenos"> 202</span></a>            <span class="k">pass</span>
</span><span id="GA-203"><a href="#GA-203"><span class="linenos"> 203</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-204"><a href="#GA-204"><span class="linenos"> 204</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-205"><a href="#GA-205"><span class="linenos"> 205</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-206"><a href="#GA-206"><span class="linenos"> 206</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;gene_space&#39; cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="p">)</span>
</span><span id="GA-207"><a href="#GA-207"><span class="linenos"> 207</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-208"><a href="#GA-208"><span class="linenos"> 208</span></a>                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA-209"><a href="#GA-209"><span class="linenos"> 209</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-210"><a href="#GA-210"><span class="linenos"> 210</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-211"><a href="#GA-211"><span class="linenos"> 211</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-212"><a href="#GA-212"><span class="linenos"> 212</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-213"><a href="#GA-213"><span class="linenos"> 213</span></a>                                <span class="s2">&quot;The element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39; with type </span><span class="si">{el_type}</span><span class="s2"> cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-214"><a href="#GA-214"><span class="linenos"> 214</span></a>                                    <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA-215"><a href="#GA-215"><span class="linenos"> 215</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-216"><a href="#GA-216"><span class="linenos"> 216</span></a>                            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">el</span><span class="p">:</span>
</span><span id="GA-217"><a href="#GA-217"><span class="linenos"> 217</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="GA-218"><a href="#GA-218"><span class="linenos"> 218</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-219"><a href="#GA-219"><span class="linenos"> 219</span></a>                                        <span class="s2">&quot;All values in the sublists inside the &#39;gene_space&#39; attribute must be numeric of type int/float/None but (</span><span class="si">{val}</span><span class="s2">) of type </span><span class="si">{typ}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-220"><a href="#GA-220"><span class="linenos"> 220</span></a>                                            <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)))</span>
</span><span id="GA-221"><a href="#GA-221"><span class="linenos"> 221</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-222"><a href="#GA-222"><span class="linenos"> 222</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-223"><a href="#GA-223"><span class="linenos"> 223</span></a>                        <span class="k">pass</span>
</span><span id="GA-224"><a href="#GA-224"><span class="linenos"> 224</span></a>                        <span class="c1"># self.gene_space_nested = True</span>
</span><span id="GA-225"><a href="#GA-225"><span class="linenos"> 225</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-226"><a href="#GA-226"><span class="linenos"> 226</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-227"><a href="#GA-227"><span class="linenos"> 227</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA-228"><a href="#GA-228"><span class="linenos"> 228</span></a>                                <span class="k">pass</span>
</span><span id="GA-229"><a href="#GA-229"><span class="linenos"> 229</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-230"><a href="#GA-230"><span class="linenos"> 230</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-231"><a href="#GA-231"><span class="linenos"> 231</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-232"><a href="#GA-232"><span class="linenos"> 232</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-233"><a href="#GA-233"><span class="linenos"> 233</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA-234"><a href="#GA-234"><span class="linenos"> 234</span></a>                        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="GA-235"><a href="#GA-235"><span class="linenos"> 235</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA-236"><a href="#GA-236"><span class="linenos"> 236</span></a>                                <span class="k">pass</span>
</span><span id="GA-237"><a href="#GA-237"><span class="linenos"> 237</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-238"><a href="#GA-238"><span class="linenos"> 238</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-239"><a href="#GA-239"><span class="linenos"> 239</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-240"><a href="#GA-240"><span class="linenos"> 240</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-241"><a href="#GA-241"><span class="linenos"> 241</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA-242"><a href="#GA-242"><span class="linenos"> 242</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-243"><a href="#GA-243"><span class="linenos"> 243</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-244"><a href="#GA-244"><span class="linenos"> 244</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-245"><a href="#GA-245"><span class="linenos"> 245</span></a>                                <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-246"><a href="#GA-246"><span class="linenos"> 246</span></a>                                    <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="GA-247"><a href="#GA-247"><span class="linenos"> 247</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-248"><a href="#GA-248"><span class="linenos"> 248</span></a>                    <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="GA-249"><a href="#GA-249"><span class="linenos"> 249</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-250"><a href="#GA-250"><span class="linenos"> 250</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-251"><a href="#GA-251"><span class="linenos"> 251</span></a>                            <span class="s2">&quot;Unexpected type </span><span class="si">{el_type}</span><span class="s2"> for the element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39;. The accepted types are list/tuple/range/numpy.ndarray of numbers, a single number (int/float), or None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-252"><a href="#GA-252"><span class="linenos"> 252</span></a>                                <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA-253"><a href="#GA-253"><span class="linenos"> 253</span></a>
</span><span id="GA-254"><a href="#GA-254"><span class="linenos"> 254</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-255"><a href="#GA-255"><span class="linenos"> 255</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-256"><a href="#GA-256"><span class="linenos"> 256</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA-257"><a href="#GA-257"><span class="linenos"> 257</span></a>                    <span class="k">pass</span>
</span><span id="GA-258"><a href="#GA-258"><span class="linenos"> 258</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-259"><a href="#GA-259"><span class="linenos"> 259</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-260"><a href="#GA-260"><span class="linenos"> 260</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-261"><a href="#GA-261"><span class="linenos"> 261</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-262"><a href="#GA-262"><span class="linenos"> 262</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA-263"><a href="#GA-263"><span class="linenos"> 263</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="GA-264"><a href="#GA-264"><span class="linenos"> 264</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA-265"><a href="#GA-265"><span class="linenos"> 265</span></a>                    <span class="k">pass</span>
</span><span id="GA-266"><a href="#GA-266"><span class="linenos"> 266</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-267"><a href="#GA-267"><span class="linenos"> 267</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-268"><a href="#GA-268"><span class="linenos"> 268</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-269"><a href="#GA-269"><span class="linenos"> 269</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-270"><a href="#GA-270"><span class="linenos"> 270</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA-271"><a href="#GA-271"><span class="linenos"> 271</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-272"><a href="#GA-272"><span class="linenos"> 272</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-273"><a href="#GA-273"><span class="linenos"> 273</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-274"><a href="#GA-274"><span class="linenos"> 274</span></a>                    <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-275"><a href="#GA-275"><span class="linenos"> 275</span></a>                        <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="GA-276"><a href="#GA-276"><span class="linenos"> 276</span></a>
</span><span id="GA-277"><a href="#GA-277"><span class="linenos"> 277</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-278"><a href="#GA-278"><span class="linenos"> 278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-279"><a href="#GA-279"><span class="linenos"> 279</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-280"><a href="#GA-280"><span class="linenos"> 280</span></a>                <span class="s2">&quot;The expected type of &#39;gene_space&#39; is list, tuple, range, or numpy.ndarray but (</span><span class="si">{gene_space_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-281"><a href="#GA-281"><span class="linenos"> 281</span></a>                    <span class="n">gene_space_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)))</span>
</span><span id="GA-282"><a href="#GA-282"><span class="linenos"> 282</span></a>
</span><span id="GA-283"><a href="#GA-283"><span class="linenos"> 283</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="o">=</span> <span class="n">gene_space</span>
</span><span id="GA-284"><a href="#GA-284"><span class="linenos"> 284</span></a>
</span><span id="GA-285"><a href="#GA-285"><span class="linenos"> 285</span></a>        <span class="c1"># Validate init_range_low and init_range_high</span>
</span><span id="GA-286"><a href="#GA-286"><span class="linenos"> 286</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-287"><a href="#GA-287"><span class="linenos"> 287</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-288"><a href="#GA-288"><span class="linenos"> 288</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span> <span class="o">=</span> <span class="n">init_range_low</span>
</span><span id="GA-289"><a href="#GA-289"><span class="linenos"> 289</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span> <span class="o">=</span> <span class="n">init_range_high</span>
</span><span id="GA-290"><a href="#GA-290"><span class="linenos"> 290</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-291"><a href="#GA-291"><span class="linenos"> 291</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-292"><a href="#GA-292"><span class="linenos"> 292</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-293"><a href="#GA-293"><span class="linenos"> 293</span></a>                    <span class="s2">&quot;The value passed to the &#39;init_range_high&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_high_value}</span><span class="s2">) of type </span><span class="si">{init_range_high_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-294"><a href="#GA-294"><span class="linenos"> 294</span></a>                        <span class="n">init_range_high_value</span><span class="o">=</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">init_range_high_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)))</span>
</span><span id="GA-295"><a href="#GA-295"><span class="linenos"> 295</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-296"><a href="#GA-296"><span class="linenos"> 296</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-297"><a href="#GA-297"><span class="linenos"> 297</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-298"><a href="#GA-298"><span class="linenos"> 298</span></a>                <span class="s2">&quot;The value passed to the &#39;init_range_low&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_low_value}</span><span class="s2">) of type </span><span class="si">{init_range_low_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-299"><a href="#GA-299"><span class="linenos"> 299</span></a>                    <span class="n">init_range_low_value</span><span class="o">=</span><span class="n">init_range_low</span><span class="p">,</span> <span class="n">init_range_low_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)))</span>
</span><span id="GA-300"><a href="#GA-300"><span class="linenos"> 300</span></a>
</span><span id="GA-301"><a href="#GA-301"><span class="linenos"> 301</span></a>        <span class="c1"># Validate random_mutation_min_val and random_mutation_max_val</span>
</span><span id="GA-302"><a href="#GA-302"><span class="linenos"> 302</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-303"><a href="#GA-303"><span class="linenos"> 303</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-304"><a href="#GA-304"><span class="linenos"> 304</span></a>                <span class="k">if</span> <span class="n">random_mutation_min_val</span> <span class="o">==</span> <span class="n">random_mutation_max_val</span><span class="p">:</span>
</span><span id="GA-305"><a href="#GA-305"><span class="linenos"> 305</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-306"><a href="#GA-306"><span class="linenos"> 306</span></a>                        <span class="s2">&quot;The values of the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39; are equal and this causes a fixed change to all genes.&quot;</span><span class="p">)</span>
</span><span id="GA-307"><a href="#GA-307"><span class="linenos"> 307</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-308"><a href="#GA-308"><span class="linenos"> 308</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-309"><a href="#GA-309"><span class="linenos"> 309</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-310"><a href="#GA-310"><span class="linenos"> 310</span></a>                    <span class="s2">&quot;The expected type of the &#39;random_mutation_max_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_max_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-311"><a href="#GA-311"><span class="linenos"> 311</span></a>                        <span class="n">random_mutation_max_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)))</span>
</span><span id="GA-312"><a href="#GA-312"><span class="linenos"> 312</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-313"><a href="#GA-313"><span class="linenos"> 313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-314"><a href="#GA-314"><span class="linenos"> 314</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-315"><a href="#GA-315"><span class="linenos"> 315</span></a>                <span class="s2">&quot;The expected type of the &#39;random_mutation_min_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_min_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-316"><a href="#GA-316"><span class="linenos"> 316</span></a>                    <span class="n">random_mutation_min_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)))</span>
</span><span id="GA-317"><a href="#GA-317"><span class="linenos"> 317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span> <span class="o">=</span> <span class="n">random_mutation_min_val</span>
</span><span id="GA-318"><a href="#GA-318"><span class="linenos"> 318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span> <span class="o">=</span> <span class="n">random_mutation_max_val</span>
</span><span id="GA-319"><a href="#GA-319"><span class="linenos"> 319</span></a>
</span><span id="GA-320"><a href="#GA-320"><span class="linenos"> 320</span></a>        <span class="c1"># Validate gene_type</span>
</span><span id="GA-321"><a href="#GA-321"><span class="linenos"> 321</span></a>        <span class="k">if</span> <span class="n">gene_type</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-322"><a href="#GA-322"><span class="linenos"> 322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA-323"><a href="#GA-323"><span class="linenos"> 323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-324"><a href="#GA-324"><span class="linenos"> 324</span></a>        <span class="c1"># A single data type of float with precision.</span>
</span><span id="GA-325"><a href="#GA-325"><span class="linenos"> 325</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="GA-326"><a href="#GA-326"><span class="linenos"> 326</span></a>                <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">or</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-327"><a href="#GA-327"><span class="linenos"> 327</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="GA-328"><a href="#GA-328"><span class="linenos"> 328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-329"><a href="#GA-329"><span class="linenos"> 329</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-330"><a href="#GA-330"><span class="linenos"> 330</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA-331"><a href="#GA-331"><span class="linenos"> 331</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-332"><a href="#GA-332"><span class="linenos"> 332</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-333"><a href="#GA-333"><span class="linenos"> 333</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_type&#39; is nested, then it can be either [float, int&lt;precision&gt;] or with length equal to the value passed to the &#39;num_genes&#39; parameter. Instead, value </span><span class="si">{gene_type_val}</span><span class="s2"> with len(gene_type) (</span><span class="si">{len_gene_type}</span><span class="s2">) != len(num_genes) (</span><span class="si">{num_genes}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-334"><a href="#GA-334"><span class="linenos"> 334</span></a>                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">len_gene_type</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-335"><a href="#GA-335"><span class="linenos"> 335</span></a>            <span class="k">for</span> <span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_type</span><span class="p">):</span>
</span><span id="GA-336"><a href="#GA-336"><span class="linenos"> 336</span></a>                <span class="k">if</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="GA-337"><a href="#GA-337"><span class="linenos"> 337</span></a>                    <span class="c1"># If the gene type is float and no precision is passed, set it to None.</span>
</span><span id="GA-338"><a href="#GA-338"><span class="linenos"> 338</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA-339"><a href="#GA-339"><span class="linenos"> 339</span></a>                <span class="k">elif</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-340"><a href="#GA-340"><span class="linenos"> 340</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA-341"><a href="#GA-341"><span class="linenos"> 341</span></a>                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-342"><a href="#GA-342"><span class="linenos"> 342</span></a>                    <span class="c1"># A float type is expected in a list/tuple/numpy.ndarray of length 2.</span>
</span><span id="GA-343"><a href="#GA-343"><span class="linenos"> 343</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-344"><a href="#GA-344"><span class="linenos"> 344</span></a>                        <span class="k">if</span> <span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="GA-345"><a href="#GA-345"><span class="linenos"> 345</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-346"><a href="#GA-346"><span class="linenos"> 346</span></a>                                <span class="k">pass</span>
</span><span id="GA-347"><a href="#GA-347"><span class="linenos"> 347</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-348"><a href="#GA-348"><span class="linenos"> 348</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-349"><a href="#GA-349"><span class="linenos"> 349</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-350"><a href="#GA-350"><span class="linenos"> 350</span></a>                                    <span class="s2">&quot;In the &#39;gene_type&#39; parameter, the precision for float gene data types must be an integer but the element </span><span class="si">{gene_type_val}</span><span class="s2"> at index </span><span class="si">{gene_type_idx}</span><span class="s2"> has a precision of </span><span class="si">{gene_type_precision_val}</span><span class="s2"> with type </span><span class="si">{gene_type_type}</span><span class="s2"> .&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-351"><a href="#GA-351"><span class="linenos"> 351</span></a>                                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_precision_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="GA-352"><a href="#GA-352"><span class="linenos"> 352</span></a>                                        <span class="n">gene_type_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA-353"><a href="#GA-353"><span class="linenos"> 353</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-354"><a href="#GA-354"><span class="linenos"> 354</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-355"><a href="#GA-355"><span class="linenos"> 355</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-356"><a href="#GA-356"><span class="linenos"> 356</span></a>                                <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is expected only for float gene data types but the element </span><span class="si">{gene_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">. Note that the data type must be at index 0 followed by precision at index 1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-357"><a href="#GA-357"><span class="linenos"> 357</span></a>                                    <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA-358"><a href="#GA-358"><span class="linenos"> 358</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-359"><a href="#GA-359"><span class="linenos"> 359</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-360"><a href="#GA-360"><span class="linenos"> 360</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-361"><a href="#GA-361"><span class="linenos"> 361</span></a>                            <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is specified in a list/tuple/numpy.ndarray of length 2 but value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> with length </span><span class="si">{gene_type_length}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-362"><a href="#GA-362"><span class="linenos"> 362</span></a>                                <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="GA-363"><a href="#GA-363"><span class="linenos"> 363</span></a>                                <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)))</span>
</span><span id="GA-364"><a href="#GA-364"><span class="linenos"> 364</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-365"><a href="#GA-365"><span class="linenos"> 365</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-366"><a href="#GA-366"><span class="linenos"> 366</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-367"><a href="#GA-367"><span class="linenos"> 367</span></a>                        <span class="s2">&quot;When a list/tuple/numpy.ndarray is assigned to the &#39;gene_type&#39; parameter, then its elements must be of integer, floating-point, list, tuple, or numpy.ndarray data types but the value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-368"><a href="#GA-368"><span class="linenos"> 368</span></a>                            <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="GA-369"><a href="#GA-369"><span class="linenos"> 369</span></a>                            <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA-370"><a href="#GA-370"><span class="linenos"> 370</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="GA-371"><a href="#GA-371"><span class="linenos"> 371</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-372"><a href="#GA-372"><span class="linenos"> 372</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-373"><a href="#GA-373"><span class="linenos"> 373</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-374"><a href="#GA-374"><span class="linenos"> 374</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-375"><a href="#GA-375"><span class="linenos"> 375</span></a>                <span class="s2">&quot;The value passed to the &#39;gene_type&#39; parameter must be either a single integer, floating-point, list, tuple, or numpy.ndarray but (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-376"><a href="#GA-376"><span class="linenos"> 376</span></a>                    <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)))</span>
</span><span id="GA-377"><a href="#GA-377"><span class="linenos"> 377</span></a>
</span><span id="GA-378"><a href="#GA-378"><span class="linenos"> 378</span></a>        <span class="c1"># Build the initial population</span>
</span><span id="GA-379"><a href="#GA-379"><span class="linenos"> 379</span></a>        <span class="k">if</span> <span class="n">initial_population</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-380"><a href="#GA-380"><span class="linenos"> 380</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">sol_per_pop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-381"><a href="#GA-381"><span class="linenos"> 381</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-382"><a href="#GA-382"><span class="linenos"> 382</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-383"><a href="#GA-383"><span class="linenos"> 383</span></a>                    <span class="s2">&quot;Error creating the initial population</span><span class="se">\n\n</span><span class="s2">When the parameter initial_population is None, then neither of the 2 parameters sol_per_pop and num_genes can be None at the same time.</span><span class="se">\n</span><span class="s2">There are 2 options to prepare the initial population:</span><span class="se">\n</span><span class="s2">1) Create an initial population and assign it to the initial_population parameter. In this case, the values of the 2 parameters sol_per_pop and num_genes will be deduced.</span><span class="se">\n</span><span class="s2">2) Allow the genetic algorithm to create the initial population automatically by passing valid integer values to the sol_per_pop and num_genes parameters.&quot;</span><span class="p">)</span>
</span><span id="GA-384"><a href="#GA-384"><span class="linenos"> 384</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="GA-385"><a href="#GA-385"><span class="linenos"> 385</span></a>                <span class="c1"># Validating the number of solutions in the population (sol_per_pop)</span>
</span><span id="GA-386"><a href="#GA-386"><span class="linenos"> 386</span></a>                <span class="k">if</span> <span class="n">sol_per_pop</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-387"><a href="#GA-387"><span class="linenos"> 387</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-388"><a href="#GA-388"><span class="linenos"> 388</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-389"><a href="#GA-389"><span class="linenos"> 389</span></a>                        <span class="s2">&quot;The number of solutions in the population (sol_per_pop) must be &gt; 0 but (</span><span class="si">{sol_per_pop}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-390"><a href="#GA-390"><span class="linenos"> 390</span></a>                            <span class="n">sol_per_pop</span><span class="o">=</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA-391"><a href="#GA-391"><span class="linenos"> 391</span></a>                <span class="c1"># Validating the number of gene.</span>
</span><span id="GA-392"><a href="#GA-392"><span class="linenos"> 392</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-393"><a href="#GA-393"><span class="linenos"> 393</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-394"><a href="#GA-394"><span class="linenos"> 394</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-395"><a href="#GA-395"><span class="linenos"> 395</span></a>                        <span class="s2">&quot;The number of genes cannot be &lt;= 0 but (</span><span class="si">{num_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-396"><a href="#GA-396"><span class="linenos"> 396</span></a>                <span class="c1"># When initial_population=None and the 2 parameters sol_per_pop and num_genes have valid integer values, then the initial population is created.</span>
</span><span id="GA-397"><a href="#GA-397"><span class="linenos"> 397</span></a>                <span class="c1"># Inside the initialize_population() method, the initial_population attribute is assigned to keep the initial population accessible.</span>
</span><span id="GA-398"><a href="#GA-398"><span class="linenos"> 398</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="n">num_genes</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="GA-399"><a href="#GA-399"><span class="linenos"> 399</span></a>
</span><span id="GA-400"><a href="#GA-400"><span class="linenos"> 400</span></a>                <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="GA-401"><a href="#GA-401"><span class="linenos"> 401</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-402"><a href="#GA-402"><span class="linenos"> 402</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA-403"><a href="#GA-403"><span class="linenos"> 403</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-404"><a href="#GA-404"><span class="linenos"> 404</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-405"><a href="#GA-405"><span class="linenos"> 405</span></a>                            <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-406"><a href="#GA-406"><span class="linenos"> 406</span></a>                                <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-407"><a href="#GA-407"><span class="linenos"> 407</span></a>
</span><span id="GA-408"><a href="#GA-408"><span class="linenos"> 408</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="n">sol_per_pop</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="GA-409"><a href="#GA-409"><span class="linenos"> 409</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GA-410"><a href="#GA-410"><span class="linenos"> 410</span></a>                                           <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-411"><a href="#GA-411"><span class="linenos"> 411</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-412"><a href="#GA-412"><span class="linenos"> 412</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-413"><a href="#GA-413"><span class="linenos"> 413</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-414"><a href="#GA-414"><span class="linenos"> 414</span></a>                    <span class="s2">&quot;The expected type of both the sol_per_pop and num_genes parameters is int but (</span><span class="si">{sol_per_pop_type}</span><span class="s2">) and </span><span class="si">{num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-415"><a href="#GA-415"><span class="linenos"> 415</span></a>                        <span class="n">sol_per_pop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">),</span> <span class="n">num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)))</span>
</span><span id="GA-416"><a href="#GA-416"><span class="linenos"> 416</span></a>        <span class="k">elif</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-417"><a href="#GA-417"><span class="linenos"> 417</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-418"><a href="#GA-418"><span class="linenos"> 418</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-419"><a href="#GA-419"><span class="linenos"> 419</span></a>                <span class="s2">&quot;A 2D list is expected to the initail_population parameter but a (</span><span class="si">{initial_population_ndim}</span><span class="s2">-D) list found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-420"><a href="#GA-420"><span class="linenos"> 420</span></a>                    <span class="n">initial_population_ndim</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span><span class="p">))</span>
</span><span id="GA-421"><a href="#GA-421"><span class="linenos"> 421</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-422"><a href="#GA-422"><span class="linenos"> 422</span></a>            <span class="c1"># Forcing the initial_population array to have the data type assigned to the gene_type parameter.</span>
</span><span id="GA-423"><a href="#GA-423"><span class="linenos"> 423</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-424"><a href="#GA-424"><span class="linenos"> 424</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-425"><a href="#GA-425"><span class="linenos"> 425</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-426"><a href="#GA-426"><span class="linenos"> 426</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-427"><a href="#GA-427"><span class="linenos"> 427</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-428"><a href="#GA-428"><span class="linenos"> 428</span></a>                                                          <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-429"><a href="#GA-429"><span class="linenos"> 429</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-430"><a href="#GA-430"><span class="linenos"> 430</span></a>                <span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="GA-431"><a href="#GA-431"><span class="linenos"> 431</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="GA-432"><a href="#GA-432"><span class="linenos"> 432</span></a>                                                      <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-433"><a href="#GA-433"><span class="linenos"> 433</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-434"><a href="#GA-434"><span class="linenos"> 434</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-435"><a href="#GA-435"><span class="linenos"> 435</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-436"><a href="#GA-436"><span class="linenos"> 436</span></a>                                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-437"><a href="#GA-437"><span class="linenos"> 437</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-438"><a href="#GA-438"><span class="linenos"> 438</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA-439"><a href="#GA-439"><span class="linenos"> 439</span></a>                            <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-440"><a href="#GA-440"><span class="linenos"> 440</span></a>                                          <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-441"><a href="#GA-441"><span class="linenos"> 441</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-442"><a href="#GA-442"><span class="linenos"> 442</span></a>
</span><span id="GA-443"><a href="#GA-443"><span class="linenos"> 443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA-444"><a href="#GA-444"><span class="linenos"> 444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="GA-445"><a href="#GA-445"><span class="linenos"> 445</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="GA-446"><a href="#GA-446"><span class="linenos"> 446</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population size.</span>
</span><span id="GA-447"><a href="#GA-447"><span class="linenos"> 447</span></a>
</span><span id="GA-448"><a href="#GA-448"><span class="linenos"> 448</span></a>        <span class="c1"># Round initial_population and population</span>
</span><span id="GA-449"><a href="#GA-449"><span class="linenos"> 449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="GA-450"><a href="#GA-450"><span class="linenos"> 450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA-451"><a href="#GA-451"><span class="linenos"> 451</span></a>
</span><span id="GA-452"><a href="#GA-452"><span class="linenos"> 452</span></a>        <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="GA-453"><a href="#GA-453"><span class="linenos"> 453</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-454"><a href="#GA-454"><span class="linenos"> 454</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA-455"><a href="#GA-455"><span class="linenos"> 455</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-456"><a href="#GA-456"><span class="linenos"> 456</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-457"><a href="#GA-457"><span class="linenos"> 457</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{len_num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-458"><a href="#GA-458"><span class="linenos"> 458</span></a>                        <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">len_num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-459"><a href="#GA-459"><span class="linenos"> 459</span></a>
</span><span id="GA-460"><a href="#GA-460"><span class="linenos"> 460</span></a>        <span class="c1"># Validating the number of parents to be selected for mating (num_parents_mating)</span>
</span><span id="GA-461"><a href="#GA-461"><span class="linenos"> 461</span></a>        <span class="k">if</span> <span class="n">num_parents_mating</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-462"><a href="#GA-462"><span class="linenos"> 462</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-463"><a href="#GA-463"><span class="linenos"> 463</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-464"><a href="#GA-464"><span class="linenos"> 464</span></a>                <span class="s2">&quot;The number of parents mating (num_parents_mating) parameter must be &gt; 0 but (</span><span class="si">{num_parents_mating}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-465"><a href="#GA-465"><span class="linenos"> 465</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">))</span>
</span><span id="GA-466"><a href="#GA-466"><span class="linenos"> 466</span></a>
</span><span id="GA-467"><a href="#GA-467"><span class="linenos"> 467</span></a>        <span class="c1"># Validating the number of parents to be selected for mating: num_parents_mating</span>
</span><span id="GA-468"><a href="#GA-468"><span class="linenos"> 468</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">num_parents_mating</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA-469"><a href="#GA-469"><span class="linenos"> 469</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-470"><a href="#GA-470"><span class="linenos"> 470</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-471"><a href="#GA-471"><span class="linenos"> 471</span></a>                <span class="s2">&quot;The number of parents to select for mating (</span><span class="si">{num_parents_mating}</span><span class="s2">) cannot be greater than the number of solutions in the population (</span><span class="si">{sol_per_pop}</span><span class="s2">) (i.e., num_parents_mating must always be &lt;= sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-472"><a href="#GA-472"><span class="linenos"> 472</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA-473"><a href="#GA-473"><span class="linenos"> 473</span></a>
</span><span id="GA-474"><a href="#GA-474"><span class="linenos"> 474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="o">=</span> <span class="n">num_parents_mating</span>
</span><span id="GA-475"><a href="#GA-475"><span class="linenos"> 475</span></a>
</span><span id="GA-476"><a href="#GA-476"><span class="linenos"> 476</span></a>        <span class="c1"># crossover: Refers to the method that applies the crossover operator based on the selected type of crossover in the crossover_type property.</span>
</span><span id="GA-477"><a href="#GA-477"><span class="linenos"> 477</span></a>        <span class="c1"># Validating the crossover type: crossover_type</span>
</span><span id="GA-478"><a href="#GA-478"><span class="linenos"> 478</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-479"><a href="#GA-479"><span class="linenos"> 479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-480"><a href="#GA-480"><span class="linenos"> 480</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="GA-481"><a href="#GA-481"><span class="linenos"> 481</span></a>            <span class="c1"># Check if the crossover_type is a function that accepts 2 paramaters.</span>
</span><span id="GA-482"><a href="#GA-482"><span class="linenos"> 482</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="GA-483"><a href="#GA-483"><span class="linenos"> 483</span></a>                <span class="c1"># The crossover function assigned to the crossover_type parameter is validated.</span>
</span><span id="GA-484"><a href="#GA-484"><span class="linenos"> 484</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="GA-485"><a href="#GA-485"><span class="linenos"> 485</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-486"><a href="#GA-486"><span class="linenos"> 486</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-487"><a href="#GA-487"><span class="linenos"> 487</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-488"><a href="#GA-488"><span class="linenos"> 488</span></a>                    <span class="s2">&quot;When &#39;crossover_type&#39; is assigned to a function, then this crossover function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The selected parents.</span><span class="se">\n</span><span class="s2">2) The size of the offspring to be produced.3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed crossover function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-489"><a href="#GA-489"><span class="linenos"> 489</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-490"><a href="#GA-490"><span class="linenos"> 490</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA-491"><a href="#GA-491"><span class="linenos"> 491</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-492"><a href="#GA-492"><span class="linenos"> 492</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-493"><a href="#GA-493"><span class="linenos"> 493</span></a>                <span class="s2">&quot;The expected type of the &#39;crossover_type&#39; parameter is either callable or str but (</span><span class="si">{crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-494"><a href="#GA-494"><span class="linenos"> 494</span></a>                    <span class="n">crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)))</span>
</span><span id="GA-495"><a href="#GA-495"><span class="linenos"> 495</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type crossover_type is str</span>
</span><span id="GA-496"><a href="#GA-496"><span class="linenos"> 496</span></a>            <span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA-497"><a href="#GA-497"><span class="linenos"> 497</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;single_point&quot;</span><span class="p">):</span>
</span><span id="GA-498"><a href="#GA-498"><span class="linenos"> 498</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">single_point_crossover</span>
</span><span id="GA-499"><a href="#GA-499"><span class="linenos"> 499</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;two_points&quot;</span><span class="p">):</span>
</span><span id="GA-500"><a href="#GA-500"><span class="linenos"> 500</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">two_points_crossover</span>
</span><span id="GA-501"><a href="#GA-501"><span class="linenos"> 501</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">):</span>
</span><span id="GA-502"><a href="#GA-502"><span class="linenos"> 502</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uniform_crossover</span>
</span><span id="GA-503"><a href="#GA-503"><span class="linenos"> 503</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;scattered&quot;</span><span class="p">):</span>
</span><span id="GA-504"><a href="#GA-504"><span class="linenos"> 504</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scattered_crossover</span>
</span><span id="GA-505"><a href="#GA-505"><span class="linenos"> 505</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-506"><a href="#GA-506"><span class="linenos"> 506</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-507"><a href="#GA-507"><span class="linenos"> 507</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-508"><a href="#GA-508"><span class="linenos"> 508</span></a>                    <span class="s2">&quot;Undefined crossover type. </span><span class="se">\n</span><span class="s2">The assigned value to the crossover_type (</span><span class="si">{crossover_type}</span><span class="s2">) parameter does not refer to one of the supported crossover types which are: </span><span class="se">\n</span><span class="s2">-single_point (for single point crossover)</span><span class="se">\n</span><span class="s2">-two_points (for two points crossover)</span><span class="se">\n</span><span class="s2">-uniform (for uniform crossover)</span><span class="se">\n</span><span class="s2">-scattered (for scattered crossover).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-509"><a href="#GA-509"><span class="linenos"> 509</span></a>                        <span class="n">crossover_type</span><span class="o">=</span><span class="n">crossover_type</span><span class="p">))</span>
</span><span id="GA-510"><a href="#GA-510"><span class="linenos"> 510</span></a>
</span><span id="GA-511"><a href="#GA-511"><span class="linenos"> 511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="GA-512"><a href="#GA-512"><span class="linenos"> 512</span></a>
</span><span id="GA-513"><a href="#GA-513"><span class="linenos"> 513</span></a>        <span class="c1"># Calculate the value of crossover_probability</span>
</span><span id="GA-514"><a href="#GA-514"><span class="linenos"> 514</span></a>        <span class="k">if</span> <span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-515"><a href="#GA-515"><span class="linenos"> 515</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-516"><a href="#GA-516"><span class="linenos"> 516</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-517"><a href="#GA-517"><span class="linenos"> 517</span></a>            <span class="k">if</span> <span class="n">crossover_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">crossover_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-518"><a href="#GA-518"><span class="linenos"> 518</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="n">crossover_probability</span>
</span><span id="GA-519"><a href="#GA-519"><span class="linenos"> 519</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-520"><a href="#GA-520"><span class="linenos"> 520</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-521"><a href="#GA-521"><span class="linenos"> 521</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-522"><a href="#GA-522"><span class="linenos"> 522</span></a>                    <span class="s2">&quot;The value assigned to the &#39;crossover_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-523"><a href="#GA-523"><span class="linenos"> 523</span></a>                        <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">))</span>
</span><span id="GA-524"><a href="#GA-524"><span class="linenos"> 524</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-525"><a href="#GA-525"><span class="linenos"> 525</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-526"><a href="#GA-526"><span class="linenos"> 526</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-527"><a href="#GA-527"><span class="linenos"> 527</span></a>                <span class="s2">&quot;Unexpected type for the &#39;crossover_probability&#39; parameter. Float is expected but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) of type </span><span class="si">{crossover_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-528"><a href="#GA-528"><span class="linenos"> 528</span></a>                    <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">,</span>
</span><span id="GA-529"><a href="#GA-529"><span class="linenos"> 529</span></a>                    <span class="n">crossover_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)))</span>
</span><span id="GA-530"><a href="#GA-530"><span class="linenos"> 530</span></a>
</span><span id="GA-531"><a href="#GA-531"><span class="linenos"> 531</span></a>        <span class="c1"># mutation: Refers to the method that applies the mutation operator based on the selected type of mutation in the mutation_type property.</span>
</span><span id="GA-532"><a href="#GA-532"><span class="linenos"> 532</span></a>        <span class="c1"># Validating the mutation type: mutation_type</span>
</span><span id="GA-533"><a href="#GA-533"><span class="linenos"> 533</span></a>        <span class="c1"># &quot;adaptive&quot; mutation is supported starting from PyGAD 2.10.0</span>
</span><span id="GA-534"><a href="#GA-534"><span class="linenos"> 534</span></a>        <span class="k">if</span> <span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-535"><a href="#GA-535"><span class="linenos"> 535</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-536"><a href="#GA-536"><span class="linenos"> 536</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="GA-537"><a href="#GA-537"><span class="linenos"> 537</span></a>            <span class="c1"># Check if the mutation_type is a function that accepts 1 paramater.</span>
</span><span id="GA-538"><a href="#GA-538"><span class="linenos"> 538</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-539"><a href="#GA-539"><span class="linenos"> 539</span></a>                <span class="c1"># The mutation function assigned to the mutation_type parameter is validated.</span>
</span><span id="GA-540"><a href="#GA-540"><span class="linenos"> 540</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="GA-541"><a href="#GA-541"><span class="linenos"> 541</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-542"><a href="#GA-542"><span class="linenos"> 542</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-543"><a href="#GA-543"><span class="linenos"> 543</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-544"><a href="#GA-544"><span class="linenos"> 544</span></a>                    <span class="s2">&quot;When &#39;mutation_type&#39; is assigned to a function, then this mutation function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The offspring to be mutated.</span><span class="se">\n</span><span class="s2">2) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed mutation function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-545"><a href="#GA-545"><span class="linenos"> 545</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-546"><a href="#GA-546"><span class="linenos"> 546</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA-547"><a href="#GA-547"><span class="linenos"> 547</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-548"><a href="#GA-548"><span class="linenos"> 548</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-549"><a href="#GA-549"><span class="linenos"> 549</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_type&#39; parameter is either callable or str but (</span><span class="si">{mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-550"><a href="#GA-550"><span class="linenos"> 550</span></a>                    <span class="n">mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)))</span>
</span><span id="GA-551"><a href="#GA-551"><span class="linenos"> 551</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type mutation_type is str</span>
</span><span id="GA-552"><a href="#GA-552"><span class="linenos"> 552</span></a>            <span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA-553"><a href="#GA-553"><span class="linenos"> 553</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="GA-554"><a href="#GA-554"><span class="linenos"> 554</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation</span>
</span><span id="GA-555"><a href="#GA-555"><span class="linenos"> 555</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;swap&quot;</span><span class="p">):</span>
</span><span id="GA-556"><a href="#GA-556"><span class="linenos"> 556</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">swap_mutation</span>
</span><span id="GA-557"><a href="#GA-557"><span class="linenos"> 557</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;scramble&quot;</span><span class="p">):</span>
</span><span id="GA-558"><a href="#GA-558"><span class="linenos"> 558</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scramble_mutation</span>
</span><span id="GA-559"><a href="#GA-559"><span class="linenos"> 559</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;inversion&quot;</span><span class="p">):</span>
</span><span id="GA-560"><a href="#GA-560"><span class="linenos"> 560</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inversion_mutation</span>
</span><span id="GA-561"><a href="#GA-561"><span class="linenos"> 561</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA-562"><a href="#GA-562"><span class="linenos"> 562</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation</span>
</span><span id="GA-563"><a href="#GA-563"><span class="linenos"> 563</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-564"><a href="#GA-564"><span class="linenos"> 564</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-565"><a href="#GA-565"><span class="linenos"> 565</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-566"><a href="#GA-566"><span class="linenos"> 566</span></a>                    <span class="s2">&quot;Undefined mutation type. </span><span class="se">\n</span><span class="s2">The assigned string value to the &#39;mutation_type&#39; parameter (</span><span class="si">{mutation_type}</span><span class="s2">) does not refer to one of the supported mutation types which are: </span><span class="se">\n</span><span class="s2">-random (for random mutation)</span><span class="se">\n</span><span class="s2">-swap (for swap mutation)</span><span class="se">\n</span><span class="s2">-inversion (for inversion mutation)</span><span class="se">\n</span><span class="s2">-scramble (for scramble mutation)</span><span class="se">\n</span><span class="s2">-adaptive (for adaptive mutation).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-567"><a href="#GA-567"><span class="linenos"> 567</span></a>                        <span class="n">mutation_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="GA-568"><a href="#GA-568"><span class="linenos"> 568</span></a>
</span><span id="GA-569"><a href="#GA-569"><span class="linenos"> 569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="GA-570"><a href="#GA-570"><span class="linenos"> 570</span></a>
</span><span id="GA-571"><a href="#GA-571"><span class="linenos"> 571</span></a>        <span class="c1"># Calculate the value of mutation_probability</span>
</span><span id="GA-572"><a href="#GA-572"><span class="linenos"> 572</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-573"><a href="#GA-573"><span class="linenos"> 573</span></a>            <span class="k">if</span> <span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-574"><a href="#GA-574"><span class="linenos"> 574</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-575"><a href="#GA-575"><span class="linenos"> 575</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA-576"><a href="#GA-576"><span class="linenos"> 576</span></a>                <span class="c1"># Mutation probability is fixed not adaptive.</span>
</span><span id="GA-577"><a href="#GA-577"><span class="linenos"> 577</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-578"><a href="#GA-578"><span class="linenos"> 578</span></a>                    <span class="k">if</span> <span class="n">mutation_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">mutation_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-579"><a href="#GA-579"><span class="linenos"> 579</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="GA-580"><a href="#GA-580"><span class="linenos"> 580</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-581"><a href="#GA-581"><span class="linenos"> 581</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-582"><a href="#GA-582"><span class="linenos"> 582</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-583"><a href="#GA-583"><span class="linenos"> 583</span></a>                            <span class="s2">&quot;The value assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-584"><a href="#GA-584"><span class="linenos"> 584</span></a>                                <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">))</span>
</span><span id="GA-585"><a href="#GA-585"><span class="linenos"> 585</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-586"><a href="#GA-586"><span class="linenos"> 586</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-587"><a href="#GA-587"><span class="linenos"> 587</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-588"><a href="#GA-588"><span class="linenos"> 588</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-589"><a href="#GA-589"><span class="linenos"> 589</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="GA-590"><a href="#GA-590"><span class="linenos"> 590</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA-591"><a href="#GA-591"><span class="linenos"> 591</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-592"><a href="#GA-592"><span class="linenos"> 592</span></a>                <span class="c1"># Mutation probability is adaptive not fixed.</span>
</span><span id="GA-593"><a href="#GA-593"><span class="linenos"> 593</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-594"><a href="#GA-594"><span class="linenos"> 594</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-595"><a href="#GA-595"><span class="linenos"> 595</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA-596"><a href="#GA-596"><span class="linenos"> 596</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-597"><a href="#GA-597"><span class="linenos"> 597</span></a>                                <span class="k">if</span> <span class="n">el</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-598"><a href="#GA-598"><span class="linenos"> 598</span></a>                                    <span class="k">pass</span>
</span><span id="GA-599"><a href="#GA-599"><span class="linenos"> 599</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-600"><a href="#GA-600"><span class="linenos"> 600</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-601"><a href="#GA-601"><span class="linenos"> 601</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-602"><a href="#GA-602"><span class="linenos"> 602</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-603"><a href="#GA-603"><span class="linenos"> 603</span></a>                                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="GA-604"><a href="#GA-604"><span class="linenos"> 604</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-605"><a href="#GA-605"><span class="linenos"> 605</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-606"><a href="#GA-606"><span class="linenos"> 606</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-607"><a href="#GA-607"><span class="linenos"> 607</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-608"><a href="#GA-608"><span class="linenos"> 608</span></a>                                        <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA-609"><a href="#GA-609"><span class="linenos"> 609</span></a>                        <span class="k">if</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA-610"><a href="#GA-610"><span class="linenos"> 610</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-611"><a href="#GA-611"><span class="linenos"> 611</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_probability&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-612"><a href="#GA-612"><span class="linenos"> 612</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA-613"><a href="#GA-613"><span class="linenos"> 613</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="GA-614"><a href="#GA-614"><span class="linenos"> 614</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-615"><a href="#GA-615"><span class="linenos"> 615</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-616"><a href="#GA-616"><span class="linenos"> 616</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-617"><a href="#GA-617"><span class="linenos"> 617</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_probability&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_probability_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-618"><a href="#GA-618"><span class="linenos"> 618</span></a>                                <span class="n">mutation_probability_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA-619"><a href="#GA-619"><span class="linenos"> 619</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-620"><a href="#GA-620"><span class="linenos"> 620</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-621"><a href="#GA-621"><span class="linenos"> 621</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-622"><a href="#GA-622"><span class="linenos"> 622</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-623"><a href="#GA-623"><span class="linenos"> 623</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="GA-624"><a href="#GA-624"><span class="linenos"> 624</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA-625"><a href="#GA-625"><span class="linenos"> 625</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-626"><a href="#GA-626"><span class="linenos"> 626</span></a>            <span class="k">pass</span>
</span><span id="GA-627"><a href="#GA-627"><span class="linenos"> 627</span></a>
</span><span id="GA-628"><a href="#GA-628"><span class="linenos"> 628</span></a>        <span class="c1"># Calculate the value of mutation_num_genes</span>
</span><span id="GA-629"><a href="#GA-629"><span class="linenos"> 629</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-630"><a href="#GA-630"><span class="linenos"> 630</span></a>            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-631"><a href="#GA-631"><span class="linenos"> 631</span></a>                <span class="c1"># The mutation_num_genes parameter does not exist. Checking whether adaptive mutation is used.</span>
</span><span id="GA-632"><a href="#GA-632"><span class="linenos"> 632</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA-633"><a href="#GA-633"><span class="linenos"> 633</span></a>                    <span class="c1"># The percent of genes to mutate is fixed not adaptive.</span>
</span><span id="GA-634"><a href="#GA-634"><span class="linenos"> 634</span></a>                    <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="GA-635"><a href="#GA-635"><span class="linenos"> 635</span></a>                        <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="GA-636"><a href="#GA-636"><span class="linenos"> 636</span></a>                        <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA-637"><a href="#GA-637"><span class="linenos"> 637</span></a>                        <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA-638"><a href="#GA-638"><span class="linenos"> 638</span></a>                        <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA-639"><a href="#GA-639"><span class="linenos"> 639</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-640"><a href="#GA-640"><span class="linenos"> 640</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-641"><a href="#GA-641"><span class="linenos"> 641</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-642"><a href="#GA-642"><span class="linenos"> 642</span></a>                                    <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-643"><a href="#GA-643"><span class="linenos"> 643</span></a>                                        <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-644"><a href="#GA-644"><span class="linenos"> 644</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA-645"><a href="#GA-645"><span class="linenos"> 645</span></a>
</span><span id="GA-646"><a href="#GA-646"><span class="linenos"> 646</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-647"><a href="#GA-647"><span class="linenos"> 647</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="n">mutation_percent_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mutation_percent_genes</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="GA-648"><a href="#GA-648"><span class="linenos"> 648</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-649"><a href="#GA-649"><span class="linenos"> 649</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-650"><a href="#GA-650"><span class="linenos"> 650</span></a>                                <span class="s2">&quot;The percentage of selected genes for mutation (mutation_percent_genes) must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-651"><a href="#GA-651"><span class="linenos"> 651</span></a>                                    <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA-652"><a href="#GA-652"><span class="linenos"> 652</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-653"><a href="#GA-653"><span class="linenos"> 653</span></a>                            <span class="c1"># If mutation_percent_genes equals the string &quot;default&quot;, then it is replaced by the numeric value 10.</span>
</span><span id="GA-654"><a href="#GA-654"><span class="linenos"> 654</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="GA-655"><a href="#GA-655"><span class="linenos"> 655</span></a>                                <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="GA-656"><a href="#GA-656"><span class="linenos"> 656</span></a>
</span><span id="GA-657"><a href="#GA-657"><span class="linenos"> 657</span></a>                            <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA-658"><a href="#GA-658"><span class="linenos"> 658</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA-659"><a href="#GA-659"><span class="linenos"> 659</span></a>                            <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA-660"><a href="#GA-660"><span class="linenos"> 660</span></a>                            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-661"><a href="#GA-661"><span class="linenos"> 661</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-662"><a href="#GA-662"><span class="linenos"> 662</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-663"><a href="#GA-663"><span class="linenos"> 663</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-664"><a href="#GA-664"><span class="linenos"> 664</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-665"><a href="#GA-665"><span class="linenos"> 665</span></a>                                <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA-666"><a href="#GA-666"><span class="linenos"> 666</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-667"><a href="#GA-667"><span class="linenos"> 667</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-668"><a href="#GA-668"><span class="linenos"> 668</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-669"><a href="#GA-669"><span class="linenos"> 669</span></a>                            <span class="s2">&quot;Unexpected value or type of the &#39;mutation_percent_genes&#39; parameter. It only accepts the string &#39;default&#39; or a numeric value but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-670"><a href="#GA-670"><span class="linenos"> 670</span></a>                                <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span>
</span><span id="GA-671"><a href="#GA-671"><span class="linenos"> 671</span></a>                                <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="GA-672"><a href="#GA-672"><span class="linenos"> 672</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-673"><a href="#GA-673"><span class="linenos"> 673</span></a>                    <span class="c1"># The percent of genes to mutate is adaptive not fixed.</span>
</span><span id="GA-674"><a href="#GA-674"><span class="linenos"> 674</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-675"><a href="#GA-675"><span class="linenos"> 675</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-676"><a href="#GA-676"><span class="linenos"> 676</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
</span><span id="GA-677"><a href="#GA-677"><span class="linenos"> 677</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">):</span>
</span><span id="GA-678"><a href="#GA-678"><span class="linenos"> 678</span></a>                                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-679"><a href="#GA-679"><span class="linenos"> 679</span></a>                                    <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">el</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="GA-680"><a href="#GA-680"><span class="linenos"> 680</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-681"><a href="#GA-681"><span class="linenos"> 681</span></a>                                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-682"><a href="#GA-682"><span class="linenos"> 682</span></a>                                            <span class="s2">&quot;The values assigned to the &#39;mutation_percent_genes&#39; must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-683"><a href="#GA-683"><span class="linenos"> 683</span></a>                                                <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA-684"><a href="#GA-684"><span class="linenos"> 684</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-685"><a href="#GA-685"><span class="linenos"> 685</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-686"><a href="#GA-686"><span class="linenos"> 686</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-687"><a href="#GA-687"><span class="linenos"> 687</span></a>                                        <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_percent_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-688"><a href="#GA-688"><span class="linenos"> 688</span></a>                                            <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA-689"><a href="#GA-689"><span class="linenos"> 689</span></a>                                <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_percent_genes&#39; is validated.</span>
</span><span id="GA-690"><a href="#GA-690"><span class="linenos"> 690</span></a>                                <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA-691"><a href="#GA-691"><span class="linenos"> 691</span></a>                                <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">(</span>
</span><span id="GA-692"><a href="#GA-692"><span class="linenos"> 692</span></a>                                    <span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA-693"><a href="#GA-693"><span class="linenos"> 693</span></a>                                <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA-694"><a href="#GA-694"><span class="linenos"> 694</span></a>                                <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-695"><a href="#GA-695"><span class="linenos"> 695</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-696"><a href="#GA-696"><span class="linenos"> 696</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-697"><a href="#GA-697"><span class="linenos"> 697</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span>
</span><span id="GA-698"><a href="#GA-698"><span class="linenos"> 698</span></a>                                            <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]))</span>
</span><span id="GA-699"><a href="#GA-699"><span class="linenos"> 699</span></a>                                    <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA-700"><a href="#GA-700"><span class="linenos"> 700</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA-701"><a href="#GA-701"><span class="linenos"> 701</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-702"><a href="#GA-702"><span class="linenos"> 702</span></a>                                    <span class="s2">&quot;The first element in the &#39;mutation_percent_genes&#39; parameter is (</span><span class="si">{first_el}</span><span class="s2">) which is smaller than the second element (</span><span class="si">{second_el}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions.</span><span class="se">\n</span><span class="s2">Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-703"><a href="#GA-703"><span class="linenos"> 703</span></a>                                        <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA-704"><a href="#GA-704"><span class="linenos"> 704</span></a>                            <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_percent_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="GA-705"><a href="#GA-705"><span class="linenos"> 705</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-706"><a href="#GA-706"><span class="linenos"> 706</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-707"><a href="#GA-707"><span class="linenos"> 707</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-708"><a href="#GA-708"><span class="linenos"> 708</span></a>                                <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_percent_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-709"><a href="#GA-709"><span class="linenos"> 709</span></a>                                    <span class="n">mutation_percent_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="GA-710"><a href="#GA-710"><span class="linenos"> 710</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-711"><a href="#GA-711"><span class="linenos"> 711</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-712"><a href="#GA-712"><span class="linenos"> 712</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-713"><a href="#GA-713"><span class="linenos"> 713</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-714"><a href="#GA-714"><span class="linenos"> 714</span></a>                                <span class="s2">&quot;Unexpected type for the &#39;mutation_percent_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter should exist and assigned a list/tuple/numpy.ndarray with 2 values but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-715"><a href="#GA-715"><span class="linenos"> 715</span></a>                                    <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA-716"><a href="#GA-716"><span class="linenos"> 716</span></a>            <span class="c1"># The mutation_num_genes parameter exists. Checking whether adaptive mutation is used.</span>
</span><span id="GA-717"><a href="#GA-717"><span class="linenos"> 717</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA-718"><a href="#GA-718"><span class="linenos"> 718</span></a>                <span class="c1"># Number of genes to mutate is fixed not adaptive.</span>
</span><span id="GA-719"><a href="#GA-719"><span class="linenos"> 719</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-720"><a href="#GA-720"><span class="linenos"> 720</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-721"><a href="#GA-721"><span class="linenos"> 721</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-722"><a href="#GA-722"><span class="linenos"> 722</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-723"><a href="#GA-723"><span class="linenos"> 723</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes) cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-724"><a href="#GA-724"><span class="linenos"> 724</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-725"><a href="#GA-725"><span class="linenos"> 725</span></a>                    <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-726"><a href="#GA-726"><span class="linenos"> 726</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-727"><a href="#GA-727"><span class="linenos"> 727</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-728"><a href="#GA-728"><span class="linenos"> 728</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes), which is (</span><span class="si">{mutation_num_genes}</span><span class="s2">), cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-729"><a href="#GA-729"><span class="linenos"> 729</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-730"><a href="#GA-730"><span class="linenos"> 730</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-731"><a href="#GA-731"><span class="linenos"> 731</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-732"><a href="#GA-732"><span class="linenos"> 732</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-733"><a href="#GA-733"><span class="linenos"> 733</span></a>                        <span class="s2">&quot;The &#39;mutation_num_genes&#39; parameter is expected to be a positive integer but the value (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-734"><a href="#GA-734"><span class="linenos"> 734</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="GA-735"><a href="#GA-735"><span class="linenos"> 735</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA-736"><a href="#GA-736"><span class="linenos"> 736</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-737"><a href="#GA-737"><span class="linenos"> 737</span></a>                <span class="c1"># Number of genes to mutate is adaptive not fixed.</span>
</span><span id="GA-738"><a href="#GA-738"><span class="linenos"> 738</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-739"><a href="#GA-739"><span class="linenos"> 739</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-740"><a href="#GA-740"><span class="linenos"> 740</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_num_genes</span><span class="p">:</span>
</span><span id="GA-741"><a href="#GA-741"><span class="linenos"> 741</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-742"><a href="#GA-742"><span class="linenos"> 742</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-743"><a href="#GA-743"><span class="linenos"> 743</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-744"><a href="#GA-744"><span class="linenos"> 744</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-745"><a href="#GA-745"><span class="linenos"> 745</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-746"><a href="#GA-746"><span class="linenos"> 746</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="GA-747"><a href="#GA-747"><span class="linenos"> 747</span></a>                                <span class="k">elif</span> <span class="p">(</span><span class="n">el</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-748"><a href="#GA-748"><span class="linenos"> 748</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-749"><a href="#GA-749"><span class="linenos"> 749</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-750"><a href="#GA-750"><span class="linenos"> 750</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">) but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-751"><a href="#GA-751"><span class="linenos"> 751</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-752"><a href="#GA-752"><span class="linenos"> 752</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-753"><a href="#GA-753"><span class="linenos"> 753</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-754"><a href="#GA-754"><span class="linenos"> 754</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-755"><a href="#GA-755"><span class="linenos"> 755</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_num_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-756"><a href="#GA-756"><span class="linenos"> 756</span></a>                                        <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA-757"><a href="#GA-757"><span class="linenos"> 757</span></a>                            <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_num_genes&#39; is validated.</span>
</span><span id="GA-758"><a href="#GA-758"><span class="linenos"> 758</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA-759"><a href="#GA-759"><span class="linenos"> 759</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-760"><a href="#GA-760"><span class="linenos"> 760</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_num_genes&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-761"><a href="#GA-761"><span class="linenos"> 761</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA-762"><a href="#GA-762"><span class="linenos"> 762</span></a>                        <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_num_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="GA-763"><a href="#GA-763"><span class="linenos"> 763</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-764"><a href="#GA-764"><span class="linenos"> 764</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-765"><a href="#GA-765"><span class="linenos"> 765</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-766"><a href="#GA-766"><span class="linenos"> 766</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_num_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_num_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-767"><a href="#GA-767"><span class="linenos"> 767</span></a>                                <span class="n">mutation_num_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA-768"><a href="#GA-768"><span class="linenos"> 768</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-769"><a href="#GA-769"><span class="linenos"> 769</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-770"><a href="#GA-770"><span class="linenos"> 770</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-771"><a href="#GA-771"><span class="linenos"> 771</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_num_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-772"><a href="#GA-772"><span class="linenos"> 772</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="GA-773"><a href="#GA-773"><span class="linenos"> 773</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA-774"><a href="#GA-774"><span class="linenos"> 774</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-775"><a href="#GA-775"><span class="linenos"> 775</span></a>            <span class="k">pass</span>
</span><span id="GA-776"><a href="#GA-776"><span class="linenos"> 776</span></a>
</span><span id="GA-777"><a href="#GA-777"><span class="linenos"> 777</span></a>        <span class="c1"># Validating mutation_by_replacement and mutation_type</span>
</span><span id="GA-778"><a href="#GA-778"><span class="linenos"> 778</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;random&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-779"><a href="#GA-779"><span class="linenos"> 779</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-780"><a href="#GA-780"><span class="linenos"> 780</span></a>                <span class="s2">&quot;The mutation_by_replacement parameter is set to True while the mutation_type parameter is not set to random but (</span><span class="si">{mut_type}</span><span class="s2">). Note that the mutation_by_replacement parameter has an effect only when mutation_type=&#39;random&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-781"><a href="#GA-781"><span class="linenos"> 781</span></a>                    <span class="n">mut_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="GA-782"><a href="#GA-782"><span class="linenos"> 782</span></a>
</span><span id="GA-783"><a href="#GA-783"><span class="linenos"> 783</span></a>        <span class="c1"># Check if crossover and mutation are both disabled.</span>
</span><span id="GA-784"><a href="#GA-784"><span class="linenos"> 784</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-785"><a href="#GA-785"><span class="linenos"> 785</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-786"><a href="#GA-786"><span class="linenos"> 786</span></a>                <span class="s2">&quot;The 2 parameters mutation_type and crossover_type are None. This disables any type of evolution the genetic algorithm can make. As a result, the genetic algorithm cannot find a better solution that the best solution in the initial population.&quot;</span><span class="p">)</span>
</span><span id="GA-787"><a href="#GA-787"><span class="linenos"> 787</span></a>
</span><span id="GA-788"><a href="#GA-788"><span class="linenos"> 788</span></a>        <span class="c1"># select_parents: Refers to a method that selects the parents based on the parent selection type specified in the parent_selection_type attribute.</span>
</span><span id="GA-789"><a href="#GA-789"><span class="linenos"> 789</span></a>        <span class="c1"># Validating the selected type of parent selection: parent_selection_type</span>
</span><span id="GA-790"><a href="#GA-790"><span class="linenos"> 790</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="GA-791"><a href="#GA-791"><span class="linenos"> 791</span></a>            <span class="c1"># Check if the parent_selection_type is a function that accepts 3 paramaters.</span>
</span><span id="GA-792"><a href="#GA-792"><span class="linenos"> 792</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="GA-793"><a href="#GA-793"><span class="linenos"> 793</span></a>                <span class="c1"># population: Added in PyGAD 2.16.0. It should used only to support custom parent selection functions. Otherwise, it should be left to None to retirve the population by self.population.</span>
</span><span id="GA-794"><a href="#GA-794"><span class="linenos"> 794</span></a>                <span class="c1"># The parent selection function assigned to the parent_selection_type parameter is validated.</span>
</span><span id="GA-795"><a href="#GA-795"><span class="linenos"> 795</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="GA-796"><a href="#GA-796"><span class="linenos"> 796</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-797"><a href="#GA-797"><span class="linenos"> 797</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-798"><a href="#GA-798"><span class="linenos"> 798</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-799"><a href="#GA-799"><span class="linenos"> 799</span></a>                    <span class="s2">&quot;When &#39;parent_selection_type&#39; is assigned to a user-defined function, then this parent selection function must accept 3 parameters:</span><span class="se">\n</span><span class="s2">1) The fitness values of the current population.</span><span class="se">\n</span><span class="s2">2) The number of parents needed.</span><span class="se">\n</span><span class="s2">3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed parent selection function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-800"><a href="#GA-800"><span class="linenos"> 800</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="GA-801"><a href="#GA-801"><span class="linenos"> 801</span></a>                        <span class="n">argcount</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-802"><a href="#GA-802"><span class="linenos"> 802</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA-803"><a href="#GA-803"><span class="linenos"> 803</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-804"><a href="#GA-804"><span class="linenos"> 804</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-805"><a href="#GA-805"><span class="linenos"> 805</span></a>                <span class="s2">&quot;The expected type of the &#39;parent_selection_type&#39; parameter is either callable or str but (</span><span class="si">{parent_selection_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-806"><a href="#GA-806"><span class="linenos"> 806</span></a>                    <span class="n">parent_selection_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)))</span>
</span><span id="GA-807"><a href="#GA-807"><span class="linenos"> 807</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-808"><a href="#GA-808"><span class="linenos"> 808</span></a>            <span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA-809"><a href="#GA-809"><span class="linenos"> 809</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span><span class="p">):</span>
</span><span id="GA-810"><a href="#GA-810"><span class="linenos"> 810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span>
</span><span id="GA-811"><a href="#GA-811"><span class="linenos"> 811</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rws&quot;</span><span class="p">):</span>
</span><span id="GA-812"><a href="#GA-812"><span class="linenos"> 812</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roulette_wheel_selection</span>
</span><span id="GA-813"><a href="#GA-813"><span class="linenos"> 813</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sus&quot;</span><span class="p">):</span>
</span><span id="GA-814"><a href="#GA-814"><span class="linenos"> 814</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_universal_selection</span>
</span><span id="GA-815"><a href="#GA-815"><span class="linenos"> 815</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="GA-816"><a href="#GA-816"><span class="linenos"> 816</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_selection</span>
</span><span id="GA-817"><a href="#GA-817"><span class="linenos"> 817</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="GA-818"><a href="#GA-818"><span class="linenos"> 818</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tournament_selection</span>
</span><span id="GA-819"><a href="#GA-819"><span class="linenos"> 819</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rank&quot;</span><span class="p">):</span>
</span><span id="GA-820"><a href="#GA-820"><span class="linenos"> 820</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_selection</span>
</span><span id="GA-821"><a href="#GA-821"><span class="linenos"> 821</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-822"><a href="#GA-822"><span class="linenos"> 822</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-823"><a href="#GA-823"><span class="linenos"> 823</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-824"><a href="#GA-824"><span class="linenos"> 824</span></a>                    <span class="s2">&quot;Undefined parent selection type: </span><span class="si">{parent_selection_type}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the &#39;parent_selection_type&#39; parameter does not refer to one of the supported parent selection techniques which are: </span><span class="se">\n</span><span class="s2">-sss (for steady state selection)</span><span class="se">\n</span><span class="s2">-rws (for roulette wheel selection)</span><span class="se">\n</span><span class="s2">-sus (for stochastic universal selection)</span><span class="se">\n</span><span class="s2">-rank (for rank selection)</span><span class="se">\n</span><span class="s2">-random (for random selection)</span><span class="se">\n</span><span class="s2">-tournament (for tournament selection).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-825"><a href="#GA-825"><span class="linenos"> 825</span></a>                        <span class="n">parent_selection_type</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="p">))</span>
</span><span id="GA-826"><a href="#GA-826"><span class="linenos"> 826</span></a>
</span><span id="GA-827"><a href="#GA-827"><span class="linenos"> 827</span></a>        <span class="c1"># For tournament selection, validate the K value.</span>
</span><span id="GA-828"><a href="#GA-828"><span class="linenos"> 828</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="GA-829"><a href="#GA-829"><span class="linenos"> 829</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA-830"><a href="#GA-830"><span class="linenos"> 830</span></a>                <span class="n">K_tournament</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA-831"><a href="#GA-831"><span class="linenos"> 831</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-832"><a href="#GA-832"><span class="linenos"> 832</span></a>                    <span class="s2">&quot;K of the tournament selection (</span><span class="si">{K_tournament}</span><span class="s2">) should not be greater than the number of solutions within the population (</span><span class="si">{sol_per_pop}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">K will be clipped to be equal to the number of solutions in the population (sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-833"><a href="#GA-833"><span class="linenos"> 833</span></a>                        <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA-834"><a href="#GA-834"><span class="linenos"> 834</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-835"><a href="#GA-835"><span class="linenos"> 835</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-836"><a href="#GA-836"><span class="linenos"> 836</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;K of the tournament selection cannot be &lt;=0 but (</span><span class="si">{K_tournament}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-837"><a href="#GA-837"><span class="linenos"> 837</span></a>                    <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">))</span>
</span><span id="GA-838"><a href="#GA-838"><span class="linenos"> 838</span></a>
</span><span id="GA-839"><a href="#GA-839"><span class="linenos"> 839</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span> <span class="o">=</span> <span class="n">K_tournament</span>
</span><span id="GA-840"><a href="#GA-840"><span class="linenos"> 840</span></a>
</span><span id="GA-841"><a href="#GA-841"><span class="linenos"> 841</span></a>        <span class="c1"># Validating the number of parents to keep in the next population: keep_parents</span>
</span><span id="GA-842"><a href="#GA-842"><span class="linenos"> 842</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="GA-843"><a href="#GA-843"><span class="linenos"> 843</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-844"><a href="#GA-844"><span class="linenos"> 844</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-845"><a href="#GA-845"><span class="linenos"> 845</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_parents parameter. The value </span><span class="si">{keep_parents}</span><span class="s2"> of type </span><span class="si">{keep_parents_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-846"><a href="#GA-846"><span class="linenos"> 846</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">,</span> <span class="n">keep_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)))</span>
</span><span id="GA-847"><a href="#GA-847"><span class="linenos"> 847</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA-848"><a href="#GA-848"><span class="linenos"> 848</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-849"><a href="#GA-849"><span class="linenos"> 849</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-850"><a href="#GA-850"><span class="linenos"> 850</span></a>                <span class="s2">&quot;Incorrect value to the keep_parents parameter: </span><span class="si">{keep_parents}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_parent parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Less than or equal to num_parents_mating</span><span class="se">\n</span><span class="s2">3) Greater than or equal to -1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-851"><a href="#GA-851"><span class="linenos"> 851</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">))</span>
</span><span id="GA-852"><a href="#GA-852"><span class="linenos"> 852</span></a>
</span><span id="GA-853"><a href="#GA-853"><span class="linenos"> 853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">=</span> <span class="n">keep_parents</span>
</span><span id="GA-854"><a href="#GA-854"><span class="linenos"> 854</span></a>
</span><span id="GA-855"><a href="#GA-855"><span class="linenos"> 855</span></a>        <span class="k">if</span> <span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-856"><a href="#GA-856"><span class="linenos"> 856</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-857"><a href="#GA-857"><span class="linenos"> 857</span></a>                <span class="s2">&quot;The steady-state parent (sss) selection operator is used despite that no parents are kept in the next generation.&quot;</span><span class="p">)</span>
</span><span id="GA-858"><a href="#GA-858"><span class="linenos"> 858</span></a>
</span><span id="GA-859"><a href="#GA-859"><span class="linenos"> 859</span></a>        <span class="c1"># Validating the number of elitism to keep in the next population: keep_elitism</span>
</span><span id="GA-860"><a href="#GA-860"><span class="linenos"> 860</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="GA-861"><a href="#GA-861"><span class="linenos"> 861</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-862"><a href="#GA-862"><span class="linenos"> 862</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-863"><a href="#GA-863"><span class="linenos"> 863</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_elitism parameter. The value </span><span class="si">{keep_elitism}</span><span class="s2"> of type </span><span class="si">{keep_elitism_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-864"><a href="#GA-864"><span class="linenos"> 864</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">,</span> <span class="n">keep_elitism_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)))</span>
</span><span id="GA-865"><a href="#GA-865"><span class="linenos"> 865</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_elitism</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_elitism</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-866"><a href="#GA-866"><span class="linenos"> 866</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-867"><a href="#GA-867"><span class="linenos"> 867</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-868"><a href="#GA-868"><span class="linenos"> 868</span></a>                <span class="s2">&quot;Incorrect value to the keep_elitism parameter: </span><span class="si">{keep_elitism}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_elitism parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Greater than or equal to 0.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-869"><a href="#GA-869"><span class="linenos"> 869</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">))</span>
</span><span id="GA-870"><a href="#GA-870"><span class="linenos"> 870</span></a>
</span><span id="GA-871"><a href="#GA-871"><span class="linenos"> 871</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">=</span> <span class="n">keep_elitism</span>
</span><span id="GA-872"><a href="#GA-872"><span class="linenos"> 872</span></a>
</span><span id="GA-873"><a href="#GA-873"><span class="linenos"> 873</span></a>        <span class="c1"># Validate keep_parents.</span>
</span><span id="GA-874"><a href="#GA-874"><span class="linenos"> 874</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-875"><a href="#GA-875"><span class="linenos"> 875</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># Keep all parents in the next population.</span>
</span><span id="GA-876"><a href="#GA-876"><span class="linenos"> 876</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>
</span><span id="GA-877"><a href="#GA-877"><span class="linenos"> 877</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep no parents in the next population.</span>
</span><span id="GA-878"><a href="#GA-878"><span class="linenos"> 878</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA-879"><a href="#GA-879"><span class="linenos"> 879</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep the specified number of parents in the next population.</span>
</span><span id="GA-880"><a href="#GA-880"><span class="linenos"> 880</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="GA-881"><a href="#GA-881"><span class="linenos"> 881</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-882"><a href="#GA-882"><span class="linenos"> 882</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span>
</span><span id="GA-883"><a href="#GA-883"><span class="linenos"> 883</span></a>
</span><span id="GA-884"><a href="#GA-884"><span class="linenos"> 884</span></a>        <span class="c1"># Check if the fitness_func is a function.</span>
</span><span id="GA-885"><a href="#GA-885"><span class="linenos"> 885</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">):</span>
</span><span id="GA-886"><a href="#GA-886"><span class="linenos"> 886</span></a>            <span class="c1"># Check if the fitness function accepts 2 paramaters.</span>
</span><span id="GA-887"><a href="#GA-887"><span class="linenos"> 887</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-888"><a href="#GA-888"><span class="linenos"> 888</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span> <span class="o">=</span> <span class="n">fitness_func</span>
</span><span id="GA-889"><a href="#GA-889"><span class="linenos"> 889</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-890"><a href="#GA-890"><span class="linenos"> 890</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-891"><a href="#GA-891"><span class="linenos"> 891</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-892"><a href="#GA-892"><span class="linenos"> 892</span></a>                    <span class="s2">&quot;The fitness function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) A solution to calculate its fitness value.</span><span class="se">\n</span><span class="s2">2) The solution&#39;s index within the population.</span><span class="se">\n\n</span><span class="s2">The passed fitness function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-893"><a href="#GA-893"><span class="linenos"> 893</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-894"><a href="#GA-894"><span class="linenos"> 894</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-895"><a href="#GA-895"><span class="linenos"> 895</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-896"><a href="#GA-896"><span class="linenos"> 896</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-897"><a href="#GA-897"><span class="linenos"> 897</span></a>                <span class="s2">&quot;The value assigned to the fitness_func parameter is expected to be of type function but (</span><span class="si">{fitness_func_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-898"><a href="#GA-898"><span class="linenos"> 898</span></a>                    <span class="n">fitness_func_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">)))</span>
</span><span id="GA-899"><a href="#GA-899"><span class="linenos"> 899</span></a>
</span><span id="GA-900"><a href="#GA-900"><span class="linenos"> 900</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
</span><span id="GA-901"><a href="#GA-901"><span class="linenos"> 901</span></a>
</span><span id="GA-902"><a href="#GA-902"><span class="linenos"> 902</span></a>        <span class="c1"># Check if the on_start exists.</span>
</span><span id="GA-903"><a href="#GA-903"><span class="linenos"> 903</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-904"><a href="#GA-904"><span class="linenos"> 904</span></a>            <span class="c1"># Check if the on_start is a function.</span>
</span><span id="GA-905"><a href="#GA-905"><span class="linenos"> 905</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_start</span><span class="p">):</span>
</span><span id="GA-906"><a href="#GA-906"><span class="linenos"> 906</span></a>                <span class="c1"># Check if the on_start function accepts only a single paramater.</span>
</span><span id="GA-907"><a href="#GA-907"><span class="linenos"> 907</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-908"><a href="#GA-908"><span class="linenos"> 908</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="n">on_start</span>
</span><span id="GA-909"><a href="#GA-909"><span class="linenos"> 909</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-910"><a href="#GA-910"><span class="linenos"> 910</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-911"><a href="#GA-911"><span class="linenos"> 911</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-912"><a href="#GA-912"><span class="linenos"> 912</span></a>                        <span class="s2">&quot;The function assigned to the on_start parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-913"><a href="#GA-913"><span class="linenos"> 913</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-914"><a href="#GA-914"><span class="linenos"> 914</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-915"><a href="#GA-915"><span class="linenos"> 915</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-916"><a href="#GA-916"><span class="linenos"> 916</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-917"><a href="#GA-917"><span class="linenos"> 917</span></a>                    <span class="s2">&quot;The value assigned to the on_start parameter is expected to be of type function but (</span><span class="si">{on_start_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-918"><a href="#GA-918"><span class="linenos"> 918</span></a>                        <span class="n">on_start_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_start</span><span class="p">)))</span>
</span><span id="GA-919"><a href="#GA-919"><span class="linenos"> 919</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-920"><a href="#GA-920"><span class="linenos"> 920</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-921"><a href="#GA-921"><span class="linenos"> 921</span></a>
</span><span id="GA-922"><a href="#GA-922"><span class="linenos"> 922</span></a>        <span class="c1"># Check if the on_fitness exists.</span>
</span><span id="GA-923"><a href="#GA-923"><span class="linenos"> 923</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-924"><a href="#GA-924"><span class="linenos"> 924</span></a>            <span class="c1"># Check if the on_fitness is a function.</span>
</span><span id="GA-925"><a href="#GA-925"><span class="linenos"> 925</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">):</span>
</span><span id="GA-926"><a href="#GA-926"><span class="linenos"> 926</span></a>                <span class="c1"># Check if the on_fitness function accepts 2 paramaters.</span>
</span><span id="GA-927"><a href="#GA-927"><span class="linenos"> 927</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-928"><a href="#GA-928"><span class="linenos"> 928</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="n">on_fitness</span>
</span><span id="GA-929"><a href="#GA-929"><span class="linenos"> 929</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-930"><a href="#GA-930"><span class="linenos"> 930</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-931"><a href="#GA-931"><span class="linenos"> 931</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-932"><a href="#GA-932"><span class="linenos"> 932</span></a>                        <span class="s2">&quot;The function assigned to the on_fitness parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-933"><a href="#GA-933"><span class="linenos"> 933</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-934"><a href="#GA-934"><span class="linenos"> 934</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-935"><a href="#GA-935"><span class="linenos"> 935</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-936"><a href="#GA-936"><span class="linenos"> 936</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-937"><a href="#GA-937"><span class="linenos"> 937</span></a>                    <span class="s2">&quot;The value assigned to the on_fitness parameter is expected to be of type function but (</span><span class="si">{on_fitness_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-938"><a href="#GA-938"><span class="linenos"> 938</span></a>                        <span class="n">on_fitness_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">)))</span>
</span><span id="GA-939"><a href="#GA-939"><span class="linenos"> 939</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-940"><a href="#GA-940"><span class="linenos"> 940</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-941"><a href="#GA-941"><span class="linenos"> 941</span></a>
</span><span id="GA-942"><a href="#GA-942"><span class="linenos"> 942</span></a>        <span class="c1"># Check if the on_parents exists.</span>
</span><span id="GA-943"><a href="#GA-943"><span class="linenos"> 943</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-944"><a href="#GA-944"><span class="linenos"> 944</span></a>            <span class="c1"># Check if the on_parents is a function.</span>
</span><span id="GA-945"><a href="#GA-945"><span class="linenos"> 945</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_parents</span><span class="p">):</span>
</span><span id="GA-946"><a href="#GA-946"><span class="linenos"> 946</span></a>                <span class="c1"># Check if the on_parents function accepts 2 paramaters.</span>
</span><span id="GA-947"><a href="#GA-947"><span class="linenos"> 947</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-948"><a href="#GA-948"><span class="linenos"> 948</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="n">on_parents</span>
</span><span id="GA-949"><a href="#GA-949"><span class="linenos"> 949</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-950"><a href="#GA-950"><span class="linenos"> 950</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-951"><a href="#GA-951"><span class="linenos"> 951</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-952"><a href="#GA-952"><span class="linenos"> 952</span></a>                        <span class="s2">&quot;The function assigned to the on_parents parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-953"><a href="#GA-953"><span class="linenos"> 953</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-954"><a href="#GA-954"><span class="linenos"> 954</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-955"><a href="#GA-955"><span class="linenos"> 955</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-956"><a href="#GA-956"><span class="linenos"> 956</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-957"><a href="#GA-957"><span class="linenos"> 957</span></a>                    <span class="s2">&quot;The value assigned to the on_parents parameter is expected to be of type function but (</span><span class="si">{on_parents_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-958"><a href="#GA-958"><span class="linenos"> 958</span></a>                        <span class="n">on_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_parents</span><span class="p">)))</span>
</span><span id="GA-959"><a href="#GA-959"><span class="linenos"> 959</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-960"><a href="#GA-960"><span class="linenos"> 960</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-961"><a href="#GA-961"><span class="linenos"> 961</span></a>
</span><span id="GA-962"><a href="#GA-962"><span class="linenos"> 962</span></a>        <span class="c1"># Check if the on_crossover exists.</span>
</span><span id="GA-963"><a href="#GA-963"><span class="linenos"> 963</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-964"><a href="#GA-964"><span class="linenos"> 964</span></a>            <span class="c1"># Check if the on_crossover is a function.</span>
</span><span id="GA-965"><a href="#GA-965"><span class="linenos"> 965</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">):</span>
</span><span id="GA-966"><a href="#GA-966"><span class="linenos"> 966</span></a>                <span class="c1"># Check if the on_crossover function accepts 2 paramaters.</span>
</span><span id="GA-967"><a href="#GA-967"><span class="linenos"> 967</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-968"><a href="#GA-968"><span class="linenos"> 968</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="n">on_crossover</span>
</span><span id="GA-969"><a href="#GA-969"><span class="linenos"> 969</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-970"><a href="#GA-970"><span class="linenos"> 970</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-971"><a href="#GA-971"><span class="linenos"> 971</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-972"><a href="#GA-972"><span class="linenos"> 972</span></a>                        <span class="s2">&quot;The function assigned to the on_crossover parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring generated using crossover.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-973"><a href="#GA-973"><span class="linenos"> 973</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-974"><a href="#GA-974"><span class="linenos"> 974</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-975"><a href="#GA-975"><span class="linenos"> 975</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-976"><a href="#GA-976"><span class="linenos"> 976</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-977"><a href="#GA-977"><span class="linenos"> 977</span></a>                    <span class="s2">&quot;The value assigned to the on_crossover parameter is expected to be of type function but (</span><span class="si">{on_crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-978"><a href="#GA-978"><span class="linenos"> 978</span></a>                        <span class="n">on_crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">)))</span>
</span><span id="GA-979"><a href="#GA-979"><span class="linenos"> 979</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-980"><a href="#GA-980"><span class="linenos"> 980</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-981"><a href="#GA-981"><span class="linenos"> 981</span></a>
</span><span id="GA-982"><a href="#GA-982"><span class="linenos"> 982</span></a>        <span class="c1"># Check if the on_mutation exists.</span>
</span><span id="GA-983"><a href="#GA-983"><span class="linenos"> 983</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-984"><a href="#GA-984"><span class="linenos"> 984</span></a>            <span class="c1"># Check if the on_mutation is a function.</span>
</span><span id="GA-985"><a href="#GA-985"><span class="linenos"> 985</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">):</span>
</span><span id="GA-986"><a href="#GA-986"><span class="linenos"> 986</span></a>                <span class="c1"># Check if the on_mutation function accepts 2 paramaters.</span>
</span><span id="GA-987"><a href="#GA-987"><span class="linenos"> 987</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-988"><a href="#GA-988"><span class="linenos"> 988</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="n">on_mutation</span>
</span><span id="GA-989"><a href="#GA-989"><span class="linenos"> 989</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-990"><a href="#GA-990"><span class="linenos"> 990</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-991"><a href="#GA-991"><span class="linenos"> 991</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-992"><a href="#GA-992"><span class="linenos"> 992</span></a>                        <span class="s2">&quot;The function assigned to the on_mutation parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring after applying the mutation operation.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-993"><a href="#GA-993"><span class="linenos"> 993</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-994"><a href="#GA-994"><span class="linenos"> 994</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-995"><a href="#GA-995"><span class="linenos"> 995</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-996"><a href="#GA-996"><span class="linenos"> 996</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-997"><a href="#GA-997"><span class="linenos"> 997</span></a>                    <span class="s2">&quot;The value assigned to the on_mutation parameter is expected to be of type function but (</span><span class="si">{on_mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-998"><a href="#GA-998"><span class="linenos"> 998</span></a>                        <span class="n">on_mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">)))</span>
</span><span id="GA-999"><a href="#GA-999"><span class="linenos"> 999</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1000"><a href="#GA-1000"><span class="linenos">1000</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1001"><a href="#GA-1001"><span class="linenos">1001</span></a>
</span><span id="GA-1002"><a href="#GA-1002"><span class="linenos">1002</span></a>        <span class="c1"># Check if the callback_generation exists.</span>
</span><span id="GA-1003"><a href="#GA-1003"><span class="linenos">1003</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">callback_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1004"><a href="#GA-1004"><span class="linenos">1004</span></a>            <span class="c1"># Check if the callback_generation is a function.</span>
</span><span id="GA-1005"><a href="#GA-1005"><span class="linenos">1005</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">):</span>
</span><span id="GA-1006"><a href="#GA-1006"><span class="linenos">1006</span></a>                <span class="c1"># Check if the callback_generation function accepts only a single paramater.</span>
</span><span id="GA-1007"><a href="#GA-1007"><span class="linenos">1007</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-1008"><a href="#GA-1008"><span class="linenos">1008</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="GA-1009"><a href="#GA-1009"><span class="linenos">1009</span></a>                    <span class="n">on_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="GA-1010"><a href="#GA-1010"><span class="linenos">1010</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-1011"><a href="#GA-1011"><span class="linenos">1011</span></a>                        <span class="s2">&quot;Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and will be removed in a later release of PyGAD. Please use the on_generation parameter instead.&quot;</span><span class="p">)</span>
</span><span id="GA-1012"><a href="#GA-1012"><span class="linenos">1012</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1013"><a href="#GA-1013"><span class="linenos">1013</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1014"><a href="#GA-1014"><span class="linenos">1014</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1015"><a href="#GA-1015"><span class="linenos">1015</span></a>                        <span class="s2">&quot;The function assigned to the callback_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1016"><a href="#GA-1016"><span class="linenos">1016</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="GA-1017"><a href="#GA-1017"><span class="linenos">1017</span></a>                            <span class="n">argcount</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-1018"><a href="#GA-1018"><span class="linenos">1018</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1019"><a href="#GA-1019"><span class="linenos">1019</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1020"><a href="#GA-1020"><span class="linenos">1020</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1021"><a href="#GA-1021"><span class="linenos">1021</span></a>                    <span class="s2">&quot;The value assigned to the callback_generation parameter is expected to be of type function but (</span><span class="si">{callback_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1022"><a href="#GA-1022"><span class="linenos">1022</span></a>                        <span class="n">callback_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">)))</span>
</span><span id="GA-1023"><a href="#GA-1023"><span class="linenos">1023</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1024"><a href="#GA-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1025"><a href="#GA-1025"><span class="linenos">1025</span></a>
</span><span id="GA-1026"><a href="#GA-1026"><span class="linenos">1026</span></a>        <span class="c1"># Check if the on_generation exists.</span>
</span><span id="GA-1027"><a href="#GA-1027"><span class="linenos">1027</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1028"><a href="#GA-1028"><span class="linenos">1028</span></a>            <span class="c1"># Check if the on_generation is a function.</span>
</span><span id="GA-1029"><a href="#GA-1029"><span class="linenos">1029</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_generation</span><span class="p">):</span>
</span><span id="GA-1030"><a href="#GA-1030"><span class="linenos">1030</span></a>                <span class="c1"># Check if the on_generation function accepts only a single paramater.</span>
</span><span id="GA-1031"><a href="#GA-1031"><span class="linenos">1031</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-1032"><a href="#GA-1032"><span class="linenos">1032</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="n">on_generation</span>
</span><span id="GA-1033"><a href="#GA-1033"><span class="linenos">1033</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1034"><a href="#GA-1034"><span class="linenos">1034</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1035"><a href="#GA-1035"><span class="linenos">1035</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1036"><a href="#GA-1036"><span class="linenos">1036</span></a>                        <span class="s2">&quot;The function assigned to the on_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1037"><a href="#GA-1037"><span class="linenos">1037</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-1038"><a href="#GA-1038"><span class="linenos">1038</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1039"><a href="#GA-1039"><span class="linenos">1039</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1040"><a href="#GA-1040"><span class="linenos">1040</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1041"><a href="#GA-1041"><span class="linenos">1041</span></a>                    <span class="s2">&quot;The value assigned to the on_generation parameter is expected to be of type function but (</span><span class="si">{on_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1042"><a href="#GA-1042"><span class="linenos">1042</span></a>                        <span class="n">on_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_generation</span><span class="p">)))</span>
</span><span id="GA-1043"><a href="#GA-1043"><span class="linenos">1043</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1044"><a href="#GA-1044"><span class="linenos">1044</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1045"><a href="#GA-1045"><span class="linenos">1045</span></a>
</span><span id="GA-1046"><a href="#GA-1046"><span class="linenos">1046</span></a>        <span class="c1"># Check if the on_stop exists.</span>
</span><span id="GA-1047"><a href="#GA-1047"><span class="linenos">1047</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1048"><a href="#GA-1048"><span class="linenos">1048</span></a>            <span class="c1"># Check if the on_stop is a function.</span>
</span><span id="GA-1049"><a href="#GA-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_stop</span><span class="p">):</span>
</span><span id="GA-1050"><a href="#GA-1050"><span class="linenos">1050</span></a>                <span class="c1"># Check if the on_stop function accepts 2 paramaters.</span>
</span><span id="GA-1051"><a href="#GA-1051"><span class="linenos">1051</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA-1052"><a href="#GA-1052"><span class="linenos">1052</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="n">on_stop</span>
</span><span id="GA-1053"><a href="#GA-1053"><span class="linenos">1053</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1054"><a href="#GA-1054"><span class="linenos">1054</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1055"><a href="#GA-1055"><span class="linenos">1055</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1056"><a href="#GA-1056"><span class="linenos">1056</span></a>                        <span class="s2">&quot;The function assigned to the on_stop parameter must accept 2 parameters representing the instance of the genetic algorithm and a list of the fitness values of the solutions in the last population.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1057"><a href="#GA-1057"><span class="linenos">1057</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA-1058"><a href="#GA-1058"><span class="linenos">1058</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1059"><a href="#GA-1059"><span class="linenos">1059</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1060"><a href="#GA-1060"><span class="linenos">1060</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1061"><a href="#GA-1061"><span class="linenos">1061</span></a>                    <span class="s2">&quot;The value assigned to the &#39;on_stop&#39; parameter is expected to be of type function but (</span><span class="si">{on_stop_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1062"><a href="#GA-1062"><span class="linenos">1062</span></a>                        <span class="n">on_stop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_stop</span><span class="p">)))</span>
</span><span id="GA-1063"><a href="#GA-1063"><span class="linenos">1063</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1064"><a href="#GA-1064"><span class="linenos">1064</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1065"><a href="#GA-1065"><span class="linenos">1065</span></a>
</span><span id="GA-1066"><a href="#GA-1066"><span class="linenos">1066</span></a>        <span class="c1"># Validate delay_after_gen</span>
</span><span id="GA-1067"><a href="#GA-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-1068"><a href="#GA-1068"><span class="linenos">1068</span></a>            <span class="k">if</span> <span class="n">delay_after_gen</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="GA-1069"><a href="#GA-1069"><span class="linenos">1069</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span> <span class="o">=</span> <span class="n">delay_after_gen</span>
</span><span id="GA-1070"><a href="#GA-1070"><span class="linenos">1070</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1071"><a href="#GA-1071"><span class="linenos">1071</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1072"><a href="#GA-1072"><span class="linenos">1072</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1073"><a href="#GA-1073"><span class="linenos">1073</span></a>                    <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be a non-negative number. The value passed is </span><span class="si">{delay_after_gen}</span><span class="s2"> of type </span><span class="si">{delay_after_gen_type}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1074"><a href="#GA-1074"><span class="linenos">1074</span></a>                        <span class="n">delay_after_gen</span><span class="o">=</span><span class="n">delay_after_gen</span><span class="p">,</span> <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="GA-1075"><a href="#GA-1075"><span class="linenos">1075</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1076"><a href="#GA-1076"><span class="linenos">1076</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1077"><a href="#GA-1077"><span class="linenos">1077</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1078"><a href="#GA-1078"><span class="linenos">1078</span></a>                <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be of type int or float but (</span><span class="si">{delay_after_gen_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1079"><a href="#GA-1079"><span class="linenos">1079</span></a>                    <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="GA-1080"><a href="#GA-1080"><span class="linenos">1080</span></a>
</span><span id="GA-1081"><a href="#GA-1081"><span class="linenos">1081</span></a>        <span class="c1"># Validate save_best_solutions</span>
</span><span id="GA-1082"><a href="#GA-1082"><span class="linenos">1082</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA-1083"><a href="#GA-1083"><span class="linenos">1083</span></a>            <span class="k">if</span> <span class="n">save_best_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1084"><a href="#GA-1084"><span class="linenos">1084</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-1085"><a href="#GA-1085"><span class="linenos">1085</span></a>                    <span class="s2">&quot;Use the &#39;save_best_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations or number of genes is large.&quot;</span><span class="p">)</span>
</span><span id="GA-1086"><a href="#GA-1086"><span class="linenos">1086</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1087"><a href="#GA-1087"><span class="linenos">1087</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1088"><a href="#GA-1088"><span class="linenos">1088</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1089"><a href="#GA-1089"><span class="linenos">1089</span></a>                <span class="s2">&quot;The value passed to the &#39;save_best_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_best_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1090"><a href="#GA-1090"><span class="linenos">1090</span></a>                    <span class="n">save_best_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)))</span>
</span><span id="GA-1091"><a href="#GA-1091"><span class="linenos">1091</span></a>
</span><span id="GA-1092"><a href="#GA-1092"><span class="linenos">1092</span></a>        <span class="c1"># Validate save_solutions</span>
</span><span id="GA-1093"><a href="#GA-1093"><span class="linenos">1093</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA-1094"><a href="#GA-1094"><span class="linenos">1094</span></a>            <span class="k">if</span> <span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1095"><a href="#GA-1095"><span class="linenos">1095</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-1096"><a href="#GA-1096"><span class="linenos">1096</span></a>                    <span class="s2">&quot;Use the &#39;save_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.&quot;</span><span class="p">)</span>
</span><span id="GA-1097"><a href="#GA-1097"><span class="linenos">1097</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1098"><a href="#GA-1098"><span class="linenos">1098</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1099"><a href="#GA-1099"><span class="linenos">1099</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1100"><a href="#GA-1100"><span class="linenos">1100</span></a>                <span class="s2">&quot;The value passed to the &#39;save_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1101"><a href="#GA-1101"><span class="linenos">1101</span></a>                    <span class="n">save_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)))</span>
</span><span id="GA-1102"><a href="#GA-1102"><span class="linenos">1102</span></a>
</span><span id="GA-1103"><a href="#GA-1103"><span class="linenos">1103</span></a>        <span class="c1"># Validate allow_duplicate_genes</span>
</span><span id="GA-1104"><a href="#GA-1104"><span class="linenos">1104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="GA-1105"><a href="#GA-1105"><span class="linenos">1105</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1106"><a href="#GA-1106"><span class="linenos">1106</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1107"><a href="#GA-1107"><span class="linenos">1107</span></a>                <span class="s2">&quot;The expected type of the &#39;allow_duplicate_genes&#39; parameter is bool but (</span><span class="si">{allow_duplicate_genes_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1108"><a href="#GA-1108"><span class="linenos">1108</span></a>                    <span class="n">allow_duplicate_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)))</span>
</span><span id="GA-1109"><a href="#GA-1109"><span class="linenos">1109</span></a>
</span><span id="GA-1110"><a href="#GA-1110"><span class="linenos">1110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">=</span> <span class="n">allow_duplicate_genes</span>
</span><span id="GA-1111"><a href="#GA-1111"><span class="linenos">1111</span></a>
</span><span id="GA-1112"><a href="#GA-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-1113"><a href="#GA-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;reach&quot;</span><span class="p">,</span> <span class="s2">&quot;saturate&quot;</span><span class="p">]</span>
</span><span id="GA-1114"><a href="#GA-1114"><span class="linenos">1114</span></a>        <span class="k">if</span> <span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1115"><a href="#GA-1115"><span class="linenos">1115</span></a>            <span class="c1"># None: Stop after passing through all generations.</span>
</span><span id="GA-1116"><a href="#GA-1116"><span class="linenos">1116</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1117"><a href="#GA-1117"><span class="linenos">1117</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA-1118"><a href="#GA-1118"><span class="linenos">1118</span></a>            <span class="c1"># reach_{target_fitness}: Stop if the target fitness value is reached.</span>
</span><span id="GA-1119"><a href="#GA-1119"><span class="linenos">1119</span></a>            <span class="c1"># saturate_{num_generations}: Stop if the fitness value does not change (saturates) for the given number of generations.</span>
</span><span id="GA-1120"><a href="#GA-1120"><span class="linenos">1120</span></a>            <span class="n">criterion</span> <span class="o">=</span> <span class="n">stop_criteria</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="GA-1121"><a href="#GA-1121"><span class="linenos">1121</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-1122"><a href="#GA-1122"><span class="linenos">1122</span></a>                <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1123"><a href="#GA-1123"><span class="linenos">1123</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-1124"><a href="#GA-1124"><span class="linenos">1124</span></a>
</span><span id="GA-1125"><a href="#GA-1125"><span class="linenos">1125</span></a>                <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="GA-1126"><a href="#GA-1126"><span class="linenos">1126</span></a>                    <span class="k">pass</span>
</span><span id="GA-1127"><a href="#GA-1127"><span class="linenos">1127</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1128"><a href="#GA-1128"><span class="linenos">1128</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1129"><a href="#GA-1129"><span class="linenos">1129</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1130"><a href="#GA-1130"><span class="linenos">1130</span></a>                        <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are &#39;</span><span class="si">{supported_stop_words}</span><span class="s2">&#39; but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1131"><a href="#GA-1131"><span class="linenos">1131</span></a>                            <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="GA-1132"><a href="#GA-1132"><span class="linenos">1132</span></a>
</span><span id="GA-1133"><a href="#GA-1133"><span class="linenos">1133</span></a>                <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="GA-1134"><a href="#GA-1134"><span class="linenos">1134</span></a>                    <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="GA-1135"><a href="#GA-1135"><span class="linenos">1135</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1136"><a href="#GA-1136"><span class="linenos">1136</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1137"><a href="#GA-1137"><span class="linenos">1137</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1138"><a href="#GA-1138"><span class="linenos">1138</span></a>                        <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1139"><a href="#GA-1139"><span class="linenos">1139</span></a>                            <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="GA-1140"><a href="#GA-1140"><span class="linenos">1140</span></a>
</span><span id="GA-1141"><a href="#GA-1141"><span class="linenos">1141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="GA-1142"><a href="#GA-1142"><span class="linenos">1142</span></a>
</span><span id="GA-1143"><a href="#GA-1143"><span class="linenos">1143</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1144"><a href="#GA-1144"><span class="linenos">1144</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1145"><a href="#GA-1145"><span class="linenos">1145</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1146"><a href="#GA-1146"><span class="linenos">1146</span></a>                    <span class="s2">&quot;For format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but &#39;</span><span class="si">{stop_criteria}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1147"><a href="#GA-1147"><span class="linenos">1147</span></a>                        <span class="n">stop_criteria</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="GA-1148"><a href="#GA-1148"><span class="linenos">1148</span></a>
</span><span id="GA-1149"><a href="#GA-1149"><span class="linenos">1149</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA-1150"><a href="#GA-1150"><span class="linenos">1150</span></a>            <span class="c1"># Remove duplicate criterira by converting the list to a set then back to a list.</span>
</span><span id="GA-1151"><a href="#GA-1151"><span class="linenos">1151</span></a>            <span class="n">stop_criteria</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="GA-1152"><a href="#GA-1152"><span class="linenos">1152</span></a>            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">):</span>
</span><span id="GA-1153"><a href="#GA-1153"><span class="linenos">1153</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA-1154"><a href="#GA-1154"><span class="linenos">1154</span></a>                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="GA-1155"><a href="#GA-1155"><span class="linenos">1155</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-1156"><a href="#GA-1156"><span class="linenos">1156</span></a>                        <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1157"><a href="#GA-1157"><span class="linenos">1157</span></a>                        <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-1158"><a href="#GA-1158"><span class="linenos">1158</span></a>
</span><span id="GA-1159"><a href="#GA-1159"><span class="linenos">1159</span></a>                        <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="GA-1160"><a href="#GA-1160"><span class="linenos">1160</span></a>                            <span class="k">pass</span>
</span><span id="GA-1161"><a href="#GA-1161"><span class="linenos">1161</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1162"><a href="#GA-1162"><span class="linenos">1162</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1163"><a href="#GA-1163"><span class="linenos">1163</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1164"><a href="#GA-1164"><span class="linenos">1164</span></a>                                <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are </span><span class="si">{supported_stop_words}</span><span class="s2"> but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1165"><a href="#GA-1165"><span class="linenos">1165</span></a>                                    <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="GA-1166"><a href="#GA-1166"><span class="linenos">1166</span></a>
</span><span id="GA-1167"><a href="#GA-1167"><span class="linenos">1167</span></a>                        <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="GA-1168"><a href="#GA-1168"><span class="linenos">1168</span></a>                            <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="GA-1169"><a href="#GA-1169"><span class="linenos">1169</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1170"><a href="#GA-1170"><span class="linenos">1170</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1171"><a href="#GA-1171"><span class="linenos">1171</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1172"><a href="#GA-1172"><span class="linenos">1172</span></a>                                <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1173"><a href="#GA-1173"><span class="linenos">1173</span></a>                                    <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="GA-1174"><a href="#GA-1174"><span class="linenos">1174</span></a>
</span><span id="GA-1175"><a href="#GA-1175"><span class="linenos">1175</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="GA-1176"><a href="#GA-1176"><span class="linenos">1176</span></a>
</span><span id="GA-1177"><a href="#GA-1177"><span class="linenos">1177</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1178"><a href="#GA-1178"><span class="linenos">1178</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1179"><a href="#GA-1179"><span class="linenos">1179</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1180"><a href="#GA-1180"><span class="linenos">1180</span></a>                            <span class="s2">&quot;The format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but </span><span class="si">{stop_criteria}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1181"><a href="#GA-1181"><span class="linenos">1181</span></a>                                <span class="n">stop_criteria</span><span class="o">=</span><span class="n">criterion</span><span class="p">))</span>
</span><span id="GA-1182"><a href="#GA-1182"><span class="linenos">1182</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1183"><a href="#GA-1183"><span class="linenos">1183</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1184"><a href="#GA-1184"><span class="linenos">1184</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1185"><a href="#GA-1185"><span class="linenos">1185</span></a>                        <span class="s2">&quot;When the &#39;stop_criteria&#39; parameter is assigned a tuple/list/numpy.ndarray, then its elements must be strings but the value &#39;</span><span class="si">{stop_criteria_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_criteria_val_type}</span><span class="s2"> found at index </span><span class="si">{stop_criteria_val_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1186"><a href="#GA-1186"><span class="linenos">1186</span></a>                            <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">stop_criteria_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">stop_criteria_val_idx</span><span class="o">=</span><span class="n">idx</span><span class="p">))</span>
</span><span id="GA-1187"><a href="#GA-1187"><span class="linenos">1187</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1188"><a href="#GA-1188"><span class="linenos">1188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1189"><a href="#GA-1189"><span class="linenos">1189</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1190"><a href="#GA-1190"><span class="linenos">1190</span></a>                <span class="s2">&quot;The expected value of the &#39;stop_criteria&#39; is a single string or a list/tuple/numpy.ndarray of strings but the value </span><span class="si">{stop_criteria_val}</span><span class="s2"> of type </span><span class="si">{stop_criteria_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1191"><a href="#GA-1191"><span class="linenos">1191</span></a>                    <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">,</span> <span class="n">stop_criteria_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)))</span>
</span><span id="GA-1192"><a href="#GA-1192"><span class="linenos">1192</span></a>
</span><span id="GA-1193"><a href="#GA-1193"><span class="linenos">1193</span></a>        <span class="k">if</span> <span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1194"><a href="#GA-1194"><span class="linenos">1194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1195"><a href="#GA-1195"><span class="linenos">1195</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-1196"><a href="#GA-1196"><span class="linenos">1196</span></a>            <span class="k">if</span> <span class="n">parallel_processing</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1197"><a href="#GA-1197"><span class="linenos">1197</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thread&quot;</span><span class="p">,</span> <span class="n">parallel_processing</span><span class="p">]</span>
</span><span id="GA-1198"><a href="#GA-1198"><span class="linenos">1198</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1199"><a href="#GA-1199"><span class="linenos">1199</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1200"><a href="#GA-1200"><span class="linenos">1200</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1201"><a href="#GA-1201"><span class="linenos">1201</span></a>                    <span class="s2">&quot;When the &#39;parallel_processing&#39; parameter is assigned an integer, then the integer must be positive but the value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1202"><a href="#GA-1202"><span class="linenos">1202</span></a>                        <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">))</span>
</span><span id="GA-1203"><a href="#GA-1203"><span class="linenos">1203</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">]:</span>
</span><span id="GA-1204"><a href="#GA-1204"><span class="linenos">1204</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA-1205"><a href="#GA-1205"><span class="linenos">1205</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA-1206"><a href="#GA-1206"><span class="linenos">1206</span></a>                    <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;thread&quot;</span><span class="p">]:</span>
</span><span id="GA-1207"><a href="#GA-1207"><span class="linenos">1207</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">and</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
</span><span id="GA-1208"><a href="#GA-1208"><span class="linenos">1208</span></a>                                <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1209"><a href="#GA-1209"><span class="linenos">1209</span></a>                            <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1210"><a href="#GA-1210"><span class="linenos">1210</span></a>                                <span class="c1"># If the number of processes/threads is 0, this means no parallel processing is used. It is equivelant to setting parallel_processing=None.</span>
</span><span id="GA-1211"><a href="#GA-1211"><span class="linenos">1211</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1212"><a href="#GA-1212"><span class="linenos">1212</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1213"><a href="#GA-1213"><span class="linenos">1213</span></a>                                <span class="c1"># Whether the second value is None or a positive integer.</span>
</span><span id="GA-1214"><a href="#GA-1214"><span class="linenos">1214</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="n">parallel_processing</span>
</span><span id="GA-1215"><a href="#GA-1215"><span class="linenos">1215</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1216"><a href="#GA-1216"><span class="linenos">1216</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1217"><a href="#GA-1217"><span class="linenos">1217</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1218"><a href="#GA-1218"><span class="linenos">1218</span></a>                                <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the second element must be an integer but the value (</span><span class="si">{second_value}</span><span class="s2">) of type (</span><span class="si">{second_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1219"><a href="#GA-1219"><span class="linenos">1219</span></a>                                    <span class="n">second_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="GA-1220"><a href="#GA-1220"><span class="linenos">1220</span></a>                                    <span class="n">second_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
</span><span id="GA-1221"><a href="#GA-1221"><span class="linenos">1221</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1222"><a href="#GA-1222"><span class="linenos">1222</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1223"><a href="#GA-1223"><span class="linenos">1223</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1224"><a href="#GA-1224"><span class="linenos">1224</span></a>                            <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the value of the first element must be either &#39;process&#39; or &#39;thread&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1225"><a href="#GA-1225"><span class="linenos">1225</span></a>                                <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="GA-1226"><a href="#GA-1226"><span class="linenos">1226</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1227"><a href="#GA-1227"><span class="linenos">1227</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1228"><a href="#GA-1228"><span class="linenos">1228</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA-1229"><a href="#GA-1229"><span class="linenos">1229</span></a>                        <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the first element must be of type &#39;str&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) of type (</span><span class="si">{first_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1230"><a href="#GA-1230"><span class="linenos">1230</span></a>                            <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">first_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
</span><span id="GA-1231"><a href="#GA-1231"><span class="linenos">1231</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1232"><a href="#GA-1232"><span class="linenos">1232</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1233"><a href="#GA-1233"><span class="linenos">1233</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1234"><a href="#GA-1234"><span class="linenos">1234</span></a>                    <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then it must have 2 elements but (</span><span class="si">{num_elements}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1235"><a href="#GA-1235"><span class="linenos">1235</span></a>                        <span class="n">num_elements</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="GA-1236"><a href="#GA-1236"><span class="linenos">1236</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1237"><a href="#GA-1237"><span class="linenos">1237</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1238"><a href="#GA-1238"><span class="linenos">1238</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1239"><a href="#GA-1239"><span class="linenos">1239</span></a>                <span class="s2">&quot;Unexpected value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) of type (</span><span class="si">{parallel_processing_type}</span><span class="s2">) assigned to the &#39;parallel_processing&#39; parameter. The accepted values for this parameter are:</span><span class="se">\n</span><span class="s2">1) None: (Default) It means no parallel processing is used.</span><span class="se">\n</span><span class="s2">2) A positive integer referring to the number of threads to be used (i.e. threads, not processes, are used.</span><span class="se">\n</span><span class="s2">3) list/tuple: If a list or a tuple of exactly 2 elements is assigned, then:</span><span class="se">\n\t</span><span class="s2">*1) The first element can be either &#39;process&#39; or &#39;thread&#39; to specify whether processes or threads are used, respectively.</span><span class="se">\n\t</span><span class="s2">*2) The second element can be:</span><span class="se">\n\t\t</span><span class="s2">**1) A positive integer to select the maximum number of processes or threads to be used.</span><span class="se">\n\t\t</span><span class="s2">**2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;.</span><span class="se">\n\t\t</span><span class="s2">**3) None to use the default value as calculated by the concurrent.futures module.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1240"><a href="#GA-1240"><span class="linenos">1240</span></a>                    <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">,</span> <span class="n">parallel_processing_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="GA-1241"><a href="#GA-1241"><span class="linenos">1241</span></a>
</span><span id="GA-1242"><a href="#GA-1242"><span class="linenos">1242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1243"><a href="#GA-1243"><span class="linenos">1243</span></a>
</span><span id="GA-1244"><a href="#GA-1244"><span class="linenos">1244</span></a>        <span class="c1"># Set the `run_completed` property to False. It is set to `True` only after the `run()` method is complete.</span>
</span><span id="GA-1245"><a href="#GA-1245"><span class="linenos">1245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1246"><a href="#GA-1246"><span class="linenos">1246</span></a>
</span><span id="GA-1247"><a href="#GA-1247"><span class="linenos">1247</span></a>        <span class="c1"># The number of completed generations.</span>
</span><span id="GA-1248"><a href="#GA-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-1249"><a href="#GA-1249"><span class="linenos">1249</span></a>
</span><span id="GA-1250"><a href="#GA-1250"><span class="linenos">1250</span></a>        <span class="c1"># At this point, all necessary parameters validation is done successfully and we are sure that the parameters are valid.</span>
</span><span id="GA-1251"><a href="#GA-1251"><span class="linenos">1251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True when all the parameters passed in the GA class constructor are valid.</span>
</span><span id="GA-1252"><a href="#GA-1252"><span class="linenos">1252</span></a>
</span><span id="GA-1253"><a href="#GA-1253"><span class="linenos">1253</span></a>        <span class="c1"># Parameters of the genetic algorithm.</span>
</span><span id="GA-1254"><a href="#GA-1254"><span class="linenos">1254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num_generations</span><span class="p">)</span>
</span><span id="GA-1255"><a href="#GA-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="GA-1256"><a href="#GA-1256"><span class="linenos">1256</span></a>
</span><span id="GA-1257"><a href="#GA-1257"><span class="linenos">1257</span></a>        <span class="c1"># Parameters of the mutation operation.</span>
</span><span id="GA-1258"><a href="#GA-1258"><span class="linenos">1258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="n">mutation_percent_genes</span>
</span><span id="GA-1259"><a href="#GA-1259"><span class="linenos">1259</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">mutation_num_genes</span>
</span><span id="GA-1260"><a href="#GA-1260"><span class="linenos">1260</span></a>
</span><span id="GA-1261"><a href="#GA-1261"><span class="linenos">1261</span></a>        <span class="c1"># Even such this parameter is declared in the class header, it is assigned to the object here to access it after saving the object.</span>
</span><span id="GA-1262"><a href="#GA-1262"><span class="linenos">1262</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># A list holding the fitness value of the best solution for each generation.</span>
</span><span id="GA-1263"><a href="#GA-1263"><span class="linenos">1263</span></a>
</span><span id="GA-1264"><a href="#GA-1264"><span class="linenos">1264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># The generation number at which the best fitness value is reached. It is only assigned the generation number after the `run()` method completes. Otherwise, its value is -1.</span>
</span><span id="GA-1265"><a href="#GA-1265"><span class="linenos">1265</span></a>
</span><span id="GA-1266"><a href="#GA-1266"><span class="linenos">1266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span> <span class="o">=</span> <span class="n">save_best_solutions</span>
</span><span id="GA-1267"><a href="#GA-1267"><span class="linenos">1267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the best solution in each generation.</span>
</span><span id="GA-1268"><a href="#GA-1268"><span class="linenos">1268</span></a>
</span><span id="GA-1269"><a href="#GA-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">=</span> <span class="n">save_solutions</span>
</span><span id="GA-1270"><a href="#GA-1270"><span class="linenos">1270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the solutions in each generation.</span>
</span><span id="GA-1271"><a href="#GA-1271"><span class="linenos">1271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the fitness of the solutions in each generation.</span>
</span><span id="GA-1272"><a href="#GA-1272"><span class="linenos">1272</span></a>
</span><span id="GA-1273"><a href="#GA-1273"><span class="linenos">1273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the fitness values of all solutions in the last generation.</span>
</span><span id="GA-1274"><a href="#GA-1274"><span class="linenos">1274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the parents of the last generation.</span>
</span><span id="GA-1275"><a href="#GA-1275"><span class="linenos">1275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying crossover in the last generation.</span>
</span><span id="GA-1276"><a href="#GA-1276"><span class="linenos">1276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying mutation in the last generation.</span>
</span><span id="GA-1277"><a href="#GA-1277"><span class="linenos">1277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Holds the fitness values of one generation before the fitness values saved in the last_generation_fitness attribute. Added in PyGAD 2.26.2</span>
</span><span id="GA-1278"><a href="#GA-1278"><span class="linenos">1278</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Added in PyGAD 2.18.0. A NumPy array holding the elitism in the current generation according to the value passed in the keep_elitism parameter.</span>
</span><span id="GA-1279"><a href="#GA-1279"><span class="linenos">1279</span></a>
</span><span id="GA-1280"><a href="#GA-1280"><span class="linenos">1280</span></a>    <span class="k">def</span> <span class="nf">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">):</span>
</span><span id="GA-1281"><a href="#GA-1281"><span class="linenos">1281</span></a>        <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1282"><a href="#GA-1282"><span class="linenos">1282</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span><span class="p">:</span>
</span><span id="GA-1283"><a href="#GA-1283"><span class="linenos">1283</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1284"><a href="#GA-1284"><span class="linenos">1284</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-1285"><a href="#GA-1285"><span class="linenos">1285</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1286"><a href="#GA-1286"><span class="linenos">1286</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1287"><a href="#GA-1287"><span class="linenos">1287</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-1288"><a href="#GA-1288"><span class="linenos">1288</span></a>                                                                       <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-1289"><a href="#GA-1289"><span class="linenos">1289</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-1290"><a href="#GA-1290"><span class="linenos">1290</span></a>        <span class="k">return</span> <span class="n">solutions</span>
</span><span id="GA-1291"><a href="#GA-1291"><span class="linenos">1291</span></a>
</span><span id="GA-1292"><a href="#GA-1292"><span class="linenos">1292</span></a>    <span class="k">def</span> <span class="nf">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">):</span>
</span><span id="GA-1293"><a href="#GA-1293"><span class="linenos">1293</span></a>
</span><span id="GA-1294"><a href="#GA-1294"><span class="linenos">1294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1295"><a href="#GA-1295"><span class="linenos">1295</span></a><span class="sd">        Creates an initial population randomly as a NumPy array. The array is saved in the instance attribute named &#39;population&#39;.</span>
</span><span id="GA-1296"><a href="#GA-1296"><span class="linenos">1296</span></a>
</span><span id="GA-1297"><a href="#GA-1297"><span class="linenos">1297</span></a><span class="sd">        low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="GA-1298"><a href="#GA-1298"><span class="linenos">1298</span></a><span class="sd">        high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="GA-1299"><a href="#GA-1299"><span class="linenos">1299</span></a>
</span><span id="GA-1300"><a href="#GA-1300"><span class="linenos">1300</span></a><span class="sd">        This method assigns the values of the following 3 instance attributes:</span>
</span><span id="GA-1301"><a href="#GA-1301"><span class="linenos">1301</span></a><span class="sd">            1. pop_size: Size of the population.</span>
</span><span id="GA-1302"><a href="#GA-1302"><span class="linenos">1302</span></a><span class="sd">            2. population: Initially, holds the initial population and later updated after each generation.</span>
</span><span id="GA-1303"><a href="#GA-1303"><span class="linenos">1303</span></a><span class="sd">            3. init_population: Keeping the initial population.</span>
</span><span id="GA-1304"><a href="#GA-1304"><span class="linenos">1304</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1305"><a href="#GA-1305"><span class="linenos">1305</span></a>
</span><span id="GA-1306"><a href="#GA-1306"><span class="linenos">1306</span></a>        <span class="c1"># Population size = (number of chromosomes, number of genes per chromosome)</span>
</span><span id="GA-1307"><a href="#GA-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span>
</span><span id="GA-1308"><a href="#GA-1308"><span class="linenos">1308</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population will have sol_per_pop chromosome where each chromosome has num_genes genes.</span>
</span><span id="GA-1309"><a href="#GA-1309"><span class="linenos">1309</span></a>
</span><span id="GA-1310"><a href="#GA-1310"><span class="linenos">1310</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1311"><a href="#GA-1311"><span class="linenos">1311</span></a>            <span class="c1"># Creating the initial population randomly.</span>
</span><span id="GA-1312"><a href="#GA-1312"><span class="linenos">1312</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1313"><a href="#GA-1313"><span class="linenos">1313</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1314"><a href="#GA-1314"><span class="linenos">1314</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1315"><a href="#GA-1315"><span class="linenos">1315</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA-1316"><a href="#GA-1316"><span class="linenos">1316</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA-1317"><a href="#GA-1317"><span class="linenos">1317</span></a>                                                    <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA-1318"><a href="#GA-1318"><span class="linenos">1318</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1319"><a href="#GA-1319"><span class="linenos">1319</span></a>                <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA-1320"><a href="#GA-1320"><span class="linenos">1320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1321"><a href="#GA-1321"><span class="linenos">1321</span></a>                <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA-1322"><a href="#GA-1322"><span class="linenos">1322</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1323"><a href="#GA-1323"><span class="linenos">1323</span></a>                    <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA-1324"><a href="#GA-1324"><span class="linenos">1324</span></a>                    <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1325"><a href="#GA-1325"><span class="linenos">1325</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1326"><a href="#GA-1326"><span class="linenos">1326</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-1327"><a href="#GA-1327"><span class="linenos">1327</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1328"><a href="#GA-1328"><span class="linenos">1328</span></a>                    <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA-1329"><a href="#GA-1329"><span class="linenos">1329</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA-1330"><a href="#GA-1330"><span class="linenos">1330</span></a>
</span><span id="GA-1331"><a href="#GA-1331"><span class="linenos">1331</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-1332"><a href="#GA-1332"><span class="linenos">1332</span></a>                <span class="k">for</span> <span class="n">solution_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-1333"><a href="#GA-1333"><span class="linenos">1333</span></a>                    <span class="c1"># print(&quot;Before&quot;, self.population[solution_idx])</span>
</span><span id="GA-1334"><a href="#GA-1334"><span class="linenos">1334</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA-1335"><a href="#GA-1335"><span class="linenos">1335</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span>
</span><span id="GA-1336"><a href="#GA-1336"><span class="linenos">1336</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1337"><a href="#GA-1337"><span class="linenos">1337</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1338"><a href="#GA-1338"><span class="linenos">1338</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-1339"><a href="#GA-1339"><span class="linenos">1339</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-1340"><a href="#GA-1340"><span class="linenos">1340</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-1341"><a href="#GA-1341"><span class="linenos">1341</span></a>                    <span class="c1"># print(&quot;After&quot;, self.population[solution_idx])</span>
</span><span id="GA-1342"><a href="#GA-1342"><span class="linenos">1342</span></a>
</span><span id="GA-1343"><a href="#GA-1343"><span class="linenos">1343</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-1344"><a href="#GA-1344"><span class="linenos">1344</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1345"><a href="#GA-1345"><span class="linenos">1345</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1346"><a href="#GA-1346"><span class="linenos">1346</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA-1347"><a href="#GA-1347"><span class="linenos">1347</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1348"><a href="#GA-1348"><span class="linenos">1348</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="GA-1349"><a href="#GA-1349"><span class="linenos">1349</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="GA-1350"><a href="#GA-1350"><span class="linenos">1350</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">range</span><span class="p">:</span>
</span><span id="GA-1351"><a href="#GA-1351"><span class="linenos">1351</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-1352"><a href="#GA-1352"><span class="linenos">1352</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1353"><a href="#GA-1353"><span class="linenos">1353</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1354"><a href="#GA-1354"><span class="linenos">1354</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="GA-1355"><a href="#GA-1355"><span class="linenos">1355</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1356"><a href="#GA-1356"><span class="linenos">1356</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1357"><a href="#GA-1357"><span class="linenos">1357</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1358"><a href="#GA-1358"><span class="linenos">1358</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1359"><a href="#GA-1359"><span class="linenos">1359</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1360"><a href="#GA-1360"><span class="linenos">1360</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA-1361"><a href="#GA-1361"><span class="linenos">1361</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA-1362"><a href="#GA-1362"><span class="linenos">1362</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA-1363"><a href="#GA-1363"><span class="linenos">1363</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-1364"><a href="#GA-1364"><span class="linenos">1364</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-1365"><a href="#GA-1365"><span class="linenos">1365</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA-1366"><a href="#GA-1366"><span class="linenos">1366</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1367"><a href="#GA-1367"><span class="linenos">1367</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1368"><a href="#GA-1368"><span class="linenos">1368</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-1369"><a href="#GA-1369"><span class="linenos">1369</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1370"><a href="#GA-1370"><span class="linenos">1370</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1371"><a href="#GA-1371"><span class="linenos">1371</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1372"><a href="#GA-1372"><span class="linenos">1372</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA-1373"><a href="#GA-1373"><span class="linenos">1373</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1374"><a href="#GA-1374"><span class="linenos">1374</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1375"><a href="#GA-1375"><span class="linenos">1375</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1376"><a href="#GA-1376"><span class="linenos">1376</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1377"><a href="#GA-1377"><span class="linenos">1377</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1378"><a href="#GA-1378"><span class="linenos">1378</span></a>
</span><span id="GA-1379"><a href="#GA-1379"><span class="linenos">1379</span></a>                            <span class="c1"># The following commented code replace the None value with a single number that will not change again.</span>
</span><span id="GA-1380"><a href="#GA-1380"><span class="linenos">1380</span></a>                            <span class="c1"># This means the gene value will be the same across all solutions.</span>
</span><span id="GA-1381"><a href="#GA-1381"><span class="linenos">1381</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="GA-1382"><a href="#GA-1382"><span class="linenos">1382</span></a>                            <span class="c1">#                high=high,</span>
</span><span id="GA-1383"><a href="#GA-1383"><span class="linenos">1383</span></a>                            <span class="c1">#                size=1), dtype=self.gene_type[0])[0]</span>
</span><span id="GA-1384"><a href="#GA-1384"><span class="linenos">1384</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="GA-1385"><a href="#GA-1385"><span class="linenos">1385</span></a>
</span><span id="GA-1386"><a href="#GA-1386"><span class="linenos">1386</span></a>                            <span class="c1"># The above problem is solved by keeping the None value in the gene_space parameter. This forces PyGAD to generate this value for each solution.</span>
</span><span id="GA-1387"><a href="#GA-1387"><span class="linenos">1387</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1388"><a href="#GA-1388"><span class="linenos">1388</span></a>                                                                                                    <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1389"><a href="#GA-1389"><span class="linenos">1389</span></a>                                                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1390"><a href="#GA-1390"><span class="linenos">1390</span></a>                                                                               <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1391"><a href="#GA-1391"><span class="linenos">1391</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-1392"><a href="#GA-1392"><span class="linenos">1392</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-1393"><a href="#GA-1393"><span class="linenos">1393</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1394"><a href="#GA-1394"><span class="linenos">1394</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1395"><a href="#GA-1395"><span class="linenos">1395</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA-1396"><a href="#GA-1396"><span class="linenos">1396</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1397"><a href="#GA-1397"><span class="linenos">1397</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="GA-1398"><a href="#GA-1398"><span class="linenos">1398</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="GA-1399"><a href="#GA-1399"><span class="linenos">1399</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1400"><a href="#GA-1400"><span class="linenos">1400</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="GA-1401"><a href="#GA-1401"><span class="linenos">1401</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1402"><a href="#GA-1402"><span class="linenos">1402</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1403"><a href="#GA-1403"><span class="linenos">1403</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1404"><a href="#GA-1404"><span class="linenos">1404</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1405"><a href="#GA-1405"><span class="linenos">1405</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1406"><a href="#GA-1406"><span class="linenos">1406</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA-1407"><a href="#GA-1407"><span class="linenos">1407</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA-1408"><a href="#GA-1408"><span class="linenos">1408</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA-1409"><a href="#GA-1409"><span class="linenos">1409</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1410"><a href="#GA-1410"><span class="linenos">1410</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-1411"><a href="#GA-1411"><span class="linenos">1411</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-1412"><a href="#GA-1412"><span class="linenos">1412</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA-1413"><a href="#GA-1413"><span class="linenos">1413</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1414"><a href="#GA-1414"><span class="linenos">1414</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1415"><a href="#GA-1415"><span class="linenos">1415</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-1416"><a href="#GA-1416"><span class="linenos">1416</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1417"><a href="#GA-1417"><span class="linenos">1417</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1418"><a href="#GA-1418"><span class="linenos">1418</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1419"><a href="#GA-1419"><span class="linenos">1419</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA-1420"><a href="#GA-1420"><span class="linenos">1420</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1421"><a href="#GA-1421"><span class="linenos">1421</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1422"><a href="#GA-1422"><span class="linenos">1422</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1423"><a href="#GA-1423"><span class="linenos">1423</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1424"><a href="#GA-1424"><span class="linenos">1424</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1425"><a href="#GA-1425"><span class="linenos">1425</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="GA-1426"><a href="#GA-1426"><span class="linenos">1426</span></a>                            <span class="c1">#                                                                high=high,</span>
</span><span id="GA-1427"><a href="#GA-1427"><span class="linenos">1427</span></a>                            <span class="c1">#                                                                size=1),</span>
</span><span id="GA-1428"><a href="#GA-1428"><span class="linenos">1428</span></a>                            <span class="c1">#                                           dtype=self.gene_type[gene_idx][0])[0]</span>
</span><span id="GA-1429"><a href="#GA-1429"><span class="linenos">1429</span></a>
</span><span id="GA-1430"><a href="#GA-1430"><span class="linenos">1430</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="GA-1431"><a href="#GA-1431"><span class="linenos">1431</span></a>
</span><span id="GA-1432"><a href="#GA-1432"><span class="linenos">1432</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1433"><a href="#GA-1433"><span class="linenos">1433</span></a>                                                                      <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1434"><a href="#GA-1434"><span class="linenos">1434</span></a>                                                                      <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1435"><a href="#GA-1435"><span class="linenos">1435</span></a>                                                 <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1436"><a href="#GA-1436"><span class="linenos">1436</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA-1437"><a href="#GA-1437"><span class="linenos">1437</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-1438"><a href="#GA-1438"><span class="linenos">1438</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-1439"><a href="#GA-1439"><span class="linenos">1439</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1440"><a href="#GA-1440"><span class="linenos">1440</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1441"><a href="#GA-1441"><span class="linenos">1441</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="GA-1442"><a href="#GA-1442"><span class="linenos">1442</span></a>                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA-1443"><a href="#GA-1443"><span class="linenos">1443</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1444"><a href="#GA-1444"><span class="linenos">1444</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1445"><a href="#GA-1445"><span class="linenos">1445</span></a>                                                                                  <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1446"><a href="#GA-1446"><span class="linenos">1446</span></a>                                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1447"><a href="#GA-1447"><span class="linenos">1447</span></a>                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1448"><a href="#GA-1448"><span class="linenos">1448</span></a>
</span><span id="GA-1449"><a href="#GA-1449"><span class="linenos">1449</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="GA-1450"><a href="#GA-1450"><span class="linenos">1450</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-1451"><a href="#GA-1451"><span class="linenos">1451</span></a>                    <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-1452"><a href="#GA-1452"><span class="linenos">1452</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1453"><a href="#GA-1453"><span class="linenos">1453</span></a>                                                                                         <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1454"><a href="#GA-1454"><span class="linenos">1454</span></a>                                                                                         <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-1455"><a href="#GA-1455"><span class="linenos">1455</span></a>                                                                            <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA-1456"><a href="#GA-1456"><span class="linenos">1456</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1457"><a href="#GA-1457"><span class="linenos">1457</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1458"><a href="#GA-1458"><span class="linenos">1458</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1459"><a href="#GA-1459"><span class="linenos">1459</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1460"><a href="#GA-1460"><span class="linenos">1460</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA-1461"><a href="#GA-1461"><span class="linenos">1461</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA-1462"><a href="#GA-1462"><span class="linenos">1462</span></a>                                                            <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA-1463"><a href="#GA-1463"><span class="linenos">1463</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1464"><a href="#GA-1464"><span class="linenos">1464</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="GA-1465"><a href="#GA-1465"><span class="linenos">1465</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA-1466"><a href="#GA-1466"><span class="linenos">1466</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA-1467"><a href="#GA-1467"><span class="linenos">1467</span></a>                                                        <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA-1468"><a href="#GA-1468"><span class="linenos">1468</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1469"><a href="#GA-1469"><span class="linenos">1469</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="GA-1470"><a href="#GA-1470"><span class="linenos">1470</span></a>                <span class="k">for</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA-1471"><a href="#GA-1471"><span class="linenos">1471</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1472"><a href="#GA-1472"><span class="linenos">1472</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA-1473"><a href="#GA-1473"><span class="linenos">1473</span></a>                                                                                       <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA-1474"><a href="#GA-1474"><span class="linenos">1474</span></a>                                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA-1475"><a href="#GA-1475"><span class="linenos">1475</span></a>                                                                  <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1476"><a href="#GA-1476"><span class="linenos">1476</span></a>
</span><span id="GA-1477"><a href="#GA-1477"><span class="linenos">1477</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="GA-1478"><a href="#GA-1478"><span class="linenos">1478</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-1479"><a href="#GA-1479"><span class="linenos">1479</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA-1480"><a href="#GA-1480"><span class="linenos">1480</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1481"><a href="#GA-1481"><span class="linenos">1481</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA-1482"><a href="#GA-1482"><span class="linenos">1482</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1483"><a href="#GA-1483"><span class="linenos">1483</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA-1484"><a href="#GA-1484"><span class="linenos">1484</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-1485"><a href="#GA-1485"><span class="linenos">1485</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span>
</span><span id="GA-1486"><a href="#GA-1486"><span class="linenos">1486</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1487"><a href="#GA-1487"><span class="linenos">1487</span></a>                                                                 <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1488"><a href="#GA-1488"><span class="linenos">1488</span></a>                                                                 <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-1489"><a href="#GA-1489"><span class="linenos">1489</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-1490"><a href="#GA-1490"><span class="linenos">1490</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1491"><a href="#GA-1491"><span class="linenos">1491</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1492"><a href="#GA-1492"><span class="linenos">1492</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-1493"><a href="#GA-1493"><span class="linenos">1493</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-1494"><a href="#GA-1494"><span class="linenos">1494</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-1495"><a href="#GA-1495"><span class="linenos">1495</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1496"><a href="#GA-1496"><span class="linenos">1496</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA-1497"><a href="#GA-1497"><span class="linenos">1497</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA-1498"><a href="#GA-1498"><span class="linenos">1498</span></a>
</span><span id="GA-1499"><a href="#GA-1499"><span class="linenos">1499</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1500"><a href="#GA-1500"><span class="linenos">1500</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA-1501"><a href="#GA-1501"><span class="linenos">1501</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1502"><a href="#GA-1502"><span class="linenos">1502</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA-1503"><a href="#GA-1503"><span class="linenos">1503</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA-1504"><a href="#GA-1504"><span class="linenos">1504</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA-1505"><a href="#GA-1505"><span class="linenos">1505</span></a>                        <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="GA-1506"><a href="#GA-1506"><span class="linenos">1506</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-1507"><a href="#GA-1507"><span class="linenos">1507</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1508"><a href="#GA-1508"><span class="linenos">1508</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA-1509"><a href="#GA-1509"><span class="linenos">1509</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA-1510"><a href="#GA-1510"><span class="linenos">1510</span></a>
</span><span id="GA-1511"><a href="#GA-1511"><span class="linenos">1511</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1512"><a href="#GA-1512"><span class="linenos">1512</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-1513"><a href="#GA-1513"><span class="linenos">1513</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-1514"><a href="#GA-1514"><span class="linenos">1514</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA-1515"><a href="#GA-1515"><span class="linenos">1515</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span>
</span><span id="GA-1516"><a href="#GA-1516"><span class="linenos">1516</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-1517"><a href="#GA-1517"><span class="linenos">1517</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA-1518"><a href="#GA-1518"><span class="linenos">1518</span></a>                        <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-1519"><a href="#GA-1519"><span class="linenos">1519</span></a>
</span><span id="GA-1520"><a href="#GA-1520"><span class="linenos">1520</span></a>        <span class="c1"># Keeping the initial population in the initial_population attribute.</span>
</span><span id="GA-1521"><a href="#GA-1521"><span class="linenos">1521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1522"><a href="#GA-1522"><span class="linenos">1522</span></a>
</span><span id="GA-1523"><a href="#GA-1523"><span class="linenos">1523</span></a>    <span class="k">def</span> <span class="nf">cal_pop_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA-1524"><a href="#GA-1524"><span class="linenos">1524</span></a>
</span><span id="GA-1525"><a href="#GA-1525"><span class="linenos">1525</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1526"><a href="#GA-1526"><span class="linenos">1526</span></a><span class="sd">        Calculating the fitness values of all solutions in the current population.</span>
</span><span id="GA-1527"><a href="#GA-1527"><span class="linenos">1527</span></a><span class="sd">        It returns:</span>
</span><span id="GA-1528"><a href="#GA-1528"><span class="linenos">1528</span></a><span class="sd">            -fitness: An array of the calculated fitness values.</span>
</span><span id="GA-1529"><a href="#GA-1529"><span class="linenos">1529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1530"><a href="#GA-1530"><span class="linenos">1530</span></a>
</span><span id="GA-1531"><a href="#GA-1531"><span class="linenos">1531</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-1532"><a href="#GA-1532"><span class="linenos">1532</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="GA-1533"><a href="#GA-1533"><span class="linenos">1533</span></a>                <span class="s2">&quot;ERROR calling the cal_pop_fitness() method: </span><span class="se">\n</span><span class="s2">Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GA-1534"><a href="#GA-1534"><span class="linenos">1534</span></a>
</span><span id="GA-1535"><a href="#GA-1535"><span class="linenos">1535</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;undefined&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA-1536"><a href="#GA-1536"><span class="linenos">1536</span></a>
</span><span id="GA-1537"><a href="#GA-1537"><span class="linenos">1537</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1538"><a href="#GA-1538"><span class="linenos">1538</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="GA-1539"><a href="#GA-1539"><span class="linenos">1539</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA-1540"><a href="#GA-1540"><span class="linenos">1540</span></a>
</span><span id="GA-1541"><a href="#GA-1541"><span class="linenos">1541</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="GA-1542"><a href="#GA-1542"><span class="linenos">1542</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="GA-1543"><a href="#GA-1543"><span class="linenos">1543</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="GA-1544"><a href="#GA-1544"><span class="linenos">1544</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="GA-1545"><a href="#GA-1545"><span class="linenos">1545</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GA-1546"><a href="#GA-1546"><span class="linenos">1546</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-1547"><a href="#GA-1547"><span class="linenos">1547</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="GA-1548"><a href="#GA-1548"><span class="linenos">1548</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1549"><a href="#GA-1549"><span class="linenos">1549</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="GA-1550"><a href="#GA-1550"><span class="linenos">1550</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA-1551"><a href="#GA-1551"><span class="linenos">1551</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="GA-1552"><a href="#GA-1552"><span class="linenos">1552</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA-1553"><a href="#GA-1553"><span class="linenos">1553</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1554"><a href="#GA-1554"><span class="linenos">1554</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="GA-1555"><a href="#GA-1555"><span class="linenos">1555</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-1556"><a href="#GA-1556"><span class="linenos">1556</span></a>                        <span class="k">pass</span>
</span><span id="GA-1557"><a href="#GA-1557"><span class="linenos">1557</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1558"><a href="#GA-1558"><span class="linenos">1558</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1559"><a href="#GA-1559"><span class="linenos">1559</span></a>                            <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1560"><a href="#GA-1560"><span class="linenos">1560</span></a>                                <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="GA-1561"><a href="#GA-1561"><span class="linenos">1561</span></a>                <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA-1562"><a href="#GA-1562"><span class="linenos">1562</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1563"><a href="#GA-1563"><span class="linenos">1563</span></a>
</span><span id="GA-1564"><a href="#GA-1564"><span class="linenos">1564</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="GA-1565"><a href="#GA-1565"><span class="linenos">1565</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA-1566"><a href="#GA-1566"><span class="linenos">1566</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="GA-1567"><a href="#GA-1567"><span class="linenos">1567</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="GA-1568"><a href="#GA-1568"><span class="linenos">1568</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="GA-1569"><a href="#GA-1569"><span class="linenos">1569</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="GA-1570"><a href="#GA-1570"><span class="linenos">1570</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GA-1571"><a href="#GA-1571"><span class="linenos">1571</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-1572"><a href="#GA-1572"><span class="linenos">1572</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="GA-1573"><a href="#GA-1573"><span class="linenos">1573</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1574"><a href="#GA-1574"><span class="linenos">1574</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="GA-1575"><a href="#GA-1575"><span class="linenos">1575</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA-1576"><a href="#GA-1576"><span class="linenos">1576</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="GA-1577"><a href="#GA-1577"><span class="linenos">1577</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA-1578"><a href="#GA-1578"><span class="linenos">1578</span></a>
</span><span id="GA-1579"><a href="#GA-1579"><span class="linenos">1579</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA-1580"><a href="#GA-1580"><span class="linenos">1580</span></a>
</span><span id="GA-1581"><a href="#GA-1581"><span class="linenos">1581</span></a>            <span class="c1"># Decide which class to use based on whether the user selected &quot;process&quot; or &quot;thread&quot;</span>
</span><span id="GA-1582"><a href="#GA-1582"><span class="linenos">1582</span></a>            <span class="c1"># if self.parallel_processing[0] == &quot;process&quot;:</span>
</span><span id="GA-1583"><a href="#GA-1583"><span class="linenos">1583</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ProcessPoolExecutor</span>
</span><span id="GA-1584"><a href="#GA-1584"><span class="linenos">1584</span></a>            <span class="c1"># else:</span>
</span><span id="GA-1585"><a href="#GA-1585"><span class="linenos">1585</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ThreadPoolExecutor</span>
</span><span id="GA-1586"><a href="#GA-1586"><span class="linenos">1586</span></a>
</span><span id="GA-1587"><a href="#GA-1587"><span class="linenos">1587</span></a>            <span class="c1"># with multiprocessing.Pool(self.parallel_processing[1]) as pool:</span>
</span><span id="GA-1588"><a href="#GA-1588"><span class="linenos">1588</span></a>
</span><span id="GA-1589"><a href="#GA-1589"><span class="linenos">1589</span></a>            <span class="n">solutions_to_submit_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-1590"><a href="#GA-1590"><span class="linenos">1590</span></a>            <span class="n">solutions_to_submit</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-1591"><a href="#GA-1591"><span class="linenos">1591</span></a>
</span><span id="GA-1592"><a href="#GA-1592"><span class="linenos">1592</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA-1593"><a href="#GA-1593"><span class="linenos">1593</span></a>                <span class="c1"># The &quot;undefined&quot; value means that the fitness of this solution must be calculated.</span>
</span><span id="GA-1594"><a href="#GA-1594"><span class="linenos">1594</span></a>                <span class="k">if</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">:</span>
</span><span id="GA-1595"><a href="#GA-1595"><span class="linenos">1595</span></a>                    <span class="n">solutions_to_submit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
</span><span id="GA-1596"><a href="#GA-1596"><span class="linenos">1596</span></a>                    <span class="n">solutions_to_submit_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol_idx</span><span class="p">)</span>
</span><span id="GA-1597"><a href="#GA-1597"><span class="linenos">1597</span></a>
</span><span id="GA-1598"><a href="#GA-1598"><span class="linenos">1598</span></a>            <span class="n">worker</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="GA-1599"><a href="#GA-1599"><span class="linenos">1599</span></a>
</span><span id="GA-1600"><a href="#GA-1600"><span class="linenos">1600</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">fitness</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span>
</span><span id="GA-1601"><a href="#GA-1601"><span class="linenos">1601</span></a>                    <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">starmap</span><span class="p">(</span><span class="n">worker</span>
</span><span id="GA-1602"><a href="#GA-1602"><span class="linenos">1602</span></a>                        <span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit</span>
</span><span id="GA-1603"><a href="#GA-1603"><span class="linenos">1603</span></a>                            <span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span><span class="p">)))</span>
</span><span id="GA-1604"><a href="#GA-1604"><span class="linenos">1604</span></a>                                   <span class="p">)):</span>
</span><span id="GA-1605"><a href="#GA-1605"><span class="linenos">1605</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-1606"><a href="#GA-1606"><span class="linenos">1606</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA-1607"><a href="#GA-1607"><span class="linenos">1607</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1608"><a href="#GA-1608"><span class="linenos">1608</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA-1609"><a href="#GA-1609"><span class="linenos">1609</span></a>                        <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-1610"><a href="#GA-1610"><span class="linenos">1610</span></a>                            <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="GA-1611"><a href="#GA-1611"><span class="linenos">1611</span></a>
</span><span id="GA-1612"><a href="#GA-1612"><span class="linenos">1612</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">)</span>
</span><span id="GA-1613"><a href="#GA-1613"><span class="linenos">1613</span></a>
</span><span id="GA-1614"><a href="#GA-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="n">pop_fitness</span>
</span><span id="GA-1615"><a href="#GA-1615"><span class="linenos">1615</span></a>
</span><span id="GA-1616"><a href="#GA-1616"><span class="linenos">1616</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA-1617"><a href="#GA-1617"><span class="linenos">1617</span></a>
</span><span id="GA-1618"><a href="#GA-1618"><span class="linenos">1618</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1619"><a href="#GA-1619"><span class="linenos">1619</span></a><span class="sd">        Runs the genetic algorithm. This is the main method in which the genetic algorithm is evolved through a number of generations.</span>
</span><span id="GA-1620"><a href="#GA-1620"><span class="linenos">1620</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1621"><a href="#GA-1621"><span class="linenos">1621</span></a>
</span><span id="GA-1622"><a href="#GA-1622"><span class="linenos">1622</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-1623"><a href="#GA-1623"><span class="linenos">1623</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="GA-1624"><a href="#GA-1624"><span class="linenos">1624</span></a>                <span class="s2">&quot;Error calling the run() method: </span><span class="se">\n</span><span class="s2">The run() method cannot be executed with invalid parameters. Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GA-1625"><a href="#GA-1625"><span class="linenos">1625</span></a>
</span><span id="GA-1626"><a href="#GA-1626"><span class="linenos">1626</span></a>        <span class="c1"># Starting from PyGAD 2.18.0, the 4 properties (best_solutions, best_solutions_fitness, solutions, and solutions_fitness) are no longer reset with each call to the run() method. Instead, they are extended.</span>
</span><span id="GA-1627"><a href="#GA-1627"><span class="linenos">1627</span></a>        <span class="c1"># For example, if there are 50 generations and the user set save_best_solutions=True, then the length of the 2 properties best_solutions and best_solutions_fitness will be 50 after the first call to the run() method, then 100 after the second call, 150 after the third, and so on.</span>
</span><span id="GA-1628"><a href="#GA-1628"><span class="linenos">1628</span></a>
</span><span id="GA-1629"><a href="#GA-1629"><span class="linenos">1629</span></a>        <span class="c1"># self.best_solutions: Holds the best solution in each generation.</span>
</span><span id="GA-1630"><a href="#GA-1630"><span class="linenos">1630</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-1631"><a href="#GA-1631"><span class="linenos">1631</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="GA-1632"><a href="#GA-1632"><span class="linenos">1632</span></a>        <span class="c1"># self.best_solutions_fitness: A list holding the fitness value of the best solution for each generation.</span>
</span><span id="GA-1633"><a href="#GA-1633"><span class="linenos">1633</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-1634"><a href="#GA-1634"><span class="linenos">1634</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span>
</span><span id="GA-1635"><a href="#GA-1635"><span class="linenos">1635</span></a>        <span class="c1"># self.solutions: Holds the solutions in each generation.</span>
</span><span id="GA-1636"><a href="#GA-1636"><span class="linenos">1636</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-1637"><a href="#GA-1637"><span class="linenos">1637</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="GA-1638"><a href="#GA-1638"><span class="linenos">1638</span></a>        <span class="c1"># self.solutions_fitness: Holds the fitness of the solutions in each generation.</span>
</span><span id="GA-1639"><a href="#GA-1639"><span class="linenos">1639</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-1640"><a href="#GA-1640"><span class="linenos">1640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span>
</span><span id="GA-1641"><a href="#GA-1641"><span class="linenos">1641</span></a>
</span><span id="GA-1642"><a href="#GA-1642"><span class="linenos">1642</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1643"><a href="#GA-1643"><span class="linenos">1643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GA-1644"><a href="#GA-1644"><span class="linenos">1644</span></a>
</span><span id="GA-1645"><a href="#GA-1645"><span class="linenos">1645</span></a>        <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA-1646"><a href="#GA-1646"><span class="linenos">1646</span></a>
</span><span id="GA-1647"><a href="#GA-1647"><span class="linenos">1647</span></a>        <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="GA-1648"><a href="#GA-1648"><span class="linenos">1648</span></a>
</span><span id="GA-1649"><a href="#GA-1649"><span class="linenos">1649</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1650"><a href="#GA-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA-1651"><a href="#GA-1651"><span class="linenos">1651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1652"><a href="#GA-1652"><span class="linenos">1652</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-1653"><a href="#GA-1653"><span class="linenos">1653</span></a>
</span><span id="GA-1654"><a href="#GA-1654"><span class="linenos">1654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA-1655"><a href="#GA-1655"><span class="linenos">1655</span></a>
</span><span id="GA-1656"><a href="#GA-1656"><span class="linenos">1656</span></a>        <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="GA-1657"><a href="#GA-1657"><span class="linenos">1657</span></a>            <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1658"><a href="#GA-1658"><span class="linenos">1658</span></a>
</span><span id="GA-1659"><a href="#GA-1659"><span class="linenos">1659</span></a>        <span class="c1"># Appending the best solution in the initial population to the best_solutions list.</span>
</span><span id="GA-1660"><a href="#GA-1660"><span class="linenos">1660</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA-1661"><a href="#GA-1661"><span class="linenos">1661</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="GA-1662"><a href="#GA-1662"><span class="linenos">1662</span></a>
</span><span id="GA-1663"><a href="#GA-1663"><span class="linenos">1663</span></a>        <span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span><span class="p">):</span>
</span><span id="GA-1664"><a href="#GA-1664"><span class="linenos">1664</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1665"><a href="#GA-1665"><span class="linenos">1665</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1666"><a href="#GA-1666"><span class="linenos">1666</span></a>
</span><span id="GA-1667"><a href="#GA-1667"><span class="linenos">1667</span></a>            <span class="c1"># Appending the fitness value of the best solution in the current generation to the best_solutions_fitness attribute.</span>
</span><span id="GA-1668"><a href="#GA-1668"><span class="linenos">1668</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA-1669"><a href="#GA-1669"><span class="linenos">1669</span></a>
</span><span id="GA-1670"><a href="#GA-1670"><span class="linenos">1670</span></a>            <span class="c1"># Appending the solutions in the current generation to the solutions list.</span>
</span><span id="GA-1671"><a href="#GA-1671"><span class="linenos">1671</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA-1672"><a href="#GA-1672"><span class="linenos">1672</span></a>                <span class="c1"># self.solutions.extend(self.population.copy())</span>
</span><span id="GA-1673"><a href="#GA-1673"><span class="linenos">1673</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1674"><a href="#GA-1674"><span class="linenos">1674</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="GA-1675"><a href="#GA-1675"><span class="linenos">1675</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="GA-1676"><a href="#GA-1676"><span class="linenos">1676</span></a>
</span><span id="GA-1677"><a href="#GA-1677"><span class="linenos">1677</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1678"><a href="#GA-1678"><span class="linenos">1678</span></a>
</span><span id="GA-1679"><a href="#GA-1679"><span class="linenos">1679</span></a>            <span class="c1"># Selecting the best parents in the population for mating.</span>
</span><span id="GA-1680"><a href="#GA-1680"><span class="linenos">1680</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="GA-1681"><a href="#GA-1681"><span class="linenos">1681</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="GA-1682"><a href="#GA-1682"><span class="linenos">1682</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GA-1683"><a href="#GA-1683"><span class="linenos">1683</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1684"><a href="#GA-1684"><span class="linenos">1684</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="GA-1685"><a href="#GA-1685"><span class="linenos">1685</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">)</span>
</span><span id="GA-1686"><a href="#GA-1686"><span class="linenos">1686</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1687"><a href="#GA-1687"><span class="linenos">1687</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">)</span>
</span><span id="GA-1688"><a href="#GA-1688"><span class="linenos">1688</span></a>
</span><span id="GA-1689"><a href="#GA-1689"><span class="linenos">1689</span></a>            <span class="c1"># If self.crossover_type=None, then no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="GA-1690"><a href="#GA-1690"><span class="linenos">1690</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1691"><a href="#GA-1691"><span class="linenos">1691</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1692"><a href="#GA-1692"><span class="linenos">1692</span></a>                    <span class="n">num_parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="GA-1693"><a href="#GA-1693"><span class="linenos">1693</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="n">num_parents_to_keep</span><span class="p">:</span>
</span><span id="GA-1694"><a href="#GA-1694"><span class="linenos">1694</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="GA-1695"><a href="#GA-1695"><span class="linenos">1695</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1696"><a href="#GA-1696"><span class="linenos">1696</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA-1697"><a href="#GA-1697"><span class="linenos">1697</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="GA-1698"><a href="#GA-1698"><span class="linenos">1698</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="GA-1699"><a href="#GA-1699"><span class="linenos">1699</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA-1700"><a href="#GA-1700"><span class="linenos">1700</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="GA-1701"><a href="#GA-1701"><span class="linenos">1701</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1702"><a href="#GA-1702"><span class="linenos">1702</span></a>                    <span class="c1"># The steady_state_selection() method is called to select the best solutions (i.e. elitism). The keep_elitism parameter defines the number of these solutions.</span>
</span><span id="GA-1703"><a href="#GA-1703"><span class="linenos">1703</span></a>                    <span class="c1"># The steady_state_selection() method is still called here even if its output may not be used given that the condition of the next if statement is True. The reason is that it will be used later.</span>
</span><span id="GA-1704"><a href="#GA-1704"><span class="linenos">1704</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA-1705"><a href="#GA-1705"><span class="linenos">1705</span></a>                                                                                  <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA-1706"><a href="#GA-1706"><span class="linenos">1706</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">:</span>
</span><span id="GA-1707"><a href="#GA-1707"><span class="linenos">1707</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="GA-1708"><a href="#GA-1708"><span class="linenos">1708</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1709"><a href="#GA-1709"><span class="linenos">1709</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span>
</span><span id="GA-1710"><a href="#GA-1710"><span class="linenos">1710</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="GA-1711"><a href="#GA-1711"><span class="linenos">1711</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="GA-1712"><a href="#GA-1712"><span class="linenos">1712</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA-1713"><a href="#GA-1713"><span class="linenos">1713</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="GA-1714"><a href="#GA-1714"><span class="linenos">1714</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1715"><a href="#GA-1715"><span class="linenos">1715</span></a>                <span class="c1"># Generating offspring using crossover.</span>
</span><span id="GA-1716"><a href="#GA-1716"><span class="linenos">1716</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="GA-1717"><a href="#GA-1717"><span class="linenos">1717</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA-1718"><a href="#GA-1718"><span class="linenos">1718</span></a>                                                                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="GA-1719"><a href="#GA-1719"><span class="linenos">1719</span></a>                                                                              <span class="bp">self</span><span class="p">)</span>
</span><span id="GA-1720"><a href="#GA-1720"><span class="linenos">1720</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1721"><a href="#GA-1721"><span class="linenos">1721</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA-1722"><a href="#GA-1722"><span class="linenos">1722</span></a>                                                                              <span class="n">offspring_size</span><span class="o">=</span><span class="p">(</span>
</span><span id="GA-1723"><a href="#GA-1723"><span class="linenos">1723</span></a>                                                                              <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA-1724"><a href="#GA-1724"><span class="linenos">1724</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1725"><a href="#GA-1725"><span class="linenos">1725</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="GA-1726"><a href="#GA-1726"><span class="linenos">1726</span></a>
</span><span id="GA-1727"><a href="#GA-1727"><span class="linenos">1727</span></a>            <span class="c1"># If self.mutation_type=None, then no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="GA-1728"><a href="#GA-1728"><span class="linenos">1728</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1729"><a href="#GA-1729"><span class="linenos">1729</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span>
</span><span id="GA-1730"><a href="#GA-1730"><span class="linenos">1730</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1731"><a href="#GA-1731"><span class="linenos">1731</span></a>                <span class="c1"># Adding some variations to the offspring using mutation.</span>
</span><span id="GA-1732"><a href="#GA-1732"><span class="linenos">1732</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="GA-1733"><a href="#GA-1733"><span class="linenos">1733</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">,</span>
</span><span id="GA-1734"><a href="#GA-1734"><span class="linenos">1734</span></a>                                                                            <span class="bp">self</span><span class="p">)</span>
</span><span id="GA-1735"><a href="#GA-1735"><span class="linenos">1735</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1736"><a href="#GA-1736"><span class="linenos">1736</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="GA-1737"><a href="#GA-1737"><span class="linenos">1737</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1738"><a href="#GA-1738"><span class="linenos">1738</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span><span class="p">)</span>
</span><span id="GA-1739"><a href="#GA-1739"><span class="linenos">1739</span></a>
</span><span id="GA-1740"><a href="#GA-1740"><span class="linenos">1740</span></a>            <span class="c1"># Update the population attribute according to the offspring generated.</span>
</span><span id="GA-1741"><a href="#GA-1741"><span class="linenos">1741</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1742"><a href="#GA-1742"><span class="linenos">1742</span></a>                <span class="c1"># If the keep_elitism parameter is 0, then the keep_parents parameter will be used to decide if the parents are kept in the next generation.</span>
</span><span id="GA-1743"><a href="#GA-1743"><span class="linenos">1743</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-1744"><a href="#GA-1744"><span class="linenos">1744</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA-1745"><a href="#GA-1745"><span class="linenos">1745</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA-1746"><a href="#GA-1746"><span class="linenos">1746</span></a>                    <span class="c1"># Creating the new population based on the parents and offspring.</span>
</span><span id="GA-1747"><a href="#GA-1747"><span class="linenos">1747</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span>
</span><span id="GA-1748"><a href="#GA-1748"><span class="linenos">1748</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA-1749"><a href="#GA-1749"><span class="linenos">1749</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-1750"><a href="#GA-1750"><span class="linenos">1750</span></a>                    <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA-1751"><a href="#GA-1751"><span class="linenos">1751</span></a>                                                                     <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="GA-1752"><a href="#GA-1752"><span class="linenos">1752</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA-1753"><a href="#GA-1753"><span class="linenos">1753</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA-1754"><a href="#GA-1754"><span class="linenos">1754</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1755"><a href="#GA-1755"><span class="linenos">1755</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA-1756"><a href="#GA-1756"><span class="linenos">1756</span></a>                                                                              <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA-1757"><a href="#GA-1757"><span class="linenos">1757</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span>
</span><span id="GA-1758"><a href="#GA-1758"><span class="linenos">1758</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA-1759"><a href="#GA-1759"><span class="linenos">1759</span></a>
</span><span id="GA-1760"><a href="#GA-1760"><span class="linenos">1760</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="n">generation</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># The generations_completed attribute holds the number of the last completed generation.</span>
</span><span id="GA-1761"><a href="#GA-1761"><span class="linenos">1761</span></a>
</span><span id="GA-1762"><a href="#GA-1762"><span class="linenos">1762</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1763"><a href="#GA-1763"><span class="linenos">1763</span></a>
</span><span id="GA-1764"><a href="#GA-1764"><span class="linenos">1764</span></a>            <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="GA-1765"><a href="#GA-1765"><span class="linenos">1765</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA-1766"><a href="#GA-1766"><span class="linenos">1766</span></a>            <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="GA-1767"><a href="#GA-1767"><span class="linenos">1767</span></a>                <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1768"><a href="#GA-1768"><span class="linenos">1768</span></a>
</span><span id="GA-1769"><a href="#GA-1769"><span class="linenos">1769</span></a>            <span class="c1"># Appending the best solution in the current generation to the best_solutions list.</span>
</span><span id="GA-1770"><a href="#GA-1770"><span class="linenos">1770</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA-1771"><a href="#GA-1771"><span class="linenos">1771</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="GA-1772"><a href="#GA-1772"><span class="linenos">1772</span></a>
</span><span id="GA-1773"><a href="#GA-1773"><span class="linenos">1773</span></a>            <span class="c1"># If the callback_generation attribute is not None, then cal the callback function after the generation.</span>
</span><span id="GA-1774"><a href="#GA-1774"><span class="linenos">1774</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1775"><a href="#GA-1775"><span class="linenos">1775</span></a>                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GA-1776"><a href="#GA-1776"><span class="linenos">1776</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span>
</span><span id="GA-1777"><a href="#GA-1777"><span class="linenos">1777</span></a>                    <span class="c1"># Before aborting the loop, save the fitness value of the best solution.</span>
</span><span id="GA-1778"><a href="#GA-1778"><span class="linenos">1778</span></a>                    <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1779"><a href="#GA-1779"><span class="linenos">1779</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA-1780"><a href="#GA-1780"><span class="linenos">1780</span></a>                    <span class="k">break</span>
</span><span id="GA-1781"><a href="#GA-1781"><span class="linenos">1781</span></a>
</span><span id="GA-1782"><a href="#GA-1782"><span class="linenos">1782</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-1783"><a href="#GA-1783"><span class="linenos">1783</span></a>                <span class="k">for</span> <span class="n">criterion</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="p">:</span>
</span><span id="GA-1784"><a href="#GA-1784"><span class="linenos">1784</span></a>                    <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;reach&quot;</span><span class="p">:</span>
</span><span id="GA-1785"><a href="#GA-1785"><span class="linenos">1785</span></a>                        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA-1786"><a href="#GA-1786"><span class="linenos">1786</span></a>                            <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-1787"><a href="#GA-1787"><span class="linenos">1787</span></a>                            <span class="k">break</span>
</span><span id="GA-1788"><a href="#GA-1788"><span class="linenos">1788</span></a>                    <span class="k">elif</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;saturate&quot;</span><span class="p">:</span>
</span><span id="GA-1789"><a href="#GA-1789"><span class="linenos">1789</span></a>                        <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-1790"><a href="#GA-1790"><span class="linenos">1790</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-1791"><a href="#GA-1791"><span class="linenos">1791</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
</span><span id="GA-1792"><a href="#GA-1792"><span class="linenos">1792</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="o">&lt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span><span id="GA-1793"><a href="#GA-1793"><span class="linenos">1793</span></a>                                <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA-1794"><a href="#GA-1794"><span class="linenos">1794</span></a>                                <span class="k">break</span>
</span><span id="GA-1795"><a href="#GA-1795"><span class="linenos">1795</span></a>
</span><span id="GA-1796"><a href="#GA-1796"><span class="linenos">1796</span></a>            <span class="k">if</span> <span class="n">stop_run</span><span class="p">:</span>
</span><span id="GA-1797"><a href="#GA-1797"><span class="linenos">1797</span></a>                <span class="k">break</span>
</span><span id="GA-1798"><a href="#GA-1798"><span class="linenos">1798</span></a>
</span><span id="GA-1799"><a href="#GA-1799"><span class="linenos">1799</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span><span class="p">)</span>
</span><span id="GA-1800"><a href="#GA-1800"><span class="linenos">1800</span></a>
</span><span id="GA-1801"><a href="#GA-1801"><span class="linenos">1801</span></a>        <span class="c1"># Save the fitness of the last generation.</span>
</span><span id="GA-1802"><a href="#GA-1802"><span class="linenos">1802</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA-1803"><a href="#GA-1803"><span class="linenos">1803</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1804"><a href="#GA-1804"><span class="linenos">1804</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="GA-1805"><a href="#GA-1805"><span class="linenos">1805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="GA-1806"><a href="#GA-1806"><span class="linenos">1806</span></a>
</span><span id="GA-1807"><a href="#GA-1807"><span class="linenos">1807</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1808"><a href="#GA-1808"><span class="linenos">1808</span></a>
</span><span id="GA-1809"><a href="#GA-1809"><span class="linenos">1809</span></a>        <span class="c1"># Save the fitness value of the best solution.</span>
</span><span id="GA-1810"><a href="#GA-1810"><span class="linenos">1810</span></a>
</span><span id="GA-1811"><a href="#GA-1811"><span class="linenos">1811</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1812"><a href="#GA-1812"><span class="linenos">1812</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA-1813"><a href="#GA-1813"><span class="linenos">1813</span></a>
</span><span id="GA-1814"><a href="#GA-1814"><span class="linenos">1814</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> \
</span><span id="GA-1815"><a href="#GA-1815"><span class="linenos">1815</span></a>        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)))[</span><span class="mi">0</span><span class="p">][</span>
</span><span id="GA-1816"><a href="#GA-1816"><span class="linenos">1816</span></a>            <span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1817"><a href="#GA-1817"><span class="linenos">1817</span></a>        <span class="c1"># After the run() method completes, the run_completed flag is changed from False to True.</span>
</span><span id="GA-1818"><a href="#GA-1818"><span class="linenos">1818</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True only after the run() method completes gracefully.</span>
</span><span id="GA-1819"><a href="#GA-1819"><span class="linenos">1819</span></a>
</span><span id="GA-1820"><a href="#GA-1820"><span class="linenos">1820</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-1821"><a href="#GA-1821"><span class="linenos">1821</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA-1822"><a href="#GA-1822"><span class="linenos">1822</span></a>
</span><span id="GA-1823"><a href="#GA-1823"><span class="linenos">1823</span></a>        <span class="c1"># Converting the &#39;best_solutions&#39; list into a NumPy array.</span>
</span><span id="GA-1824"><a href="#GA-1824"><span class="linenos">1824</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="GA-1825"><a href="#GA-1825"><span class="linenos">1825</span></a>
</span><span id="GA-1826"><a href="#GA-1826"><span class="linenos">1826</span></a>        <span class="c1"># Converting the &#39;solutions&#39; list into a NumPy array.</span>
</span><span id="GA-1827"><a href="#GA-1827"><span class="linenos">1827</span></a>        <span class="c1"># self.solutions = numpy.array(self.solutions)</span>
</span><span id="GA-1828"><a href="#GA-1828"><span class="linenos">1828</span></a>
</span><span id="GA-1829"><a href="#GA-1829"><span class="linenos">1829</span></a>    <span class="k">def</span> <span class="nf">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1830"><a href="#GA-1830"><span class="linenos">1830</span></a>
</span><span id="GA-1831"><a href="#GA-1831"><span class="linenos">1831</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1832"><a href="#GA-1832"><span class="linenos">1832</span></a><span class="sd">        Selects the parents using the steady-state selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1833"><a href="#GA-1833"><span class="linenos">1833</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1834"><a href="#GA-1834"><span class="linenos">1834</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1835"><a href="#GA-1835"><span class="linenos">1835</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1836"><a href="#GA-1836"><span class="linenos">1836</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1837"><a href="#GA-1837"><span class="linenos">1837</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1838"><a href="#GA-1838"><span class="linenos">1838</span></a>
</span><span id="GA-1839"><a href="#GA-1839"><span class="linenos">1839</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="GA-1840"><a href="#GA-1840"><span class="linenos">1840</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="GA-1841"><a href="#GA-1841"><span class="linenos">1841</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA-1842"><a href="#GA-1842"><span class="linenos">1842</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1843"><a href="#GA-1843"><span class="linenos">1843</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1844"><a href="#GA-1844"><span class="linenos">1844</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1845"><a href="#GA-1845"><span class="linenos">1845</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1846"><a href="#GA-1846"><span class="linenos">1846</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1847"><a href="#GA-1847"><span class="linenos">1847</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1848"><a href="#GA-1848"><span class="linenos">1848</span></a>
</span><span id="GA-1849"><a href="#GA-1849"><span class="linenos">1849</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span><span id="GA-1850"><a href="#GA-1850"><span class="linenos">1850</span></a>
</span><span id="GA-1851"><a href="#GA-1851"><span class="linenos">1851</span></a>    <span class="k">def</span> <span class="nf">rank_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1852"><a href="#GA-1852"><span class="linenos">1852</span></a>
</span><span id="GA-1853"><a href="#GA-1853"><span class="linenos">1853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1854"><a href="#GA-1854"><span class="linenos">1854</span></a><span class="sd">        Selects the parents using the rank selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1855"><a href="#GA-1855"><span class="linenos">1855</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1856"><a href="#GA-1856"><span class="linenos">1856</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1857"><a href="#GA-1857"><span class="linenos">1857</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1858"><a href="#GA-1858"><span class="linenos">1858</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1859"><a href="#GA-1859"><span class="linenos">1859</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1860"><a href="#GA-1860"><span class="linenos">1860</span></a>
</span><span id="GA-1861"><a href="#GA-1861"><span class="linenos">1861</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="GA-1862"><a href="#GA-1862"><span class="linenos">1862</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="GA-1863"><a href="#GA-1863"><span class="linenos">1863</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA-1864"><a href="#GA-1864"><span class="linenos">1864</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1865"><a href="#GA-1865"><span class="linenos">1865</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1866"><a href="#GA-1866"><span class="linenos">1866</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1867"><a href="#GA-1867"><span class="linenos">1867</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1868"><a href="#GA-1868"><span class="linenos">1868</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1869"><a href="#GA-1869"><span class="linenos">1869</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1870"><a href="#GA-1870"><span class="linenos">1870</span></a>
</span><span id="GA-1871"><a href="#GA-1871"><span class="linenos">1871</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span><span id="GA-1872"><a href="#GA-1872"><span class="linenos">1872</span></a>
</span><span id="GA-1873"><a href="#GA-1873"><span class="linenos">1873</span></a>    <span class="k">def</span> <span class="nf">random_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1874"><a href="#GA-1874"><span class="linenos">1874</span></a>
</span><span id="GA-1875"><a href="#GA-1875"><span class="linenos">1875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1876"><a href="#GA-1876"><span class="linenos">1876</span></a><span class="sd">        Selects the parents randomly. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1877"><a href="#GA-1877"><span class="linenos">1877</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1878"><a href="#GA-1878"><span class="linenos">1878</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1879"><a href="#GA-1879"><span class="linenos">1879</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1880"><a href="#GA-1880"><span class="linenos">1880</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1881"><a href="#GA-1881"><span class="linenos">1881</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1882"><a href="#GA-1882"><span class="linenos">1882</span></a>
</span><span id="GA-1883"><a href="#GA-1883"><span class="linenos">1883</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1884"><a href="#GA-1884"><span class="linenos">1884</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1885"><a href="#GA-1885"><span class="linenos">1885</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1886"><a href="#GA-1886"><span class="linenos">1886</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1887"><a href="#GA-1887"><span class="linenos">1887</span></a>
</span><span id="GA-1888"><a href="#GA-1888"><span class="linenos">1888</span></a>        <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">num_parents</span><span class="p">)</span>
</span><span id="GA-1889"><a href="#GA-1889"><span class="linenos">1889</span></a>
</span><span id="GA-1890"><a href="#GA-1890"><span class="linenos">1890</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1891"><a href="#GA-1891"><span class="linenos">1891</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1892"><a href="#GA-1892"><span class="linenos">1892</span></a>
</span><span id="GA-1893"><a href="#GA-1893"><span class="linenos">1893</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">rand_indices</span>
</span><span id="GA-1894"><a href="#GA-1894"><span class="linenos">1894</span></a>
</span><span id="GA-1895"><a href="#GA-1895"><span class="linenos">1895</span></a>    <span class="k">def</span> <span class="nf">tournament_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1896"><a href="#GA-1896"><span class="linenos">1896</span></a>
</span><span id="GA-1897"><a href="#GA-1897"><span class="linenos">1897</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1898"><a href="#GA-1898"><span class="linenos">1898</span></a><span class="sd">        Selects the parents using the tournament selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1899"><a href="#GA-1899"><span class="linenos">1899</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1900"><a href="#GA-1900"><span class="linenos">1900</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1901"><a href="#GA-1901"><span class="linenos">1901</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1902"><a href="#GA-1902"><span class="linenos">1902</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1903"><a href="#GA-1903"><span class="linenos">1903</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1904"><a href="#GA-1904"><span class="linenos">1904</span></a>
</span><span id="GA-1905"><a href="#GA-1905"><span class="linenos">1905</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1906"><a href="#GA-1906"><span class="linenos">1906</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1907"><a href="#GA-1907"><span class="linenos">1907</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1908"><a href="#GA-1908"><span class="linenos">1908</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1909"><a href="#GA-1909"><span class="linenos">1909</span></a>
</span><span id="GA-1910"><a href="#GA-1910"><span class="linenos">1910</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-1911"><a href="#GA-1911"><span class="linenos">1911</span></a>
</span><span id="GA-1912"><a href="#GA-1912"><span class="linenos">1912</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1913"><a href="#GA-1913"><span class="linenos">1913</span></a>            <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span><span class="p">)</span>
</span><span id="GA-1914"><a href="#GA-1914"><span class="linenos">1914</span></a>            <span class="n">K_fitnesses</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">]</span>
</span><span id="GA-1915"><a href="#GA-1915"><span class="linenos">1915</span></a>            <span class="n">selected_parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">K_fitnesses</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">K_fitnesses</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1916"><a href="#GA-1916"><span class="linenos">1916</span></a>            <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">])</span>
</span><span id="GA-1917"><a href="#GA-1917"><span class="linenos">1917</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1918"><a href="#GA-1918"><span class="linenos">1918</span></a>
</span><span id="GA-1919"><a href="#GA-1919"><span class="linenos">1919</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="GA-1920"><a href="#GA-1920"><span class="linenos">1920</span></a>
</span><span id="GA-1921"><a href="#GA-1921"><span class="linenos">1921</span></a>    <span class="k">def</span> <span class="nf">roulette_wheel_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1922"><a href="#GA-1922"><span class="linenos">1922</span></a>
</span><span id="GA-1923"><a href="#GA-1923"><span class="linenos">1923</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1924"><a href="#GA-1924"><span class="linenos">1924</span></a><span class="sd">        Selects the parents using the roulette wheel selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1925"><a href="#GA-1925"><span class="linenos">1925</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1926"><a href="#GA-1926"><span class="linenos">1926</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1927"><a href="#GA-1927"><span class="linenos">1927</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1928"><a href="#GA-1928"><span class="linenos">1928</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1929"><a href="#GA-1929"><span class="linenos">1929</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1930"><a href="#GA-1930"><span class="linenos">1930</span></a>
</span><span id="GA-1931"><a href="#GA-1931"><span class="linenos">1931</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA-1932"><a href="#GA-1932"><span class="linenos">1932</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1933"><a href="#GA-1933"><span class="linenos">1933</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="GA-1934"><a href="#GA-1934"><span class="linenos">1934</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="GA-1935"><a href="#GA-1935"><span class="linenos">1935</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA-1936"><a href="#GA-1936"><span class="linenos">1936</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="GA-1937"><a href="#GA-1937"><span class="linenos">1937</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA-1938"><a href="#GA-1938"><span class="linenos">1938</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="GA-1939"><a href="#GA-1939"><span class="linenos">1939</span></a>
</span><span id="GA-1940"><a href="#GA-1940"><span class="linenos">1940</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="GA-1941"><a href="#GA-1941"><span class="linenos">1941</span></a>
</span><span id="GA-1942"><a href="#GA-1942"><span class="linenos">1942</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="GA-1943"><a href="#GA-1943"><span class="linenos">1943</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-1944"><a href="#GA-1944"><span class="linenos">1944</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1945"><a href="#GA-1945"><span class="linenos">1945</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA-1946"><a href="#GA-1946"><span class="linenos">1946</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="GA-1947"><a href="#GA-1947"><span class="linenos">1947</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA-1948"><a href="#GA-1948"><span class="linenos">1948</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="GA-1949"><a href="#GA-1949"><span class="linenos">1949</span></a>
</span><span id="GA-1950"><a href="#GA-1950"><span class="linenos">1950</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA-1951"><a href="#GA-1951"><span class="linenos">1951</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-1952"><a href="#GA-1952"><span class="linenos">1952</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-1953"><a href="#GA-1953"><span class="linenos">1953</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-1954"><a href="#GA-1954"><span class="linenos">1954</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-1955"><a href="#GA-1955"><span class="linenos">1955</span></a>
</span><span id="GA-1956"><a href="#GA-1956"><span class="linenos">1956</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-1957"><a href="#GA-1957"><span class="linenos">1957</span></a>
</span><span id="GA-1958"><a href="#GA-1958"><span class="linenos">1958</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1959"><a href="#GA-1959"><span class="linenos">1959</span></a>            <span class="n">rand_prob</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
</span><span id="GA-1960"><a href="#GA-1960"><span class="linenos">1960</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-1961"><a href="#GA-1961"><span class="linenos">1961</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_prob</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_prob</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="GA-1962"><a href="#GA-1962"><span class="linenos">1962</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-1963"><a href="#GA-1963"><span class="linenos">1963</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="GA-1964"><a href="#GA-1964"><span class="linenos">1964</span></a>                    <span class="k">break</span>
</span><span id="GA-1965"><a href="#GA-1965"><span class="linenos">1965</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="GA-1966"><a href="#GA-1966"><span class="linenos">1966</span></a>
</span><span id="GA-1967"><a href="#GA-1967"><span class="linenos">1967</span></a>    <span class="k">def</span> <span class="nf">stochastic_universal_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-1968"><a href="#GA-1968"><span class="linenos">1968</span></a>
</span><span id="GA-1969"><a href="#GA-1969"><span class="linenos">1969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-1970"><a href="#GA-1970"><span class="linenos">1970</span></a><span class="sd">        Selects the parents using the stochastic universal selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA-1971"><a href="#GA-1971"><span class="linenos">1971</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-1972"><a href="#GA-1972"><span class="linenos">1972</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA-1973"><a href="#GA-1973"><span class="linenos">1973</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA-1974"><a href="#GA-1974"><span class="linenos">1974</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA-1975"><a href="#GA-1975"><span class="linenos">1975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-1976"><a href="#GA-1976"><span class="linenos">1976</span></a>
</span><span id="GA-1977"><a href="#GA-1977"><span class="linenos">1977</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA-1978"><a href="#GA-1978"><span class="linenos">1978</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-1979"><a href="#GA-1979"><span class="linenos">1979</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="GA-1980"><a href="#GA-1980"><span class="linenos">1980</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="GA-1981"><a href="#GA-1981"><span class="linenos">1981</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA-1982"><a href="#GA-1982"><span class="linenos">1982</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="GA-1983"><a href="#GA-1983"><span class="linenos">1983</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA-1984"><a href="#GA-1984"><span class="linenos">1984</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="GA-1985"><a href="#GA-1985"><span class="linenos">1985</span></a>
</span><span id="GA-1986"><a href="#GA-1986"><span class="linenos">1986</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="GA-1987"><a href="#GA-1987"><span class="linenos">1987</span></a>
</span><span id="GA-1988"><a href="#GA-1988"><span class="linenos">1988</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="GA-1989"><a href="#GA-1989"><span class="linenos">1989</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-1990"><a href="#GA-1990"><span class="linenos">1990</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-1991"><a href="#GA-1991"><span class="linenos">1991</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA-1992"><a href="#GA-1992"><span class="linenos">1992</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="GA-1993"><a href="#GA-1993"><span class="linenos">1993</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA-1994"><a href="#GA-1994"><span class="linenos">1994</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="GA-1995"><a href="#GA-1995"><span class="linenos">1995</span></a>
</span><span id="GA-1996"><a href="#GA-1996"><span class="linenos">1996</span></a>        <span class="n">pointers_distance</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>  <span class="c1"># Distance between different pointers.</span>
</span><span id="GA-1997"><a href="#GA-1997"><span class="linenos">1997</span></a>        <span class="n">first_pointer</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">pointers_distance</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Location of the first pointer.</span>
</span><span id="GA-1998"><a href="#GA-1998"><span class="linenos">1998</span></a>
</span><span id="GA-1999"><a href="#GA-1999"><span class="linenos">1999</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA-2000"><a href="#GA-2000"><span class="linenos">2000</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2001"><a href="#GA-2001"><span class="linenos">2001</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2002"><a href="#GA-2002"><span class="linenos">2002</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2003"><a href="#GA-2003"><span class="linenos">2003</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-2004"><a href="#GA-2004"><span class="linenos">2004</span></a>
</span><span id="GA-2005"><a href="#GA-2005"><span class="linenos">2005</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-2006"><a href="#GA-2006"><span class="linenos">2006</span></a>
</span><span id="GA-2007"><a href="#GA-2007"><span class="linenos">2007</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA-2008"><a href="#GA-2008"><span class="linenos">2008</span></a>            <span class="n">rand_pointer</span> <span class="o">=</span> <span class="n">first_pointer</span> <span class="o">+</span> <span class="n">parent_num</span> <span class="o">*</span> <span class="n">pointers_distance</span>
</span><span id="GA-2009"><a href="#GA-2009"><span class="linenos">2009</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2010"><a href="#GA-2010"><span class="linenos">2010</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_pointer</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_pointer</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="GA-2011"><a href="#GA-2011"><span class="linenos">2011</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2012"><a href="#GA-2012"><span class="linenos">2012</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="GA-2013"><a href="#GA-2013"><span class="linenos">2013</span></a>                    <span class="k">break</span>
</span><span id="GA-2014"><a href="#GA-2014"><span class="linenos">2014</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span><span id="GA-2015"><a href="#GA-2015"><span class="linenos">2015</span></a>
</span><span id="GA-2016"><a href="#GA-2016"><span class="linenos">2016</span></a>    <span class="k">def</span> <span class="nf">single_point_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA-2017"><a href="#GA-2017"><span class="linenos">2017</span></a>
</span><span id="GA-2018"><a href="#GA-2018"><span class="linenos">2018</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2019"><a href="#GA-2019"><span class="linenos">2019</span></a><span class="sd">        Applies the single-point crossover. It selects a point randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="GA-2020"><a href="#GA-2020"><span class="linenos">2020</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-2021"><a href="#GA-2021"><span class="linenos">2021</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA-2022"><a href="#GA-2022"><span class="linenos">2022</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA-2023"><a href="#GA-2023"><span class="linenos">2023</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA-2024"><a href="#GA-2024"><span class="linenos">2024</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2025"><a href="#GA-2025"><span class="linenos">2025</span></a>
</span><span id="GA-2026"><a href="#GA-2026"><span class="linenos">2026</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2027"><a href="#GA-2027"><span class="linenos">2027</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2028"><a href="#GA-2028"><span class="linenos">2028</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2029"><a href="#GA-2029"><span class="linenos">2029</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-2030"><a href="#GA-2030"><span class="linenos">2030</span></a>
</span><span id="GA-2031"><a href="#GA-2031"><span class="linenos">2031</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2032"><a href="#GA-2032"><span class="linenos">2032</span></a>            <span class="c1"># The point at which crossover takes place between two parents. Usually, it is at the center.</span>
</span><span id="GA-2033"><a href="#GA-2033"><span class="linenos">2033</span></a>            <span class="n">crossover_point</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2034"><a href="#GA-2034"><span class="linenos">2034</span></a>
</span><span id="GA-2035"><a href="#GA-2035"><span class="linenos">2035</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2036"><a href="#GA-2036"><span class="linenos">2036</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2037"><a href="#GA-2037"><span class="linenos">2037</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2038"><a href="#GA-2038"><span class="linenos">2038</span></a>
</span><span id="GA-2039"><a href="#GA-2039"><span class="linenos">2039</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA-2040"><a href="#GA-2040"><span class="linenos">2040</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2041"><a href="#GA-2041"><span class="linenos">2041</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA-2042"><a href="#GA-2042"><span class="linenos">2042</span></a>                    <span class="k">continue</span>
</span><span id="GA-2043"><a href="#GA-2043"><span class="linenos">2043</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2044"><a href="#GA-2044"><span class="linenos">2044</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2045"><a href="#GA-2045"><span class="linenos">2045</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA-2046"><a href="#GA-2046"><span class="linenos">2046</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2047"><a href="#GA-2047"><span class="linenos">2047</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2048"><a href="#GA-2048"><span class="linenos">2048</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2049"><a href="#GA-2049"><span class="linenos">2049</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2050"><a href="#GA-2050"><span class="linenos">2050</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2051"><a href="#GA-2051"><span class="linenos">2051</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA-2052"><a href="#GA-2052"><span class="linenos">2052</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2053"><a href="#GA-2053"><span class="linenos">2053</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA-2054"><a href="#GA-2054"><span class="linenos">2054</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2055"><a href="#GA-2055"><span class="linenos">2055</span></a>
</span><span id="GA-2056"><a href="#GA-2056"><span class="linenos">2056</span></a>            <span class="c1"># The new offspring has its first half of its genes from the first parent.</span>
</span><span id="GA-2057"><a href="#GA-2057"><span class="linenos">2057</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span>
</span><span id="GA-2058"><a href="#GA-2058"><span class="linenos">2058</span></a>            <span class="c1"># The new offspring has its second half of its genes from the second parent.</span>
</span><span id="GA-2059"><a href="#GA-2059"><span class="linenos">2059</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span>
</span><span id="GA-2060"><a href="#GA-2060"><span class="linenos">2060</span></a>
</span><span id="GA-2061"><a href="#GA-2061"><span class="linenos">2061</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA-2062"><a href="#GA-2062"><span class="linenos">2062</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2063"><a href="#GA-2063"><span class="linenos">2063</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2064"><a href="#GA-2064"><span class="linenos">2064</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2065"><a href="#GA-2065"><span class="linenos">2065</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2066"><a href="#GA-2066"><span class="linenos">2066</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2067"><a href="#GA-2067"><span class="linenos">2067</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2068"><a href="#GA-2068"><span class="linenos">2068</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2069"><a href="#GA-2069"><span class="linenos">2069</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2070"><a href="#GA-2070"><span class="linenos">2070</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2071"><a href="#GA-2071"><span class="linenos">2071</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2072"><a href="#GA-2072"><span class="linenos">2072</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2073"><a href="#GA-2073"><span class="linenos">2073</span></a>
</span><span id="GA-2074"><a href="#GA-2074"><span class="linenos">2074</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2075"><a href="#GA-2075"><span class="linenos">2075</span></a>
</span><span id="GA-2076"><a href="#GA-2076"><span class="linenos">2076</span></a>    <span class="k">def</span> <span class="nf">two_points_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA-2077"><a href="#GA-2077"><span class="linenos">2077</span></a>
</span><span id="GA-2078"><a href="#GA-2078"><span class="linenos">2078</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2079"><a href="#GA-2079"><span class="linenos">2079</span></a><span class="sd">        Applies the 2 points crossover. It selects the 2 points randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="GA-2080"><a href="#GA-2080"><span class="linenos">2080</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-2081"><a href="#GA-2081"><span class="linenos">2081</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA-2082"><a href="#GA-2082"><span class="linenos">2082</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA-2083"><a href="#GA-2083"><span class="linenos">2083</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA-2084"><a href="#GA-2084"><span class="linenos">2084</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2085"><a href="#GA-2085"><span class="linenos">2085</span></a>
</span><span id="GA-2086"><a href="#GA-2086"><span class="linenos">2086</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2087"><a href="#GA-2087"><span class="linenos">2087</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2088"><a href="#GA-2088"><span class="linenos">2088</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2089"><a href="#GA-2089"><span class="linenos">2089</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-2090"><a href="#GA-2090"><span class="linenos">2090</span></a>
</span><span id="GA-2091"><a href="#GA-2091"><span class="linenos">2091</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2092"><a href="#GA-2092"><span class="linenos">2092</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA-2093"><a href="#GA-2093"><span class="linenos">2093</span></a>                <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># If the chromosome has only a single gene. In this case, this gene is copied from the second parent.</span>
</span><span id="GA-2094"><a href="#GA-2094"><span class="linenos">2094</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-2095"><a href="#GA-2095"><span class="linenos">2095</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2096"><a href="#GA-2096"><span class="linenos">2096</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2097"><a href="#GA-2097"><span class="linenos">2097</span></a>
</span><span id="GA-2098"><a href="#GA-2098"><span class="linenos">2098</span></a>            <span class="n">crossover_point2</span> <span class="o">=</span> <span class="n">crossover_point1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span>
</span><span id="GA-2099"><a href="#GA-2099"><span class="linenos">2099</span></a>                <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># The second point must always be greater than the first point.</span>
</span><span id="GA-2100"><a href="#GA-2100"><span class="linenos">2100</span></a>
</span><span id="GA-2101"><a href="#GA-2101"><span class="linenos">2101</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2102"><a href="#GA-2102"><span class="linenos">2102</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2103"><a href="#GA-2103"><span class="linenos">2103</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2104"><a href="#GA-2104"><span class="linenos">2104</span></a>
</span><span id="GA-2105"><a href="#GA-2105"><span class="linenos">2105</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA-2106"><a href="#GA-2106"><span class="linenos">2106</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2107"><a href="#GA-2107"><span class="linenos">2107</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA-2108"><a href="#GA-2108"><span class="linenos">2108</span></a>                    <span class="k">continue</span>
</span><span id="GA-2109"><a href="#GA-2109"><span class="linenos">2109</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2110"><a href="#GA-2110"><span class="linenos">2110</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2111"><a href="#GA-2111"><span class="linenos">2111</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA-2112"><a href="#GA-2112"><span class="linenos">2112</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2113"><a href="#GA-2113"><span class="linenos">2113</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2114"><a href="#GA-2114"><span class="linenos">2114</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2115"><a href="#GA-2115"><span class="linenos">2115</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2116"><a href="#GA-2116"><span class="linenos">2116</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2117"><a href="#GA-2117"><span class="linenos">2117</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA-2118"><a href="#GA-2118"><span class="linenos">2118</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2119"><a href="#GA-2119"><span class="linenos">2119</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA-2120"><a href="#GA-2120"><span class="linenos">2120</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2121"><a href="#GA-2121"><span class="linenos">2121</span></a>
</span><span id="GA-2122"><a href="#GA-2122"><span class="linenos">2122</span></a>            <span class="c1"># The genes from the beginning of the chromosome up to the first point are copied from the first parent.</span>
</span><span id="GA-2123"><a href="#GA-2123"><span class="linenos">2123</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span>
</span><span id="GA-2124"><a href="#GA-2124"><span class="linenos">2124</span></a>            <span class="c1"># The genes from the second point up to the end of the chromosome are copied from the first parent.</span>
</span><span id="GA-2125"><a href="#GA-2125"><span class="linenos">2125</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span>
</span><span id="GA-2126"><a href="#GA-2126"><span class="linenos">2126</span></a>            <span class="c1"># The genes between the 2 points are copied from the second parent.</span>
</span><span id="GA-2127"><a href="#GA-2127"><span class="linenos">2127</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span>
</span><span id="GA-2128"><a href="#GA-2128"><span class="linenos">2128</span></a>
</span><span id="GA-2129"><a href="#GA-2129"><span class="linenos">2129</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA-2130"><a href="#GA-2130"><span class="linenos">2130</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2131"><a href="#GA-2131"><span class="linenos">2131</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2132"><a href="#GA-2132"><span class="linenos">2132</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2133"><a href="#GA-2133"><span class="linenos">2133</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2134"><a href="#GA-2134"><span class="linenos">2134</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2135"><a href="#GA-2135"><span class="linenos">2135</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2136"><a href="#GA-2136"><span class="linenos">2136</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2137"><a href="#GA-2137"><span class="linenos">2137</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2138"><a href="#GA-2138"><span class="linenos">2138</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2139"><a href="#GA-2139"><span class="linenos">2139</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2140"><a href="#GA-2140"><span class="linenos">2140</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2141"><a href="#GA-2141"><span class="linenos">2141</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2142"><a href="#GA-2142"><span class="linenos">2142</span></a>
</span><span id="GA-2143"><a href="#GA-2143"><span class="linenos">2143</span></a>    <span class="k">def</span> <span class="nf">uniform_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA-2144"><a href="#GA-2144"><span class="linenos">2144</span></a>
</span><span id="GA-2145"><a href="#GA-2145"><span class="linenos">2145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2146"><a href="#GA-2146"><span class="linenos">2146</span></a><span class="sd">        Applies the uniform crossover. For each gene, a parent out of the 2 mating parents is selected randomly and the gene is copied from it.</span>
</span><span id="GA-2147"><a href="#GA-2147"><span class="linenos">2147</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-2148"><a href="#GA-2148"><span class="linenos">2148</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA-2149"><a href="#GA-2149"><span class="linenos">2149</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA-2150"><a href="#GA-2150"><span class="linenos">2150</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA-2151"><a href="#GA-2151"><span class="linenos">2151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2152"><a href="#GA-2152"><span class="linenos">2152</span></a>
</span><span id="GA-2153"><a href="#GA-2153"><span class="linenos">2153</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2154"><a href="#GA-2154"><span class="linenos">2154</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2155"><a href="#GA-2155"><span class="linenos">2155</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2156"><a href="#GA-2156"><span class="linenos">2156</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-2157"><a href="#GA-2157"><span class="linenos">2157</span></a>
</span><span id="GA-2158"><a href="#GA-2158"><span class="linenos">2158</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2159"><a href="#GA-2159"><span class="linenos">2159</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2160"><a href="#GA-2160"><span class="linenos">2160</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2161"><a href="#GA-2161"><span class="linenos">2161</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2162"><a href="#GA-2162"><span class="linenos">2162</span></a>
</span><span id="GA-2163"><a href="#GA-2163"><span class="linenos">2163</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA-2164"><a href="#GA-2164"><span class="linenos">2164</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2165"><a href="#GA-2165"><span class="linenos">2165</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA-2166"><a href="#GA-2166"><span class="linenos">2166</span></a>                    <span class="k">continue</span>
</span><span id="GA-2167"><a href="#GA-2167"><span class="linenos">2167</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2168"><a href="#GA-2168"><span class="linenos">2168</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2169"><a href="#GA-2169"><span class="linenos">2169</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA-2170"><a href="#GA-2170"><span class="linenos">2170</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2171"><a href="#GA-2171"><span class="linenos">2171</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2172"><a href="#GA-2172"><span class="linenos">2172</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2173"><a href="#GA-2173"><span class="linenos">2173</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2174"><a href="#GA-2174"><span class="linenos">2174</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2175"><a href="#GA-2175"><span class="linenos">2175</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA-2176"><a href="#GA-2176"><span class="linenos">2176</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2177"><a href="#GA-2177"><span class="linenos">2177</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA-2178"><a href="#GA-2178"><span class="linenos">2178</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2179"><a href="#GA-2179"><span class="linenos">2179</span></a>
</span><span id="GA-2180"><a href="#GA-2180"><span class="linenos">2180</span></a>            <span class="n">genes_source</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2181"><a href="#GA-2181"><span class="linenos">2181</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-2182"><a href="#GA-2182"><span class="linenos">2182</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-2183"><a href="#GA-2183"><span class="linenos">2183</span></a>                    <span class="c1"># The gene will be copied from the first parent if the current gene index is 0.</span>
</span><span id="GA-2184"><a href="#GA-2184"><span class="linenos">2184</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2185"><a href="#GA-2185"><span class="linenos">2185</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-2186"><a href="#GA-2186"><span class="linenos">2186</span></a>                    <span class="c1"># The gene will be copied from the second parent if the current gene index is 1.</span>
</span><span id="GA-2187"><a href="#GA-2187"><span class="linenos">2187</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2188"><a href="#GA-2188"><span class="linenos">2188</span></a>
</span><span id="GA-2189"><a href="#GA-2189"><span class="linenos">2189</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA-2190"><a href="#GA-2190"><span class="linenos">2190</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2191"><a href="#GA-2191"><span class="linenos">2191</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2192"><a href="#GA-2192"><span class="linenos">2192</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2193"><a href="#GA-2193"><span class="linenos">2193</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2194"><a href="#GA-2194"><span class="linenos">2194</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2195"><a href="#GA-2195"><span class="linenos">2195</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2196"><a href="#GA-2196"><span class="linenos">2196</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2197"><a href="#GA-2197"><span class="linenos">2197</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2198"><a href="#GA-2198"><span class="linenos">2198</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2199"><a href="#GA-2199"><span class="linenos">2199</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2200"><a href="#GA-2200"><span class="linenos">2200</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2201"><a href="#GA-2201"><span class="linenos">2201</span></a>
</span><span id="GA-2202"><a href="#GA-2202"><span class="linenos">2202</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2203"><a href="#GA-2203"><span class="linenos">2203</span></a>
</span><span id="GA-2204"><a href="#GA-2204"><span class="linenos">2204</span></a>    <span class="k">def</span> <span class="nf">scattered_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA-2205"><a href="#GA-2205"><span class="linenos">2205</span></a>
</span><span id="GA-2206"><a href="#GA-2206"><span class="linenos">2206</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2207"><a href="#GA-2207"><span class="linenos">2207</span></a><span class="sd">        Applies the scattered crossover. It randomly selects the gene from one of the 2 parents.</span>
</span><span id="GA-2208"><a href="#GA-2208"><span class="linenos">2208</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA-2209"><a href="#GA-2209"><span class="linenos">2209</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA-2210"><a href="#GA-2210"><span class="linenos">2210</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA-2211"><a href="#GA-2211"><span class="linenos">2211</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA-2212"><a href="#GA-2212"><span class="linenos">2212</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2213"><a href="#GA-2213"><span class="linenos">2213</span></a>
</span><span id="GA-2214"><a href="#GA-2214"><span class="linenos">2214</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2215"><a href="#GA-2215"><span class="linenos">2215</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2216"><a href="#GA-2216"><span class="linenos">2216</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2217"><a href="#GA-2217"><span class="linenos">2217</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA-2218"><a href="#GA-2218"><span class="linenos">2218</span></a>
</span><span id="GA-2219"><a href="#GA-2219"><span class="linenos">2219</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2220"><a href="#GA-2220"><span class="linenos">2220</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2221"><a href="#GA-2221"><span class="linenos">2221</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-2222"><a href="#GA-2222"><span class="linenos">2222</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2223"><a href="#GA-2223"><span class="linenos">2223</span></a>
</span><span id="GA-2224"><a href="#GA-2224"><span class="linenos">2224</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA-2225"><a href="#GA-2225"><span class="linenos">2225</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2226"><a href="#GA-2226"><span class="linenos">2226</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA-2227"><a href="#GA-2227"><span class="linenos">2227</span></a>                    <span class="k">continue</span>
</span><span id="GA-2228"><a href="#GA-2228"><span class="linenos">2228</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2229"><a href="#GA-2229"><span class="linenos">2229</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2230"><a href="#GA-2230"><span class="linenos">2230</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA-2231"><a href="#GA-2231"><span class="linenos">2231</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2232"><a href="#GA-2232"><span class="linenos">2232</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2233"><a href="#GA-2233"><span class="linenos">2233</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2234"><a href="#GA-2234"><span class="linenos">2234</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2235"><a href="#GA-2235"><span class="linenos">2235</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2236"><a href="#GA-2236"><span class="linenos">2236</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA-2237"><a href="#GA-2237"><span class="linenos">2237</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2238"><a href="#GA-2238"><span class="linenos">2238</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA-2239"><a href="#GA-2239"><span class="linenos">2239</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2240"><a href="#GA-2240"><span class="linenos">2240</span></a>
</span><span id="GA-2241"><a href="#GA-2241"><span class="linenos">2241</span></a>            <span class="c1"># A 0/1 vector where 0 means the gene is taken from the first parent and 1 means the gene is taken from the second parent.</span>
</span><span id="GA-2242"><a href="#GA-2242"><span class="linenos">2242</span></a>            <span class="n">gene_sources</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>
</span><span id="GA-2243"><a href="#GA-2243"><span class="linenos">2243</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gene_sources</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="p">:],</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="p">:])</span>
</span><span id="GA-2244"><a href="#GA-2244"><span class="linenos">2244</span></a>
</span><span id="GA-2245"><a href="#GA-2245"><span class="linenos">2245</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA-2246"><a href="#GA-2246"><span class="linenos">2246</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2247"><a href="#GA-2247"><span class="linenos">2247</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2248"><a href="#GA-2248"><span class="linenos">2248</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2249"><a href="#GA-2249"><span class="linenos">2249</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2250"><a href="#GA-2250"><span class="linenos">2250</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2251"><a href="#GA-2251"><span class="linenos">2251</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2252"><a href="#GA-2252"><span class="linenos">2252</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2253"><a href="#GA-2253"><span class="linenos">2253</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2254"><a href="#GA-2254"><span class="linenos">2254</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA-2255"><a href="#GA-2255"><span class="linenos">2255</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2256"><a href="#GA-2256"><span class="linenos">2256</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2257"><a href="#GA-2257"><span class="linenos">2257</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2258"><a href="#GA-2258"><span class="linenos">2258</span></a>
</span><span id="GA-2259"><a href="#GA-2259"><span class="linenos">2259</span></a>    <span class="k">def</span> <span class="nf">random_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2260"><a href="#GA-2260"><span class="linenos">2260</span></a>
</span><span id="GA-2261"><a href="#GA-2261"><span class="linenos">2261</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2262"><a href="#GA-2262"><span class="linenos">2262</span></a><span class="sd">        Applies the random mutation which changes the values of a number of genes randomly.</span>
</span><span id="GA-2263"><a href="#GA-2263"><span class="linenos">2263</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2264"><a href="#GA-2264"><span class="linenos">2264</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2265"><a href="#GA-2265"><span class="linenos">2265</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2266"><a href="#GA-2266"><span class="linenos">2266</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2267"><a href="#GA-2267"><span class="linenos">2267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2268"><a href="#GA-2268"><span class="linenos">2268</span></a>
</span><span id="GA-2269"><a href="#GA-2269"><span class="linenos">2269</span></a>        <span class="c1"># If the mutation values are selected from the mutation space, the attribute &#39;gene_space&#39; is not None. Otherwise, it is None.</span>
</span><span id="GA-2270"><a href="#GA-2270"><span class="linenos">2270</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="GA-2271"><a href="#GA-2271"><span class="linenos">2271</span></a>
</span><span id="GA-2272"><a href="#GA-2272"><span class="linenos">2272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2273"><a href="#GA-2273"><span class="linenos">2273</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="GA-2274"><a href="#GA-2274"><span class="linenos">2274</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2275"><a href="#GA-2275"><span class="linenos">2275</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA-2276"><a href="#GA-2276"><span class="linenos">2276</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2277"><a href="#GA-2277"><span class="linenos">2277</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2278"><a href="#GA-2278"><span class="linenos">2278</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2279"><a href="#GA-2279"><span class="linenos">2279</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2280"><a href="#GA-2280"><span class="linenos">2280</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="GA-2281"><a href="#GA-2281"><span class="linenos">2281</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2282"><a href="#GA-2282"><span class="linenos">2282</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2283"><a href="#GA-2283"><span class="linenos">2283</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2284"><a href="#GA-2284"><span class="linenos">2284</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2285"><a href="#GA-2285"><span class="linenos">2285</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2286"><a href="#GA-2286"><span class="linenos">2286</span></a>
</span><span id="GA-2287"><a href="#GA-2287"><span class="linenos">2287</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2288"><a href="#GA-2288"><span class="linenos">2288</span></a>
</span><span id="GA-2289"><a href="#GA-2289"><span class="linenos">2289</span></a>    <span class="k">def</span> <span class="nf">mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2290"><a href="#GA-2290"><span class="linenos">2290</span></a>
</span><span id="GA-2291"><a href="#GA-2291"><span class="linenos">2291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2292"><a href="#GA-2292"><span class="linenos">2292</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space.</span>
</span><span id="GA-2293"><a href="#GA-2293"><span class="linenos">2293</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2294"><a href="#GA-2294"><span class="linenos">2294</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2295"><a href="#GA-2295"><span class="linenos">2295</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="GA-2296"><a href="#GA-2296"><span class="linenos">2296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2297"><a href="#GA-2297"><span class="linenos">2297</span></a>
</span><span id="GA-2298"><a href="#GA-2298"><span class="linenos">2298</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="GA-2299"><a href="#GA-2299"><span class="linenos">2299</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2300"><a href="#GA-2300"><span class="linenos">2300</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-2301"><a href="#GA-2301"><span class="linenos">2301</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA-2302"><a href="#GA-2302"><span class="linenos">2302</span></a>
</span><span id="GA-2303"><a href="#GA-2303"><span class="linenos">2303</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-2304"><a href="#GA-2304"><span class="linenos">2304</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2305"><a href="#GA-2305"><span class="linenos">2305</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA-2306"><a href="#GA-2306"><span class="linenos">2306</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2307"><a href="#GA-2307"><span class="linenos">2307</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2308"><a href="#GA-2308"><span class="linenos">2308</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2309"><a href="#GA-2309"><span class="linenos">2309</span></a>
</span><span id="GA-2310"><a href="#GA-2310"><span class="linenos">2310</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA-2311"><a href="#GA-2311"><span class="linenos">2311</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-2312"><a href="#GA-2312"><span class="linenos">2312</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA-2313"><a href="#GA-2313"><span class="linenos">2313</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2314"><a href="#GA-2314"><span class="linenos">2314</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2315"><a href="#GA-2315"><span class="linenos">2315</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2316"><a href="#GA-2316"><span class="linenos">2316</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2317"><a href="#GA-2317"><span class="linenos">2317</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2318"><a href="#GA-2318"><span class="linenos">2318</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2319"><a href="#GA-2319"><span class="linenos">2319</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA-2320"><a href="#GA-2320"><span class="linenos">2320</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2321"><a href="#GA-2321"><span class="linenos">2321</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA-2322"><a href="#GA-2322"><span class="linenos">2322</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2323"><a href="#GA-2323"><span class="linenos">2323</span></a>                        <span class="c1"># The gene&#39;s space of type dict specifies the lower and upper limits of a gene.</span>
</span><span id="GA-2324"><a href="#GA-2324"><span class="linenos">2324</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2325"><a href="#GA-2325"><span class="linenos">2325</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2326"><a href="#GA-2326"><span class="linenos">2326</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2327"><a href="#GA-2327"><span class="linenos">2327</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2328"><a href="#GA-2328"><span class="linenos">2328</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2329"><a href="#GA-2329"><span class="linenos">2329</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2330"><a href="#GA-2330"><span class="linenos">2330</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2331"><a href="#GA-2331"><span class="linenos">2331</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2332"><a href="#GA-2332"><span class="linenos">2332</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2333"><a href="#GA-2333"><span class="linenos">2333</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2334"><a href="#GA-2334"><span class="linenos">2334</span></a>                        <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2335"><a href="#GA-2335"><span class="linenos">2335</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA-2336"><a href="#GA-2336"><span class="linenos">2336</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2337"><a href="#GA-2337"><span class="linenos">2337</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2338"><a href="#GA-2338"><span class="linenos">2338</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA-2339"><a href="#GA-2339"><span class="linenos">2339</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2340"><a href="#GA-2340"><span class="linenos">2340</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2341"><a href="#GA-2341"><span class="linenos">2341</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2342"><a href="#GA-2342"><span class="linenos">2342</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2343"><a href="#GA-2343"><span class="linenos">2343</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2344"><a href="#GA-2344"><span class="linenos">2344</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2345"><a href="#GA-2345"><span class="linenos">2345</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2346"><a href="#GA-2346"><span class="linenos">2346</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2347"><a href="#GA-2347"><span class="linenos">2347</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2348"><a href="#GA-2348"><span class="linenos">2348</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2349"><a href="#GA-2349"><span class="linenos">2349</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA-2350"><a href="#GA-2350"><span class="linenos">2350</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2351"><a href="#GA-2351"><span class="linenos">2351</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2352"><a href="#GA-2352"><span class="linenos">2352</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2353"><a href="#GA-2353"><span class="linenos">2353</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2354"><a href="#GA-2354"><span class="linenos">2354</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2355"><a href="#GA-2355"><span class="linenos">2355</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2356"><a href="#GA-2356"><span class="linenos">2356</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2357"><a href="#GA-2357"><span class="linenos">2357</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2358"><a href="#GA-2358"><span class="linenos">2358</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2359"><a href="#GA-2359"><span class="linenos">2359</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2360"><a href="#GA-2360"><span class="linenos">2360</span></a>                        <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="GA-2361"><a href="#GA-2361"><span class="linenos">2361</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2362"><a href="#GA-2362"><span class="linenos">2362</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2363"><a href="#GA-2363"><span class="linenos">2363</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2364"><a href="#GA-2364"><span class="linenos">2364</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2365"><a href="#GA-2365"><span class="linenos">2365</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2366"><a href="#GA-2366"><span class="linenos">2366</span></a>                    <span class="c1"># value_from_space = random.choice(self.gene_space)</span>
</span><span id="GA-2367"><a href="#GA-2367"><span class="linenos">2367</span></a>
</span><span id="GA-2368"><a href="#GA-2368"><span class="linenos">2368</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2369"><a href="#GA-2369"><span class="linenos">2369</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2370"><a href="#GA-2370"><span class="linenos">2370</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2371"><a href="#GA-2371"><span class="linenos">2371</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2372"><a href="#GA-2372"><span class="linenos">2372</span></a>
</span><span id="GA-2373"><a href="#GA-2373"><span class="linenos">2373</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA-2374"><a href="#GA-2374"><span class="linenos">2374</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2375"><a href="#GA-2375"><span class="linenos">2375</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2376"><a href="#GA-2376"><span class="linenos">2376</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2377"><a href="#GA-2377"><span class="linenos">2377</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2378"><a href="#GA-2378"><span class="linenos">2378</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2379"><a href="#GA-2379"><span class="linenos">2379</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2380"><a href="#GA-2380"><span class="linenos">2380</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2381"><a href="#GA-2381"><span class="linenos">2381</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2382"><a href="#GA-2382"><span class="linenos">2382</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2383"><a href="#GA-2383"><span class="linenos">2383</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2384"><a href="#GA-2384"><span class="linenos">2384</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2385"><a href="#GA-2385"><span class="linenos">2385</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2386"><a href="#GA-2386"><span class="linenos">2386</span></a>
</span><span id="GA-2387"><a href="#GA-2387"><span class="linenos">2387</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2388"><a href="#GA-2388"><span class="linenos">2388</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA-2389"><a href="#GA-2389"><span class="linenos">2389</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2390"><a href="#GA-2390"><span class="linenos">2390</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2391"><a href="#GA-2391"><span class="linenos">2391</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2392"><a href="#GA-2392"><span class="linenos">2392</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2393"><a href="#GA-2393"><span class="linenos">2393</span></a>
</span><span id="GA-2394"><a href="#GA-2394"><span class="linenos">2394</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2395"><a href="#GA-2395"><span class="linenos">2395</span></a>
</span><span id="GA-2396"><a href="#GA-2396"><span class="linenos">2396</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2397"><a href="#GA-2397"><span class="linenos">2397</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space and the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated based on the mutation space.</span>
</span><span id="GA-2398"><a href="#GA-2398"><span class="linenos">2398</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2399"><a href="#GA-2399"><span class="linenos">2399</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2400"><a href="#GA-2400"><span class="linenos">2400</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="GA-2401"><a href="#GA-2401"><span class="linenos">2401</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2402"><a href="#GA-2402"><span class="linenos">2402</span></a>
</span><span id="GA-2403"><a href="#GA-2403"><span class="linenos">2403</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="GA-2404"><a href="#GA-2404"><span class="linenos">2404</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2405"><a href="#GA-2405"><span class="linenos">2405</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2406"><a href="#GA-2406"><span class="linenos">2406</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-2407"><a href="#GA-2407"><span class="linenos">2407</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA-2408"><a href="#GA-2408"><span class="linenos">2408</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-2409"><a href="#GA-2409"><span class="linenos">2409</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2410"><a href="#GA-2410"><span class="linenos">2410</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA-2411"><a href="#GA-2411"><span class="linenos">2411</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2412"><a href="#GA-2412"><span class="linenos">2412</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2413"><a href="#GA-2413"><span class="linenos">2413</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2414"><a href="#GA-2414"><span class="linenos">2414</span></a>
</span><span id="GA-2415"><a href="#GA-2415"><span class="linenos">2415</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA-2416"><a href="#GA-2416"><span class="linenos">2416</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-2417"><a href="#GA-2417"><span class="linenos">2417</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA-2418"><a href="#GA-2418"><span class="linenos">2418</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2419"><a href="#GA-2419"><span class="linenos">2419</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2420"><a href="#GA-2420"><span class="linenos">2420</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2421"><a href="#GA-2421"><span class="linenos">2421</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2422"><a href="#GA-2422"><span class="linenos">2422</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2423"><a href="#GA-2423"><span class="linenos">2423</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2424"><a href="#GA-2424"><span class="linenos">2424</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA-2425"><a href="#GA-2425"><span class="linenos">2425</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2426"><a href="#GA-2426"><span class="linenos">2426</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA-2427"><a href="#GA-2427"><span class="linenos">2427</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2428"><a href="#GA-2428"><span class="linenos">2428</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2429"><a href="#GA-2429"><span class="linenos">2429</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2430"><a href="#GA-2430"><span class="linenos">2430</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2431"><a href="#GA-2431"><span class="linenos">2431</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2432"><a href="#GA-2432"><span class="linenos">2432</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2433"><a href="#GA-2433"><span class="linenos">2433</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2434"><a href="#GA-2434"><span class="linenos">2434</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2435"><a href="#GA-2435"><span class="linenos">2435</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2436"><a href="#GA-2436"><span class="linenos">2436</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2437"><a href="#GA-2437"><span class="linenos">2437</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2438"><a href="#GA-2438"><span class="linenos">2438</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2439"><a href="#GA-2439"><span class="linenos">2439</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2440"><a href="#GA-2440"><span class="linenos">2440</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA-2441"><a href="#GA-2441"><span class="linenos">2441</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2442"><a href="#GA-2442"><span class="linenos">2442</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2443"><a href="#GA-2443"><span class="linenos">2443</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA-2444"><a href="#GA-2444"><span class="linenos">2444</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2445"><a href="#GA-2445"><span class="linenos">2445</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2446"><a href="#GA-2446"><span class="linenos">2446</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2447"><a href="#GA-2447"><span class="linenos">2447</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2448"><a href="#GA-2448"><span class="linenos">2448</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2449"><a href="#GA-2449"><span class="linenos">2449</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2450"><a href="#GA-2450"><span class="linenos">2450</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2451"><a href="#GA-2451"><span class="linenos">2451</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2452"><a href="#GA-2452"><span class="linenos">2452</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2453"><a href="#GA-2453"><span class="linenos">2453</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2454"><a href="#GA-2454"><span class="linenos">2454</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2455"><a href="#GA-2455"><span class="linenos">2455</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2456"><a href="#GA-2456"><span class="linenos">2456</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2457"><a href="#GA-2457"><span class="linenos">2457</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2458"><a href="#GA-2458"><span class="linenos">2458</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2459"><a href="#GA-2459"><span class="linenos">2459</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2460"><a href="#GA-2460"><span class="linenos">2460</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2461"><a href="#GA-2461"><span class="linenos">2461</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2462"><a href="#GA-2462"><span class="linenos">2462</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2463"><a href="#GA-2463"><span class="linenos">2463</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2464"><a href="#GA-2464"><span class="linenos">2464</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2465"><a href="#GA-2465"><span class="linenos">2465</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2466"><a href="#GA-2466"><span class="linenos">2466</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2467"><a href="#GA-2467"><span class="linenos">2467</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2468"><a href="#GA-2468"><span class="linenos">2468</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2469"><a href="#GA-2469"><span class="linenos">2469</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2470"><a href="#GA-2470"><span class="linenos">2470</span></a>
</span><span id="GA-2471"><a href="#GA-2471"><span class="linenos">2471</span></a>                    <span class="c1"># Assigning the selected value from the space to the gene.</span>
</span><span id="GA-2472"><a href="#GA-2472"><span class="linenos">2472</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2473"><a href="#GA-2473"><span class="linenos">2473</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2474"><a href="#GA-2474"><span class="linenos">2474</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2475"><a href="#GA-2475"><span class="linenos">2475</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2476"><a href="#GA-2476"><span class="linenos">2476</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2477"><a href="#GA-2477"><span class="linenos">2477</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2478"><a href="#GA-2478"><span class="linenos">2478</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2479"><a href="#GA-2479"><span class="linenos">2479</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2480"><a href="#GA-2480"><span class="linenos">2480</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA-2481"><a href="#GA-2481"><span class="linenos">2481</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2482"><a href="#GA-2482"><span class="linenos">2482</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2483"><a href="#GA-2483"><span class="linenos">2483</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2484"><a href="#GA-2484"><span class="linenos">2484</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2485"><a href="#GA-2485"><span class="linenos">2485</span></a>
</span><span id="GA-2486"><a href="#GA-2486"><span class="linenos">2486</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2487"><a href="#GA-2487"><span class="linenos">2487</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA-2488"><a href="#GA-2488"><span class="linenos">2488</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2489"><a href="#GA-2489"><span class="linenos">2489</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2490"><a href="#GA-2490"><span class="linenos">2490</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2491"><a href="#GA-2491"><span class="linenos">2491</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2492"><a href="#GA-2492"><span class="linenos">2492</span></a>
</span><span id="GA-2493"><a href="#GA-2493"><span class="linenos">2493</span></a>    <span class="k">def</span> <span class="nf">mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2494"><a href="#GA-2494"><span class="linenos">2494</span></a>
</span><span id="GA-2495"><a href="#GA-2495"><span class="linenos">2495</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2496"><a href="#GA-2496"><span class="linenos">2496</span></a><span class="sd">        Applies the random mutation the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="GA-2497"><a href="#GA-2497"><span class="linenos">2497</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2498"><a href="#GA-2498"><span class="linenos">2498</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2499"><a href="#GA-2499"><span class="linenos">2499</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2500"><a href="#GA-2500"><span class="linenos">2500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2501"><a href="#GA-2501"><span class="linenos">2501</span></a>
</span><span id="GA-2502"><a href="#GA-2502"><span class="linenos">2502</span></a>        <span class="c1"># Random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA-2503"><a href="#GA-2503"><span class="linenos">2503</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2504"><a href="#GA-2504"><span class="linenos">2504</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-2505"><a href="#GA-2505"><span class="linenos">2505</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA-2506"><a href="#GA-2506"><span class="linenos">2506</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="GA-2507"><a href="#GA-2507"><span class="linenos">2507</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2508"><a href="#GA-2508"><span class="linenos">2508</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2509"><a href="#GA-2509"><span class="linenos">2509</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2510"><a href="#GA-2510"><span class="linenos">2510</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA-2511"><a href="#GA-2511"><span class="linenos">2511</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2512"><a href="#GA-2512"><span class="linenos">2512</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2513"><a href="#GA-2513"><span class="linenos">2513</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2514"><a href="#GA-2514"><span class="linenos">2514</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2515"><a href="#GA-2515"><span class="linenos">2515</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2516"><a href="#GA-2516"><span class="linenos">2516</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2517"><a href="#GA-2517"><span class="linenos">2517</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2518"><a href="#GA-2518"><span class="linenos">2518</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA-2519"><a href="#GA-2519"><span class="linenos">2519</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2520"><a href="#GA-2520"><span class="linenos">2520</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2521"><a href="#GA-2521"><span class="linenos">2521</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2522"><a href="#GA-2522"><span class="linenos">2522</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2523"><a href="#GA-2523"><span class="linenos">2523</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2524"><a href="#GA-2524"><span class="linenos">2524</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2525"><a href="#GA-2525"><span class="linenos">2525</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2526"><a href="#GA-2526"><span class="linenos">2526</span></a>
</span><span id="GA-2527"><a href="#GA-2527"><span class="linenos">2527</span></a>                <span class="c1"># Round the gene</span>
</span><span id="GA-2528"><a href="#GA-2528"><span class="linenos">2528</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2529"><a href="#GA-2529"><span class="linenos">2529</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2530"><a href="#GA-2530"><span class="linenos">2530</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2531"><a href="#GA-2531"><span class="linenos">2531</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2532"><a href="#GA-2532"><span class="linenos">2532</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2533"><a href="#GA-2533"><span class="linenos">2533</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2534"><a href="#GA-2534"><span class="linenos">2534</span></a>
</span><span id="GA-2535"><a href="#GA-2535"><span class="linenos">2535</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA-2536"><a href="#GA-2536"><span class="linenos">2536</span></a>
</span><span id="GA-2537"><a href="#GA-2537"><span class="linenos">2537</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2538"><a href="#GA-2538"><span class="linenos">2538</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA-2539"><a href="#GA-2539"><span class="linenos">2539</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2540"><a href="#GA-2540"><span class="linenos">2540</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2541"><a href="#GA-2541"><span class="linenos">2541</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2542"><a href="#GA-2542"><span class="linenos">2542</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2543"><a href="#GA-2543"><span class="linenos">2543</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2544"><a href="#GA-2544"><span class="linenos">2544</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2545"><a href="#GA-2545"><span class="linenos">2545</span></a>
</span><span id="GA-2546"><a href="#GA-2546"><span class="linenos">2546</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2547"><a href="#GA-2547"><span class="linenos">2547</span></a>
</span><span id="GA-2548"><a href="#GA-2548"><span class="linenos">2548</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2549"><a href="#GA-2549"><span class="linenos">2549</span></a>
</span><span id="GA-2550"><a href="#GA-2550"><span class="linenos">2550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2551"><a href="#GA-2551"><span class="linenos">2551</span></a><span class="sd">        Applies the random mutation using the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="GA-2552"><a href="#GA-2552"><span class="linenos">2552</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2553"><a href="#GA-2553"><span class="linenos">2553</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2554"><a href="#GA-2554"><span class="linenos">2554</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2555"><a href="#GA-2555"><span class="linenos">2555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2556"><a href="#GA-2556"><span class="linenos">2556</span></a>
</span><span id="GA-2557"><a href="#GA-2557"><span class="linenos">2557</span></a>        <span class="c1"># Random mutation changes one or more gene in each offspring randomly.</span>
</span><span id="GA-2558"><a href="#GA-2558"><span class="linenos">2558</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2559"><a href="#GA-2559"><span class="linenos">2559</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2560"><a href="#GA-2560"><span class="linenos">2560</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-2561"><a href="#GA-2561"><span class="linenos">2561</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA-2562"><a href="#GA-2562"><span class="linenos">2562</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="GA-2563"><a href="#GA-2563"><span class="linenos">2563</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2564"><a href="#GA-2564"><span class="linenos">2564</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2565"><a href="#GA-2565"><span class="linenos">2565</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2566"><a href="#GA-2566"><span class="linenos">2566</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA-2567"><a href="#GA-2567"><span class="linenos">2567</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2568"><a href="#GA-2568"><span class="linenos">2568</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2569"><a href="#GA-2569"><span class="linenos">2569</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2570"><a href="#GA-2570"><span class="linenos">2570</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2571"><a href="#GA-2571"><span class="linenos">2571</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2572"><a href="#GA-2572"><span class="linenos">2572</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2573"><a href="#GA-2573"><span class="linenos">2573</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2574"><a href="#GA-2574"><span class="linenos">2574</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA-2575"><a href="#GA-2575"><span class="linenos">2575</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2576"><a href="#GA-2576"><span class="linenos">2576</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2577"><a href="#GA-2577"><span class="linenos">2577</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2578"><a href="#GA-2578"><span class="linenos">2578</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2579"><a href="#GA-2579"><span class="linenos">2579</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA-2580"><a href="#GA-2580"><span class="linenos">2580</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2581"><a href="#GA-2581"><span class="linenos">2581</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2582"><a href="#GA-2582"><span class="linenos">2582</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2583"><a href="#GA-2583"><span class="linenos">2583</span></a>
</span><span id="GA-2584"><a href="#GA-2584"><span class="linenos">2584</span></a>                    <span class="c1"># Round the gene</span>
</span><span id="GA-2585"><a href="#GA-2585"><span class="linenos">2585</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2586"><a href="#GA-2586"><span class="linenos">2586</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2587"><a href="#GA-2587"><span class="linenos">2587</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2588"><a href="#GA-2588"><span class="linenos">2588</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2589"><a href="#GA-2589"><span class="linenos">2589</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2590"><a href="#GA-2590"><span class="linenos">2590</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2591"><a href="#GA-2591"><span class="linenos">2591</span></a>
</span><span id="GA-2592"><a href="#GA-2592"><span class="linenos">2592</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA-2593"><a href="#GA-2593"><span class="linenos">2593</span></a>
</span><span id="GA-2594"><a href="#GA-2594"><span class="linenos">2594</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2595"><a href="#GA-2595"><span class="linenos">2595</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA-2596"><a href="#GA-2596"><span class="linenos">2596</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2597"><a href="#GA-2597"><span class="linenos">2597</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2598"><a href="#GA-2598"><span class="linenos">2598</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2599"><a href="#GA-2599"><span class="linenos">2599</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2600"><a href="#GA-2600"><span class="linenos">2600</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2601"><a href="#GA-2601"><span class="linenos">2601</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2602"><a href="#GA-2602"><span class="linenos">2602</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2603"><a href="#GA-2603"><span class="linenos">2603</span></a>
</span><span id="GA-2604"><a href="#GA-2604"><span class="linenos">2604</span></a>    <span class="k">def</span> <span class="nf">swap_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2605"><a href="#GA-2605"><span class="linenos">2605</span></a>
</span><span id="GA-2606"><a href="#GA-2606"><span class="linenos">2606</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2607"><a href="#GA-2607"><span class="linenos">2607</span></a><span class="sd">        Applies the swap mutation which interchanges the values of 2 randomly selected genes.</span>
</span><span id="GA-2608"><a href="#GA-2608"><span class="linenos">2608</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2609"><a href="#GA-2609"><span class="linenos">2609</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2610"><a href="#GA-2610"><span class="linenos">2610</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2611"><a href="#GA-2611"><span class="linenos">2611</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2612"><a href="#GA-2612"><span class="linenos">2612</span></a>
</span><span id="GA-2613"><a href="#GA-2613"><span class="linenos">2613</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2614"><a href="#GA-2614"><span class="linenos">2614</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2615"><a href="#GA-2615"><span class="linenos">2615</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2616"><a href="#GA-2616"><span class="linenos">2616</span></a>
</span><span id="GA-2617"><a href="#GA-2617"><span class="linenos">2617</span></a>            <span class="n">temp</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span>
</span><span id="GA-2618"><a href="#GA-2618"><span class="linenos">2618</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span>
</span><span id="GA-2619"><a href="#GA-2619"><span class="linenos">2619</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA-2620"><a href="#GA-2620"><span class="linenos">2620</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2621"><a href="#GA-2621"><span class="linenos">2621</span></a>
</span><span id="GA-2622"><a href="#GA-2622"><span class="linenos">2622</span></a>    <span class="k">def</span> <span class="nf">inversion_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2623"><a href="#GA-2623"><span class="linenos">2623</span></a>
</span><span id="GA-2624"><a href="#GA-2624"><span class="linenos">2624</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2625"><a href="#GA-2625"><span class="linenos">2625</span></a><span class="sd">        Applies the inversion mutation which selects a subset of genes and inverts them (in order).</span>
</span><span id="GA-2626"><a href="#GA-2626"><span class="linenos">2626</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2627"><a href="#GA-2627"><span class="linenos">2627</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2628"><a href="#GA-2628"><span class="linenos">2628</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2629"><a href="#GA-2629"><span class="linenos">2629</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2630"><a href="#GA-2630"><span class="linenos">2630</span></a>
</span><span id="GA-2631"><a href="#GA-2631"><span class="linenos">2631</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2632"><a href="#GA-2632"><span class="linenos">2632</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2633"><a href="#GA-2633"><span class="linenos">2633</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2634"><a href="#GA-2634"><span class="linenos">2634</span></a>
</span><span id="GA-2635"><a href="#GA-2635"><span class="linenos">2635</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">])</span>
</span><span id="GA-2636"><a href="#GA-2636"><span class="linenos">2636</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="GA-2637"><a href="#GA-2637"><span class="linenos">2637</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2638"><a href="#GA-2638"><span class="linenos">2638</span></a>
</span><span id="GA-2639"><a href="#GA-2639"><span class="linenos">2639</span></a>    <span class="k">def</span> <span class="nf">scramble_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2640"><a href="#GA-2640"><span class="linenos">2640</span></a>
</span><span id="GA-2641"><a href="#GA-2641"><span class="linenos">2641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2642"><a href="#GA-2642"><span class="linenos">2642</span></a><span class="sd">        Applies the scramble mutation which selects a subset of genes and shuffles their order randomly.</span>
</span><span id="GA-2643"><a href="#GA-2643"><span class="linenos">2643</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2644"><a href="#GA-2644"><span class="linenos">2644</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2645"><a href="#GA-2645"><span class="linenos">2645</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2646"><a href="#GA-2646"><span class="linenos">2646</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2647"><a href="#GA-2647"><span class="linenos">2647</span></a>
</span><span id="GA-2648"><a href="#GA-2648"><span class="linenos">2648</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2649"><a href="#GA-2649"><span class="linenos">2649</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2650"><a href="#GA-2650"><span class="linenos">2650</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA-2651"><a href="#GA-2651"><span class="linenos">2651</span></a>            <span class="n">genes_range</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">mutation_gene1</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">mutation_gene2</span><span class="p">)</span>
</span><span id="GA-2652"><a href="#GA-2652"><span class="linenos">2652</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">genes_range</span><span class="p">)</span>
</span><span id="GA-2653"><a href="#GA-2653"><span class="linenos">2653</span></a>
</span><span id="GA-2654"><a href="#GA-2654"><span class="linenos">2654</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">])</span>
</span><span id="GA-2655"><a href="#GA-2655"><span class="linenos">2655</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="GA-2656"><a href="#GA-2656"><span class="linenos">2656</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2657"><a href="#GA-2657"><span class="linenos">2657</span></a>
</span><span id="GA-2658"><a href="#GA-2658"><span class="linenos">2658</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2659"><a href="#GA-2659"><span class="linenos">2659</span></a>
</span><span id="GA-2660"><a href="#GA-2660"><span class="linenos">2660</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2661"><a href="#GA-2661"><span class="linenos">2661</span></a><span class="sd">        A helper method to calculate the average fitness of the solutions before applying the adaptive mutation.</span>
</span><span id="GA-2662"><a href="#GA-2662"><span class="linenos">2662</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2663"><a href="#GA-2663"><span class="linenos">2663</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2664"><a href="#GA-2664"><span class="linenos">2664</span></a><span class="sd">        It returns the average fitness to be used in adaptive mutation.</span>
</span><span id="GA-2665"><a href="#GA-2665"><span class="linenos">2665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2666"><a href="#GA-2666"><span class="linenos">2666</span></a>
</span><span id="GA-2667"><a href="#GA-2667"><span class="linenos">2667</span></a>        <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2668"><a href="#GA-2668"><span class="linenos">2668</span></a>        <span class="n">temp_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA-2669"><a href="#GA-2669"><span class="linenos">2669</span></a>
</span><span id="GA-2670"><a href="#GA-2670"><span class="linenos">2670</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-2671"><a href="#GA-2671"><span class="linenos">2671</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-2672"><a href="#GA-2672"><span class="linenos">2672</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-2673"><a href="#GA-2673"><span class="linenos">2673</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA-2674"><a href="#GA-2674"><span class="linenos">2674</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2675"><a href="#GA-2675"><span class="linenos">2675</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA-2676"><a href="#GA-2676"><span class="linenos">2676</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA-2677"><a href="#GA-2677"><span class="linenos">2677</span></a>                <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA-2678"><a href="#GA-2678"><span class="linenos">2678</span></a>                                                                 <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="GA-2679"><a href="#GA-2679"><span class="linenos">2679</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA-2680"><a href="#GA-2680"><span class="linenos">2680</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2681"><a href="#GA-2681"><span class="linenos">2681</span></a>            <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA-2682"><a href="#GA-2682"><span class="linenos">2682</span></a>                                                             <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA-2683"><a href="#GA-2683"><span class="linenos">2683</span></a>            <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA-2684"><a href="#GA-2684"><span class="linenos">2684</span></a>
</span><span id="GA-2685"><a href="#GA-2685"><span class="linenos">2685</span></a>        <span class="n">temp_population</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">offspring</span>
</span><span id="GA-2686"><a href="#GA-2686"><span class="linenos">2686</span></a>
</span><span id="GA-2687"><a href="#GA-2687"><span class="linenos">2687</span></a>        <span class="n">fitness</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span>
</span><span id="GA-2688"><a href="#GA-2688"><span class="linenos">2688</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">]</span>
</span><span id="GA-2689"><a href="#GA-2689"><span class="linenos">2689</span></a>
</span><span id="GA-2690"><a href="#GA-2690"><span class="linenos">2690</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2691"><a href="#GA-2691"><span class="linenos">2691</span></a>            <span class="c1"># fitness[idx] = self.fitness_func(temp_population[idx], None)</span>
</span><span id="GA-2692"><a href="#GA-2692"><span class="linenos">2692</span></a>            <span class="n">fitness</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">temp_population</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># FERMATRICA FIX</span>
</span><span id="GA-2693"><a href="#GA-2693"><span class="linenos">2693</span></a>        <span class="n">average_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA-2694"><a href="#GA-2694"><span class="linenos">2694</span></a>
</span><span id="GA-2695"><a href="#GA-2695"><span class="linenos">2695</span></a>        <span class="k">return</span> <span class="n">average_fitness</span><span class="p">,</span> <span class="n">fitness</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):]</span>
</span><span id="GA-2696"><a href="#GA-2696"><span class="linenos">2696</span></a>
</span><span id="GA-2697"><a href="#GA-2697"><span class="linenos">2697</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2698"><a href="#GA-2698"><span class="linenos">2698</span></a>
</span><span id="GA-2699"><a href="#GA-2699"><span class="linenos">2699</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2700"><a href="#GA-2700"><span class="linenos">2700</span></a><span class="sd">        Applies the adaptive mutation which changes the values of a number of genes randomly. In adaptive mutation, the number of genes to mutate differs based on the fitness value of the solution.</span>
</span><span id="GA-2701"><a href="#GA-2701"><span class="linenos">2701</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2702"><a href="#GA-2702"><span class="linenos">2702</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2703"><a href="#GA-2703"><span class="linenos">2703</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2704"><a href="#GA-2704"><span class="linenos">2704</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2705"><a href="#GA-2705"><span class="linenos">2705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2706"><a href="#GA-2706"><span class="linenos">2706</span></a>
</span><span id="GA-2707"><a href="#GA-2707"><span class="linenos">2707</span></a>        <span class="c1"># If the attribute &#39;gene_space&#39; exists (i.e. not None), then the mutation values are selected from the &#39;gene_space&#39; parameter according to the space of values of each gene. Otherwise, it is selected randomly based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2708"><a href="#GA-2708"><span class="linenos">2708</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="GA-2709"><a href="#GA-2709"><span class="linenos">2709</span></a>
</span><span id="GA-2710"><a href="#GA-2710"><span class="linenos">2710</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2711"><a href="#GA-2711"><span class="linenos">2711</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="GA-2712"><a href="#GA-2712"><span class="linenos">2712</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2713"><a href="#GA-2713"><span class="linenos">2713</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA-2714"><a href="#GA-2714"><span class="linenos">2714</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2715"><a href="#GA-2715"><span class="linenos">2715</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2716"><a href="#GA-2716"><span class="linenos">2716</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2717"><a href="#GA-2717"><span class="linenos">2717</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2718"><a href="#GA-2718"><span class="linenos">2718</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2719"><a href="#GA-2719"><span class="linenos">2719</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="GA-2720"><a href="#GA-2720"><span class="linenos">2720</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA-2721"><a href="#GA-2721"><span class="linenos">2721</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA-2722"><a href="#GA-2722"><span class="linenos">2722</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2723"><a href="#GA-2723"><span class="linenos">2723</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2724"><a href="#GA-2724"><span class="linenos">2724</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2725"><a href="#GA-2725"><span class="linenos">2725</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2726"><a href="#GA-2726"><span class="linenos">2726</span></a>
</span><span id="GA-2727"><a href="#GA-2727"><span class="linenos">2727</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2728"><a href="#GA-2728"><span class="linenos">2728</span></a>
</span><span id="GA-2729"><a href="#GA-2729"><span class="linenos">2729</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2730"><a href="#GA-2730"><span class="linenos">2730</span></a>
</span><span id="GA-2731"><a href="#GA-2731"><span class="linenos">2731</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2732"><a href="#GA-2732"><span class="linenos">2732</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_num_genes&#39; and &#39;gene_space&#39;.</span>
</span><span id="GA-2733"><a href="#GA-2733"><span class="linenos">2733</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="GA-2734"><a href="#GA-2734"><span class="linenos">2734</span></a><span class="sd">        The random values are selected from the &#39;gene_space&#39; parameter.</span>
</span><span id="GA-2735"><a href="#GA-2735"><span class="linenos">2735</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2736"><a href="#GA-2736"><span class="linenos">2736</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2737"><a href="#GA-2737"><span class="linenos">2737</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2738"><a href="#GA-2738"><span class="linenos">2738</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2739"><a href="#GA-2739"><span class="linenos">2739</span></a>
</span><span id="GA-2740"><a href="#GA-2740"><span class="linenos">2740</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="GA-2741"><a href="#GA-2741"><span class="linenos">2741</span></a>
</span><span id="GA-2742"><a href="#GA-2742"><span class="linenos">2742</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2743"><a href="#GA-2743"><span class="linenos">2743</span></a>
</span><span id="GA-2744"><a href="#GA-2744"><span class="linenos">2744</span></a>        <span class="c1"># Adaptive mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA-2745"><a href="#GA-2745"><span class="linenos">2745</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="GA-2746"><a href="#GA-2746"><span class="linenos">2746</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2747"><a href="#GA-2747"><span class="linenos">2747</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA-2748"><a href="#GA-2748"><span class="linenos">2748</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2749"><a href="#GA-2749"><span class="linenos">2749</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2750"><a href="#GA-2750"><span class="linenos">2750</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2751"><a href="#GA-2751"><span class="linenos">2751</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-2752"><a href="#GA-2752"><span class="linenos">2752</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA-2753"><a href="#GA-2753"><span class="linenos">2753</span></a>
</span><span id="GA-2754"><a href="#GA-2754"><span class="linenos">2754</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-2755"><a href="#GA-2755"><span class="linenos">2755</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2756"><a href="#GA-2756"><span class="linenos">2756</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA-2757"><a href="#GA-2757"><span class="linenos">2757</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2758"><a href="#GA-2758"><span class="linenos">2758</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2759"><a href="#GA-2759"><span class="linenos">2759</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2760"><a href="#GA-2760"><span class="linenos">2760</span></a>
</span><span id="GA-2761"><a href="#GA-2761"><span class="linenos">2761</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA-2762"><a href="#GA-2762"><span class="linenos">2762</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-2763"><a href="#GA-2763"><span class="linenos">2763</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA-2764"><a href="#GA-2764"><span class="linenos">2764</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2765"><a href="#GA-2765"><span class="linenos">2765</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2766"><a href="#GA-2766"><span class="linenos">2766</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2767"><a href="#GA-2767"><span class="linenos">2767</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2768"><a href="#GA-2768"><span class="linenos">2768</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2769"><a href="#GA-2769"><span class="linenos">2769</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2770"><a href="#GA-2770"><span class="linenos">2770</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA-2771"><a href="#GA-2771"><span class="linenos">2771</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2772"><a href="#GA-2772"><span class="linenos">2772</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA-2773"><a href="#GA-2773"><span class="linenos">2773</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2774"><a href="#GA-2774"><span class="linenos">2774</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2775"><a href="#GA-2775"><span class="linenos">2775</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2776"><a href="#GA-2776"><span class="linenos">2776</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2777"><a href="#GA-2777"><span class="linenos">2777</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2778"><a href="#GA-2778"><span class="linenos">2778</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2779"><a href="#GA-2779"><span class="linenos">2779</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2780"><a href="#GA-2780"><span class="linenos">2780</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2781"><a href="#GA-2781"><span class="linenos">2781</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2782"><a href="#GA-2782"><span class="linenos">2782</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2783"><a href="#GA-2783"><span class="linenos">2783</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2784"><a href="#GA-2784"><span class="linenos">2784</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2785"><a href="#GA-2785"><span class="linenos">2785</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2786"><a href="#GA-2786"><span class="linenos">2786</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA-2787"><a href="#GA-2787"><span class="linenos">2787</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2788"><a href="#GA-2788"><span class="linenos">2788</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2789"><a href="#GA-2789"><span class="linenos">2789</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA-2790"><a href="#GA-2790"><span class="linenos">2790</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2791"><a href="#GA-2791"><span class="linenos">2791</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2792"><a href="#GA-2792"><span class="linenos">2792</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2793"><a href="#GA-2793"><span class="linenos">2793</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2794"><a href="#GA-2794"><span class="linenos">2794</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2795"><a href="#GA-2795"><span class="linenos">2795</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2796"><a href="#GA-2796"><span class="linenos">2796</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2797"><a href="#GA-2797"><span class="linenos">2797</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2798"><a href="#GA-2798"><span class="linenos">2798</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2799"><a href="#GA-2799"><span class="linenos">2799</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2800"><a href="#GA-2800"><span class="linenos">2800</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2801"><a href="#GA-2801"><span class="linenos">2801</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2802"><a href="#GA-2802"><span class="linenos">2802</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2803"><a href="#GA-2803"><span class="linenos">2803</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2804"><a href="#GA-2804"><span class="linenos">2804</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2805"><a href="#GA-2805"><span class="linenos">2805</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2806"><a href="#GA-2806"><span class="linenos">2806</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2807"><a href="#GA-2807"><span class="linenos">2807</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2808"><a href="#GA-2808"><span class="linenos">2808</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2809"><a href="#GA-2809"><span class="linenos">2809</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2810"><a href="#GA-2810"><span class="linenos">2810</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2811"><a href="#GA-2811"><span class="linenos">2811</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2812"><a href="#GA-2812"><span class="linenos">2812</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2813"><a href="#GA-2813"><span class="linenos">2813</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2814"><a href="#GA-2814"><span class="linenos">2814</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2815"><a href="#GA-2815"><span class="linenos">2815</span></a>
</span><span id="GA-2816"><a href="#GA-2816"><span class="linenos">2816</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2817"><a href="#GA-2817"><span class="linenos">2817</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2818"><a href="#GA-2818"><span class="linenos">2818</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2819"><a href="#GA-2819"><span class="linenos">2819</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2820"><a href="#GA-2820"><span class="linenos">2820</span></a>
</span><span id="GA-2821"><a href="#GA-2821"><span class="linenos">2821</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA-2822"><a href="#GA-2822"><span class="linenos">2822</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2823"><a href="#GA-2823"><span class="linenos">2823</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2824"><a href="#GA-2824"><span class="linenos">2824</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2825"><a href="#GA-2825"><span class="linenos">2825</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2826"><a href="#GA-2826"><span class="linenos">2826</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2827"><a href="#GA-2827"><span class="linenos">2827</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2828"><a href="#GA-2828"><span class="linenos">2828</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2829"><a href="#GA-2829"><span class="linenos">2829</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2830"><a href="#GA-2830"><span class="linenos">2830</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-2831"><a href="#GA-2831"><span class="linenos">2831</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2832"><a href="#GA-2832"><span class="linenos">2832</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2833"><a href="#GA-2833"><span class="linenos">2833</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-2834"><a href="#GA-2834"><span class="linenos">2834</span></a>
</span><span id="GA-2835"><a href="#GA-2835"><span class="linenos">2835</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2836"><a href="#GA-2836"><span class="linenos">2836</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA-2837"><a href="#GA-2837"><span class="linenos">2837</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2838"><a href="#GA-2838"><span class="linenos">2838</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2839"><a href="#GA-2839"><span class="linenos">2839</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2840"><a href="#GA-2840"><span class="linenos">2840</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2841"><a href="#GA-2841"><span class="linenos">2841</span></a>
</span><span id="GA-2842"><a href="#GA-2842"><span class="linenos">2842</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2843"><a href="#GA-2843"><span class="linenos">2843</span></a>
</span><span id="GA-2844"><a href="#GA-2844"><span class="linenos">2844</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2845"><a href="#GA-2845"><span class="linenos">2845</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_num_genes&#39; parameter.</span>
</span><span id="GA-2846"><a href="#GA-2846"><span class="linenos">2846</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="GA-2847"><a href="#GA-2847"><span class="linenos">2847</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2848"><a href="#GA-2848"><span class="linenos">2848</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2849"><a href="#GA-2849"><span class="linenos">2849</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2850"><a href="#GA-2850"><span class="linenos">2850</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2851"><a href="#GA-2851"><span class="linenos">2851</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2852"><a href="#GA-2852"><span class="linenos">2852</span></a>
</span><span id="GA-2853"><a href="#GA-2853"><span class="linenos">2853</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2854"><a href="#GA-2854"><span class="linenos">2854</span></a>
</span><span id="GA-2855"><a href="#GA-2855"><span class="linenos">2855</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA-2856"><a href="#GA-2856"><span class="linenos">2856</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="GA-2857"><a href="#GA-2857"><span class="linenos">2857</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2858"><a href="#GA-2858"><span class="linenos">2858</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA-2859"><a href="#GA-2859"><span class="linenos">2859</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2860"><a href="#GA-2860"><span class="linenos">2860</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2861"><a href="#GA-2861"><span class="linenos">2861</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2862"><a href="#GA-2862"><span class="linenos">2862</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="GA-2863"><a href="#GA-2863"><span class="linenos">2863</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA-2864"><a href="#GA-2864"><span class="linenos">2864</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="GA-2865"><a href="#GA-2865"><span class="linenos">2865</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2866"><a href="#GA-2866"><span class="linenos">2866</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2867"><a href="#GA-2867"><span class="linenos">2867</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2868"><a href="#GA-2868"><span class="linenos">2868</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA-2869"><a href="#GA-2869"><span class="linenos">2869</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2870"><a href="#GA-2870"><span class="linenos">2870</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2871"><a href="#GA-2871"><span class="linenos">2871</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2872"><a href="#GA-2872"><span class="linenos">2872</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2873"><a href="#GA-2873"><span class="linenos">2873</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2874"><a href="#GA-2874"><span class="linenos">2874</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2875"><a href="#GA-2875"><span class="linenos">2875</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2876"><a href="#GA-2876"><span class="linenos">2876</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA-2877"><a href="#GA-2877"><span class="linenos">2877</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2878"><a href="#GA-2878"><span class="linenos">2878</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2879"><a href="#GA-2879"><span class="linenos">2879</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2880"><a href="#GA-2880"><span class="linenos">2880</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2881"><a href="#GA-2881"><span class="linenos">2881</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-2882"><a href="#GA-2882"><span class="linenos">2882</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-2883"><a href="#GA-2883"><span class="linenos">2883</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2884"><a href="#GA-2884"><span class="linenos">2884</span></a>
</span><span id="GA-2885"><a href="#GA-2885"><span class="linenos">2885</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-2886"><a href="#GA-2886"><span class="linenos">2886</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2887"><a href="#GA-2887"><span class="linenos">2887</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2888"><a href="#GA-2888"><span class="linenos">2888</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2889"><a href="#GA-2889"><span class="linenos">2889</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2890"><a href="#GA-2890"><span class="linenos">2890</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2891"><a href="#GA-2891"><span class="linenos">2891</span></a>
</span><span id="GA-2892"><a href="#GA-2892"><span class="linenos">2892</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA-2893"><a href="#GA-2893"><span class="linenos">2893</span></a>
</span><span id="GA-2894"><a href="#GA-2894"><span class="linenos">2894</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-2895"><a href="#GA-2895"><span class="linenos">2895</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA-2896"><a href="#GA-2896"><span class="linenos">2896</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-2897"><a href="#GA-2897"><span class="linenos">2897</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2898"><a href="#GA-2898"><span class="linenos">2898</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2899"><a href="#GA-2899"><span class="linenos">2899</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-2900"><a href="#GA-2900"><span class="linenos">2900</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-2901"><a href="#GA-2901"><span class="linenos">2901</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-2902"><a href="#GA-2902"><span class="linenos">2902</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-2903"><a href="#GA-2903"><span class="linenos">2903</span></a>
</span><span id="GA-2904"><a href="#GA-2904"><span class="linenos">2904</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-2905"><a href="#GA-2905"><span class="linenos">2905</span></a>
</span><span id="GA-2906"><a href="#GA-2906"><span class="linenos">2906</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-2907"><a href="#GA-2907"><span class="linenos">2907</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_probability&#39; and &#39;gene_space&#39;.</span>
</span><span id="GA-2908"><a href="#GA-2908"><span class="linenos">2908</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="GA-2909"><a href="#GA-2909"><span class="linenos">2909</span></a><span class="sd">        The random values are selected based on space of values for each gene.</span>
</span><span id="GA-2910"><a href="#GA-2910"><span class="linenos">2910</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-2911"><a href="#GA-2911"><span class="linenos">2911</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-2912"><a href="#GA-2912"><span class="linenos">2912</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-2913"><a href="#GA-2913"><span class="linenos">2913</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-2914"><a href="#GA-2914"><span class="linenos">2914</span></a>
</span><span id="GA-2915"><a href="#GA-2915"><span class="linenos">2915</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="GA-2916"><a href="#GA-2916"><span class="linenos">2916</span></a>
</span><span id="GA-2917"><a href="#GA-2917"><span class="linenos">2917</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-2918"><a href="#GA-2918"><span class="linenos">2918</span></a>
</span><span id="GA-2919"><a href="#GA-2919"><span class="linenos">2919</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA-2920"><a href="#GA-2920"><span class="linenos">2920</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="GA-2921"><a href="#GA-2921"><span class="linenos">2921</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-2922"><a href="#GA-2922"><span class="linenos">2922</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA-2923"><a href="#GA-2923"><span class="linenos">2923</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2924"><a href="#GA-2924"><span class="linenos">2924</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2925"><a href="#GA-2925"><span class="linenos">2925</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-2926"><a href="#GA-2926"><span class="linenos">2926</span></a>
</span><span id="GA-2927"><a href="#GA-2927"><span class="linenos">2927</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-2928"><a href="#GA-2928"><span class="linenos">2928</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-2929"><a href="#GA-2929"><span class="linenos">2929</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="GA-2930"><a href="#GA-2930"><span class="linenos">2930</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-2931"><a href="#GA-2931"><span class="linenos">2931</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2932"><a href="#GA-2932"><span class="linenos">2932</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA-2933"><a href="#GA-2933"><span class="linenos">2933</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-2934"><a href="#GA-2934"><span class="linenos">2934</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2935"><a href="#GA-2935"><span class="linenos">2935</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2936"><a href="#GA-2936"><span class="linenos">2936</span></a>
</span><span id="GA-2937"><a href="#GA-2937"><span class="linenos">2937</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA-2938"><a href="#GA-2938"><span class="linenos">2938</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-2939"><a href="#GA-2939"><span class="linenos">2939</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA-2940"><a href="#GA-2940"><span class="linenos">2940</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-2941"><a href="#GA-2941"><span class="linenos">2941</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2942"><a href="#GA-2942"><span class="linenos">2942</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2943"><a href="#GA-2943"><span class="linenos">2943</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2944"><a href="#GA-2944"><span class="linenos">2944</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2945"><a href="#GA-2945"><span class="linenos">2945</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-2946"><a href="#GA-2946"><span class="linenos">2946</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA-2947"><a href="#GA-2947"><span class="linenos">2947</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2948"><a href="#GA-2948"><span class="linenos">2948</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA-2949"><a href="#GA-2949"><span class="linenos">2949</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2950"><a href="#GA-2950"><span class="linenos">2950</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2951"><a href="#GA-2951"><span class="linenos">2951</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2952"><a href="#GA-2952"><span class="linenos">2952</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2953"><a href="#GA-2953"><span class="linenos">2953</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2954"><a href="#GA-2954"><span class="linenos">2954</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2955"><a href="#GA-2955"><span class="linenos">2955</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2956"><a href="#GA-2956"><span class="linenos">2956</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2957"><a href="#GA-2957"><span class="linenos">2957</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2958"><a href="#GA-2958"><span class="linenos">2958</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2959"><a href="#GA-2959"><span class="linenos">2959</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2960"><a href="#GA-2960"><span class="linenos">2960</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2961"><a href="#GA-2961"><span class="linenos">2961</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2962"><a href="#GA-2962"><span class="linenos">2962</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA-2963"><a href="#GA-2963"><span class="linenos">2963</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-2964"><a href="#GA-2964"><span class="linenos">2964</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-2965"><a href="#GA-2965"><span class="linenos">2965</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA-2966"><a href="#GA-2966"><span class="linenos">2966</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2967"><a href="#GA-2967"><span class="linenos">2967</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2968"><a href="#GA-2968"><span class="linenos">2968</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2969"><a href="#GA-2969"><span class="linenos">2969</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2970"><a href="#GA-2970"><span class="linenos">2970</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2971"><a href="#GA-2971"><span class="linenos">2971</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2972"><a href="#GA-2972"><span class="linenos">2972</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2973"><a href="#GA-2973"><span class="linenos">2973</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2974"><a href="#GA-2974"><span class="linenos">2974</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-2975"><a href="#GA-2975"><span class="linenos">2975</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-2976"><a href="#GA-2976"><span class="linenos">2976</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-2977"><a href="#GA-2977"><span class="linenos">2977</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2978"><a href="#GA-2978"><span class="linenos">2978</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2979"><a href="#GA-2979"><span class="linenos">2979</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-2980"><a href="#GA-2980"><span class="linenos">2980</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2981"><a href="#GA-2981"><span class="linenos">2981</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2982"><a href="#GA-2982"><span class="linenos">2982</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-2983"><a href="#GA-2983"><span class="linenos">2983</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-2984"><a href="#GA-2984"><span class="linenos">2984</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2985"><a href="#GA-2985"><span class="linenos">2985</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2986"><a href="#GA-2986"><span class="linenos">2986</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA-2987"><a href="#GA-2987"><span class="linenos">2987</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA-2988"><a href="#GA-2988"><span class="linenos">2988</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-2989"><a href="#GA-2989"><span class="linenos">2989</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-2990"><a href="#GA-2990"><span class="linenos">2990</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-2991"><a href="#GA-2991"><span class="linenos">2991</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-2992"><a href="#GA-2992"><span class="linenos">2992</span></a>
</span><span id="GA-2993"><a href="#GA-2993"><span class="linenos">2993</span></a>                    <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-2994"><a href="#GA-2994"><span class="linenos">2994</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-2995"><a href="#GA-2995"><span class="linenos">2995</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-2996"><a href="#GA-2996"><span class="linenos">2996</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-2997"><a href="#GA-2997"><span class="linenos">2997</span></a>
</span><span id="GA-2998"><a href="#GA-2998"><span class="linenos">2998</span></a>                    <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA-2999"><a href="#GA-2999"><span class="linenos">2999</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3000"><a href="#GA-3000"><span class="linenos">3000</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3001"><a href="#GA-3001"><span class="linenos">3001</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-3002"><a href="#GA-3002"><span class="linenos">3002</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3003"><a href="#GA-3003"><span class="linenos">3003</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3004"><a href="#GA-3004"><span class="linenos">3004</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-3005"><a href="#GA-3005"><span class="linenos">3005</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3006"><a href="#GA-3006"><span class="linenos">3006</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3007"><a href="#GA-3007"><span class="linenos">3007</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA-3008"><a href="#GA-3008"><span class="linenos">3008</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-3009"><a href="#GA-3009"><span class="linenos">3009</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3010"><a href="#GA-3010"><span class="linenos">3010</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3011"><a href="#GA-3011"><span class="linenos">3011</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-3012"><a href="#GA-3012"><span class="linenos">3012</span></a>
</span><span id="GA-3013"><a href="#GA-3013"><span class="linenos">3013</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-3014"><a href="#GA-3014"><span class="linenos">3014</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA-3015"><a href="#GA-3015"><span class="linenos">3015</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-3016"><a href="#GA-3016"><span class="linenos">3016</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3017"><a href="#GA-3017"><span class="linenos">3017</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-3018"><a href="#GA-3018"><span class="linenos">3018</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-3019"><a href="#GA-3019"><span class="linenos">3019</span></a>
</span><span id="GA-3020"><a href="#GA-3020"><span class="linenos">3020</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA-3021"><a href="#GA-3021"><span class="linenos">3021</span></a>
</span><span id="GA-3022"><a href="#GA-3022"><span class="linenos">3022</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3023"><a href="#GA-3023"><span class="linenos">3023</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_probability&#39; parameter.</span>
</span><span id="GA-3024"><a href="#GA-3024"><span class="linenos">3024</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="GA-3025"><a href="#GA-3025"><span class="linenos">3025</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-3026"><a href="#GA-3026"><span class="linenos">3026</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA-3027"><a href="#GA-3027"><span class="linenos">3027</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA-3028"><a href="#GA-3028"><span class="linenos">3028</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA-3029"><a href="#GA-3029"><span class="linenos">3029</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3030"><a href="#GA-3030"><span class="linenos">3030</span></a>
</span><span id="GA-3031"><a href="#GA-3031"><span class="linenos">3031</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA-3032"><a href="#GA-3032"><span class="linenos">3032</span></a>
</span><span id="GA-3033"><a href="#GA-3033"><span class="linenos">3033</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA-3034"><a href="#GA-3034"><span class="linenos">3034</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="GA-3035"><a href="#GA-3035"><span class="linenos">3035</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA-3036"><a href="#GA-3036"><span class="linenos">3036</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA-3037"><a href="#GA-3037"><span class="linenos">3037</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-3038"><a href="#GA-3038"><span class="linenos">3038</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3039"><a href="#GA-3039"><span class="linenos">3039</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA-3040"><a href="#GA-3040"><span class="linenos">3040</span></a>
</span><span id="GA-3041"><a href="#GA-3041"><span class="linenos">3041</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3042"><a href="#GA-3042"><span class="linenos">3042</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA-3043"><a href="#GA-3043"><span class="linenos">3043</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="GA-3044"><a href="#GA-3044"><span class="linenos">3044</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="GA-3045"><a href="#GA-3045"><span class="linenos">3045</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3046"><a href="#GA-3046"><span class="linenos">3046</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3047"><a href="#GA-3047"><span class="linenos">3047</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3048"><a href="#GA-3048"><span class="linenos">3048</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA-3049"><a href="#GA-3049"><span class="linenos">3049</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3050"><a href="#GA-3050"><span class="linenos">3050</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3051"><a href="#GA-3051"><span class="linenos">3051</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-3052"><a href="#GA-3052"><span class="linenos">3052</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3053"><a href="#GA-3053"><span class="linenos">3053</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-3054"><a href="#GA-3054"><span class="linenos">3054</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-3055"><a href="#GA-3055"><span class="linenos">3055</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-3056"><a href="#GA-3056"><span class="linenos">3056</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA-3057"><a href="#GA-3057"><span class="linenos">3057</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3058"><a href="#GA-3058"><span class="linenos">3058</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3059"><a href="#GA-3059"><span class="linenos">3059</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-3060"><a href="#GA-3060"><span class="linenos">3060</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3061"><a href="#GA-3061"><span class="linenos">3061</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA-3062"><a href="#GA-3062"><span class="linenos">3062</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA-3063"><a href="#GA-3063"><span class="linenos">3063</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-3064"><a href="#GA-3064"><span class="linenos">3064</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-3065"><a href="#GA-3065"><span class="linenos">3065</span></a>
</span><span id="GA-3066"><a href="#GA-3066"><span class="linenos">3066</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3067"><a href="#GA-3067"><span class="linenos">3067</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3068"><a href="#GA-3068"><span class="linenos">3068</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3069"><a href="#GA-3069"><span class="linenos">3069</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3070"><a href="#GA-3070"><span class="linenos">3070</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3071"><a href="#GA-3071"><span class="linenos">3071</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3072"><a href="#GA-3072"><span class="linenos">3072</span></a>
</span><span id="GA-3073"><a href="#GA-3073"><span class="linenos">3073</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA-3074"><a href="#GA-3074"><span class="linenos">3074</span></a>
</span><span id="GA-3075"><a href="#GA-3075"><span class="linenos">3075</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-3076"><a href="#GA-3076"><span class="linenos">3076</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA-3077"><a href="#GA-3077"><span class="linenos">3077</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA-3078"><a href="#GA-3078"><span class="linenos">3078</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3079"><a href="#GA-3079"><span class="linenos">3079</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3080"><a href="#GA-3080"><span class="linenos">3080</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-3081"><a href="#GA-3081"><span class="linenos">3081</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3082"><a href="#GA-3082"><span class="linenos">3082</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA-3083"><a href="#GA-3083"><span class="linenos">3083</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span><span id="GA-3084"><a href="#GA-3084"><span class="linenos">3084</span></a>
</span><span id="GA-3085"><a href="#GA-3085"><span class="linenos">3085</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3086"><a href="#GA-3086"><span class="linenos">3086</span></a>                                       <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="GA-3087"><a href="#GA-3087"><span class="linenos">3087</span></a>
</span><span id="GA-3088"><a href="#GA-3088"><span class="linenos">3088</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3089"><a href="#GA-3089"><span class="linenos">3089</span></a><span class="sd">        Solves the duplicates in a solution by randomly selecting new values for the duplicating genes.</span>
</span><span id="GA-3090"><a href="#GA-3090"><span class="linenos">3090</span></a>
</span><span id="GA-3091"><a href="#GA-3091"><span class="linenos">3091</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA-3092"><a href="#GA-3092"><span class="linenos">3092</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="GA-3093"><a href="#GA-3093"><span class="linenos">3093</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="GA-3094"><a href="#GA-3094"><span class="linenos">3094</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="GA-3095"><a href="#GA-3095"><span class="linenos">3095</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA-3096"><a href="#GA-3096"><span class="linenos">3096</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA-3097"><a href="#GA-3097"><span class="linenos">3097</span></a>
</span><span id="GA-3098"><a href="#GA-3098"><span class="linenos">3098</span></a><span class="sd">        Returns:</span>
</span><span id="GA-3099"><a href="#GA-3099"><span class="linenos">3099</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA-3100"><a href="#GA-3100"><span class="linenos">3100</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA-3101"><a href="#GA-3101"><span class="linenos">3101</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA-3102"><a href="#GA-3102"><span class="linenos">3102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3103"><a href="#GA-3103"><span class="linenos">3103</span></a>
</span><span id="GA-3104"><a href="#GA-3104"><span class="linenos">3104</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-3105"><a href="#GA-3105"><span class="linenos">3105</span></a>
</span><span id="GA-3106"><a href="#GA-3106"><span class="linenos">3106</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3107"><a href="#GA-3107"><span class="linenos">3107</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3108"><a href="#GA-3108"><span class="linenos">3108</span></a>
</span><span id="GA-3109"><a href="#GA-3109"><span class="linenos">3109</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-3110"><a href="#GA-3110"><span class="linenos">3110</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3111"><a href="#GA-3111"><span class="linenos">3111</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA-3112"><a href="#GA-3112"><span class="linenos">3112</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA-3113"><a href="#GA-3113"><span class="linenos">3113</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3114"><a href="#GA-3114"><span class="linenos">3114</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3115"><a href="#GA-3115"><span class="linenos">3115</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA-3116"><a href="#GA-3116"><span class="linenos">3116</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA-3117"><a href="#GA-3117"><span class="linenos">3117</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA-3118"><a href="#GA-3118"><span class="linenos">3118</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA-3119"><a href="#GA-3119"><span class="linenos">3119</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-3120"><a href="#GA-3120"><span class="linenos">3120</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3121"><a href="#GA-3121"><span class="linenos">3121</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3122"><a href="#GA-3122"><span class="linenos">3122</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA-3123"><a href="#GA-3123"><span class="linenos">3123</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA-3124"><a href="#GA-3124"><span class="linenos">3124</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3125"><a href="#GA-3125"><span class="linenos">3125</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3126"><a href="#GA-3126"><span class="linenos">3126</span></a>                                <span class="k">pass</span>
</span><span id="GA-3127"><a href="#GA-3127"><span class="linenos">3127</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3128"><a href="#GA-3128"><span class="linenos">3128</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="GA-3129"><a href="#GA-3129"><span class="linenos">3129</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3130"><a href="#GA-3130"><span class="linenos">3130</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3131"><a href="#GA-3131"><span class="linenos">3131</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA-3132"><a href="#GA-3132"><span class="linenos">3132</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA-3133"><a href="#GA-3133"><span class="linenos">3133</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA-3134"><a href="#GA-3134"><span class="linenos">3134</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA-3135"><a href="#GA-3135"><span class="linenos">3135</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA-3136"><a href="#GA-3136"><span class="linenos">3136</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3137"><a href="#GA-3137"><span class="linenos">3137</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3138"><a href="#GA-3138"><span class="linenos">3138</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA-3139"><a href="#GA-3139"><span class="linenos">3139</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA-3140"><a href="#GA-3140"><span class="linenos">3140</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3141"><a href="#GA-3141"><span class="linenos">3141</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3142"><a href="#GA-3142"><span class="linenos">3142</span></a>                                <span class="k">pass</span>
</span><span id="GA-3143"><a href="#GA-3143"><span class="linenos">3143</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3144"><a href="#GA-3144"><span class="linenos">3144</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="GA-3145"><a href="#GA-3145"><span class="linenos">3145</span></a>
</span><span id="GA-3146"><a href="#GA-3146"><span class="linenos">3146</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3147"><a href="#GA-3147"><span class="linenos">3147</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3148"><a href="#GA-3148"><span class="linenos">3148</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="GA-3149"><a href="#GA-3149"><span class="linenos">3149</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3150"><a href="#GA-3150"><span class="linenos">3150</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3151"><a href="#GA-3151"><span class="linenos">3151</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="GA-3152"><a href="#GA-3152"><span class="linenos">3152</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3153"><a href="#GA-3153"><span class="linenos">3153</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3154"><a href="#GA-3154"><span class="linenos">3154</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="GA-3155"><a href="#GA-3155"><span class="linenos">3155</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3156"><a href="#GA-3156"><span class="linenos">3156</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3157"><a href="#GA-3157"><span class="linenos">3157</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="GA-3158"><a href="#GA-3158"><span class="linenos">3158</span></a>
</span><span id="GA-3159"><a href="#GA-3159"><span class="linenos">3159</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-3160"><a href="#GA-3160"><span class="linenos">3160</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA-3161"><a href="#GA-3161"><span class="linenos">3161</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3162"><a href="#GA-3162"><span class="linenos">3162</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3163"><a href="#GA-3163"><span class="linenos">3163</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="GA-3164"><a href="#GA-3164"><span class="linenos">3164</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA-3165"><a href="#GA-3165"><span class="linenos">3165</span></a>                        <span class="k">continue</span>
</span><span id="GA-3166"><a href="#GA-3166"><span class="linenos">3166</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3167"><a href="#GA-3167"><span class="linenos">3167</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA-3168"><a href="#GA-3168"><span class="linenos">3168</span></a>                        <span class="k">break</span>
</span><span id="GA-3169"><a href="#GA-3169"><span class="linenos">3169</span></a>
</span><span id="GA-3170"><a href="#GA-3170"><span class="linenos">3170</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA-3171"><a href="#GA-3171"><span class="linenos">3171</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3172"><a href="#GA-3172"><span class="linenos">3172</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3173"><a href="#GA-3173"><span class="linenos">3173</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA-3174"><a href="#GA-3174"><span class="linenos">3174</span></a>
</span><span id="GA-3175"><a href="#GA-3175"><span class="linenos">3175</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="GA-3176"><a href="#GA-3176"><span class="linenos">3176</span></a>
</span><span id="GA-3177"><a href="#GA-3177"><span class="linenos">3177</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA-3178"><a href="#GA-3178"><span class="linenos">3178</span></a>
</span><span id="GA-3179"><a href="#GA-3179"><span class="linenos">3179</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3180"><a href="#GA-3180"><span class="linenos">3180</span></a><span class="sd">        Solves the duplicates in a solution by selecting values for the duplicating genes from the gene space.</span>
</span><span id="GA-3181"><a href="#GA-3181"><span class="linenos">3181</span></a>
</span><span id="GA-3182"><a href="#GA-3182"><span class="linenos">3182</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA-3183"><a href="#GA-3183"><span class="linenos">3183</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA-3184"><a href="#GA-3184"><span class="linenos">3184</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA-3185"><a href="#GA-3185"><span class="linenos">3185</span></a>
</span><span id="GA-3186"><a href="#GA-3186"><span class="linenos">3186</span></a><span class="sd">        Returns:</span>
</span><span id="GA-3187"><a href="#GA-3187"><span class="linenos">3187</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA-3188"><a href="#GA-3188"><span class="linenos">3188</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA-3189"><a href="#GA-3189"><span class="linenos">3189</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA-3190"><a href="#GA-3190"><span class="linenos">3190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3191"><a href="#GA-3191"><span class="linenos">3191</span></a>
</span><span id="GA-3192"><a href="#GA-3192"><span class="linenos">3192</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-3193"><a href="#GA-3193"><span class="linenos">3193</span></a>
</span><span id="GA-3194"><a href="#GA-3194"><span class="linenos">3194</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3195"><a href="#GA-3195"><span class="linenos">3195</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3196"><a href="#GA-3196"><span class="linenos">3196</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="GA-3197"><a href="#GA-3197"><span class="linenos">3197</span></a>
</span><span id="GA-3198"><a href="#GA-3198"><span class="linenos">3198</span></a>        <span class="c1"># First try to solve the duplicates.</span>
</span><span id="GA-3199"><a href="#GA-3199"><span class="linenos">3199</span></a>        <span class="c1"># For a solution like [3 2 0 0], the indices of the 2 duplicating genes are 2 and 3.</span>
</span><span id="GA-3200"><a href="#GA-3200"><span class="linenos">3200</span></a>        <span class="c1"># The next call to the find_unique_value() method tries to change the value of the gene with index 3 to solve the duplicate.</span>
</span><span id="GA-3201"><a href="#GA-3201"><span class="linenos">3201</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3202"><a href="#GA-3202"><span class="linenos">3202</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="GA-3203"><a href="#GA-3203"><span class="linenos">3203</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA-3204"><a href="#GA-3204"><span class="linenos">3204</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3205"><a href="#GA-3205"><span class="linenos">3205</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="GA-3206"><a href="#GA-3206"><span class="linenos">3206</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA-3207"><a href="#GA-3207"><span class="linenos">3207</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA-3208"><a href="#GA-3208"><span class="linenos">3208</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3209"><a href="#GA-3209"><span class="linenos">3209</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="GA-3210"><a href="#GA-3210"><span class="linenos">3210</span></a>
</span><span id="GA-3211"><a href="#GA-3211"><span class="linenos">3211</span></a>        <span class="c1"># Do another try if there exist duplicate genes.</span>
</span><span id="GA-3212"><a href="#GA-3212"><span class="linenos">3212</span></a>        <span class="c1"># If there are no possible values for the gene 3 with index 3 to solve the duplicate, try to change the value of the other gene with index 2.</span>
</span><span id="GA-3213"><a href="#GA-3213"><span class="linenos">3213</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3214"><a href="#GA-3214"><span class="linenos">3214</span></a>            <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">new_solution</span> <span class="o">==</span> <span class="n">new_solution</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="GA-3215"><a href="#GA-3215"><span class="linenos">3215</span></a>                <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])</span>
</span><span id="GA-3216"><a href="#GA-3216"><span class="linenos">3216</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="GA-3217"><a href="#GA-3217"><span class="linenos">3217</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA-3218"><a href="#GA-3218"><span class="linenos">3218</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3219"><a href="#GA-3219"><span class="linenos">3219</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="GA-3220"><a href="#GA-3220"><span class="linenos">3220</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA-3221"><a href="#GA-3221"><span class="linenos">3221</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA-3222"><a href="#GA-3222"><span class="linenos">3222</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3223"><a href="#GA-3223"><span class="linenos">3223</span></a>            <span class="c1"># If there exist duplicate genes, then changing either of the 2 duplicating genes (with indices 2 and 3) will not solve the problem.</span>
</span><span id="GA-3224"><a href="#GA-3224"><span class="linenos">3224</span></a>            <span class="c1"># This problem can be solved by randomly changing one of the non-duplicating genes that may make a room for a unique value in one the 2 duplicating genes.</span>
</span><span id="GA-3225"><a href="#GA-3225"><span class="linenos">3225</span></a>            <span class="c1"># For example, if gene_space=[[3, 0, 1], [4, 1, 2], [0, 2], [3, 2, 0]] and the solution is [3 2 0 0], then the values of the last 2 genes duplicate.</span>
</span><span id="GA-3226"><a href="#GA-3226"><span class="linenos">3226</span></a>            <span class="c1"># There are no possible changes in the last 2 genes to solve the problem. But it could be solved by changing the second gene from 2 to 4.</span>
</span><span id="GA-3227"><a href="#GA-3227"><span class="linenos">3227</span></a>            <span class="c1"># As a result, any of the last 2 genes can take the value 2 and solve the duplicates.</span>
</span><span id="GA-3228"><a href="#GA-3228"><span class="linenos">3228</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="GA-3229"><a href="#GA-3229"><span class="linenos">3229</span></a>
</span><span id="GA-3230"><a href="#GA-3230"><span class="linenos">3230</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="GA-3231"><a href="#GA-3231"><span class="linenos">3231</span></a>
</span><span id="GA-3232"><a href="#GA-3232"><span class="linenos">3232</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space_OLD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="GA-3233"><a href="#GA-3233"><span class="linenos">3233</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="GA-3234"><a href="#GA-3234"><span class="linenos">3234</span></a>        <span class="c1"># Just for testing purposes.</span>
</span><span id="GA-3235"><a href="#GA-3235"><span class="linenos">3235</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="GA-3236"><a href="#GA-3236"><span class="linenos">3236</span></a>
</span><span id="GA-3237"><a href="#GA-3237"><span class="linenos">3237</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-3238"><a href="#GA-3238"><span class="linenos">3238</span></a>
</span><span id="GA-3239"><a href="#GA-3239"><span class="linenos">3239</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3240"><a href="#GA-3240"><span class="linenos">3240</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3241"><a href="#GA-3241"><span class="linenos">3241</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="GA-3242"><a href="#GA-3242"><span class="linenos">3242</span></a>
</span><span id="GA-3243"><a href="#GA-3243"><span class="linenos">3243</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-3244"><a href="#GA-3244"><span class="linenos">3244</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3245"><a href="#GA-3245"><span class="linenos">3245</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA-3246"><a href="#GA-3246"><span class="linenos">3246</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA-3247"><a href="#GA-3247"><span class="linenos">3247</span></a>                    <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3248"><a href="#GA-3248"><span class="linenos">3248</span></a>                                                         <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA-3249"><a href="#GA-3249"><span class="linenos">3249</span></a>                                                         <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3250"><a href="#GA-3250"><span class="linenos">3250</span></a>
</span><span id="GA-3251"><a href="#GA-3251"><span class="linenos">3251</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-3252"><a href="#GA-3252"><span class="linenos">3252</span></a>                        <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="GA-3253"><a href="#GA-3253"><span class="linenos">3253</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA-3254"><a href="#GA-3254"><span class="linenos">3254</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3255"><a href="#GA-3255"><span class="linenos">3255</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3256"><a href="#GA-3256"><span class="linenos">3256</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">))</span>
</span><span id="GA-3257"><a href="#GA-3257"><span class="linenos">3257</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA-3258"><a href="#GA-3258"><span class="linenos">3258</span></a>                        <span class="k">continue</span>
</span><span id="GA-3259"><a href="#GA-3259"><span class="linenos">3259</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3260"><a href="#GA-3260"><span class="linenos">3260</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA-3261"><a href="#GA-3261"><span class="linenos">3261</span></a>                        <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="GA-3262"><a href="#GA-3262"><span class="linenos">3262</span></a>                        <span class="k">break</span>
</span><span id="GA-3263"><a href="#GA-3263"><span class="linenos">3263</span></a>
</span><span id="GA-3264"><a href="#GA-3264"><span class="linenos">3264</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA-3265"><a href="#GA-3265"><span class="linenos">3265</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3266"><a href="#GA-3266"><span class="linenos">3266</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3267"><a href="#GA-3267"><span class="linenos">3267</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA-3268"><a href="#GA-3268"><span class="linenos">3268</span></a>
</span><span id="GA-3269"><a href="#GA-3269"><span class="linenos">3269</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="GA-3270"><a href="#GA-3270"><span class="linenos">3270</span></a>
</span><span id="GA-3271"><a href="#GA-3271"><span class="linenos">3271</span></a>    <span class="k">def</span> <span class="nf">unique_int_gene_from_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_index</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3272"><a href="#GA-3272"><span class="linenos">3272</span></a>                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3273"><a href="#GA-3273"><span class="linenos">3273</span></a>
</span><span id="GA-3274"><a href="#GA-3274"><span class="linenos">3274</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3275"><a href="#GA-3275"><span class="linenos">3275</span></a><span class="sd">        Finds a unique integer value for the gene.</span>
</span><span id="GA-3276"><a href="#GA-3276"><span class="linenos">3276</span></a>
</span><span id="GA-3277"><a href="#GA-3277"><span class="linenos">3277</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA-3278"><a href="#GA-3278"><span class="linenos">3278</span></a><span class="sd">        gene_index: Index of the gene to find a unique value.</span>
</span><span id="GA-3279"><a href="#GA-3279"><span class="linenos">3279</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="GA-3280"><a href="#GA-3280"><span class="linenos">3280</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="GA-3281"><a href="#GA-3281"><span class="linenos">3281</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="GA-3282"><a href="#GA-3282"><span class="linenos">3282</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA-3283"><a href="#GA-3283"><span class="linenos">3283</span></a>
</span><span id="GA-3284"><a href="#GA-3284"><span class="linenos">3284</span></a><span class="sd">        Returns:</span>
</span><span id="GA-3285"><a href="#GA-3285"><span class="linenos">3285</span></a><span class="sd">            selected_value: The new value of the gene. It may be identical to the original gene value in case there are no possible unique values for the gene.</span>
</span><span id="GA-3286"><a href="#GA-3286"><span class="linenos">3286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3287"><a href="#GA-3287"><span class="linenos">3287</span></a>
</span><span id="GA-3288"><a href="#GA-3288"><span class="linenos">3288</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3289"><a href="#GA-3289"><span class="linenos">3289</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3290"><a href="#GA-3290"><span class="linenos">3290</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-3291"><a href="#GA-3291"><span class="linenos">3291</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3292"><a href="#GA-3292"><span class="linenos">3292</span></a>                <span class="c1"># For non-integer steps, the numpy.arange() function returns zeros id the dtype parameter is set to an integer data type. So, this returns zeros if step is non-integer and dtype is set to an int data type: numpy.arange(min_val, max_val, step, dtype=gene_type[0])</span>
</span><span id="GA-3293"><a href="#GA-3293"><span class="linenos">3293</span></a>                <span class="c1"># To solve this issue, the data type casting will not be handled inside numpy.arange(). The range is generated by numpy.arange() and then the data type is converted using the numpy.asarray() function.</span>
</span><span id="GA-3294"><a href="#GA-3294"><span class="linenos">3294</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-3295"><a href="#GA-3295"><span class="linenos">3295</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3296"><a href="#GA-3296"><span class="linenos">3296</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3297"><a href="#GA-3297"><span class="linenos">3297</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-3298"><a href="#GA-3298"><span class="linenos">3298</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3299"><a href="#GA-3299"><span class="linenos">3299</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-3300"><a href="#GA-3300"><span class="linenos">3300</span></a>
</span><span id="GA-3301"><a href="#GA-3301"><span class="linenos">3301</span></a>        <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3302"><a href="#GA-3302"><span class="linenos">3302</span></a>            <span class="k">pass</span>
</span><span id="GA-3303"><a href="#GA-3303"><span class="linenos">3303</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3304"><a href="#GA-3304"><span class="linenos">3304</span></a>            <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">all_gene_values</span> <span class="o">+</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="GA-3305"><a href="#GA-3305"><span class="linenos">3305</span></a>
</span><span id="GA-3306"><a href="#GA-3306"><span class="linenos">3306</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3307"><a href="#GA-3307"><span class="linenos">3307</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3308"><a href="#GA-3308"><span class="linenos">3308</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="GA-3309"><a href="#GA-3309"><span class="linenos">3309</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3310"><a href="#GA-3310"><span class="linenos">3310</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3311"><a href="#GA-3311"><span class="linenos">3311</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA-3312"><a href="#GA-3312"><span class="linenos">3312</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA-3313"><a href="#GA-3313"><span class="linenos">3313</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3314"><a href="#GA-3314"><span class="linenos">3314</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="GA-3315"><a href="#GA-3315"><span class="linenos">3315</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3316"><a href="#GA-3316"><span class="linenos">3316</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3317"><a href="#GA-3317"><span class="linenos">3317</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="GA-3318"><a href="#GA-3318"><span class="linenos">3318</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3319"><a href="#GA-3319"><span class="linenos">3319</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3320"><a href="#GA-3320"><span class="linenos">3320</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="GA-3321"><a href="#GA-3321"><span class="linenos">3321</span></a>
</span><span id="GA-3322"><a href="#GA-3322"><span class="linenos">3322</span></a>        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA-3323"><a href="#GA-3323"><span class="linenos">3323</span></a>
</span><span id="GA-3324"><a href="#GA-3324"><span class="linenos">3324</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3325"><a href="#GA-3325"><span class="linenos">3325</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3326"><a href="#GA-3326"><span class="linenos">3326</span></a>                <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but there is no enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA-3327"><a href="#GA-3327"><span class="linenos">3327</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="GA-3328"><a href="#GA-3328"><span class="linenos">3328</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3329"><a href="#GA-3329"><span class="linenos">3329</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-3330"><a href="#GA-3330"><span class="linenos">3330</span></a>
</span><span id="GA-3331"><a href="#GA-3331"><span class="linenos">3331</span></a>        <span class="c1"># if self.gene_type_single == True:</span>
</span><span id="GA-3332"><a href="#GA-3332"><span class="linenos">3332</span></a>        <span class="c1">#    selected_value = gene_type[0](selected_value)</span>
</span><span id="GA-3333"><a href="#GA-3333"><span class="linenos">3333</span></a>        <span class="c1"># else:</span>
</span><span id="GA-3334"><a href="#GA-3334"><span class="linenos">3334</span></a>        <span class="c1">#    selected_value = gene_type[gene_index][0](selected_value)</span>
</span><span id="GA-3335"><a href="#GA-3335"><span class="linenos">3335</span></a>
</span><span id="GA-3336"><a href="#GA-3336"><span class="linenos">3336</span></a>        <span class="k">return</span> <span class="n">selected_value</span>
</span><span id="GA-3337"><a href="#GA-3337"><span class="linenos">3337</span></a>
</span><span id="GA-3338"><a href="#GA-3338"><span class="linenos">3338</span></a>    <span class="k">def</span> <span class="nf">unique_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA-3339"><a href="#GA-3339"><span class="linenos">3339</span></a>                              <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA-3340"><a href="#GA-3340"><span class="linenos">3340</span></a>
</span><span id="GA-3341"><a href="#GA-3341"><span class="linenos">3341</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3342"><a href="#GA-3342"><span class="linenos">3342</span></a><span class="sd">        Loops through all the duplicating genes to find unique values that from their gene spaces to solve the duplicates.</span>
</span><span id="GA-3343"><a href="#GA-3343"><span class="linenos">3343</span></a><span class="sd">        For each duplicating gene, a call to the unique_gene_by_space() is made.</span>
</span><span id="GA-3344"><a href="#GA-3344"><span class="linenos">3344</span></a>
</span><span id="GA-3345"><a href="#GA-3345"><span class="linenos">3345</span></a><span class="sd">        new_solution: A solution with duplicate values.</span>
</span><span id="GA-3346"><a href="#GA-3346"><span class="linenos">3346</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA-3347"><a href="#GA-3347"><span class="linenos">3347</span></a><span class="sd">        not_unique_indices: Indices with duplicating values.</span>
</span><span id="GA-3348"><a href="#GA-3348"><span class="linenos">3348</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA-3349"><a href="#GA-3349"><span class="linenos">3349</span></a>
</span><span id="GA-3350"><a href="#GA-3350"><span class="linenos">3350</span></a><span class="sd">        Returns:</span>
</span><span id="GA-3351"><a href="#GA-3351"><span class="linenos">3351</span></a><span class="sd">            new_solution: Solution after trying to solve all of its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA-3352"><a href="#GA-3352"><span class="linenos">3352</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA-3353"><a href="#GA-3353"><span class="linenos">3353</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA-3354"><a href="#GA-3354"><span class="linenos">3354</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3355"><a href="#GA-3355"><span class="linenos">3355</span></a>
</span><span id="GA-3356"><a href="#GA-3356"><span class="linenos">3356</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-3357"><a href="#GA-3357"><span class="linenos">3357</span></a>        <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA-3358"><a href="#GA-3358"><span class="linenos">3358</span></a>            <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA-3359"><a href="#GA-3359"><span class="linenos">3359</span></a>                <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA-3360"><a href="#GA-3360"><span class="linenos">3360</span></a>                                                     <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA-3361"><a href="#GA-3361"><span class="linenos">3361</span></a>                                                     <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA-3362"><a href="#GA-3362"><span class="linenos">3362</span></a>                                                     <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA-3363"><a href="#GA-3363"><span class="linenos">3363</span></a>
</span><span id="GA-3364"><a href="#GA-3364"><span class="linenos">3364</span></a>                <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA-3365"><a href="#GA-3365"><span class="linenos">3365</span></a>                    <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="GA-3366"><a href="#GA-3366"><span class="linenos">3366</span></a>                    <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA-3367"><a href="#GA-3367"><span class="linenos">3367</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3368"><a href="#GA-3368"><span class="linenos">3368</span></a>                        <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3369"><a href="#GA-3369"><span class="linenos">3369</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="GA-3370"><a href="#GA-3370"><span class="linenos">3370</span></a>                <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA-3371"><a href="#GA-3371"><span class="linenos">3371</span></a>                    <span class="k">continue</span>
</span><span id="GA-3372"><a href="#GA-3372"><span class="linenos">3372</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3373"><a href="#GA-3373"><span class="linenos">3373</span></a>                    <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA-3374"><a href="#GA-3374"><span class="linenos">3374</span></a>                    <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="GA-3375"><a href="#GA-3375"><span class="linenos">3375</span></a>                    <span class="k">break</span>
</span><span id="GA-3376"><a href="#GA-3376"><span class="linenos">3376</span></a>
</span><span id="GA-3377"><a href="#GA-3377"><span class="linenos">3377</span></a>        <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA-3378"><a href="#GA-3378"><span class="linenos">3378</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-3379"><a href="#GA-3379"><span class="linenos">3379</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA-3380"><a href="#GA-3380"><span class="linenos">3380</span></a>        <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA-3381"><a href="#GA-3381"><span class="linenos">3381</span></a>
</span><span id="GA-3382"><a href="#GA-3382"><span class="linenos">3382</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span><span id="GA-3383"><a href="#GA-3383"><span class="linenos">3383</span></a>
</span><span id="GA-3384"><a href="#GA-3384"><span class="linenos">3384</span></a>    <span class="k">def</span> <span class="nf">unique_gene_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA-3385"><a href="#GA-3385"><span class="linenos">3385</span></a>
</span><span id="GA-3386"><a href="#GA-3386"><span class="linenos">3386</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3387"><a href="#GA-3387"><span class="linenos">3387</span></a><span class="sd">        Returns a unique gene value for a single gene based on its value space to solve the duplicates.</span>
</span><span id="GA-3388"><a href="#GA-3388"><span class="linenos">3388</span></a>
</span><span id="GA-3389"><a href="#GA-3389"><span class="linenos">3389</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA-3390"><a href="#GA-3390"><span class="linenos">3390</span></a><span class="sd">        gene_idx: The index of the gene that duplicates its value with another gene.</span>
</span><span id="GA-3391"><a href="#GA-3391"><span class="linenos">3391</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA-3392"><a href="#GA-3392"><span class="linenos">3392</span></a>
</span><span id="GA-3393"><a href="#GA-3393"><span class="linenos">3393</span></a><span class="sd">        Returns:</span>
</span><span id="GA-3394"><a href="#GA-3394"><span class="linenos">3394</span></a><span class="sd">            A unique value, if exists, for the gene.</span>
</span><span id="GA-3395"><a href="#GA-3395"><span class="linenos">3395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3396"><a href="#GA-3396"><span class="linenos">3396</span></a>
</span><span id="GA-3397"><a href="#GA-3397"><span class="linenos">3397</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA-3398"><a href="#GA-3398"><span class="linenos">3398</span></a>            <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-3399"><a href="#GA-3399"><span class="linenos">3399</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA-3400"><a href="#GA-3400"><span class="linenos">3400</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-3401"><a href="#GA-3401"><span class="linenos">3401</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3402"><a href="#GA-3402"><span class="linenos">3402</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-3403"><a href="#GA-3403"><span class="linenos">3403</span></a>
</span><span id="GA-3404"><a href="#GA-3404"><span class="linenos">3404</span></a>            <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA-3405"><a href="#GA-3405"><span class="linenos">3405</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA-3406"><a href="#GA-3406"><span class="linenos">3406</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA-3407"><a href="#GA-3407"><span class="linenos">3407</span></a>                <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA-3408"><a href="#GA-3408"><span class="linenos">3408</span></a>            <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3409"><a href="#GA-3409"><span class="linenos">3409</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3410"><a href="#GA-3410"><span class="linenos">3410</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3411"><a href="#GA-3411"><span class="linenos">3411</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3412"><a href="#GA-3412"><span class="linenos">3412</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3413"><a href="#GA-3413"><span class="linenos">3413</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3414"><a href="#GA-3414"><span class="linenos">3414</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3415"><a href="#GA-3415"><span class="linenos">3415</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3416"><a href="#GA-3416"><span class="linenos">3416</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3417"><a href="#GA-3417"><span class="linenos">3417</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3418"><a href="#GA-3418"><span class="linenos">3418</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3419"><a href="#GA-3419"><span class="linenos">3419</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3420"><a href="#GA-3420"><span class="linenos">3420</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3421"><a href="#GA-3421"><span class="linenos">3421</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3422"><a href="#GA-3422"><span class="linenos">3422</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3423"><a href="#GA-3423"><span class="linenos">3423</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3424"><a href="#GA-3424"><span class="linenos">3424</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="GA-3425"><a href="#GA-3425"><span class="linenos">3425</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3426"><a href="#GA-3426"><span class="linenos">3426</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3427"><a href="#GA-3427"><span class="linenos">3427</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3428"><a href="#GA-3428"><span class="linenos">3428</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3429"><a href="#GA-3429"><span class="linenos">3429</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3430"><a href="#GA-3430"><span class="linenos">3430</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3431"><a href="#GA-3431"><span class="linenos">3431</span></a>                            <span class="k">pass</span>
</span><span id="GA-3432"><a href="#GA-3432"><span class="linenos">3432</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3433"><a href="#GA-3433"><span class="linenos">3433</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3434"><a href="#GA-3434"><span class="linenos">3434</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3435"><a href="#GA-3435"><span class="linenos">3435</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3436"><a href="#GA-3436"><span class="linenos">3436</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3437"><a href="#GA-3437"><span class="linenos">3437</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3438"><a href="#GA-3438"><span class="linenos">3438</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3439"><a href="#GA-3439"><span class="linenos">3439</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3440"><a href="#GA-3440"><span class="linenos">3440</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3441"><a href="#GA-3441"><span class="linenos">3441</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3442"><a href="#GA-3442"><span class="linenos">3442</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3443"><a href="#GA-3443"><span class="linenos">3443</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3444"><a href="#GA-3444"><span class="linenos">3444</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3445"><a href="#GA-3445"><span class="linenos">3445</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3446"><a href="#GA-3446"><span class="linenos">3446</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3447"><a href="#GA-3447"><span class="linenos">3447</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3448"><a href="#GA-3448"><span class="linenos">3448</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3449"><a href="#GA-3449"><span class="linenos">3449</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="GA-3450"><a href="#GA-3450"><span class="linenos">3450</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3451"><a href="#GA-3451"><span class="linenos">3451</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3452"><a href="#GA-3452"><span class="linenos">3452</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3453"><a href="#GA-3453"><span class="linenos">3453</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3454"><a href="#GA-3454"><span class="linenos">3454</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3455"><a href="#GA-3455"><span class="linenos">3455</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3456"><a href="#GA-3456"><span class="linenos">3456</span></a>                            <span class="k">pass</span>
</span><span id="GA-3457"><a href="#GA-3457"><span class="linenos">3457</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3458"><a href="#GA-3458"><span class="linenos">3458</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3459"><a href="#GA-3459"><span class="linenos">3459</span></a>
</span><span id="GA-3460"><a href="#GA-3460"><span class="linenos">3460</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-3461"><a href="#GA-3461"><span class="linenos">3461</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3462"><a href="#GA-3462"><span class="linenos">3462</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3463"><a href="#GA-3463"><span class="linenos">3463</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3464"><a href="#GA-3464"><span class="linenos">3464</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3465"><a href="#GA-3465"><span class="linenos">3465</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3466"><a href="#GA-3466"><span class="linenos">3466</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3467"><a href="#GA-3467"><span class="linenos">3467</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3468"><a href="#GA-3468"><span class="linenos">3468</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3469"><a href="#GA-3469"><span class="linenos">3469</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3470"><a href="#GA-3470"><span class="linenos">3470</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3471"><a href="#GA-3471"><span class="linenos">3471</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3472"><a href="#GA-3472"><span class="linenos">3472</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3473"><a href="#GA-3473"><span class="linenos">3473</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3474"><a href="#GA-3474"><span class="linenos">3474</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3475"><a href="#GA-3475"><span class="linenos">3475</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3476"><a href="#GA-3476"><span class="linenos">3476</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3477"><a href="#GA-3477"><span class="linenos">3477</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3478"><a href="#GA-3478"><span class="linenos">3478</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3479"><a href="#GA-3479"><span class="linenos">3479</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3480"><a href="#GA-3480"><span class="linenos">3480</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3481"><a href="#GA-3481"><span class="linenos">3481</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3482"><a href="#GA-3482"><span class="linenos">3482</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3483"><a href="#GA-3483"><span class="linenos">3483</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3484"><a href="#GA-3484"><span class="linenos">3484</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3485"><a href="#GA-3485"><span class="linenos">3485</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3486"><a href="#GA-3486"><span class="linenos">3486</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3487"><a href="#GA-3487"><span class="linenos">3487</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3488"><a href="#GA-3488"><span class="linenos">3488</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3489"><a href="#GA-3489"><span class="linenos">3489</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3490"><a href="#GA-3490"><span class="linenos">3490</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3491"><a href="#GA-3491"><span class="linenos">3491</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3492"><a href="#GA-3492"><span class="linenos">3492</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3493"><a href="#GA-3493"><span class="linenos">3493</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3494"><a href="#GA-3494"><span class="linenos">3494</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3495"><a href="#GA-3495"><span class="linenos">3495</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3496"><a href="#GA-3496"><span class="linenos">3496</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3497"><a href="#GA-3497"><span class="linenos">3497</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3498"><a href="#GA-3498"><span class="linenos">3498</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3499"><a href="#GA-3499"><span class="linenos">3499</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3500"><a href="#GA-3500"><span class="linenos">3500</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3501"><a href="#GA-3501"><span class="linenos">3501</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-3502"><a href="#GA-3502"><span class="linenos">3502</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3503"><a href="#GA-3503"><span class="linenos">3503</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3504"><a href="#GA-3504"><span class="linenos">3504</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3505"><a href="#GA-3505"><span class="linenos">3505</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3506"><a href="#GA-3506"><span class="linenos">3506</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3507"><a href="#GA-3507"><span class="linenos">3507</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3508"><a href="#GA-3508"><span class="linenos">3508</span></a>                            <span class="k">pass</span>
</span><span id="GA-3509"><a href="#GA-3509"><span class="linenos">3509</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3510"><a href="#GA-3510"><span class="linenos">3510</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3511"><a href="#GA-3511"><span class="linenos">3511</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3512"><a href="#GA-3512"><span class="linenos">3512</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3513"><a href="#GA-3513"><span class="linenos">3513</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3514"><a href="#GA-3514"><span class="linenos">3514</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3515"><a href="#GA-3515"><span class="linenos">3515</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3516"><a href="#GA-3516"><span class="linenos">3516</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3517"><a href="#GA-3517"><span class="linenos">3517</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3518"><a href="#GA-3518"><span class="linenos">3518</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3519"><a href="#GA-3519"><span class="linenos">3519</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3520"><a href="#GA-3520"><span class="linenos">3520</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3521"><a href="#GA-3521"><span class="linenos">3521</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3522"><a href="#GA-3522"><span class="linenos">3522</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3523"><a href="#GA-3523"><span class="linenos">3523</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3524"><a href="#GA-3524"><span class="linenos">3524</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3525"><a href="#GA-3525"><span class="linenos">3525</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3526"><a href="#GA-3526"><span class="linenos">3526</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3527"><a href="#GA-3527"><span class="linenos">3527</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3528"><a href="#GA-3528"><span class="linenos">3528</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3529"><a href="#GA-3529"><span class="linenos">3529</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3530"><a href="#GA-3530"><span class="linenos">3530</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3531"><a href="#GA-3531"><span class="linenos">3531</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3532"><a href="#GA-3532"><span class="linenos">3532</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3533"><a href="#GA-3533"><span class="linenos">3533</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3534"><a href="#GA-3534"><span class="linenos">3534</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3535"><a href="#GA-3535"><span class="linenos">3535</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3536"><a href="#GA-3536"><span class="linenos">3536</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3537"><a href="#GA-3537"><span class="linenos">3537</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3538"><a href="#GA-3538"><span class="linenos">3538</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3539"><a href="#GA-3539"><span class="linenos">3539</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3540"><a href="#GA-3540"><span class="linenos">3540</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3541"><a href="#GA-3541"><span class="linenos">3541</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3542"><a href="#GA-3542"><span class="linenos">3542</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3543"><a href="#GA-3543"><span class="linenos">3543</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3544"><a href="#GA-3544"><span class="linenos">3544</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3545"><a href="#GA-3545"><span class="linenos">3545</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3546"><a href="#GA-3546"><span class="linenos">3546</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3547"><a href="#GA-3547"><span class="linenos">3547</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3548"><a href="#GA-3548"><span class="linenos">3548</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3549"><a href="#GA-3549"><span class="linenos">3549</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3550"><a href="#GA-3550"><span class="linenos">3550</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3551"><a href="#GA-3551"><span class="linenos">3551</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-3552"><a href="#GA-3552"><span class="linenos">3552</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3553"><a href="#GA-3553"><span class="linenos">3553</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3554"><a href="#GA-3554"><span class="linenos">3554</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3555"><a href="#GA-3555"><span class="linenos">3555</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3556"><a href="#GA-3556"><span class="linenos">3556</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3557"><a href="#GA-3557"><span class="linenos">3557</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3558"><a href="#GA-3558"><span class="linenos">3558</span></a>                            <span class="k">pass</span>
</span><span id="GA-3559"><a href="#GA-3559"><span class="linenos">3559</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3560"><a href="#GA-3560"><span class="linenos">3560</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3561"><a href="#GA-3561"><span class="linenos">3561</span></a>
</span><span id="GA-3562"><a href="#GA-3562"><span class="linenos">3562</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3563"><a href="#GA-3563"><span class="linenos">3563</span></a>                <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-3564"><a href="#GA-3564"><span class="linenos">3564</span></a>                <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA-3565"><a href="#GA-3565"><span class="linenos">3565</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3566"><a href="#GA-3566"><span class="linenos">3566</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-3567"><a href="#GA-3567"><span class="linenos">3567</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3568"><a href="#GA-3568"><span class="linenos">3568</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the space of the gene with index </span><span class="si">{gene_idx}</span><span class="s2"> has only a single value. Thus, duplicates are possible.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3569"><a href="#GA-3569"><span class="linenos">3569</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">))</span>
</span><span id="GA-3570"><a href="#GA-3570"><span class="linenos">3570</span></a>                <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA-3571"><a href="#GA-3571"><span class="linenos">3571</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3572"><a href="#GA-3572"><span class="linenos">3572</span></a>                    <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA-3573"><a href="#GA-3573"><span class="linenos">3573</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3574"><a href="#GA-3574"><span class="linenos">3574</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3575"><a href="#GA-3575"><span class="linenos">3575</span></a>                            <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA-3576"><a href="#GA-3576"><span class="linenos">3576</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-3577"><a href="#GA-3577"><span class="linenos">3577</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3578"><a href="#GA-3578"><span class="linenos">3578</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-3579"><a href="#GA-3579"><span class="linenos">3579</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3580"><a href="#GA-3580"><span class="linenos">3580</span></a>            <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA-3581"><a href="#GA-3581"><span class="linenos">3581</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA-3582"><a href="#GA-3582"><span class="linenos">3582</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3583"><a href="#GA-3583"><span class="linenos">3583</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3584"><a href="#GA-3584"><span class="linenos">3584</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3585"><a href="#GA-3585"><span class="linenos">3585</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3586"><a href="#GA-3586"><span class="linenos">3586</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3587"><a href="#GA-3587"><span class="linenos">3587</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3588"><a href="#GA-3588"><span class="linenos">3588</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3589"><a href="#GA-3589"><span class="linenos">3589</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3590"><a href="#GA-3590"><span class="linenos">3590</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3591"><a href="#GA-3591"><span class="linenos">3591</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3592"><a href="#GA-3592"><span class="linenos">3592</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3593"><a href="#GA-3593"><span class="linenos">3593</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3594"><a href="#GA-3594"><span class="linenos">3594</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3595"><a href="#GA-3595"><span class="linenos">3595</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3596"><a href="#GA-3596"><span class="linenos">3596</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3597"><a href="#GA-3597"><span class="linenos">3597</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3598"><a href="#GA-3598"><span class="linenos">3598</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3599"><a href="#GA-3599"><span class="linenos">3599</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3600"><a href="#GA-3600"><span class="linenos">3600</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3601"><a href="#GA-3601"><span class="linenos">3601</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3602"><a href="#GA-3602"><span class="linenos">3602</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3603"><a href="#GA-3603"><span class="linenos">3603</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3604"><a href="#GA-3604"><span class="linenos">3604</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3605"><a href="#GA-3605"><span class="linenos">3605</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3606"><a href="#GA-3606"><span class="linenos">3606</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3607"><a href="#GA-3607"><span class="linenos">3607</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3608"><a href="#GA-3608"><span class="linenos">3608</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3609"><a href="#GA-3609"><span class="linenos">3609</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3610"><a href="#GA-3610"><span class="linenos">3610</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3611"><a href="#GA-3611"><span class="linenos">3611</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3612"><a href="#GA-3612"><span class="linenos">3612</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3613"><a href="#GA-3613"><span class="linenos">3613</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3614"><a href="#GA-3614"><span class="linenos">3614</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3615"><a href="#GA-3615"><span class="linenos">3615</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3616"><a href="#GA-3616"><span class="linenos">3616</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3617"><a href="#GA-3617"><span class="linenos">3617</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3618"><a href="#GA-3618"><span class="linenos">3618</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3619"><a href="#GA-3619"><span class="linenos">3619</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA-3620"><a href="#GA-3620"><span class="linenos">3620</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3621"><a href="#GA-3621"><span class="linenos">3621</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3622"><a href="#GA-3622"><span class="linenos">3622</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3623"><a href="#GA-3623"><span class="linenos">3623</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-3624"><a href="#GA-3624"><span class="linenos">3624</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3625"><a href="#GA-3625"><span class="linenos">3625</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3626"><a href="#GA-3626"><span class="linenos">3626</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3627"><a href="#GA-3627"><span class="linenos">3627</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3628"><a href="#GA-3628"><span class="linenos">3628</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3629"><a href="#GA-3629"><span class="linenos">3629</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3630"><a href="#GA-3630"><span class="linenos">3630</span></a>                            <span class="k">pass</span>
</span><span id="GA-3631"><a href="#GA-3631"><span class="linenos">3631</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3632"><a href="#GA-3632"><span class="linenos">3632</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3633"><a href="#GA-3633"><span class="linenos">3633</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3634"><a href="#GA-3634"><span class="linenos">3634</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA-3635"><a href="#GA-3635"><span class="linenos">3635</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3636"><a href="#GA-3636"><span class="linenos">3636</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3637"><a href="#GA-3637"><span class="linenos">3637</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3638"><a href="#GA-3638"><span class="linenos">3638</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3639"><a href="#GA-3639"><span class="linenos">3639</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3640"><a href="#GA-3640"><span class="linenos">3640</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3641"><a href="#GA-3641"><span class="linenos">3641</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3642"><a href="#GA-3642"><span class="linenos">3642</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3643"><a href="#GA-3643"><span class="linenos">3643</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3644"><a href="#GA-3644"><span class="linenos">3644</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3645"><a href="#GA-3645"><span class="linenos">3645</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3646"><a href="#GA-3646"><span class="linenos">3646</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3647"><a href="#GA-3647"><span class="linenos">3647</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3648"><a href="#GA-3648"><span class="linenos">3648</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3649"><a href="#GA-3649"><span class="linenos">3649</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3650"><a href="#GA-3650"><span class="linenos">3650</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3651"><a href="#GA-3651"><span class="linenos">3651</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3652"><a href="#GA-3652"><span class="linenos">3652</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3653"><a href="#GA-3653"><span class="linenos">3653</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3654"><a href="#GA-3654"><span class="linenos">3654</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3655"><a href="#GA-3655"><span class="linenos">3655</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3656"><a href="#GA-3656"><span class="linenos">3656</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3657"><a href="#GA-3657"><span class="linenos">3657</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3658"><a href="#GA-3658"><span class="linenos">3658</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA-3659"><a href="#GA-3659"><span class="linenos">3659</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3660"><a href="#GA-3660"><span class="linenos">3660</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3661"><a href="#GA-3661"><span class="linenos">3661</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3662"><a href="#GA-3662"><span class="linenos">3662</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA-3663"><a href="#GA-3663"><span class="linenos">3663</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA-3664"><a href="#GA-3664"><span class="linenos">3664</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3665"><a href="#GA-3665"><span class="linenos">3665</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3666"><a href="#GA-3666"><span class="linenos">3666</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA-3667"><a href="#GA-3667"><span class="linenos">3667</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA-3668"><a href="#GA-3668"><span class="linenos">3668</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA-3669"><a href="#GA-3669"><span class="linenos">3669</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3670"><a href="#GA-3670"><span class="linenos">3670</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA-3671"><a href="#GA-3671"><span class="linenos">3671</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA-3672"><a href="#GA-3672"><span class="linenos">3672</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3673"><a href="#GA-3673"><span class="linenos">3673</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3674"><a href="#GA-3674"><span class="linenos">3674</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA-3675"><a href="#GA-3675"><span class="linenos">3675</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3676"><a href="#GA-3676"><span class="linenos">3676</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3677"><a href="#GA-3677"><span class="linenos">3677</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA-3678"><a href="#GA-3678"><span class="linenos">3678</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA-3679"><a href="#GA-3679"><span class="linenos">3679</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3680"><a href="#GA-3680"><span class="linenos">3680</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA-3681"><a href="#GA-3681"><span class="linenos">3681</span></a>                            <span class="k">pass</span>
</span><span id="GA-3682"><a href="#GA-3682"><span class="linenos">3682</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3683"><a href="#GA-3683"><span class="linenos">3683</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA-3684"><a href="#GA-3684"><span class="linenos">3684</span></a>
</span><span id="GA-3685"><a href="#GA-3685"><span class="linenos">3685</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3686"><a href="#GA-3686"><span class="linenos">3686</span></a>                <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="GA-3687"><a href="#GA-3687"><span class="linenos">3687</span></a>                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA-3688"><a href="#GA-3688"><span class="linenos">3688</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3689"><a href="#GA-3689"><span class="linenos">3689</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3690"><a href="#GA-3690"><span class="linenos">3690</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA-3691"><a href="#GA-3691"><span class="linenos">3691</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA-3692"><a href="#GA-3692"><span class="linenos">3692</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3693"><a href="#GA-3693"><span class="linenos">3693</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA-3694"><a href="#GA-3694"><span class="linenos">3694</span></a>
</span><span id="GA-3695"><a href="#GA-3695"><span class="linenos">3695</span></a>        <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3696"><a href="#GA-3696"><span class="linenos">3696</span></a>            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA-3697"><a href="#GA-3697"><span class="linenos">3697</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA-3698"><a href="#GA-3698"><span class="linenos">3698</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA-3699"><a href="#GA-3699"><span class="linenos">3699</span></a>
</span><span id="GA-3700"><a href="#GA-3700"><span class="linenos">3700</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA-3701"><a href="#GA-3701"><span class="linenos">3701</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3702"><a href="#GA-3702"><span class="linenos">3702</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-3703"><a href="#GA-3703"><span class="linenos">3703</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3704"><a href="#GA-3704"><span class="linenos">3704</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3705"><a href="#GA-3705"><span class="linenos">3705</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-3706"><a href="#GA-3706"><span class="linenos">3706</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3707"><a href="#GA-3707"><span class="linenos">3707</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3708"><a href="#GA-3708"><span class="linenos">3708</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA-3709"><a href="#GA-3709"><span class="linenos">3709</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA-3710"><a href="#GA-3710"><span class="linenos">3710</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3711"><a href="#GA-3711"><span class="linenos">3711</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA-3712"><a href="#GA-3712"><span class="linenos">3712</span></a>
</span><span id="GA-3713"><a href="#GA-3713"><span class="linenos">3713</span></a>        <span class="k">return</span> <span class="n">value_from_space</span>
</span><span id="GA-3714"><a href="#GA-3714"><span class="linenos">3714</span></a>
</span><span id="GA-3715"><a href="#GA-3715"><span class="linenos">3715</span></a>    <span class="k">def</span> <span class="nf">best_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3716"><a href="#GA-3716"><span class="linenos">3716</span></a>
</span><span id="GA-3717"><a href="#GA-3717"><span class="linenos">3717</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3718"><a href="#GA-3718"><span class="linenos">3718</span></a><span class="sd">        Returns information about the best solution found by the genetic algorithm.</span>
</span><span id="GA-3719"><a href="#GA-3719"><span class="linenos">3719</span></a><span class="sd">        Accepts the following parameters:</span>
</span><span id="GA-3720"><a href="#GA-3720"><span class="linenos">3720</span></a><span class="sd">            pop_fitness: An optional parameter holding the fitness values of the solutions in the current population. If None, then the cal_pop_fitness() method is called to calculate the fitness of the population.</span>
</span><span id="GA-3721"><a href="#GA-3721"><span class="linenos">3721</span></a><span class="sd">        The following are returned:</span>
</span><span id="GA-3722"><a href="#GA-3722"><span class="linenos">3722</span></a><span class="sd">            -best_solution: Best solution in the current population.</span>
</span><span id="GA-3723"><a href="#GA-3723"><span class="linenos">3723</span></a><span class="sd">            -best_solution_fitness: Fitness value of the best solution.</span>
</span><span id="GA-3724"><a href="#GA-3724"><span class="linenos">3724</span></a><span class="sd">            -best_match_idx: Index of the best solution in the current population.</span>
</span><span id="GA-3725"><a href="#GA-3725"><span class="linenos">3725</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3726"><a href="#GA-3726"><span class="linenos">3726</span></a>
</span><span id="GA-3727"><a href="#GA-3727"><span class="linenos">3727</span></a>        <span class="c1"># Getting the best solution after finishing all generations.</span>
</span><span id="GA-3728"><a href="#GA-3728"><span class="linenos">3728</span></a>        <span class="c1"># At first, the fitness is calculated for each solution in the final generation.</span>
</span><span id="GA-3729"><a href="#GA-3729"><span class="linenos">3729</span></a>        <span class="k">if</span> <span class="n">pop_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3730"><a href="#GA-3730"><span class="linenos">3730</span></a>            <span class="n">pop_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA-3731"><a href="#GA-3731"><span class="linenos">3731</span></a>        <span class="c1"># Then return the index of that solution corresponding to the best fitness.</span>
</span><span id="GA-3732"><a href="#GA-3732"><span class="linenos">3732</span></a>        <span class="n">best_match_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pop_fitness</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA-3733"><a href="#GA-3733"><span class="linenos">3733</span></a>
</span><span id="GA-3734"><a href="#GA-3734"><span class="linenos">3734</span></a>        <span class="n">best_solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA-3735"><a href="#GA-3735"><span class="linenos">3735</span></a>        <span class="n">best_solution_fitness</span> <span class="o">=</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">]</span>
</span><span id="GA-3736"><a href="#GA-3736"><span class="linenos">3736</span></a>        <span class="c1"># print(best_solution_fitness)</span>
</span><span id="GA-3737"><a href="#GA-3737"><span class="linenos">3737</span></a>        <span class="k">return</span> <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span>
</span><span id="GA-3738"><a href="#GA-3738"><span class="linenos">3738</span></a>
</span><span id="GA-3739"><a href="#GA-3739"><span class="linenos">3739</span></a>    <span class="k">def</span> <span class="nf">plot_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA-3740"><a href="#GA-3740"><span class="linenos">3740</span></a>                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="GA-3741"><a href="#GA-3741"><span class="linenos">3741</span></a>                    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA-3742"><a href="#GA-3742"><span class="linenos">3742</span></a>                    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="GA-3743"><a href="#GA-3743"><span class="linenos">3743</span></a>                    <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA-3744"><a href="#GA-3744"><span class="linenos">3744</span></a>                    <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA-3745"><a href="#GA-3745"><span class="linenos">3745</span></a>                    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA-3746"><a href="#GA-3746"><span class="linenos">3746</span></a>                    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA-3747"><a href="#GA-3747"><span class="linenos">3747</span></a>                    <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3748"><a href="#GA-3748"><span class="linenos">3748</span></a>
</span><span id="GA-3749"><a href="#GA-3749"><span class="linenos">3749</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span>
</span><span id="GA-3750"><a href="#GA-3750"><span class="linenos">3750</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA-3751"><a href="#GA-3751"><span class="linenos">3751</span></a>                <span class="s2">&quot;Please use the plot_fitness() method instead of plot_result(). The plot_result() method will be removed in the future.&quot;</span><span class="p">)</span>
</span><span id="GA-3752"><a href="#GA-3752"><span class="linenos">3752</span></a>
</span><span id="GA-3753"><a href="#GA-3753"><span class="linenos">3753</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_fitness</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="GA-3754"><a href="#GA-3754"><span class="linenos">3754</span></a>                                 <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
</span><span id="GA-3755"><a href="#GA-3755"><span class="linenos">3755</span></a>                                 <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span>
</span><span id="GA-3756"><a href="#GA-3756"><span class="linenos">3756</span></a>                                 <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-3757"><a href="#GA-3757"><span class="linenos">3757</span></a>                                 <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="GA-3758"><a href="#GA-3758"><span class="linenos">3758</span></a>                                 <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
</span><span id="GA-3759"><a href="#GA-3759"><span class="linenos">3759</span></a>                                 <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="GA-3760"><a href="#GA-3760"><span class="linenos">3760</span></a>                                 <span class="n">save_dir</span><span class="o">=</span><span class="n">save_dir</span><span class="p">)</span>
</span><span id="GA-3761"><a href="#GA-3761"><span class="linenos">3761</span></a>
</span><span id="GA-3762"><a href="#GA-3762"><span class="linenos">3762</span></a>    <span class="k">def</span> <span class="nf">plot_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA-3763"><a href="#GA-3763"><span class="linenos">3763</span></a>                     <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="GA-3764"><a href="#GA-3764"><span class="linenos">3764</span></a>                     <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA-3765"><a href="#GA-3765"><span class="linenos">3765</span></a>                     <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="GA-3766"><a href="#GA-3766"><span class="linenos">3766</span></a>                     <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA-3767"><a href="#GA-3767"><span class="linenos">3767</span></a>                     <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA-3768"><a href="#GA-3768"><span class="linenos">3768</span></a>                     <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA-3769"><a href="#GA-3769"><span class="linenos">3769</span></a>                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA-3770"><a href="#GA-3770"><span class="linenos">3770</span></a>                     <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3771"><a href="#GA-3771"><span class="linenos">3771</span></a>
</span><span id="GA-3772"><a href="#GA-3772"><span class="linenos">3772</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3773"><a href="#GA-3773"><span class="linenos">3773</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes how the fitness value evolved by generation. Can only be called after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="GA-3774"><a href="#GA-3774"><span class="linenos">3774</span></a>
</span><span id="GA-3775"><a href="#GA-3775"><span class="linenos">3775</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA-3776"><a href="#GA-3776"><span class="linenos">3776</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA-3777"><a href="#GA-3777"><span class="linenos">3777</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA-3778"><a href="#GA-3778"><span class="linenos">3778</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA-3779"><a href="#GA-3779"><span class="linenos">3779</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA-3780"><a href="#GA-3780"><span class="linenos">3780</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA-3781"><a href="#GA-3781"><span class="linenos">3781</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA-3782"><a href="#GA-3782"><span class="linenos">3782</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="GA-3783"><a href="#GA-3783"><span class="linenos">3783</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA-3784"><a href="#GA-3784"><span class="linenos">3784</span></a>
</span><span id="GA-3785"><a href="#GA-3785"><span class="linenos">3785</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA-3786"><a href="#GA-3786"><span class="linenos">3786</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3787"><a href="#GA-3787"><span class="linenos">3787</span></a>
</span><span id="GA-3788"><a href="#GA-3788"><span class="linenos">3788</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3789"><a href="#GA-3789"><span class="linenos">3789</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3790"><a href="#GA-3790"><span class="linenos">3790</span></a>                <span class="s2">&quot;The plot_fitness() (i.e. plot_result()) method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3791"><a href="#GA-3791"><span class="linenos">3791</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA-3792"><a href="#GA-3792"><span class="linenos">3792</span></a>
</span><span id="GA-3793"><a href="#GA-3793"><span class="linenos">3793</span></a>        <span class="c1">#        if self.run_completed == False:</span>
</span><span id="GA-3794"><a href="#GA-3794"><span class="linenos">3794</span></a>        <span class="c1">#            if not self.suppress_warnings: warnings.warn(&quot;Warning calling the plot_result() method: \nGA is not executed yet and there are no results to display. Please call the run() method before calling the plot_result() method.\n&quot;)</span>
</span><span id="GA-3795"><a href="#GA-3795"><span class="linenos">3795</span></a>
</span><span id="GA-3796"><a href="#GA-3796"><span class="linenos">3796</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="GA-3797"><a href="#GA-3797"><span class="linenos">3797</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3798"><a href="#GA-3798"><span class="linenos">3798</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3799"><a href="#GA-3799"><span class="linenos">3799</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA-3800"><a href="#GA-3800"><span class="linenos">3800</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="GA-3801"><a href="#GA-3801"><span class="linenos">3801</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3802"><a href="#GA-3802"><span class="linenos">3802</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA-3803"><a href="#GA-3803"><span class="linenos">3803</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="GA-3804"><a href="#GA-3804"><span class="linenos">3804</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3805"><a href="#GA-3805"><span class="linenos">3805</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3806"><a href="#GA-3806"><span class="linenos">3806</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3807"><a href="#GA-3807"><span class="linenos">3807</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3808"><a href="#GA-3808"><span class="linenos">3808</span></a>
</span><span id="GA-3809"><a href="#GA-3809"><span class="linenos">3809</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3810"><a href="#GA-3810"><span class="linenos">3810</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA-3811"><a href="#GA-3811"><span class="linenos">3811</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA-3812"><a href="#GA-3812"><span class="linenos">3812</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA-3813"><a href="#GA-3813"><span class="linenos">3813</span></a>
</span><span id="GA-3814"><a href="#GA-3814"><span class="linenos">3814</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="GA-3815"><a href="#GA-3815"><span class="linenos">3815</span></a>
</span><span id="GA-3816"><a href="#GA-3816"><span class="linenos">3816</span></a>    <span class="k">def</span> <span class="nf">plot_new_solution_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA-3817"><a href="#GA-3817"><span class="linenos">3817</span></a>                               <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="GA-3818"><a href="#GA-3818"><span class="linenos">3818</span></a>                               <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA-3819"><a href="#GA-3819"><span class="linenos">3819</span></a>                               <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="GA-3820"><a href="#GA-3820"><span class="linenos">3820</span></a>                               <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA-3821"><a href="#GA-3821"><span class="linenos">3821</span></a>                               <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA-3822"><a href="#GA-3822"><span class="linenos">3822</span></a>                               <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA-3823"><a href="#GA-3823"><span class="linenos">3823</span></a>                               <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA-3824"><a href="#GA-3824"><span class="linenos">3824</span></a>                               <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3825"><a href="#GA-3825"><span class="linenos">3825</span></a>
</span><span id="GA-3826"><a href="#GA-3826"><span class="linenos">3826</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3827"><a href="#GA-3827"><span class="linenos">3827</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes the rate of exploring new solutions. This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="GA-3828"><a href="#GA-3828"><span class="linenos">3828</span></a>
</span><span id="GA-3829"><a href="#GA-3829"><span class="linenos">3829</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA-3830"><a href="#GA-3830"><span class="linenos">3830</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA-3831"><a href="#GA-3831"><span class="linenos">3831</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA-3832"><a href="#GA-3832"><span class="linenos">3832</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA-3833"><a href="#GA-3833"><span class="linenos">3833</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA-3834"><a href="#GA-3834"><span class="linenos">3834</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA-3835"><a href="#GA-3835"><span class="linenos">3835</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA-3836"><a href="#GA-3836"><span class="linenos">3836</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="GA-3837"><a href="#GA-3837"><span class="linenos">3837</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA-3838"><a href="#GA-3838"><span class="linenos">3838</span></a>
</span><span id="GA-3839"><a href="#GA-3839"><span class="linenos">3839</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA-3840"><a href="#GA-3840"><span class="linenos">3840</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3841"><a href="#GA-3841"><span class="linenos">3841</span></a>
</span><span id="GA-3842"><a href="#GA-3842"><span class="linenos">3842</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3843"><a href="#GA-3843"><span class="linenos">3843</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3844"><a href="#GA-3844"><span class="linenos">3844</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3845"><a href="#GA-3845"><span class="linenos">3845</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA-3846"><a href="#GA-3846"><span class="linenos">3846</span></a>
</span><span id="GA-3847"><a href="#GA-3847"><span class="linenos">3847</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA-3848"><a href="#GA-3848"><span class="linenos">3848</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3849"><a href="#GA-3849"><span class="linenos">3849</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method works only when save_solutions=True in the constructor of the pygad.GA class.&quot;</span><span class="p">)</span>
</span><span id="GA-3850"><a href="#GA-3850"><span class="linenos">3850</span></a>
</span><span id="GA-3851"><a href="#GA-3851"><span class="linenos">3851</span></a>        <span class="n">unique_solutions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="GA-3852"><a href="#GA-3852"><span class="linenos">3852</span></a>        <span class="n">num_unique_solutions_per_generation</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA-3853"><a href="#GA-3853"><span class="linenos">3853</span></a>        <span class="k">for</span> <span class="n">generation_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">):</span>
</span><span id="GA-3854"><a href="#GA-3854"><span class="linenos">3854</span></a>
</span><span id="GA-3855"><a href="#GA-3855"><span class="linenos">3855</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="GA-3856"><a href="#GA-3856"><span class="linenos">3856</span></a>
</span><span id="GA-3857"><a href="#GA-3857"><span class="linenos">3857</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">generation_idx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA-3858"><a href="#GA-3858"><span class="linenos">3858</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA-3859"><a href="#GA-3859"><span class="linenos">3859</span></a>
</span><span id="GA-3860"><a href="#GA-3860"><span class="linenos">3860</span></a>            <span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]:</span>
</span><span id="GA-3861"><a href="#GA-3861"><span class="linenos">3861</span></a>                <span class="n">unique_solutions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">sol</span><span class="p">))</span>
</span><span id="GA-3862"><a href="#GA-3862"><span class="linenos">3862</span></a>
</span><span id="GA-3863"><a href="#GA-3863"><span class="linenos">3863</span></a>            <span class="n">len_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="GA-3864"><a href="#GA-3864"><span class="linenos">3864</span></a>
</span><span id="GA-3865"><a href="#GA-3865"><span class="linenos">3865</span></a>            <span class="n">generation_num_unique_solutions</span> <span class="o">=</span> <span class="n">len_after</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="GA-3866"><a href="#GA-3866"><span class="linenos">3866</span></a>            <span class="n">num_unique_solutions_per_generation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generation_num_unique_solutions</span><span class="p">)</span>
</span><span id="GA-3867"><a href="#GA-3867"><span class="linenos">3867</span></a>
</span><span id="GA-3868"><a href="#GA-3868"><span class="linenos">3868</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="GA-3869"><a href="#GA-3869"><span class="linenos">3869</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3870"><a href="#GA-3870"><span class="linenos">3870</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_unique_solutions_per_generation</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3871"><a href="#GA-3871"><span class="linenos">3871</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA-3872"><a href="#GA-3872"><span class="linenos">3872</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="GA-3873"><a href="#GA-3873"><span class="linenos">3873</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3874"><a href="#GA-3874"><span class="linenos">3874</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA-3875"><a href="#GA-3875"><span class="linenos">3875</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="GA-3876"><a href="#GA-3876"><span class="linenos">3876</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA-3877"><a href="#GA-3877"><span class="linenos">3877</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3878"><a href="#GA-3878"><span class="linenos">3878</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3879"><a href="#GA-3879"><span class="linenos">3879</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3880"><a href="#GA-3880"><span class="linenos">3880</span></a>
</span><span id="GA-3881"><a href="#GA-3881"><span class="linenos">3881</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-3882"><a href="#GA-3882"><span class="linenos">3882</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA-3883"><a href="#GA-3883"><span class="linenos">3883</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA-3884"><a href="#GA-3884"><span class="linenos">3884</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA-3885"><a href="#GA-3885"><span class="linenos">3885</span></a>
</span><span id="GA-3886"><a href="#GA-3886"><span class="linenos">3886</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="GA-3887"><a href="#GA-3887"><span class="linenos">3887</span></a>
</span><span id="GA-3888"><a href="#GA-3888"><span class="linenos">3888</span></a>    <span class="k">def</span> <span class="nf">plot_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA-3889"><a href="#GA-3889"><span class="linenos">3889</span></a>                   <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Gene&quot;</span><span class="p">,</span>
</span><span id="GA-3890"><a href="#GA-3890"><span class="linenos">3890</span></a>                   <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Gene&quot;</span><span class="p">,</span>
</span><span id="GA-3891"><a href="#GA-3891"><span class="linenos">3891</span></a>                   <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span>
</span><span id="GA-3892"><a href="#GA-3892"><span class="linenos">3892</span></a>                   <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA-3893"><a href="#GA-3893"><span class="linenos">3893</span></a>                   <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA-3894"><a href="#GA-3894"><span class="linenos">3894</span></a>                   <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA-3895"><a href="#GA-3895"><span class="linenos">3895</span></a>                   <span class="n">graph_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA-3896"><a href="#GA-3896"><span class="linenos">3896</span></a>                   <span class="n">fill_color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA-3897"><a href="#GA-3897"><span class="linenos">3897</span></a>                   <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="GA-3898"><a href="#GA-3898"><span class="linenos">3898</span></a>                   <span class="n">solutions</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
</span><span id="GA-3899"><a href="#GA-3899"><span class="linenos">3899</span></a>                   <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA-3900"><a href="#GA-3900"><span class="linenos">3900</span></a>
</span><span id="GA-3901"><a href="#GA-3901"><span class="linenos">3901</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-3902"><a href="#GA-3902"><span class="linenos">3902</span></a><span class="sd">        Creates, shows, and returns a figure with number of subplots equal to the number of genes. Each subplot shows the gene value for each generation.</span>
</span><span id="GA-3903"><a href="#GA-3903"><span class="linenos">3903</span></a><span class="sd">        This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="GA-3904"><a href="#GA-3904"><span class="linenos">3904</span></a><span class="sd">        It also works only after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="GA-3905"><a href="#GA-3905"><span class="linenos">3905</span></a>
</span><span id="GA-3906"><a href="#GA-3906"><span class="linenos">3906</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA-3907"><a href="#GA-3907"><span class="linenos">3907</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA-3908"><a href="#GA-3908"><span class="linenos">3908</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA-3909"><a href="#GA-3909"><span class="linenos">3909</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA-3910"><a href="#GA-3910"><span class="linenos">3910</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA-3911"><a href="#GA-3911"><span class="linenos">3911</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA-3912"><a href="#GA-3912"><span class="linenos">3912</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA-3913"><a href="#GA-3913"><span class="linenos">3913</span></a><span class="sd">            graph_type: Type of the graph which can be either &quot;plot&quot; (default), &quot;boxplot&quot;, or &quot;histogram&quot;.</span>
</span><span id="GA-3914"><a href="#GA-3914"><span class="linenos">3914</span></a><span class="sd">            fill_color: Fill color of the graph which defaults to &quot;#3870FF&quot;. This has no effect if graph_type=&quot;plot&quot;.</span>
</span><span id="GA-3915"><a href="#GA-3915"><span class="linenos">3915</span></a><span class="sd">            color: Color of the plot which defaults to &quot;black&quot;.</span>
</span><span id="GA-3916"><a href="#GA-3916"><span class="linenos">3916</span></a><span class="sd">            solutions: Defaults to &quot;all&quot; which means use all solutions. If &quot;best&quot; then only the best solutions are used.</span>
</span><span id="GA-3917"><a href="#GA-3917"><span class="linenos">3917</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA-3918"><a href="#GA-3918"><span class="linenos">3918</span></a>
</span><span id="GA-3919"><a href="#GA-3919"><span class="linenos">3919</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA-3920"><a href="#GA-3920"><span class="linenos">3920</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-3921"><a href="#GA-3921"><span class="linenos">3921</span></a>
</span><span id="GA-3922"><a href="#GA-3922"><span class="linenos">3922</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3923"><a href="#GA-3923"><span class="linenos">3923</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3924"><a href="#GA-3924"><span class="linenos">3924</span></a>                <span class="s2">&quot;The plot_genes() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3925"><a href="#GA-3925"><span class="linenos">3925</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA-3926"><a href="#GA-3926"><span class="linenos">3926</span></a>
</span><span id="GA-3927"><a href="#GA-3927"><span class="linenos">3927</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA-3928"><a href="#GA-3928"><span class="linenos">3928</span></a>            <span class="k">if</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="GA-3929"><a href="#GA-3929"><span class="linenos">3929</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA-3930"><a href="#GA-3930"><span class="linenos">3930</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="GA-3931"><a href="#GA-3931"><span class="linenos">3931</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3932"><a href="#GA-3932"><span class="linenos">3932</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3933"><a href="#GA-3933"><span class="linenos">3933</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;all&#39; can only be called if &#39;save_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="GA-3934"><a href="#GA-3934"><span class="linenos">3934</span></a>            <span class="k">elif</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;best&#39;</span><span class="p">:</span>
</span><span id="GA-3935"><a href="#GA-3935"><span class="linenos">3935</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA-3936"><a href="#GA-3936"><span class="linenos">3936</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span>
</span><span id="GA-3937"><a href="#GA-3937"><span class="linenos">3937</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3938"><a href="#GA-3938"><span class="linenos">3938</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3939"><a href="#GA-3939"><span class="linenos">3939</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;best&#39; can only be called if &#39;save_best_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="GA-3940"><a href="#GA-3940"><span class="linenos">3940</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3941"><a href="#GA-3941"><span class="linenos">3941</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA-3942"><a href="#GA-3942"><span class="linenos">3942</span></a>                    <span class="s2">&quot;The solutions parameter can be either &#39;all&#39; or &#39;best&#39; but </span><span class="si">{solutions}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3943"><a href="#GA-3943"><span class="linenos">3943</span></a>                        <span class="n">solutions</span><span class="o">=</span><span class="n">solutions</span><span class="p">))</span>
</span><span id="GA-3944"><a href="#GA-3944"><span class="linenos">3944</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3945"><a href="#GA-3945"><span class="linenos">3945</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The solutions parameter must be a string but </span><span class="si">{solutions_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA-3946"><a href="#GA-3946"><span class="linenos">3946</span></a>                <span class="n">solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)))</span>
</span><span id="GA-3947"><a href="#GA-3947"><span class="linenos">3947</span></a>
</span><span id="GA-3948"><a href="#GA-3948"><span class="linenos">3948</span></a>        <span class="k">if</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3949"><a href="#GA-3949"><span class="linenos">3949</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="GA-3950"><a href="#GA-3950"><span class="linenos">3950</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="GA-3951"><a href="#GA-3951"><span class="linenos">3951</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="GA-3952"><a href="#GA-3952"><span class="linenos">3952</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="GA-3953"><a href="#GA-3953"><span class="linenos">3953</span></a>
</span><span id="GA-3954"><a href="#GA-3954"><span class="linenos">3954</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-3955"><a href="#GA-3955"><span class="linenos">3955</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="GA-3956"><a href="#GA-3956"><span class="linenos">3956</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="GA-3957"><a href="#GA-3957"><span class="linenos">3957</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="GA-3958"><a href="#GA-3958"><span class="linenos">3958</span></a>                <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3959"><a href="#GA-3959"><span class="linenos">3959</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3960"><a href="#GA-3960"><span class="linenos">3960</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA-3961"><a href="#GA-3961"><span class="linenos">3961</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-3962"><a href="#GA-3962"><span class="linenos">3962</span></a>                               <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3963"><a href="#GA-3963"><span class="linenos">3963</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA-3964"><a href="#GA-3964"><span class="linenos">3964</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-3965"><a href="#GA-3965"><span class="linenos">3965</span></a>                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3966"><a href="#GA-3966"><span class="linenos">3966</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3967"><a href="#GA-3967"><span class="linenos">3967</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3968"><a href="#GA-3968"><span class="linenos">3968</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-3969"><a href="#GA-3969"><span class="linenos">3969</span></a>
</span><span id="GA-3970"><a href="#GA-3970"><span class="linenos">3970</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3971"><a href="#GA-3971"><span class="linenos">3971</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-3972"><a href="#GA-3972"><span class="linenos">3972</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GA-3973"><a href="#GA-3973"><span class="linenos">3973</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3974"><a href="#GA-3974"><span class="linenos">3974</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3975"><a href="#GA-3975"><span class="linenos">3975</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-3976"><a href="#GA-3976"><span class="linenos">3976</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-3977"><a href="#GA-3977"><span class="linenos">3977</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GA-3978"><a href="#GA-3978"><span class="linenos">3978</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="GA-3979"><a href="#GA-3979"><span class="linenos">3979</span></a>                        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3980"><a href="#GA-3980"><span class="linenos">3980</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3981"><a href="#GA-3981"><span class="linenos">3981</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA-3982"><a href="#GA-3982"><span class="linenos">3982</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-3983"><a href="#GA-3983"><span class="linenos">3983</span></a>                                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3984"><a href="#GA-3984"><span class="linenos">3984</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA-3985"><a href="#GA-3985"><span class="linenos">3985</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-3986"><a href="#GA-3986"><span class="linenos">3986</span></a>                                              <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-3987"><a href="#GA-3987"><span class="linenos">3987</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-3988"><a href="#GA-3988"><span class="linenos">3988</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-3989"><a href="#GA-3989"><span class="linenos">3989</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-3990"><a href="#GA-3990"><span class="linenos">3990</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</span><span id="GA-3991"><a href="#GA-3991"><span class="linenos">3991</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="GA-3992"><a href="#GA-3992"><span class="linenos">3992</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="GA-3993"><a href="#GA-3993"><span class="linenos">3993</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="GA-3994"><a href="#GA-3994"><span class="linenos">3994</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA-3995"><a href="#GA-3995"><span class="linenos">3995</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="GA-3996"><a href="#GA-3996"><span class="linenos">3996</span></a>                                <span class="k">break</span>
</span><span id="GA-3997"><a href="#GA-3997"><span class="linenos">3997</span></a>                            <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA-3998"><a href="#GA-3998"><span class="linenos">3998</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-3999"><a href="#GA-3999"><span class="linenos">3999</span></a>                                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-4000"><a href="#GA-4000"><span class="linenos">4000</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA-4001"><a href="#GA-4001"><span class="linenos">4001</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-4002"><a href="#GA-4002"><span class="linenos">4002</span></a>                                                              <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-4003"><a href="#GA-4003"><span class="linenos">4003</span></a>                                                              <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-4004"><a href="#GA-4004"><span class="linenos">4004</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA-4005"><a href="#GA-4005"><span class="linenos">4005</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA-4006"><a href="#GA-4006"><span class="linenos">4006</span></a>                                                          <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA-4007"><a href="#GA-4007"><span class="linenos">4007</span></a>                                                          <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-4008"><a href="#GA-4008"><span class="linenos">4008</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4009"><a href="#GA-4009"><span class="linenos">4009</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GA-4010"><a href="#GA-4010"><span class="linenos">4010</span></a>
</span><span id="GA-4011"><a href="#GA-4011"><span class="linenos">4011</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="GA-4012"><a href="#GA-4012"><span class="linenos">4012</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA-4013"><a href="#GA-4013"><span class="linenos">4013</span></a>
</span><span id="GA-4014"><a href="#GA-4014"><span class="linenos">4014</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;boxplot&quot;</span><span class="p">:</span>
</span><span id="GA-4015"><a href="#GA-4015"><span class="linenos">4015</span></a>            <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="GA-4016"><a href="#GA-4016"><span class="linenos">4016</span></a>
</span><span id="GA-4017"><a href="#GA-4017"><span class="linenos">4017</span></a>            <span class="c1"># Create an axes instance</span>
</span><span id="GA-4018"><a href="#GA-4018"><span class="linenos">4018</span></a>            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span><span id="GA-4019"><a href="#GA-4019"><span class="linenos">4019</span></a>            <span class="n">boxeplots</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">,</span>
</span><span id="GA-4020"><a href="#GA-4020"><span class="linenos">4020</span></a>                                   <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="GA-4021"><a href="#GA-4021"><span class="linenos">4021</span></a>                                   <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-4022"><a href="#GA-4022"><span class="linenos">4022</span></a>            <span class="c1"># adding horizontal grid lines</span>
</span><span id="GA-4023"><a href="#GA-4023"><span class="linenos">4023</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA-4024"><a href="#GA-4024"><span class="linenos">4024</span></a>
</span><span id="GA-4025"><a href="#GA-4025"><span class="linenos">4025</span></a>            <span class="k">for</span> <span class="n">box</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">]:</span>
</span><span id="GA-4026"><a href="#GA-4026"><span class="linenos">4026</span></a>                <span class="c1"># change outline color</span>
</span><span id="GA-4027"><a href="#GA-4027"><span class="linenos">4027</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA-4028"><a href="#GA-4028"><span class="linenos">4028</span></a>                <span class="c1"># change fill color https://color.adobe.com/create/color-wheel</span>
</span><span id="GA-4029"><a href="#GA-4029"><span class="linenos">4029</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-4030"><a href="#GA-4030"><span class="linenos">4030</span></a>
</span><span id="GA-4031"><a href="#GA-4031"><span class="linenos">4031</span></a>            <span class="k">for</span> <span class="n">whisker</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;whiskers&#39;</span><span class="p">]:</span>
</span><span id="GA-4032"><a href="#GA-4032"><span class="linenos">4032</span></a>                <span class="n">whisker</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA-4033"><a href="#GA-4033"><span class="linenos">4033</span></a>            <span class="k">for</span> <span class="n">median</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;medians&#39;</span><span class="p">]:</span>
</span><span id="GA-4034"><a href="#GA-4034"><span class="linenos">4034</span></a>                <span class="n">median</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA-4035"><a href="#GA-4035"><span class="linenos">4035</span></a>            <span class="k">for</span> <span class="n">cap</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;caps&#39;</span><span class="p">]:</span>
</span><span id="GA-4036"><a href="#GA-4036"><span class="linenos">4036</span></a>                <span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA-4037"><a href="#GA-4037"><span class="linenos">4037</span></a>
</span><span id="GA-4038"><a href="#GA-4038"><span class="linenos">4038</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4039"><a href="#GA-4039"><span class="linenos">4039</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4040"><a href="#GA-4040"><span class="linenos">4040</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4041"><a href="#GA-4041"><span class="linenos">4041</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA-4042"><a href="#GA-4042"><span class="linenos">4042</span></a>
</span><span id="GA-4043"><a href="#GA-4043"><span class="linenos">4043</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;histogram&quot;</span><span class="p">:</span>
</span><span id="GA-4044"><a href="#GA-4044"><span class="linenos">4044</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="GA-4045"><a href="#GA-4045"><span class="linenos">4045</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="GA-4046"><a href="#GA-4046"><span class="linenos">4046</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="GA-4047"><a href="#GA-4047"><span class="linenos">4047</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="GA-4048"><a href="#GA-4048"><span class="linenos">4048</span></a>
</span><span id="GA-4049"><a href="#GA-4049"><span class="linenos">4049</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA-4050"><a href="#GA-4050"><span class="linenos">4050</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="GA-4051"><a href="#GA-4051"><span class="linenos">4051</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="GA-4052"><a href="#GA-4052"><span class="linenos">4052</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span>
</span><span id="GA-4053"><a href="#GA-4053"><span class="linenos">4053</span></a>                                                     <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="GA-4054"><a href="#GA-4054"><span class="linenos">4054</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA-4055"><a href="#GA-4055"><span class="linenos">4055</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4056"><a href="#GA-4056"><span class="linenos">4056</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA-4057"><a href="#GA-4057"><span class="linenos">4057</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-4058"><a href="#GA-4058"><span class="linenos">4058</span></a>
</span><span id="GA-4059"><a href="#GA-4059"><span class="linenos">4059</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-4060"><a href="#GA-4060"><span class="linenos">4060</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-4061"><a href="#GA-4061"><span class="linenos">4061</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="GA-4062"><a href="#GA-4062"><span class="linenos">4062</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="GA-4063"><a href="#GA-4063"><span class="linenos">4063</span></a>                             <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA-4064"><a href="#GA-4064"><span class="linenos">4064</span></a>                             <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA-4065"><a href="#GA-4065"><span class="linenos">4065</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4066"><a href="#GA-4066"><span class="linenos">4066</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA-4067"><a href="#GA-4067"><span class="linenos">4067</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA-4068"><a href="#GA-4068"><span class="linenos">4068</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="GA-4069"><a href="#GA-4069"><span class="linenos">4069</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="GA-4070"><a href="#GA-4070"><span class="linenos">4070</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-4071"><a href="#GA-4071"><span class="linenos">4071</span></a>                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA-4072"><a href="#GA-4072"><span class="linenos">4072</span></a>                                           <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA-4073"><a href="#GA-4073"><span class="linenos">4073</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4074"><a href="#GA-4074"><span class="linenos">4074</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA-4075"><a href="#GA-4075"><span class="linenos">4075</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA-4076"><a href="#GA-4076"><span class="linenos">4076</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="GA-4077"><a href="#GA-4077"><span class="linenos">4077</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="GA-4078"><a href="#GA-4078"><span class="linenos">4078</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="GA-4079"><a href="#GA-4079"><span class="linenos">4079</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="GA-4080"><a href="#GA-4080"><span class="linenos">4080</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA-4081"><a href="#GA-4081"><span class="linenos">4081</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="GA-4082"><a href="#GA-4082"><span class="linenos">4082</span></a>                                <span class="k">break</span>
</span><span id="GA-4083"><a href="#GA-4083"><span class="linenos">4083</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA-4084"><a href="#GA-4084"><span class="linenos">4084</span></a>                                                       <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA-4085"><a href="#GA-4085"><span class="linenos">4085</span></a>                                                       <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA-4086"><a href="#GA-4086"><span class="linenos">4086</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA-4087"><a href="#GA-4087"><span class="linenos">4087</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GA-4088"><a href="#GA-4088"><span class="linenos">4088</span></a>
</span><span id="GA-4089"><a href="#GA-4089"><span class="linenos">4089</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="GA-4090"><a href="#GA-4090"><span class="linenos">4090</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA-4091"><a href="#GA-4091"><span class="linenos">4091</span></a>
</span><span id="GA-4092"><a href="#GA-4092"><span class="linenos">4092</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-4093"><a href="#GA-4093"><span class="linenos">4093</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA-4094"><a href="#GA-4094"><span class="linenos">4094</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA-4095"><a href="#GA-4095"><span class="linenos">4095</span></a>
</span><span id="GA-4096"><a href="#GA-4096"><span class="linenos">4096</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA-4097"><a href="#GA-4097"><span class="linenos">4097</span></a>
</span><span id="GA-4098"><a href="#GA-4098"><span class="linenos">4098</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span><span id="GA-4099"><a href="#GA-4099"><span class="linenos">4099</span></a>
</span><span id="GA-4100"><a href="#GA-4100"><span class="linenos">4100</span></a>
</span><span id="GA-4101"><a href="#GA-4101"><span class="linenos">4101</span></a>    <span class="k">def</span> <span class="nf">close_parallel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA-4102"><a href="#GA-4102"><span class="linenos">4102</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA-4103"><a href="#GA-4103"><span class="linenos">4103</span></a>            <span class="c1"># print(&#39;before close&#39;)</span>
</span><span id="GA-4104"><a href="#GA-4104"><span class="linenos">4104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="GA-4105"><a href="#GA-4105"><span class="linenos">4105</span></a>            <span class="c1"># print(&#39;after close&#39;)</span>
</span><span id="GA-4106"><a href="#GA-4106"><span class="linenos">4106</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="GA-4107"><a href="#GA-4107"><span class="linenos">4107</span></a>            <span class="c1"># print(&#39;after join&#39;)</span>
</span><span id="GA-4108"><a href="#GA-4108"><span class="linenos">4108</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
</span><span id="GA-4109"><a href="#GA-4109"><span class="linenos">4109</span></a>            <span class="c1"># print(&#39;after terminate&#39;)</span>
</span><span id="GA-4110"><a href="#GA-4110"><span class="linenos">4110</span></a>
</span><span id="GA-4111"><a href="#GA-4111"><span class="linenos">4111</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="GA-4112"><a href="#GA-4112"><span class="linenos">4112</span></a>
</span><span id="GA-4113"><a href="#GA-4113"><span class="linenos">4113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA-4114"><a href="#GA-4114"><span class="linenos">4114</span></a><span class="sd">        Saves the genetic algorithm instance:</span>
</span><span id="GA-4115"><a href="#GA-4115"><span class="linenos">4115</span></a><span class="sd">            -filename: Name of the file to save the instance. No extension is needed.</span>
</span><span id="GA-4116"><a href="#GA-4116"><span class="linenos">4116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA-4117"><a href="#GA-4117"><span class="linenos">4117</span></a>
</span><span id="GA-4118"><a href="#GA-4118"><span class="linenos">4118</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.pkl&quot;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="GA-4119"><a href="#GA-4119"><span class="linenos">4119</span></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="GA.__init__" class="classattr">
                                        <input id="GA.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GA</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">num_generations</span>,</span><span class="param">	<span class="n">num_parents_mating</span>,</span><span class="param">	<span class="n">fitness_func</span>,</span><span class="param">	<span class="n">args</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">initial_population</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">sol_per_pop</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">num_genes</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">init_range_low</span><span class="o">=-</span><span class="mi">4</span>,</span><span class="param">	<span class="n">init_range_high</span><span class="o">=</span><span class="mi">4</span>,</span><span class="param">	gene_type=&lt;class &#x27;float&#x27;&gt;,</span><span class="param">	<span class="n">parent_selection_type</span><span class="o">=</span><span class="s1">&#39;sss&#39;</span>,</span><span class="param">	<span class="n">keep_parents</span><span class="o">=-</span><span class="mi">1</span>,</span><span class="param">	<span class="n">keep_elitism</span><span class="o">=</span><span class="mi">1</span>,</span><span class="param">	<span class="n">K_tournament</span><span class="o">=</span><span class="mi">3</span>,</span><span class="param">	<span class="n">crossover_type</span><span class="o">=</span><span class="s1">&#39;single_point&#39;</span>,</span><span class="param">	<span class="n">crossover_probability</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">mutation_type</span><span class="o">=</span><span class="s1">&#39;random&#39;</span>,</span><span class="param">	<span class="n">mutation_probability</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">mutation_percent_genes</span><span class="o">=</span><span class="s1">&#39;default&#39;</span>,</span><span class="param">	<span class="n">mutation_num_genes</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">random_mutation_min_val</span><span class="o">=-</span><span class="mf">1.0</span>,</span><span class="param">	<span class="n">random_mutation_max_val</span><span class="o">=</span><span class="mf">1.0</span>,</span><span class="param">	<span class="n">gene_space</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">allow_duplicate_genes</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">on_start</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_fitness</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_parents</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_crossover</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_mutation</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">callback_generation</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_generation</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">on_stop</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">delay_after_gen</span><span class="o">=</span><span class="mf">0.0</span>,</span><span class="param">	<span class="n">save_best_solutions</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">save_solutions</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">suppress_warnings</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">stop_criteria</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">ftol_abs</span><span class="o">=</span><span class="mf">0.0</span>,</span><span class="param">	<span class="n">parallel_processing</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">random_seed</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="GA.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.__init__-67"><a href="#GA.__init__-67"><span class="linenos">  67</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA.__init__-68"><a href="#GA.__init__-68"><span class="linenos">  68</span></a>                 <span class="n">num_generations</span><span class="p">,</span>
</span><span id="GA.__init__-69"><a href="#GA.__init__-69"><span class="linenos">  69</span></a>                 <span class="n">num_parents_mating</span><span class="p">,</span>
</span><span id="GA.__init__-70"><a href="#GA.__init__-70"><span class="linenos">  70</span></a>                 <span class="n">fitness_func</span><span class="p">,</span>
</span><span id="GA.__init__-71"><a href="#GA.__init__-71"><span class="linenos">  71</span></a>                 <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-72"><a href="#GA.__init__-72"><span class="linenos">  72</span></a>                 <span class="n">initial_population</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-73"><a href="#GA.__init__-73"><span class="linenos">  73</span></a>                 <span class="n">sol_per_pop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-74"><a href="#GA.__init__-74"><span class="linenos">  74</span></a>                 <span class="n">num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-75"><a href="#GA.__init__-75"><span class="linenos">  75</span></a>                 <span class="n">init_range_low</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span>
</span><span id="GA.__init__-76"><a href="#GA.__init__-76"><span class="linenos">  76</span></a>                 <span class="n">init_range_high</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
</span><span id="GA.__init__-77"><a href="#GA.__init__-77"><span class="linenos">  77</span></a>                 <span class="n">gene_type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
</span><span id="GA.__init__-78"><a href="#GA.__init__-78"><span class="linenos">  78</span></a>                 <span class="n">parent_selection_type</span><span class="o">=</span><span class="s2">&quot;sss&quot;</span><span class="p">,</span>
</span><span id="GA.__init__-79"><a href="#GA.__init__-79"><span class="linenos">  79</span></a>                 <span class="n">keep_parents</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
</span><span id="GA.__init__-80"><a href="#GA.__init__-80"><span class="linenos">  80</span></a>                 <span class="n">keep_elitism</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span id="GA.__init__-81"><a href="#GA.__init__-81"><span class="linenos">  81</span></a>                 <span class="n">K_tournament</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA.__init__-82"><a href="#GA.__init__-82"><span class="linenos">  82</span></a>                 <span class="n">crossover_type</span><span class="o">=</span><span class="s2">&quot;single_point&quot;</span><span class="p">,</span>
</span><span id="GA.__init__-83"><a href="#GA.__init__-83"><span class="linenos">  83</span></a>                 <span class="n">crossover_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-84"><a href="#GA.__init__-84"><span class="linenos">  84</span></a>                 <span class="n">mutation_type</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span>
</span><span id="GA.__init__-85"><a href="#GA.__init__-85"><span class="linenos">  85</span></a>                 <span class="n">mutation_probability</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-86"><a href="#GA.__init__-86"><span class="linenos">  86</span></a>                 <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA.__init__-87"><a href="#GA.__init__-87"><span class="linenos">  87</span></a>                 <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span>
</span><span id="GA.__init__-88"><a href="#GA.__init__-88"><span class="linenos">  88</span></a>                 <span class="n">mutation_num_genes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-89"><a href="#GA.__init__-89"><span class="linenos">  89</span></a>                 <span class="n">random_mutation_min_val</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="GA.__init__-90"><a href="#GA.__init__-90"><span class="linenos">  90</span></a>                 <span class="n">random_mutation_max_val</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="GA.__init__-91"><a href="#GA.__init__-91"><span class="linenos">  91</span></a>                 <span class="n">gene_space</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-92"><a href="#GA.__init__-92"><span class="linenos">  92</span></a>                 <span class="n">allow_duplicate_genes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.__init__-93"><a href="#GA.__init__-93"><span class="linenos">  93</span></a>                 <span class="n">on_start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-94"><a href="#GA.__init__-94"><span class="linenos">  94</span></a>                 <span class="n">on_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-95"><a href="#GA.__init__-95"><span class="linenos">  95</span></a>                 <span class="n">on_parents</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-96"><a href="#GA.__init__-96"><span class="linenos">  96</span></a>                 <span class="n">on_crossover</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-97"><a href="#GA.__init__-97"><span class="linenos">  97</span></a>                 <span class="n">on_mutation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-98"><a href="#GA.__init__-98"><span class="linenos">  98</span></a>                 <span class="n">callback_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-99"><a href="#GA.__init__-99"><span class="linenos">  99</span></a>                 <span class="n">on_generation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-100"><a href="#GA.__init__-100"><span class="linenos"> 100</span></a>                 <span class="n">on_stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-101"><a href="#GA.__init__-101"><span class="linenos"> 101</span></a>                 <span class="n">delay_after_gen</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="GA.__init__-102"><a href="#GA.__init__-102"><span class="linenos"> 102</span></a>                 <span class="n">save_best_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA.__init__-103"><a href="#GA.__init__-103"><span class="linenos"> 103</span></a>                 <span class="n">save_solutions</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA.__init__-104"><a href="#GA.__init__-104"><span class="linenos"> 104</span></a>                 <span class="n">suppress_warnings</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="GA.__init__-105"><a href="#GA.__init__-105"><span class="linenos"> 105</span></a>                 <span class="n">stop_criteria</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-106"><a href="#GA.__init__-106"><span class="linenos"> 106</span></a>                 <span class="n">ftol_abs</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="GA.__init__-107"><a href="#GA.__init__-107"><span class="linenos"> 107</span></a>                 <span class="n">parallel_processing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.__init__-108"><a href="#GA.__init__-108"><span class="linenos"> 108</span></a>                 <span class="n">random_seed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-109"><a href="#GA.__init__-109"><span class="linenos"> 109</span></a>
</span><span id="GA.__init__-110"><a href="#GA.__init__-110"><span class="linenos"> 110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.__init__-111"><a href="#GA.__init__-111"><span class="linenos"> 111</span></a><span class="sd">        The constructor of the GA class accepts all parameters required to create an instance of the GA class. It validates such parameters.</span>
</span><span id="GA.__init__-112"><a href="#GA.__init__-112"><span class="linenos"> 112</span></a>
</span><span id="GA.__init__-113"><a href="#GA.__init__-113"><span class="linenos"> 113</span></a><span class="sd">        num_generations: Number of generations.</span>
</span><span id="GA.__init__-114"><a href="#GA.__init__-114"><span class="linenos"> 114</span></a><span class="sd">        num_parents_mating: Number of solutions to be selected as parents in the mating pool.</span>
</span><span id="GA.__init__-115"><a href="#GA.__init__-115"><span class="linenos"> 115</span></a>
</span><span id="GA.__init__-116"><a href="#GA.__init__-116"><span class="linenos"> 116</span></a><span class="sd">        fitness_func: Accepts a function that must accept 2 parameters (a single solution and its index in the population) and return the fitness value of the solution. Available starting from PyGAD 1.0.17 until 1.0.20 with a single parameter representing the solution. Changed in PyGAD 2.0.0 and higher to include the second parameter representing the solution index.</span>
</span><span id="GA.__init__-117"><a href="#GA.__init__-117"><span class="linenos"> 117</span></a>
</span><span id="GA.__init__-118"><a href="#GA.__init__-118"><span class="linenos"> 118</span></a><span class="sd">        initial_population: A user-defined initial population. It is useful when the user wants to start the generations with a custom initial population. It defaults to None which means no initial population is specified by the user. In this case, PyGAD creates an initial population using the &#39;sol_per_pop&#39; and &#39;num_genes&#39; parameters. An exception is raised if the &#39;initial_population&#39; is None while any of the 2 parameters (&#39;sol_per_pop&#39; or &#39;num_genes&#39;) is also None.</span>
</span><span id="GA.__init__-119"><a href="#GA.__init__-119"><span class="linenos"> 119</span></a><span class="sd">        sol_per_pop: Number of solutions in the population.</span>
</span><span id="GA.__init__-120"><a href="#GA.__init__-120"><span class="linenos"> 120</span></a><span class="sd">        num_genes: Number of parameters in the function.</span>
</span><span id="GA.__init__-121"><a href="#GA.__init__-121"><span class="linenos"> 121</span></a>
</span><span id="GA.__init__-122"><a href="#GA.__init__-122"><span class="linenos"> 122</span></a><span class="sd">        init_range_low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="GA.__init__-123"><a href="#GA.__init__-123"><span class="linenos"> 123</span></a><span class="sd">        init_range_high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="GA.__init__-124"><a href="#GA.__init__-124"><span class="linenos"> 124</span></a><span class="sd">        # It is OK to set the value of any of the 2 parameters (&#39;init_range_low&#39; and &#39;init_range_high&#39;) to be equal, higher or lower than the other parameter (i.e. init_range_low is not needed to be lower than init_range_high).</span>
</span><span id="GA.__init__-125"><a href="#GA.__init__-125"><span class="linenos"> 125</span></a>
</span><span id="GA.__init__-126"><a href="#GA.__init__-126"><span class="linenos"> 126</span></a><span class="sd">        gene_type: The type of the gene. It is assigned to any of these types (int, float, numpy.int, numpy.int8, numpy.int16, numpy.int32, numpy.int64, numpy.uint, numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64, numpy.float, numpy.float16, numpy.float32, numpy.float64) and forces all the genes to be of that type.</span>
</span><span id="GA.__init__-127"><a href="#GA.__init__-127"><span class="linenos"> 127</span></a>
</span><span id="GA.__init__-128"><a href="#GA.__init__-128"><span class="linenos"> 128</span></a><span class="sd">        parent_selection_type: Type of parent selection.</span>
</span><span id="GA.__init__-129"><a href="#GA.__init__-129"><span class="linenos"> 129</span></a><span class="sd">        keep_parents: If 0, this means no parent in the current population will be used in the next population. If -1, this means all parents in the current population will be used in the next population. If set to a value &gt; 0, then the specified value refers to the number of parents in the current population to be used in the next population. Some parent selection operators such as rank selection, favor population diversity and therefore keeping the parents in the next generation can be beneficial. However, some other parent selection operators, such as roulette wheel selection (RWS), have higher selection pressure and keeping more than one parent in the next generation can seriously harm population diversity. This parameter have an effect only when the keep_elitism parameter is 0. Thanks to Prof. Fernando Jiménez Barrionuevo (http://webs.um.es/fernan) for editing this sentence.</span>
</span><span id="GA.__init__-130"><a href="#GA.__init__-130"><span class="linenos"> 130</span></a><span class="sd">        K_tournament: When the value of &#39;parent_selection_type&#39; is &#39;tournament&#39;, the &#39;K_tournament&#39; parameter specifies the number of solutions from which a parent is selected randomly.</span>
</span><span id="GA.__init__-131"><a href="#GA.__init__-131"><span class="linenos"> 131</span></a>
</span><span id="GA.__init__-132"><a href="#GA.__init__-132"><span class="linenos"> 132</span></a><span class="sd">        keep_elitism: Added in PyGAD 2.18.0. It can take the value 0 or a positive integer that satisfies (0 &lt;= keep_elitism &lt;= sol_per_pop). It defaults to 1 which means only the best solution in the current generation is kept in the next generation. If assigned 0, this means it has no effect. If assigned a positive integer K, then the best K solutions are kept in the next generation. It cannot be assigned a value greater than the value assigned to the sol_per_pop parameter. If this parameter has a value different than 0, then the keep_parents parameter will have no effect.</span>
</span><span id="GA.__init__-133"><a href="#GA.__init__-133"><span class="linenos"> 133</span></a>
</span><span id="GA.__init__-134"><a href="#GA.__init__-134"><span class="linenos"> 134</span></a><span class="sd">        crossover_type: Type of the crossover opreator. If  crossover_type=None, then the crossover step is bypassed which means no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="GA.__init__-135"><a href="#GA.__init__-135"><span class="linenos"> 135</span></a><span class="sd">        crossover_probability: The probability of selecting a solution for the crossover operation. If the solution probability is &lt;= crossover_probability, the solution is selected. The value must be between 0 and 1 inclusive.</span>
</span><span id="GA.__init__-136"><a href="#GA.__init__-136"><span class="linenos"> 136</span></a>
</span><span id="GA.__init__-137"><a href="#GA.__init__-137"><span class="linenos"> 137</span></a><span class="sd">        mutation_type: Type of the mutation opreator. If mutation_type=None, then the mutation step is bypassed which means no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="GA.__init__-138"><a href="#GA.__init__-138"><span class="linenos"> 138</span></a><span class="sd">        mutation_probability: The probability of selecting a gene for the mutation operation. If the gene probability is &lt;= mutation_probability, the gene is selected. It accepts either a single value for fixed mutation or a list/tuple/numpy.ndarray of 2 values for adaptive mutation. The values must be between 0 and 1 inclusive. If specified, then no need for the 2 parameters mutation_percent_genes and mutation_num_genes.</span>
</span><span id="GA.__init__-139"><a href="#GA.__init__-139"><span class="linenos"> 139</span></a>
</span><span id="GA.__init__-140"><a href="#GA.__init__-140"><span class="linenos"> 140</span></a><span class="sd">        mutation_by_replacement: An optional bool parameter. It works only when the selected type of mutation is random (mutation_type=&quot;random&quot;). In this case, setting mutation_by_replacement=True means replace the gene by the randomly generated value. If False, then it has no effect and random mutation works by adding the random value to the gene.</span>
</span><span id="GA.__init__-141"><a href="#GA.__init__-141"><span class="linenos"> 141</span></a>
</span><span id="GA.__init__-142"><a href="#GA.__init__-142"><span class="linenos"> 142</span></a><span class="sd">        mutation_percent_genes: Percentage of genes to mutate which defaults to the string &#39;default&#39; which means 10%. This parameter has no action if any of the 2 parameters mutation_probability or mutation_num_genes exist.</span>
</span><span id="GA.__init__-143"><a href="#GA.__init__-143"><span class="linenos"> 143</span></a><span class="sd">        mutation_num_genes: Number of genes to mutate which defaults to None. If the parameter mutation_num_genes exists, then no need for the parameter mutation_percent_genes. This parameter has no action if the mutation_probability parameter exists.</span>
</span><span id="GA.__init__-144"><a href="#GA.__init__-144"><span class="linenos"> 144</span></a><span class="sd">        random_mutation_min_val: The minimum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to -1.0.</span>
</span><span id="GA.__init__-145"><a href="#GA.__init__-145"><span class="linenos"> 145</span></a><span class="sd">        random_mutation_max_val: The maximum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to 1.0.</span>
</span><span id="GA.__init__-146"><a href="#GA.__init__-146"><span class="linenos"> 146</span></a>
</span><span id="GA.__init__-147"><a href="#GA.__init__-147"><span class="linenos"> 147</span></a><span class="sd">        gene_space: It accepts a list of all possible values of the gene. This list is used in the mutation step. Should be used only if the gene space is a set of discrete values. No need for the 2 parameters (random_mutation_min_val and random_mutation_max_val) if the parameter gene_space exists. Added in PyGAD 2.5.0. In PyGAD 2.11.0, the gene_space can be assigned a dict.</span>
</span><span id="GA.__init__-148"><a href="#GA.__init__-148"><span class="linenos"> 148</span></a>
</span><span id="GA.__init__-149"><a href="#GA.__init__-149"><span class="linenos"> 149</span></a><span class="sd">        on_start: Accepts a function to be called only once before the genetic algorithm starts its evolution. This function must accept a single parameter representing the instance of the genetic algorithm. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-150"><a href="#GA.__init__-150"><span class="linenos"> 150</span></a><span class="sd">        on_fitness: Accepts a function to be called after calculating the fitness values of all solutions in the population. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of all solutions&#39; fitness values. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-151"><a href="#GA.__init__-151"><span class="linenos"> 151</span></a><span class="sd">        on_parents: Accepts a function to be called after selecting the parents that mates. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the selected parents. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-152"><a href="#GA.__init__-152"><span class="linenos"> 152</span></a><span class="sd">        on_crossover: Accepts a function to be called each time the crossover operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring generated using crossover. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-153"><a href="#GA.__init__-153"><span class="linenos"> 153</span></a><span class="sd">        on_mutation: Accepts a function to be called each time the mutation operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring after applying the mutation. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-154"><a href="#GA.__init__-154"><span class="linenos"> 154</span></a><span class="sd">        callback_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and should be replaced by the on_generation parameter.</span>
</span><span id="GA.__init__-155"><a href="#GA.__init__-155"><span class="linenos"> 155</span></a><span class="sd">        on_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned &quot;stop&quot;, then the run() method stops without completing the other generations. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-156"><a href="#GA.__init__-156"><span class="linenos"> 156</span></a><span class="sd">        on_stop: Accepts a function to be called only once exactly before the genetic algorithm stops or when it completes all the generations. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of fitness values of the last population&#39;s solutions. Added in PyGAD 2.6.0.</span>
</span><span id="GA.__init__-157"><a href="#GA.__init__-157"><span class="linenos"> 157</span></a>
</span><span id="GA.__init__-158"><a href="#GA.__init__-158"><span class="linenos"> 158</span></a><span class="sd">        delay_after_gen: Added in PyGAD 2.4.0. It accepts a non-negative number specifying the number of seconds to wait after a generation completes and before going to the next generation. It defaults to 0.0 which means no delay after the generation.</span>
</span><span id="GA.__init__-159"><a href="#GA.__init__-159"><span class="linenos"> 159</span></a>
</span><span id="GA.__init__-160"><a href="#GA.__init__-160"><span class="linenos"> 160</span></a><span class="sd">        save_best_solutions: Added in PyGAD 2.9.0 and its type is bool. If True, then the best solution in each generation is saved into the &#39;best_solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations or the number of genes is large.</span>
</span><span id="GA.__init__-161"><a href="#GA.__init__-161"><span class="linenos"> 161</span></a><span class="sd">        save_solutions: Added in PyGAD 2.15.0 and its type is bool. If True, then all solutions in each generation are saved into the &#39;solutions&#39; attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.</span>
</span><span id="GA.__init__-162"><a href="#GA.__init__-162"><span class="linenos"> 162</span></a>
</span><span id="GA.__init__-163"><a href="#GA.__init__-163"><span class="linenos"> 163</span></a><span class="sd">        suppress_warnings: Added in PyGAD 2.10.0 and its type is bool. If True, then no warning messages will be displayed. It defaults to False.</span>
</span><span id="GA.__init__-164"><a href="#GA.__init__-164"><span class="linenos"> 164</span></a>
</span><span id="GA.__init__-165"><a href="#GA.__init__-165"><span class="linenos"> 165</span></a><span class="sd">        allow_duplicate_genes: Added in PyGAD 2.13.0. If True, then a solution/chromosome may have duplicate gene values. If False, then each gene will have a unique value in its solution.</span>
</span><span id="GA.__init__-166"><a href="#GA.__init__-166"><span class="linenos"> 166</span></a>
</span><span id="GA.__init__-167"><a href="#GA.__init__-167"><span class="linenos"> 167</span></a><span class="sd">        stop_criteria: Added in PyGAD 2.15.0. It is assigned to some criteria to stop the evolution if at least one criterion holds.</span>
</span><span id="GA.__init__-168"><a href="#GA.__init__-168"><span class="linenos"> 168</span></a>
</span><span id="GA.__init__-169"><a href="#GA.__init__-169"><span class="linenos"> 169</span></a><span class="sd">        parallel_processing: Added in PyGAD 2.17.0. Defaults to `None` which means no parallel processing is used. If a positive integer is assigned, it specifies the number of threads to be used. If a list or a tuple of exactly 2 elements is assigned, then: 1) The first element can be either &quot;process&quot; or &quot;thread&quot; to specify whether processes or threads are used, respectively. 2) The second element can be: 1) A positive integer to select the maximum number of processes or threads to be used. 2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;. 3) None to use the default value as calculated by the concurrent.futures module.</span>
</span><span id="GA.__init__-170"><a href="#GA.__init__-170"><span class="linenos"> 170</span></a>
</span><span id="GA.__init__-171"><a href="#GA.__init__-171"><span class="linenos"> 171</span></a><span class="sd">        random_seed: Added in PyGAD 2.18.0. It defines the random seed to be used by the random function generators (we use random functions in the NumPy and random modules). This helps to reproduce the same results by setting the same random seed.</span>
</span><span id="GA.__init__-172"><a href="#GA.__init__-172"><span class="linenos"> 172</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.__init__-173"><a href="#GA.__init__-173"><span class="linenos"> 173</span></a>
</span><span id="GA.__init__-174"><a href="#GA.__init__-174"><span class="linenos"> 174</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span> <span class="o">=</span> <span class="n">random_seed</span>
</span><span id="GA.__init__-175"><a href="#GA.__init__-175"><span class="linenos"> 175</span></a>        <span class="k">if</span> <span class="n">random_seed</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-176"><a href="#GA.__init__-176"><span class="linenos"> 176</span></a>            <span class="k">pass</span>
</span><span id="GA.__init__-177"><a href="#GA.__init__-177"><span class="linenos"> 177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-178"><a href="#GA.__init__-178"><span class="linenos"> 178</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="GA.__init__-179"><a href="#GA.__init__-179"><span class="linenos"> 179</span></a>            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_seed</span><span class="p">)</span>
</span><span id="GA.__init__-180"><a href="#GA.__init__-180"><span class="linenos"> 180</span></a>
</span><span id="GA.__init__-181"><a href="#GA.__init__-181"><span class="linenos"> 181</span></a>        <span class="c1"># If suppress_warnings is bool and its valud is False, then print warning messages.</span>
</span><span id="GA.__init__-182"><a href="#GA.__init__-182"><span class="linenos"> 182</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA.__init__-183"><a href="#GA.__init__-183"><span class="linenos"> 183</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span> <span class="o">=</span> <span class="n">suppress_warnings</span>
</span><span id="GA.__init__-184"><a href="#GA.__init__-184"><span class="linenos"> 184</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-185"><a href="#GA.__init__-185"><span class="linenos"> 185</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-186"><a href="#GA.__init__-186"><span class="linenos"> 186</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-187"><a href="#GA.__init__-187"><span class="linenos"> 187</span></a>                <span class="s2">&quot;The expected type of the &#39;suppress_warnings&#39; parameter is bool but </span><span class="si">{suppress_warnings_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-188"><a href="#GA.__init__-188"><span class="linenos"> 188</span></a>                    <span class="n">suppress_warnings_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">suppress_warnings</span><span class="p">)))</span>
</span><span id="GA.__init__-189"><a href="#GA.__init__-189"><span class="linenos"> 189</span></a>
</span><span id="GA.__init__-190"><a href="#GA.__init__-190"><span class="linenos"> 190</span></a>        <span class="c1"># Validating mutation_by_replacement</span>
</span><span id="GA.__init__-191"><a href="#GA.__init__-191"><span class="linenos"> 191</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="GA.__init__-192"><a href="#GA.__init__-192"><span class="linenos"> 192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-193"><a href="#GA.__init__-193"><span class="linenos"> 193</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-194"><a href="#GA.__init__-194"><span class="linenos"> 194</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_by_replacement&#39; parameter is bool but (</span><span class="si">{mutation_by_replacement_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-195"><a href="#GA.__init__-195"><span class="linenos"> 195</span></a>                    <span class="n">mutation_by_replacement_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_by_replacement</span><span class="p">)))</span>
</span><span id="GA.__init__-196"><a href="#GA.__init__-196"><span class="linenos"> 196</span></a>
</span><span id="GA.__init__-197"><a href="#GA.__init__-197"><span class="linenos"> 197</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span> <span class="o">=</span> <span class="n">mutation_by_replacement</span>
</span><span id="GA.__init__-198"><a href="#GA.__init__-198"><span class="linenos"> 198</span></a>
</span><span id="GA.__init__-199"><a href="#GA.__init__-199"><span class="linenos"> 199</span></a>        <span class="c1"># Validate gene_space</span>
</span><span id="GA.__init__-200"><a href="#GA.__init__-200"><span class="linenos"> 200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-201"><a href="#GA.__init__-201"><span class="linenos"> 201</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-202"><a href="#GA.__init__-202"><span class="linenos"> 202</span></a>            <span class="k">pass</span>
</span><span id="GA.__init__-203"><a href="#GA.__init__-203"><span class="linenos"> 203</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-204"><a href="#GA.__init__-204"><span class="linenos"> 204</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-205"><a href="#GA.__init__-205"><span class="linenos"> 205</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-206"><a href="#GA.__init__-206"><span class="linenos"> 206</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;gene_space&#39; cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-207"><a href="#GA.__init__-207"><span class="linenos"> 207</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-208"><a href="#GA.__init__-208"><span class="linenos"> 208</span></a>                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA.__init__-209"><a href="#GA.__init__-209"><span class="linenos"> 209</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-210"><a href="#GA.__init__-210"><span class="linenos"> 210</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-211"><a href="#GA.__init__-211"><span class="linenos"> 211</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-212"><a href="#GA.__init__-212"><span class="linenos"> 212</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-213"><a href="#GA.__init__-213"><span class="linenos"> 213</span></a>                                <span class="s2">&quot;The element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39; with type </span><span class="si">{el_type}</span><span class="s2"> cannot be empty (i.e. its length must be &gt;= 0).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-214"><a href="#GA.__init__-214"><span class="linenos"> 214</span></a>                                    <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA.__init__-215"><a href="#GA.__init__-215"><span class="linenos"> 215</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-216"><a href="#GA.__init__-216"><span class="linenos"> 216</span></a>                            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">el</span><span class="p">:</span>
</span><span id="GA.__init__-217"><a href="#GA.__init__-217"><span class="linenos"> 217</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span> <span class="o">+</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="GA.__init__-218"><a href="#GA.__init__-218"><span class="linenos"> 218</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-219"><a href="#GA.__init__-219"><span class="linenos"> 219</span></a>                                        <span class="s2">&quot;All values in the sublists inside the &#39;gene_space&#39; attribute must be numeric of type int/float/None but (</span><span class="si">{val}</span><span class="s2">) of type </span><span class="si">{typ}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-220"><a href="#GA.__init__-220"><span class="linenos"> 220</span></a>                                            <span class="n">val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)))</span>
</span><span id="GA.__init__-221"><a href="#GA.__init__-221"><span class="linenos"> 221</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.__init__-222"><a href="#GA.__init__-222"><span class="linenos"> 222</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-223"><a href="#GA.__init__-223"><span class="linenos"> 223</span></a>                        <span class="k">pass</span>
</span><span id="GA.__init__-224"><a href="#GA.__init__-224"><span class="linenos"> 224</span></a>                        <span class="c1"># self.gene_space_nested = True</span>
</span><span id="GA.__init__-225"><a href="#GA.__init__-225"><span class="linenos"> 225</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.__init__-226"><a href="#GA.__init__-226"><span class="linenos"> 226</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-227"><a href="#GA.__init__-227"><span class="linenos"> 227</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA.__init__-228"><a href="#GA.__init__-228"><span class="linenos"> 228</span></a>                                <span class="k">pass</span>
</span><span id="GA.__init__-229"><a href="#GA.__init__-229"><span class="linenos"> 229</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-230"><a href="#GA.__init__-230"><span class="linenos"> 230</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-231"><a href="#GA.__init__-231"><span class="linenos"> 231</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-232"><a href="#GA.__init__-232"><span class="linenos"> 232</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-233"><a href="#GA.__init__-233"><span class="linenos"> 233</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA.__init__-234"><a href="#GA.__init__-234"><span class="linenos"> 234</span></a>                        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="GA.__init__-235"><a href="#GA.__init__-235"><span class="linenos"> 235</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA.__init__-236"><a href="#GA.__init__-236"><span class="linenos"> 236</span></a>                                <span class="k">pass</span>
</span><span id="GA.__init__-237"><a href="#GA.__init__-237"><span class="linenos"> 237</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-238"><a href="#GA.__init__-238"><span class="linenos"> 238</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-239"><a href="#GA.__init__-239"><span class="linenos"> 239</span></a>                                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-240"><a href="#GA.__init__-240"><span class="linenos"> 240</span></a>                                    <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it can have the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-241"><a href="#GA.__init__-241"><span class="linenos"> 241</span></a>                                        <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">el</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA.__init__-242"><a href="#GA.__init__-242"><span class="linenos"> 242</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-243"><a href="#GA.__init__-243"><span class="linenos"> 243</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-244"><a href="#GA.__init__-244"><span class="linenos"> 244</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-245"><a href="#GA.__init__-245"><span class="linenos"> 245</span></a>                                <span class="s2">&quot;When an element in the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-246"><a href="#GA.__init__-246"><span class="linenos"> 246</span></a>                                    <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="GA.__init__-247"><a href="#GA.__init__-247"><span class="linenos"> 247</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.__init__-248"><a href="#GA.__init__-248"><span class="linenos"> 248</span></a>                    <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">):</span>
</span><span id="GA.__init__-249"><a href="#GA.__init__-249"><span class="linenos"> 249</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-250"><a href="#GA.__init__-250"><span class="linenos"> 250</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-251"><a href="#GA.__init__-251"><span class="linenos"> 251</span></a>                            <span class="s2">&quot;Unexpected type </span><span class="si">{el_type}</span><span class="s2"> for the element indexed </span><span class="si">{index}</span><span class="s2"> of &#39;gene_space&#39;. The accepted types are list/tuple/range/numpy.ndarray of numbers, a single number (int/float), or None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-252"><a href="#GA.__init__-252"><span class="linenos"> 252</span></a>                                <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">el_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA.__init__-253"><a href="#GA.__init__-253"><span class="linenos"> 253</span></a>
</span><span id="GA.__init__-254"><a href="#GA.__init__-254"><span class="linenos"> 254</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.__init__-255"><a href="#GA.__init__-255"><span class="linenos"> 255</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-256"><a href="#GA.__init__-256"><span class="linenos"> 256</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA.__init__-257"><a href="#GA.__init__-257"><span class="linenos"> 257</span></a>                    <span class="k">pass</span>
</span><span id="GA.__init__-258"><a href="#GA.__init__-258"><span class="linenos"> 258</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-259"><a href="#GA.__init__-259"><span class="linenos"> 259</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-260"><a href="#GA.__init__-260"><span class="linenos"> 260</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-261"><a href="#GA.__init__-261"><span class="linenos"> 261</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-262"><a href="#GA.__init__-262"><span class="linenos"> 262</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA.__init__-263"><a href="#GA.__init__-263"><span class="linenos"> 263</span></a>            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="GA.__init__-264"><a href="#GA.__init__-264"><span class="linenos"> 264</span></a>                <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;low&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;high&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
</span><span id="GA.__init__-265"><a href="#GA.__init__-265"><span class="linenos"> 265</span></a>                    <span class="k">pass</span>
</span><span id="GA.__init__-266"><a href="#GA.__init__-266"><span class="linenos"> 266</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-267"><a href="#GA.__init__-267"><span class="linenos"> 267</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-268"><a href="#GA.__init__-268"><span class="linenos"> 268</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-269"><a href="#GA.__init__-269"><span class="linenos"> 269</span></a>                        <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it can have only the keys &#39;low&#39;, &#39;high&#39;, and &#39;step&#39; (optional) but the following keys found: </span><span class="si">{gene_space_dict_keys}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-270"><a href="#GA.__init__-270"><span class="linenos"> 270</span></a>                            <span class="n">gene_space_dict_keys</span><span class="o">=</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
</span><span id="GA.__init__-271"><a href="#GA.__init__-271"><span class="linenos"> 271</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-272"><a href="#GA.__init__-272"><span class="linenos"> 272</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-273"><a href="#GA.__init__-273"><span class="linenos"> 273</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-274"><a href="#GA.__init__-274"><span class="linenos"> 274</span></a>                    <span class="s2">&quot;When the &#39;gene_space&#39; parameter is of type dict, then it must have only 2 items but (</span><span class="si">{num_items}</span><span class="s2">) items found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-275"><a href="#GA.__init__-275"><span class="linenos"> 275</span></a>                        <span class="n">num_items</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="o">.</span><span class="n">items</span><span class="p">())))</span>
</span><span id="GA.__init__-276"><a href="#GA.__init__-276"><span class="linenos"> 276</span></a>
</span><span id="GA.__init__-277"><a href="#GA.__init__-277"><span class="linenos"> 277</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-278"><a href="#GA.__init__-278"><span class="linenos"> 278</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-279"><a href="#GA.__init__-279"><span class="linenos"> 279</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-280"><a href="#GA.__init__-280"><span class="linenos"> 280</span></a>                <span class="s2">&quot;The expected type of &#39;gene_space&#39; is list, tuple, range, or numpy.ndarray but (</span><span class="si">{gene_space_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-281"><a href="#GA.__init__-281"><span class="linenos"> 281</span></a>                    <span class="n">gene_space_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)))</span>
</span><span id="GA.__init__-282"><a href="#GA.__init__-282"><span class="linenos"> 282</span></a>
</span><span id="GA.__init__-283"><a href="#GA.__init__-283"><span class="linenos"> 283</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="o">=</span> <span class="n">gene_space</span>
</span><span id="GA.__init__-284"><a href="#GA.__init__-284"><span class="linenos"> 284</span></a>
</span><span id="GA.__init__-285"><a href="#GA.__init__-285"><span class="linenos"> 285</span></a>        <span class="c1"># Validate init_range_low and init_range_high</span>
</span><span id="GA.__init__-286"><a href="#GA.__init__-286"><span class="linenos"> 286</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-287"><a href="#GA.__init__-287"><span class="linenos"> 287</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-288"><a href="#GA.__init__-288"><span class="linenos"> 288</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span> <span class="o">=</span> <span class="n">init_range_low</span>
</span><span id="GA.__init__-289"><a href="#GA.__init__-289"><span class="linenos"> 289</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span> <span class="o">=</span> <span class="n">init_range_high</span>
</span><span id="GA.__init__-290"><a href="#GA.__init__-290"><span class="linenos"> 290</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-291"><a href="#GA.__init__-291"><span class="linenos"> 291</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-292"><a href="#GA.__init__-292"><span class="linenos"> 292</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-293"><a href="#GA.__init__-293"><span class="linenos"> 293</span></a>                    <span class="s2">&quot;The value passed to the &#39;init_range_high&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_high_value}</span><span class="s2">) of type </span><span class="si">{init_range_high_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-294"><a href="#GA.__init__-294"><span class="linenos"> 294</span></a>                        <span class="n">init_range_high_value</span><span class="o">=</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">init_range_high_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_high</span><span class="p">)))</span>
</span><span id="GA.__init__-295"><a href="#GA.__init__-295"><span class="linenos"> 295</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-296"><a href="#GA.__init__-296"><span class="linenos"> 296</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-297"><a href="#GA.__init__-297"><span class="linenos"> 297</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-298"><a href="#GA.__init__-298"><span class="linenos"> 298</span></a>                <span class="s2">&quot;The value passed to the &#39;init_range_low&#39; parameter must be either integer or floating-point number but the value (</span><span class="si">{init_range_low_value}</span><span class="s2">) of type </span><span class="si">{init_range_low_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-299"><a href="#GA.__init__-299"><span class="linenos"> 299</span></a>                    <span class="n">init_range_low_value</span><span class="o">=</span><span class="n">init_range_low</span><span class="p">,</span> <span class="n">init_range_low_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">init_range_low</span><span class="p">)))</span>
</span><span id="GA.__init__-300"><a href="#GA.__init__-300"><span class="linenos"> 300</span></a>
</span><span id="GA.__init__-301"><a href="#GA.__init__-301"><span class="linenos"> 301</span></a>        <span class="c1"># Validate random_mutation_min_val and random_mutation_max_val</span>
</span><span id="GA.__init__-302"><a href="#GA.__init__-302"><span class="linenos"> 302</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-303"><a href="#GA.__init__-303"><span class="linenos"> 303</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-304"><a href="#GA.__init__-304"><span class="linenos"> 304</span></a>                <span class="k">if</span> <span class="n">random_mutation_min_val</span> <span class="o">==</span> <span class="n">random_mutation_max_val</span><span class="p">:</span>
</span><span id="GA.__init__-305"><a href="#GA.__init__-305"><span class="linenos"> 305</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-306"><a href="#GA.__init__-306"><span class="linenos"> 306</span></a>                        <span class="s2">&quot;The values of the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39; are equal and this causes a fixed change to all genes.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-307"><a href="#GA.__init__-307"><span class="linenos"> 307</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-308"><a href="#GA.__init__-308"><span class="linenos"> 308</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-309"><a href="#GA.__init__-309"><span class="linenos"> 309</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-310"><a href="#GA.__init__-310"><span class="linenos"> 310</span></a>                    <span class="s2">&quot;The expected type of the &#39;random_mutation_max_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_max_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-311"><a href="#GA.__init__-311"><span class="linenos"> 311</span></a>                        <span class="n">random_mutation_max_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_max_val</span><span class="p">)))</span>
</span><span id="GA.__init__-312"><a href="#GA.__init__-312"><span class="linenos"> 312</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-313"><a href="#GA.__init__-313"><span class="linenos"> 313</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-314"><a href="#GA.__init__-314"><span class="linenos"> 314</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-315"><a href="#GA.__init__-315"><span class="linenos"> 315</span></a>                <span class="s2">&quot;The expected type of the &#39;random_mutation_min_val&#39; parameter is numeric but (</span><span class="si">{random_mutation_min_val_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-316"><a href="#GA.__init__-316"><span class="linenos"> 316</span></a>                    <span class="n">random_mutation_min_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">random_mutation_min_val</span><span class="p">)))</span>
</span><span id="GA.__init__-317"><a href="#GA.__init__-317"><span class="linenos"> 317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span> <span class="o">=</span> <span class="n">random_mutation_min_val</span>
</span><span id="GA.__init__-318"><a href="#GA.__init__-318"><span class="linenos"> 318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span> <span class="o">=</span> <span class="n">random_mutation_max_val</span>
</span><span id="GA.__init__-319"><a href="#GA.__init__-319"><span class="linenos"> 319</span></a>
</span><span id="GA.__init__-320"><a href="#GA.__init__-320"><span class="linenos"> 320</span></a>        <span class="c1"># Validate gene_type</span>
</span><span id="GA.__init__-321"><a href="#GA.__init__-321"><span class="linenos"> 321</span></a>        <span class="k">if</span> <span class="n">gene_type</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-322"><a href="#GA.__init__-322"><span class="linenos"> 322</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA.__init__-323"><a href="#GA.__init__-323"><span class="linenos"> 323</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.__init__-324"><a href="#GA.__init__-324"><span class="linenos"> 324</span></a>        <span class="c1"># A single data type of float with precision.</span>
</span><span id="GA.__init__-325"><a href="#GA.__init__-325"><span class="linenos"> 325</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span> <span class="ow">and</span> <span class="p">(</span>
</span><span id="GA.__init__-326"><a href="#GA.__init__-326"><span class="linenos"> 326</span></a>                <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">or</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-327"><a href="#GA.__init__-327"><span class="linenos"> 327</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="GA.__init__-328"><a href="#GA.__init__-328"><span class="linenos"> 328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.__init__-329"><a href="#GA.__init__-329"><span class="linenos"> 329</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-330"><a href="#GA.__init__-330"><span class="linenos"> 330</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)</span> <span class="o">==</span> <span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA.__init__-331"><a href="#GA.__init__-331"><span class="linenos"> 331</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-332"><a href="#GA.__init__-332"><span class="linenos"> 332</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-333"><a href="#GA.__init__-333"><span class="linenos"> 333</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_type&#39; is nested, then it can be either [float, int&lt;precision&gt;] or with length equal to the value passed to the &#39;num_genes&#39; parameter. Instead, value </span><span class="si">{gene_type_val}</span><span class="s2"> with len(gene_type) (</span><span class="si">{len_gene_type}</span><span class="s2">) != len(num_genes) (</span><span class="si">{num_genes}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-334"><a href="#GA.__init__-334"><span class="linenos"> 334</span></a>                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">len_gene_type</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-335"><a href="#GA.__init__-335"><span class="linenos"> 335</span></a>            <span class="k">for</span> <span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gene_type</span><span class="p">):</span>
</span><span id="GA.__init__-336"><a href="#GA.__init__-336"><span class="linenos"> 336</span></a>                <span class="k">if</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-337"><a href="#GA.__init__-337"><span class="linenos"> 337</span></a>                    <span class="c1"># If the gene type is float and no precision is passed, set it to None.</span>
</span><span id="GA.__init__-338"><a href="#GA.__init__-338"><span class="linenos"> 338</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA.__init__-339"><a href="#GA.__init__-339"><span class="linenos"> 339</span></a>                <span class="k">elif</span> <span class="n">gene_type_val</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.__init__-340"><a href="#GA.__init__-340"><span class="linenos"> 340</span></a>                    <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_type_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span><span id="GA.__init__-341"><a href="#GA.__init__-341"><span class="linenos"> 341</span></a>                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-342"><a href="#GA.__init__-342"><span class="linenos"> 342</span></a>                    <span class="c1"># A float type is expected in a list/tuple/numpy.ndarray of length 2.</span>
</span><span id="GA.__init__-343"><a href="#GA.__init__-343"><span class="linenos"> 343</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-344"><a href="#GA.__init__-344"><span class="linenos"> 344</span></a>                        <span class="k">if</span> <span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-345"><a href="#GA.__init__-345"><span class="linenos"> 345</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.__init__-346"><a href="#GA.__init__-346"><span class="linenos"> 346</span></a>                                <span class="k">pass</span>
</span><span id="GA.__init__-347"><a href="#GA.__init__-347"><span class="linenos"> 347</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-348"><a href="#GA.__init__-348"><span class="linenos"> 348</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-349"><a href="#GA.__init__-349"><span class="linenos"> 349</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-350"><a href="#GA.__init__-350"><span class="linenos"> 350</span></a>                                    <span class="s2">&quot;In the &#39;gene_type&#39; parameter, the precision for float gene data types must be an integer but the element </span><span class="si">{gene_type_val}</span><span class="s2"> at index </span><span class="si">{gene_type_idx}</span><span class="s2"> has a precision of </span><span class="si">{gene_type_precision_val}</span><span class="s2"> with type </span><span class="si">{gene_type_type}</span><span class="s2"> .&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-351"><a href="#GA.__init__-351"><span class="linenos"> 351</span></a>                                        <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_precision_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="GA.__init__-352"><a href="#GA.__init__-352"><span class="linenos"> 352</span></a>                                        <span class="n">gene_type_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA.__init__-353"><a href="#GA.__init__-353"><span class="linenos"> 353</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-354"><a href="#GA.__init__-354"><span class="linenos"> 354</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-355"><a href="#GA.__init__-355"><span class="linenos"> 355</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-356"><a href="#GA.__init__-356"><span class="linenos"> 356</span></a>                                <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is expected only for float gene data types but the element </span><span class="si">{gene_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">. Note that the data type must be at index 0 followed by precision at index 1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-357"><a href="#GA.__init__-357"><span class="linenos"> 357</span></a>                                    <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA.__init__-358"><a href="#GA.__init__-358"><span class="linenos"> 358</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-359"><a href="#GA.__init__-359"><span class="linenos"> 359</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-360"><a href="#GA.__init__-360"><span class="linenos"> 360</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-361"><a href="#GA.__init__-361"><span class="linenos"> 361</span></a>                            <span class="s2">&quot;In the &#39;gene_type&#39; parameter, a precision is specified in a list/tuple/numpy.ndarray of length 2 but value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> with length </span><span class="si">{gene_type_length}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-362"><a href="#GA.__init__-362"><span class="linenos"> 362</span></a>                                <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="GA.__init__-363"><a href="#GA.__init__-363"><span class="linenos"> 363</span></a>                                <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">,</span> <span class="n">gene_type_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">)))</span>
</span><span id="GA.__init__-364"><a href="#GA.__init__-364"><span class="linenos"> 364</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-365"><a href="#GA.__init__-365"><span class="linenos"> 365</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-366"><a href="#GA.__init__-366"><span class="linenos"> 366</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-367"><a href="#GA.__init__-367"><span class="linenos"> 367</span></a>                        <span class="s2">&quot;When a list/tuple/numpy.ndarray is assigned to the &#39;gene_type&#39; parameter, then its elements must be of integer, floating-point, list, tuple, or numpy.ndarray data types but the value (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found at index </span><span class="si">{gene_type_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-368"><a href="#GA.__init__-368"><span class="linenos"> 368</span></a>                            <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type_val</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type_val</span><span class="p">),</span>
</span><span id="GA.__init__-369"><a href="#GA.__init__-369"><span class="linenos"> 369</span></a>                            <span class="n">gene_type_idx</span><span class="o">=</span><span class="n">gene_type_idx</span><span class="p">))</span>
</span><span id="GA.__init__-370"><a href="#GA.__init__-370"><span class="linenos"> 370</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span> <span class="o">=</span> <span class="n">gene_type</span>
</span><span id="GA.__init__-371"><a href="#GA.__init__-371"><span class="linenos"> 371</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-372"><a href="#GA.__init__-372"><span class="linenos"> 372</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-373"><a href="#GA.__init__-373"><span class="linenos"> 373</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-374"><a href="#GA.__init__-374"><span class="linenos"> 374</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-375"><a href="#GA.__init__-375"><span class="linenos"> 375</span></a>                <span class="s2">&quot;The value passed to the &#39;gene_type&#39; parameter must be either a single integer, floating-point, list, tuple, or numpy.ndarray but (</span><span class="si">{gene_type_val}</span><span class="s2">) of type </span><span class="si">{gene_type_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-376"><a href="#GA.__init__-376"><span class="linenos"> 376</span></a>                    <span class="n">gene_type_val</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span> <span class="n">gene_type_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">gene_type</span><span class="p">)))</span>
</span><span id="GA.__init__-377"><a href="#GA.__init__-377"><span class="linenos"> 377</span></a>
</span><span id="GA.__init__-378"><a href="#GA.__init__-378"><span class="linenos"> 378</span></a>        <span class="c1"># Build the initial population</span>
</span><span id="GA.__init__-379"><a href="#GA.__init__-379"><span class="linenos"> 379</span></a>        <span class="k">if</span> <span class="n">initial_population</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-380"><a href="#GA.__init__-380"><span class="linenos"> 380</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">sol_per_pop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-381"><a href="#GA.__init__-381"><span class="linenos"> 381</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-382"><a href="#GA.__init__-382"><span class="linenos"> 382</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-383"><a href="#GA.__init__-383"><span class="linenos"> 383</span></a>                    <span class="s2">&quot;Error creating the initial population</span><span class="se">\n\n</span><span class="s2">When the parameter initial_population is None, then neither of the 2 parameters sol_per_pop and num_genes can be None at the same time.</span><span class="se">\n</span><span class="s2">There are 2 options to prepare the initial population:</span><span class="se">\n</span><span class="s2">1) Create an initial population and assign it to the initial_population parameter. In this case, the values of the 2 parameters sol_per_pop and num_genes will be deduced.</span><span class="se">\n</span><span class="s2">2) Allow the genetic algorithm to create the initial population automatically by passing valid integer values to the sol_per_pop and num_genes parameters.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-384"><a href="#GA.__init__-384"><span class="linenos"> 384</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="GA.__init__-385"><a href="#GA.__init__-385"><span class="linenos"> 385</span></a>                <span class="c1"># Validating the number of solutions in the population (sol_per_pop)</span>
</span><span id="GA.__init__-386"><a href="#GA.__init__-386"><span class="linenos"> 386</span></a>                <span class="k">if</span> <span class="n">sol_per_pop</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-387"><a href="#GA.__init__-387"><span class="linenos"> 387</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-388"><a href="#GA.__init__-388"><span class="linenos"> 388</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-389"><a href="#GA.__init__-389"><span class="linenos"> 389</span></a>                        <span class="s2">&quot;The number of solutions in the population (sol_per_pop) must be &gt; 0 but (</span><span class="si">{sol_per_pop}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-390"><a href="#GA.__init__-390"><span class="linenos"> 390</span></a>                            <span class="n">sol_per_pop</span><span class="o">=</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA.__init__-391"><a href="#GA.__init__-391"><span class="linenos"> 391</span></a>                <span class="c1"># Validating the number of gene.</span>
</span><span id="GA.__init__-392"><a href="#GA.__init__-392"><span class="linenos"> 392</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.__init__-393"><a href="#GA.__init__-393"><span class="linenos"> 393</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-394"><a href="#GA.__init__-394"><span class="linenos"> 394</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-395"><a href="#GA.__init__-395"><span class="linenos"> 395</span></a>                        <span class="s2">&quot;The number of genes cannot be &lt;= 0 but (</span><span class="si">{num_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">num_genes</span><span class="o">=</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-396"><a href="#GA.__init__-396"><span class="linenos"> 396</span></a>                <span class="c1"># When initial_population=None and the 2 parameters sol_per_pop and num_genes have valid integer values, then the initial population is created.</span>
</span><span id="GA.__init__-397"><a href="#GA.__init__-397"><span class="linenos"> 397</span></a>                <span class="c1"># Inside the initialize_population() method, the initial_population attribute is assigned to keep the initial population accessible.</span>
</span><span id="GA.__init__-398"><a href="#GA.__init__-398"><span class="linenos"> 398</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="n">num_genes</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="GA.__init__-399"><a href="#GA.__init__-399"><span class="linenos"> 399</span></a>
</span><span id="GA.__init__-400"><a href="#GA.__init__-400"><span class="linenos"> 400</span></a>                <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="GA.__init__-401"><a href="#GA.__init__-401"><span class="linenos"> 401</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.__init__-402"><a href="#GA.__init__-402"><span class="linenos"> 402</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA.__init__-403"><a href="#GA.__init__-403"><span class="linenos"> 403</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-404"><a href="#GA.__init__-404"><span class="linenos"> 404</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-405"><a href="#GA.__init__-405"><span class="linenos"> 405</span></a>                            <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-406"><a href="#GA.__init__-406"><span class="linenos"> 406</span></a>                                <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-407"><a href="#GA.__init__-407"><span class="linenos"> 407</span></a>
</span><span id="GA.__init__-408"><a href="#GA.__init__-408"><span class="linenos"> 408</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="n">sol_per_pop</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="GA.__init__-409"><a href="#GA.__init__-409"><span class="linenos"> 409</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">init_range_low</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_range_high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GA.__init__-410"><a href="#GA.__init__-410"><span class="linenos"> 410</span></a>                                           <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.__init__-411"><a href="#GA.__init__-411"><span class="linenos"> 411</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-412"><a href="#GA.__init__-412"><span class="linenos"> 412</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-413"><a href="#GA.__init__-413"><span class="linenos"> 413</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-414"><a href="#GA.__init__-414"><span class="linenos"> 414</span></a>                    <span class="s2">&quot;The expected type of both the sol_per_pop and num_genes parameters is int but (</span><span class="si">{sol_per_pop_type}</span><span class="s2">) and </span><span class="si">{num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-415"><a href="#GA.__init__-415"><span class="linenos"> 415</span></a>                        <span class="n">sol_per_pop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">sol_per_pop</span><span class="p">),</span> <span class="n">num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">num_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-416"><a href="#GA.__init__-416"><span class="linenos"> 416</span></a>        <span class="k">elif</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-417"><a href="#GA.__init__-417"><span class="linenos"> 417</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-418"><a href="#GA.__init__-418"><span class="linenos"> 418</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-419"><a href="#GA.__init__-419"><span class="linenos"> 419</span></a>                <span class="s2">&quot;A 2D list is expected to the initail_population parameter but a (</span><span class="si">{initial_population_ndim}</span><span class="s2">-D) list found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-420"><a href="#GA.__init__-420"><span class="linenos"> 420</span></a>                    <span class="n">initial_population_ndim</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span><span class="o">.</span><span class="n">ndim</span><span class="p">))</span>
</span><span id="GA.__init__-421"><a href="#GA.__init__-421"><span class="linenos"> 421</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-422"><a href="#GA.__init__-422"><span class="linenos"> 422</span></a>            <span class="c1"># Forcing the initial_population array to have the data type assigned to the gene_type parameter.</span>
</span><span id="GA.__init__-423"><a href="#GA.__init__-423"><span class="linenos"> 423</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.__init__-424"><a href="#GA.__init__-424"><span class="linenos"> 424</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-425"><a href="#GA.__init__-425"><span class="linenos"> 425</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.__init__-426"><a href="#GA.__init__-426"><span class="linenos"> 426</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-427"><a href="#GA.__init__-427"><span class="linenos"> 427</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.__init__-428"><a href="#GA.__init__-428"><span class="linenos"> 428</span></a>                                                          <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.__init__-429"><a href="#GA.__init__-429"><span class="linenos"> 429</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-430"><a href="#GA.__init__-430"><span class="linenos"> 430</span></a>                <span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="GA.__init__-431"><a href="#GA.__init__-431"><span class="linenos"> 431</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
</span><span id="GA.__init__-432"><a href="#GA.__init__-432"><span class="linenos"> 432</span></a>                                                      <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.__init__-433"><a href="#GA.__init__-433"><span class="linenos"> 433</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.__init__-434"><a href="#GA.__init__-434"><span class="linenos"> 434</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-435"><a href="#GA.__init__-435"><span class="linenos"> 435</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.__init__-436"><a href="#GA.__init__-436"><span class="linenos"> 436</span></a>                                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.__init__-437"><a href="#GA.__init__-437"><span class="linenos"> 437</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-438"><a href="#GA.__init__-438"><span class="linenos"> 438</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA.__init__-439"><a href="#GA.__init__-439"><span class="linenos"> 439</span></a>                            <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.__init__-440"><a href="#GA.__init__-440"><span class="linenos"> 440</span></a>                                          <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.__init__-441"><a href="#GA.__init__-441"><span class="linenos"> 441</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.__init__-442"><a href="#GA.__init__-442"><span class="linenos"> 442</span></a>
</span><span id="GA.__init__-443"><a href="#GA.__init__-443"><span class="linenos"> 443</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA.__init__-444"><a href="#GA.__init__-444"><span class="linenos"> 444</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Number of genes in the solution.</span>
</span><span id="GA.__init__-445"><a href="#GA.__init__-445"><span class="linenos"> 445</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Number of solutions in the population.</span>
</span><span id="GA.__init__-446"><a href="#GA.__init__-446"><span class="linenos"> 446</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population size.</span>
</span><span id="GA.__init__-447"><a href="#GA.__init__-447"><span class="linenos"> 447</span></a>
</span><span id="GA.__init__-448"><a href="#GA.__init__-448"><span class="linenos"> 448</span></a>        <span class="c1"># Round initial_population and population</span>
</span><span id="GA.__init__-449"><a href="#GA.__init__-449"><span class="linenos"> 449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span><span class="p">)</span>
</span><span id="GA.__init__-450"><a href="#GA.__init__-450"><span class="linenos"> 450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA.__init__-451"><a href="#GA.__init__-451"><span class="linenos"> 451</span></a>
</span><span id="GA.__init__-452"><a href="#GA.__init__-452"><span class="linenos"> 452</span></a>        <span class="c1"># In case the &#39;gene_space&#39; parameter is nested, then make sure the number of its elements equals to the number of genes.</span>
</span><span id="GA.__init__-453"><a href="#GA.__init__-453"><span class="linenos"> 453</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.__init__-454"><a href="#GA.__init__-454"><span class="linenos"> 454</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA.__init__-455"><a href="#GA.__init__-455"><span class="linenos"> 455</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-456"><a href="#GA.__init__-456"><span class="linenos"> 456</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-457"><a href="#GA.__init__-457"><span class="linenos"> 457</span></a>                    <span class="s2">&quot;When the parameter &#39;gene_space&#39; is nested, then its length must be equal to the value passed to the &#39;num_genes&#39; parameter. Instead, length of gene_space (</span><span class="si">{len_gene_space}</span><span class="s2">) != num_genes (</span><span class="si">{len_num_genes}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-458"><a href="#GA.__init__-458"><span class="linenos"> 458</span></a>                        <span class="n">len_gene_space</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">gene_space</span><span class="p">),</span> <span class="n">len_num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-459"><a href="#GA.__init__-459"><span class="linenos"> 459</span></a>
</span><span id="GA.__init__-460"><a href="#GA.__init__-460"><span class="linenos"> 460</span></a>        <span class="c1"># Validating the number of parents to be selected for mating (num_parents_mating)</span>
</span><span id="GA.__init__-461"><a href="#GA.__init__-461"><span class="linenos"> 461</span></a>        <span class="k">if</span> <span class="n">num_parents_mating</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-462"><a href="#GA.__init__-462"><span class="linenos"> 462</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-463"><a href="#GA.__init__-463"><span class="linenos"> 463</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-464"><a href="#GA.__init__-464"><span class="linenos"> 464</span></a>                <span class="s2">&quot;The number of parents mating (num_parents_mating) parameter must be &gt; 0 but (</span><span class="si">{num_parents_mating}</span><span class="s2">) found. </span><span class="se">\n</span><span class="s2">The following parameters must be &gt; 0: </span><span class="se">\n</span><span class="s2">1) Population size (i.e. number of solutions per population) (sol_per_pop).</span><span class="se">\n</span><span class="s2">2) Number of selected parents in the mating pool (num_parents_mating).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-465"><a href="#GA.__init__-465"><span class="linenos"> 465</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">))</span>
</span><span id="GA.__init__-466"><a href="#GA.__init__-466"><span class="linenos"> 466</span></a>
</span><span id="GA.__init__-467"><a href="#GA.__init__-467"><span class="linenos"> 467</span></a>        <span class="c1"># Validating the number of parents to be selected for mating: num_parents_mating</span>
</span><span id="GA.__init__-468"><a href="#GA.__init__-468"><span class="linenos"> 468</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">num_parents_mating</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA.__init__-469"><a href="#GA.__init__-469"><span class="linenos"> 469</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-470"><a href="#GA.__init__-470"><span class="linenos"> 470</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-471"><a href="#GA.__init__-471"><span class="linenos"> 471</span></a>                <span class="s2">&quot;The number of parents to select for mating (</span><span class="si">{num_parents_mating}</span><span class="s2">) cannot be greater than the number of solutions in the population (</span><span class="si">{sol_per_pop}</span><span class="s2">) (i.e., num_parents_mating must always be &lt;= sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-472"><a href="#GA.__init__-472"><span class="linenos"> 472</span></a>                    <span class="n">num_parents_mating</span><span class="o">=</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA.__init__-473"><a href="#GA.__init__-473"><span class="linenos"> 473</span></a>
</span><span id="GA.__init__-474"><a href="#GA.__init__-474"><span class="linenos"> 474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="o">=</span> <span class="n">num_parents_mating</span>
</span><span id="GA.__init__-475"><a href="#GA.__init__-475"><span class="linenos"> 475</span></a>
</span><span id="GA.__init__-476"><a href="#GA.__init__-476"><span class="linenos"> 476</span></a>        <span class="c1"># crossover: Refers to the method that applies the crossover operator based on the selected type of crossover in the crossover_type property.</span>
</span><span id="GA.__init__-477"><a href="#GA.__init__-477"><span class="linenos"> 477</span></a>        <span class="c1"># Validating the crossover type: crossover_type</span>
</span><span id="GA.__init__-478"><a href="#GA.__init__-478"><span class="linenos"> 478</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-479"><a href="#GA.__init__-479"><span class="linenos"> 479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-480"><a href="#GA.__init__-480"><span class="linenos"> 480</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="GA.__init__-481"><a href="#GA.__init__-481"><span class="linenos"> 481</span></a>            <span class="c1"># Check if the crossover_type is a function that accepts 2 paramaters.</span>
</span><span id="GA.__init__-482"><a href="#GA.__init__-482"><span class="linenos"> 482</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="GA.__init__-483"><a href="#GA.__init__-483"><span class="linenos"> 483</span></a>                <span class="c1"># The crossover function assigned to the crossover_type parameter is validated.</span>
</span><span id="GA.__init__-484"><a href="#GA.__init__-484"><span class="linenos"> 484</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="GA.__init__-485"><a href="#GA.__init__-485"><span class="linenos"> 485</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-486"><a href="#GA.__init__-486"><span class="linenos"> 486</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-487"><a href="#GA.__init__-487"><span class="linenos"> 487</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-488"><a href="#GA.__init__-488"><span class="linenos"> 488</span></a>                    <span class="s2">&quot;When &#39;crossover_type&#39; is assigned to a function, then this crossover function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The selected parents.</span><span class="se">\n</span><span class="s2">2) The size of the offspring to be produced.3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed crossover function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-489"><a href="#GA.__init__-489"><span class="linenos"> 489</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">crossover_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-490"><a href="#GA.__init__-490"><span class="linenos"> 490</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA.__init__-491"><a href="#GA.__init__-491"><span class="linenos"> 491</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-492"><a href="#GA.__init__-492"><span class="linenos"> 492</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-493"><a href="#GA.__init__-493"><span class="linenos"> 493</span></a>                <span class="s2">&quot;The expected type of the &#39;crossover_type&#39; parameter is either callable or str but (</span><span class="si">{crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-494"><a href="#GA.__init__-494"><span class="linenos"> 494</span></a>                    <span class="n">crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_type</span><span class="p">)))</span>
</span><span id="GA.__init__-495"><a href="#GA.__init__-495"><span class="linenos"> 495</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type crossover_type is str</span>
</span><span id="GA.__init__-496"><a href="#GA.__init__-496"><span class="linenos"> 496</span></a>            <span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA.__init__-497"><a href="#GA.__init__-497"><span class="linenos"> 497</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;single_point&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-498"><a href="#GA.__init__-498"><span class="linenos"> 498</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">single_point_crossover</span>
</span><span id="GA.__init__-499"><a href="#GA.__init__-499"><span class="linenos"> 499</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;two_points&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-500"><a href="#GA.__init__-500"><span class="linenos"> 500</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">two_points_crossover</span>
</span><span id="GA.__init__-501"><a href="#GA.__init__-501"><span class="linenos"> 501</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;uniform&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-502"><a href="#GA.__init__-502"><span class="linenos"> 502</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uniform_crossover</span>
</span><span id="GA.__init__-503"><a href="#GA.__init__-503"><span class="linenos"> 503</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">crossover_type</span> <span class="o">==</span> <span class="s2">&quot;scattered&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-504"><a href="#GA.__init__-504"><span class="linenos"> 504</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scattered_crossover</span>
</span><span id="GA.__init__-505"><a href="#GA.__init__-505"><span class="linenos"> 505</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-506"><a href="#GA.__init__-506"><span class="linenos"> 506</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-507"><a href="#GA.__init__-507"><span class="linenos"> 507</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-508"><a href="#GA.__init__-508"><span class="linenos"> 508</span></a>                    <span class="s2">&quot;Undefined crossover type. </span><span class="se">\n</span><span class="s2">The assigned value to the crossover_type (</span><span class="si">{crossover_type}</span><span class="s2">) parameter does not refer to one of the supported crossover types which are: </span><span class="se">\n</span><span class="s2">-single_point (for single point crossover)</span><span class="se">\n</span><span class="s2">-two_points (for two points crossover)</span><span class="se">\n</span><span class="s2">-uniform (for uniform crossover)</span><span class="se">\n</span><span class="s2">-scattered (for scattered crossover).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-509"><a href="#GA.__init__-509"><span class="linenos"> 509</span></a>                        <span class="n">crossover_type</span><span class="o">=</span><span class="n">crossover_type</span><span class="p">))</span>
</span><span id="GA.__init__-510"><a href="#GA.__init__-510"><span class="linenos"> 510</span></a>
</span><span id="GA.__init__-511"><a href="#GA.__init__-511"><span class="linenos"> 511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="o">=</span> <span class="n">crossover_type</span>
</span><span id="GA.__init__-512"><a href="#GA.__init__-512"><span class="linenos"> 512</span></a>
</span><span id="GA.__init__-513"><a href="#GA.__init__-513"><span class="linenos"> 513</span></a>        <span class="c1"># Calculate the value of crossover_probability</span>
</span><span id="GA.__init__-514"><a href="#GA.__init__-514"><span class="linenos"> 514</span></a>        <span class="k">if</span> <span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-515"><a href="#GA.__init__-515"><span class="linenos"> 515</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-516"><a href="#GA.__init__-516"><span class="linenos"> 516</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-517"><a href="#GA.__init__-517"><span class="linenos"> 517</span></a>            <span class="k">if</span> <span class="n">crossover_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">crossover_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.__init__-518"><a href="#GA.__init__-518"><span class="linenos"> 518</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="o">=</span> <span class="n">crossover_probability</span>
</span><span id="GA.__init__-519"><a href="#GA.__init__-519"><span class="linenos"> 519</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-520"><a href="#GA.__init__-520"><span class="linenos"> 520</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-521"><a href="#GA.__init__-521"><span class="linenos"> 521</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-522"><a href="#GA.__init__-522"><span class="linenos"> 522</span></a>                    <span class="s2">&quot;The value assigned to the &#39;crossover_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-523"><a href="#GA.__init__-523"><span class="linenos"> 523</span></a>                        <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">))</span>
</span><span id="GA.__init__-524"><a href="#GA.__init__-524"><span class="linenos"> 524</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-525"><a href="#GA.__init__-525"><span class="linenos"> 525</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-526"><a href="#GA.__init__-526"><span class="linenos"> 526</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-527"><a href="#GA.__init__-527"><span class="linenos"> 527</span></a>                <span class="s2">&quot;Unexpected type for the &#39;crossover_probability&#39; parameter. Float is expected but (</span><span class="si">{crossover_probability_value}</span><span class="s2">) of type </span><span class="si">{crossover_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-528"><a href="#GA.__init__-528"><span class="linenos"> 528</span></a>                    <span class="n">crossover_probability_value</span><span class="o">=</span><span class="n">crossover_probability</span><span class="p">,</span>
</span><span id="GA.__init__-529"><a href="#GA.__init__-529"><span class="linenos"> 529</span></a>                    <span class="n">crossover_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">crossover_probability</span><span class="p">)))</span>
</span><span id="GA.__init__-530"><a href="#GA.__init__-530"><span class="linenos"> 530</span></a>
</span><span id="GA.__init__-531"><a href="#GA.__init__-531"><span class="linenos"> 531</span></a>        <span class="c1"># mutation: Refers to the method that applies the mutation operator based on the selected type of mutation in the mutation_type property.</span>
</span><span id="GA.__init__-532"><a href="#GA.__init__-532"><span class="linenos"> 532</span></a>        <span class="c1"># Validating the mutation type: mutation_type</span>
</span><span id="GA.__init__-533"><a href="#GA.__init__-533"><span class="linenos"> 533</span></a>        <span class="c1"># &quot;adaptive&quot; mutation is supported starting from PyGAD 2.10.0</span>
</span><span id="GA.__init__-534"><a href="#GA.__init__-534"><span class="linenos"> 534</span></a>        <span class="k">if</span> <span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-535"><a href="#GA.__init__-535"><span class="linenos"> 535</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-536"><a href="#GA.__init__-536"><span class="linenos"> 536</span></a>        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="GA.__init__-537"><a href="#GA.__init__-537"><span class="linenos"> 537</span></a>            <span class="c1"># Check if the mutation_type is a function that accepts 1 paramater.</span>
</span><span id="GA.__init__-538"><a href="#GA.__init__-538"><span class="linenos"> 538</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-539"><a href="#GA.__init__-539"><span class="linenos"> 539</span></a>                <span class="c1"># The mutation function assigned to the mutation_type parameter is validated.</span>
</span><span id="GA.__init__-540"><a href="#GA.__init__-540"><span class="linenos"> 540</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="GA.__init__-541"><a href="#GA.__init__-541"><span class="linenos"> 541</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-542"><a href="#GA.__init__-542"><span class="linenos"> 542</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-543"><a href="#GA.__init__-543"><span class="linenos"> 543</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-544"><a href="#GA.__init__-544"><span class="linenos"> 544</span></a>                    <span class="s2">&quot;When &#39;mutation_type&#39; is assigned to a function, then this mutation function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) The offspring to be mutated.</span><span class="se">\n</span><span class="s2">2) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed mutation function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-545"><a href="#GA.__init__-545"><span class="linenos"> 545</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">mutation_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-546"><a href="#GA.__init__-546"><span class="linenos"> 546</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA.__init__-547"><a href="#GA.__init__-547"><span class="linenos"> 547</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-548"><a href="#GA.__init__-548"><span class="linenos"> 548</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-549"><a href="#GA.__init__-549"><span class="linenos"> 549</span></a>                <span class="s2">&quot;The expected type of the &#39;mutation_type&#39; parameter is either callable or str but (</span><span class="si">{mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-550"><a href="#GA.__init__-550"><span class="linenos"> 550</span></a>                    <span class="n">mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_type</span><span class="p">)))</span>
</span><span id="GA.__init__-551"><a href="#GA.__init__-551"><span class="linenos"> 551</span></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># type mutation_type is str</span>
</span><span id="GA.__init__-552"><a href="#GA.__init__-552"><span class="linenos"> 552</span></a>            <span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA.__init__-553"><a href="#GA.__init__-553"><span class="linenos"> 553</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-554"><a href="#GA.__init__-554"><span class="linenos"> 554</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_mutation</span>
</span><span id="GA.__init__-555"><a href="#GA.__init__-555"><span class="linenos"> 555</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;swap&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-556"><a href="#GA.__init__-556"><span class="linenos"> 556</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">swap_mutation</span>
</span><span id="GA.__init__-557"><a href="#GA.__init__-557"><span class="linenos"> 557</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;scramble&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-558"><a href="#GA.__init__-558"><span class="linenos"> 558</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scramble_mutation</span>
</span><span id="GA.__init__-559"><a href="#GA.__init__-559"><span class="linenos"> 559</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;inversion&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-560"><a href="#GA.__init__-560"><span class="linenos"> 560</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inversion_mutation</span>
</span><span id="GA.__init__-561"><a href="#GA.__init__-561"><span class="linenos"> 561</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">==</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-562"><a href="#GA.__init__-562"><span class="linenos"> 562</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation</span>
</span><span id="GA.__init__-563"><a href="#GA.__init__-563"><span class="linenos"> 563</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-564"><a href="#GA.__init__-564"><span class="linenos"> 564</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-565"><a href="#GA.__init__-565"><span class="linenos"> 565</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-566"><a href="#GA.__init__-566"><span class="linenos"> 566</span></a>                    <span class="s2">&quot;Undefined mutation type. </span><span class="se">\n</span><span class="s2">The assigned string value to the &#39;mutation_type&#39; parameter (</span><span class="si">{mutation_type}</span><span class="s2">) does not refer to one of the supported mutation types which are: </span><span class="se">\n</span><span class="s2">-random (for random mutation)</span><span class="se">\n</span><span class="s2">-swap (for swap mutation)</span><span class="se">\n</span><span class="s2">-inversion (for inversion mutation)</span><span class="se">\n</span><span class="s2">-scramble (for scramble mutation)</span><span class="se">\n</span><span class="s2">-adaptive (for adaptive mutation).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-567"><a href="#GA.__init__-567"><span class="linenos"> 567</span></a>                        <span class="n">mutation_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="GA.__init__-568"><a href="#GA.__init__-568"><span class="linenos"> 568</span></a>
</span><span id="GA.__init__-569"><a href="#GA.__init__-569"><span class="linenos"> 569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">=</span> <span class="n">mutation_type</span>
</span><span id="GA.__init__-570"><a href="#GA.__init__-570"><span class="linenos"> 570</span></a>
</span><span id="GA.__init__-571"><a href="#GA.__init__-571"><span class="linenos"> 571</span></a>        <span class="c1"># Calculate the value of mutation_probability</span>
</span><span id="GA.__init__-572"><a href="#GA.__init__-572"><span class="linenos"> 572</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-573"><a href="#GA.__init__-573"><span class="linenos"> 573</span></a>            <span class="k">if</span> <span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-574"><a href="#GA.__init__-574"><span class="linenos"> 574</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-575"><a href="#GA.__init__-575"><span class="linenos"> 575</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-576"><a href="#GA.__init__-576"><span class="linenos"> 576</span></a>                <span class="c1"># Mutation probability is fixed not adaptive.</span>
</span><span id="GA.__init__-577"><a href="#GA.__init__-577"><span class="linenos"> 577</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-578"><a href="#GA.__init__-578"><span class="linenos"> 578</span></a>                    <span class="k">if</span> <span class="n">mutation_probability</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">mutation_probability</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.__init__-579"><a href="#GA.__init__-579"><span class="linenos"> 579</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="GA.__init__-580"><a href="#GA.__init__-580"><span class="linenos"> 580</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-581"><a href="#GA.__init__-581"><span class="linenos"> 581</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-582"><a href="#GA.__init__-582"><span class="linenos"> 582</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-583"><a href="#GA.__init__-583"><span class="linenos"> 583</span></a>                            <span class="s2">&quot;The value assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-584"><a href="#GA.__init__-584"><span class="linenos"> 584</span></a>                                <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">))</span>
</span><span id="GA.__init__-585"><a href="#GA.__init__-585"><span class="linenos"> 585</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-586"><a href="#GA.__init__-586"><span class="linenos"> 586</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-587"><a href="#GA.__init__-587"><span class="linenos"> 587</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-588"><a href="#GA.__init__-588"><span class="linenos"> 588</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-589"><a href="#GA.__init__-589"><span class="linenos"> 589</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="GA.__init__-590"><a href="#GA.__init__-590"><span class="linenos"> 590</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA.__init__-591"><a href="#GA.__init__-591"><span class="linenos"> 591</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-592"><a href="#GA.__init__-592"><span class="linenos"> 592</span></a>                <span class="c1"># Mutation probability is adaptive not fixed.</span>
</span><span id="GA.__init__-593"><a href="#GA.__init__-593"><span class="linenos"> 593</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-594"><a href="#GA.__init__-594"><span class="linenos"> 594</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-595"><a href="#GA.__init__-595"><span class="linenos"> 595</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA.__init__-596"><a href="#GA.__init__-596"><span class="linenos"> 596</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-597"><a href="#GA.__init__-597"><span class="linenos"> 597</span></a>                                <span class="k">if</span> <span class="n">el</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.__init__-598"><a href="#GA.__init__-598"><span class="linenos"> 598</span></a>                                    <span class="k">pass</span>
</span><span id="GA.__init__-599"><a href="#GA.__init__-599"><span class="linenos"> 599</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-600"><a href="#GA.__init__-600"><span class="linenos"> 600</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-601"><a href="#GA.__init__-601"><span class="linenos"> 601</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-602"><a href="#GA.__init__-602"><span class="linenos"> 602</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_probability&#39; parameter must be between 0 and 1 inclusive but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-603"><a href="#GA.__init__-603"><span class="linenos"> 603</span></a>                                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="GA.__init__-604"><a href="#GA.__init__-604"><span class="linenos"> 604</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-605"><a href="#GA.__init__-605"><span class="linenos"> 605</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-606"><a href="#GA.__init__-606"><span class="linenos"> 606</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-607"><a href="#GA.__init__-607"><span class="linenos"> 607</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_probability&#39; parameter. A numeric value is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-608"><a href="#GA.__init__-608"><span class="linenos"> 608</span></a>                                        <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA.__init__-609"><a href="#GA.__init__-609"><span class="linenos"> 609</span></a>                        <span class="k">if</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA.__init__-610"><a href="#GA.__init__-610"><span class="linenos"> 610</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-611"><a href="#GA.__init__-611"><span class="linenos"> 611</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_probability&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-612"><a href="#GA.__init__-612"><span class="linenos"> 612</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA.__init__-613"><a href="#GA.__init__-613"><span class="linenos"> 613</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="o">=</span> <span class="n">mutation_probability</span>
</span><span id="GA.__init__-614"><a href="#GA.__init__-614"><span class="linenos"> 614</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-615"><a href="#GA.__init__-615"><span class="linenos"> 615</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-616"><a href="#GA.__init__-616"><span class="linenos"> 616</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-617"><a href="#GA.__init__-617"><span class="linenos"> 617</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_probability&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_probability_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-618"><a href="#GA.__init__-618"><span class="linenos"> 618</span></a>                                <span class="n">mutation_probability_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA.__init__-619"><a href="#GA.__init__-619"><span class="linenos"> 619</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-620"><a href="#GA.__init__-620"><span class="linenos"> 620</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-621"><a href="#GA.__init__-621"><span class="linenos"> 621</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-622"><a href="#GA.__init__-622"><span class="linenos"> 622</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_probability&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_probability_value}</span><span class="s2">) of type </span><span class="si">{mutation_probability_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-623"><a href="#GA.__init__-623"><span class="linenos"> 623</span></a>                            <span class="n">mutation_probability_value</span><span class="o">=</span><span class="n">mutation_probability</span><span class="p">,</span>
</span><span id="GA.__init__-624"><a href="#GA.__init__-624"><span class="linenos"> 624</span></a>                            <span class="n">mutation_probability_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_probability</span><span class="p">)))</span>
</span><span id="GA.__init__-625"><a href="#GA.__init__-625"><span class="linenos"> 625</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-626"><a href="#GA.__init__-626"><span class="linenos"> 626</span></a>            <span class="k">pass</span>
</span><span id="GA.__init__-627"><a href="#GA.__init__-627"><span class="linenos"> 627</span></a>
</span><span id="GA.__init__-628"><a href="#GA.__init__-628"><span class="linenos"> 628</span></a>        <span class="c1"># Calculate the value of mutation_num_genes</span>
</span><span id="GA.__init__-629"><a href="#GA.__init__-629"><span class="linenos"> 629</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-630"><a href="#GA.__init__-630"><span class="linenos"> 630</span></a>            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-631"><a href="#GA.__init__-631"><span class="linenos"> 631</span></a>                <span class="c1"># The mutation_num_genes parameter does not exist. Checking whether adaptive mutation is used.</span>
</span><span id="GA.__init__-632"><a href="#GA.__init__-632"><span class="linenos"> 632</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-633"><a href="#GA.__init__-633"><span class="linenos"> 633</span></a>                    <span class="c1"># The percent of genes to mutate is fixed not adaptive.</span>
</span><span id="GA.__init__-634"><a href="#GA.__init__-634"><span class="linenos"> 634</span></a>                    <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="GA.__init__-635"><a href="#GA.__init__-635"><span class="linenos"> 635</span></a>                        <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="GA.__init__-636"><a href="#GA.__init__-636"><span class="linenos"> 636</span></a>                        <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA.__init__-637"><a href="#GA.__init__-637"><span class="linenos"> 637</span></a>                        <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA.__init__-638"><a href="#GA.__init__-638"><span class="linenos"> 638</span></a>                        <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA.__init__-639"><a href="#GA.__init__-639"><span class="linenos"> 639</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-640"><a href="#GA.__init__-640"><span class="linenos"> 640</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-641"><a href="#GA.__init__-641"><span class="linenos"> 641</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-642"><a href="#GA.__init__-642"><span class="linenos"> 642</span></a>                                    <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-643"><a href="#GA.__init__-643"><span class="linenos"> 643</span></a>                                        <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-644"><a href="#GA.__init__-644"><span class="linenos"> 644</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA.__init__-645"><a href="#GA.__init__-645"><span class="linenos"> 645</span></a>
</span><span id="GA.__init__-646"><a href="#GA.__init__-646"><span class="linenos"> 646</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-647"><a href="#GA.__init__-647"><span class="linenos"> 647</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="n">mutation_percent_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">mutation_percent_genes</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="GA.__init__-648"><a href="#GA.__init__-648"><span class="linenos"> 648</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-649"><a href="#GA.__init__-649"><span class="linenos"> 649</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-650"><a href="#GA.__init__-650"><span class="linenos"> 650</span></a>                                <span class="s2">&quot;The percentage of selected genes for mutation (mutation_percent_genes) must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-651"><a href="#GA.__init__-651"><span class="linenos"> 651</span></a>                                    <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA.__init__-652"><a href="#GA.__init__-652"><span class="linenos"> 652</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-653"><a href="#GA.__init__-653"><span class="linenos"> 653</span></a>                            <span class="c1"># If mutation_percent_genes equals the string &quot;default&quot;, then it is replaced by the numeric value 10.</span>
</span><span id="GA.__init__-654"><a href="#GA.__init__-654"><span class="linenos"> 654</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span> <span class="o">==</span> <span class="s1">&#39;default&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
</span><span id="GA.__init__-655"><a href="#GA.__init__-655"><span class="linenos"> 655</span></a>                                <span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="GA.__init__-656"><a href="#GA.__init__-656"><span class="linenos"> 656</span></a>
</span><span id="GA.__init__-657"><a href="#GA.__init__-657"><span class="linenos"> 657</span></a>                            <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA.__init__-658"><a href="#GA.__init__-658"><span class="linenos"> 658</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">((</span><span class="n">mutation_percent_genes</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA.__init__-659"><a href="#GA.__init__-659"><span class="linenos"> 659</span></a>                            <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA.__init__-660"><a href="#GA.__init__-660"><span class="linenos"> 660</span></a>                            <span class="k">if</span> <span class="n">mutation_num_genes</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-661"><a href="#GA.__init__-661"><span class="linenos"> 661</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-662"><a href="#GA.__init__-662"><span class="linenos"> 662</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-663"><a href="#GA.__init__-663"><span class="linenos"> 663</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (mutation_percent_genes=</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-664"><a href="#GA.__init__-664"><span class="linenos"> 664</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-665"><a href="#GA.__init__-665"><span class="linenos"> 665</span></a>                                <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA.__init__-666"><a href="#GA.__init__-666"><span class="linenos"> 666</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-667"><a href="#GA.__init__-667"><span class="linenos"> 667</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-668"><a href="#GA.__init__-668"><span class="linenos"> 668</span></a>                        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-669"><a href="#GA.__init__-669"><span class="linenos"> 669</span></a>                            <span class="s2">&quot;Unexpected value or type of the &#39;mutation_percent_genes&#39; parameter. It only accepts the string &#39;default&#39; or a numeric value but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-670"><a href="#GA.__init__-670"><span class="linenos"> 670</span></a>                                <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">,</span>
</span><span id="GA.__init__-671"><a href="#GA.__init__-671"><span class="linenos"> 671</span></a>                                <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-672"><a href="#GA.__init__-672"><span class="linenos"> 672</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-673"><a href="#GA.__init__-673"><span class="linenos"> 673</span></a>                    <span class="c1"># The percent of genes to mutate is adaptive not fixed.</span>
</span><span id="GA.__init__-674"><a href="#GA.__init__-674"><span class="linenos"> 674</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-675"><a href="#GA.__init__-675"><span class="linenos"> 675</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-676"><a href="#GA.__init__-676"><span class="linenos"> 676</span></a>                            <span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
</span><span id="GA.__init__-677"><a href="#GA.__init__-677"><span class="linenos"> 677</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">):</span>
</span><span id="GA.__init__-678"><a href="#GA.__init__-678"><span class="linenos"> 678</span></a>                                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-679"><a href="#GA.__init__-679"><span class="linenos"> 679</span></a>                                    <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">el</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">):</span>
</span><span id="GA.__init__-680"><a href="#GA.__init__-680"><span class="linenos"> 680</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-681"><a href="#GA.__init__-681"><span class="linenos"> 681</span></a>                                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-682"><a href="#GA.__init__-682"><span class="linenos"> 682</span></a>                                            <span class="s2">&quot;The values assigned to the &#39;mutation_percent_genes&#39; must be &gt; 0 and &lt;= 100 but (</span><span class="si">{mutation_percent_genes}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-683"><a href="#GA.__init__-683"><span class="linenos"> 683</span></a>                                                <span class="n">mutation_percent_genes</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA.__init__-684"><a href="#GA.__init__-684"><span class="linenos"> 684</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-685"><a href="#GA.__init__-685"><span class="linenos"> 685</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-686"><a href="#GA.__init__-686"><span class="linenos"> 686</span></a>                                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-687"><a href="#GA.__init__-687"><span class="linenos"> 687</span></a>                                        <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_percent_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_percent_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-688"><a href="#GA.__init__-688"><span class="linenos"> 688</span></a>                                            <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_percent_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA.__init__-689"><a href="#GA.__init__-689"><span class="linenos"> 689</span></a>                                <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_percent_genes&#39; is validated.</span>
</span><span id="GA.__init__-690"><a href="#GA.__init__-690"><span class="linenos"> 690</span></a>                                <span class="c1"># Based on the mutation percentage in the &#39;mutation_percent_genes&#39; parameter, the number of genes to mutate is calculated.</span>
</span><span id="GA.__init__-691"><a href="#GA.__init__-691"><span class="linenos"> 691</span></a>                                <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">uint32</span><span class="p">(</span>
</span><span id="GA.__init__-692"><a href="#GA.__init__-692"><span class="linenos"> 692</span></a>                                    <span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="GA.__init__-693"><a href="#GA.__init__-693"><span class="linenos"> 693</span></a>                                <span class="c1"># Based on the mutation percentage of genes, if the number of selected genes for mutation is less than the least possible value which is 1, then the number will be set to 1.</span>
</span><span id="GA.__init__-694"><a href="#GA.__init__-694"><span class="linenos"> 694</span></a>                                <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-695"><a href="#GA.__init__-695"><span class="linenos"> 695</span></a>                                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-696"><a href="#GA.__init__-696"><span class="linenos"> 696</span></a>                                        <span class="s2">&quot;The percentage of genes to mutate (</span><span class="si">{mutation_percent}</span><span class="s2">) resutled in selecting (</span><span class="si">{mutation_num}</span><span class="s2">) genes. The number of genes to mutate is set to 1 (mutation_num_genes=1).</span><span class="se">\n</span><span class="s2">If you do not want to mutate any gene, please set mutation_type=None.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-697"><a href="#GA.__init__-697"><span class="linenos"> 697</span></a>                                            <span class="n">mutation_percent</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span>
</span><span id="GA.__init__-698"><a href="#GA.__init__-698"><span class="linenos"> 698</span></a>                                            <span class="n">mutation_num</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]))</span>
</span><span id="GA.__init__-699"><a href="#GA.__init__-699"><span class="linenos"> 699</span></a>                                    <span class="n">mutation_num_genes</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="GA.__init__-700"><a href="#GA.__init__-700"><span class="linenos"> 700</span></a>                            <span class="k">if</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA.__init__-701"><a href="#GA.__init__-701"><span class="linenos"> 701</span></a>                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-702"><a href="#GA.__init__-702"><span class="linenos"> 702</span></a>                                    <span class="s2">&quot;The first element in the &#39;mutation_percent_genes&#39; parameter is (</span><span class="si">{first_el}</span><span class="s2">) which is smaller than the second element (</span><span class="si">{second_el}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions.</span><span class="se">\n</span><span class="s2">Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-703"><a href="#GA.__init__-703"><span class="linenos"> 703</span></a>                                        <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA.__init__-704"><a href="#GA.__init__-704"><span class="linenos"> 704</span></a>                            <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_percent_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="GA.__init__-705"><a href="#GA.__init__-705"><span class="linenos"> 705</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-706"><a href="#GA.__init__-706"><span class="linenos"> 706</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-707"><a href="#GA.__init__-707"><span class="linenos"> 707</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-708"><a href="#GA.__init__-708"><span class="linenos"> 708</span></a>                                <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_percent_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-709"><a href="#GA.__init__-709"><span class="linenos"> 709</span></a>                                    <span class="n">mutation_percent_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_percent_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-710"><a href="#GA.__init__-710"><span class="linenos"> 710</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-711"><a href="#GA.__init__-711"><span class="linenos"> 711</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-712"><a href="#GA.__init__-712"><span class="linenos"> 712</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-713"><a href="#GA.__init__-713"><span class="linenos"> 713</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-714"><a href="#GA.__init__-714"><span class="linenos"> 714</span></a>                                <span class="s2">&quot;Unexpected type for the &#39;mutation_percent_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_percent_genes&#39; parameter should exist and assigned a list/tuple/numpy.ndarray with 2 values but (</span><span class="si">{mutation_percent_genes_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-715"><a href="#GA.__init__-715"><span class="linenos"> 715</span></a>                                    <span class="n">mutation_percent_genes_value</span><span class="o">=</span><span class="n">mutation_percent_genes</span><span class="p">))</span>
</span><span id="GA.__init__-716"><a href="#GA.__init__-716"><span class="linenos"> 716</span></a>            <span class="c1"># The mutation_num_genes parameter exists. Checking whether adaptive mutation is used.</span>
</span><span id="GA.__init__-717"><a href="#GA.__init__-717"><span class="linenos"> 717</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;adaptive&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-718"><a href="#GA.__init__-718"><span class="linenos"> 718</span></a>                <span class="c1"># Number of genes to mutate is fixed not adaptive.</span>
</span><span id="GA.__init__-719"><a href="#GA.__init__-719"><span class="linenos"> 719</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.__init__-720"><a href="#GA.__init__-720"><span class="linenos"> 720</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.__init__-721"><a href="#GA.__init__-721"><span class="linenos"> 721</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-722"><a href="#GA.__init__-722"><span class="linenos"> 722</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-723"><a href="#GA.__init__-723"><span class="linenos"> 723</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes) cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-724"><a href="#GA.__init__-724"><span class="linenos"> 724</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-725"><a href="#GA.__init__-725"><span class="linenos"> 725</span></a>                    <span class="k">elif</span> <span class="p">(</span><span class="n">mutation_num_genes</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.__init__-726"><a href="#GA.__init__-726"><span class="linenos"> 726</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-727"><a href="#GA.__init__-727"><span class="linenos"> 727</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-728"><a href="#GA.__init__-728"><span class="linenos"> 728</span></a>                            <span class="s2">&quot;The number of selected genes for mutation (mutation_num_genes), which is (</span><span class="si">{mutation_num_genes}</span><span class="s2">), cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-729"><a href="#GA.__init__-729"><span class="linenos"> 729</span></a>                                <span class="n">mutation_num_genes</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-730"><a href="#GA.__init__-730"><span class="linenos"> 730</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-731"><a href="#GA.__init__-731"><span class="linenos"> 731</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-732"><a href="#GA.__init__-732"><span class="linenos"> 732</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-733"><a href="#GA.__init__-733"><span class="linenos"> 733</span></a>                        <span class="s2">&quot;The &#39;mutation_num_genes&#39; parameter is expected to be a positive integer but the value (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-734"><a href="#GA.__init__-734"><span class="linenos"> 734</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="GA.__init__-735"><a href="#GA.__init__-735"><span class="linenos"> 735</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-736"><a href="#GA.__init__-736"><span class="linenos"> 736</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-737"><a href="#GA.__init__-737"><span class="linenos"> 737</span></a>                <span class="c1"># Number of genes to mutate is adaptive not fixed.</span>
</span><span id="GA.__init__-738"><a href="#GA.__init__-738"><span class="linenos"> 738</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-739"><a href="#GA.__init__-739"><span class="linenos"> 739</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-740"><a href="#GA.__init__-740"><span class="linenos"> 740</span></a>                        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">mutation_num_genes</span><span class="p">:</span>
</span><span id="GA.__init__-741"><a href="#GA.__init__-741"><span class="linenos"> 741</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.__init__-742"><a href="#GA.__init__-742"><span class="linenos"> 742</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">el</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.__init__-743"><a href="#GA.__init__-743"><span class="linenos"> 743</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-744"><a href="#GA.__init__-744"><span class="linenos"> 744</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-745"><a href="#GA.__init__-745"><span class="linenos"> 745</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be &lt;= 0 but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found. If you do not want to use mutation, please set mutation_type=None</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-746"><a href="#GA.__init__-746"><span class="linenos"> 746</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">))</span>
</span><span id="GA.__init__-747"><a href="#GA.__init__-747"><span class="linenos"> 747</span></a>                                <span class="k">elif</span> <span class="p">(</span><span class="n">el</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.__init__-748"><a href="#GA.__init__-748"><span class="linenos"> 748</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-749"><a href="#GA.__init__-749"><span class="linenos"> 749</span></a>                                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-750"><a href="#GA.__init__-750"><span class="linenos"> 750</span></a>                                        <span class="s2">&quot;The values assigned to the &#39;mutation_num_genes&#39; cannot be greater than the number of genes (</span><span class="si">{num_genes}</span><span class="s2">) but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-751"><a href="#GA.__init__-751"><span class="linenos"> 751</span></a>                                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">num_genes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.__init__-752"><a href="#GA.__init__-752"><span class="linenos"> 752</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-753"><a href="#GA.__init__-753"><span class="linenos"> 753</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-754"><a href="#GA.__init__-754"><span class="linenos"> 754</span></a>                                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-755"><a href="#GA.__init__-755"><span class="linenos"> 755</span></a>                                    <span class="s2">&quot;Unexpected type for a value assigned to the &#39;mutation_num_genes&#39; parameter. An integer value is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-756"><a href="#GA.__init__-756"><span class="linenos"> 756</span></a>                                        <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">el</span><span class="p">,</span> <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)))</span>
</span><span id="GA.__init__-757"><a href="#GA.__init__-757"><span class="linenos"> 757</span></a>                            <span class="c1"># At this point of the loop, the current value assigned to the parameter &#39;mutation_num_genes&#39; is validated.</span>
</span><span id="GA.__init__-758"><a href="#GA.__init__-758"><span class="linenos"> 758</span></a>                        <span class="k">if</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA.__init__-759"><a href="#GA.__init__-759"><span class="linenos"> 759</span></a>                            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-760"><a href="#GA.__init__-760"><span class="linenos"> 760</span></a>                                <span class="s2">&quot;The first element in the &#39;mutation_num_genes&#39; parameter is </span><span class="si">{first_el}</span><span class="s2"> which is smaller than the second element </span><span class="si">{second_el}</span><span class="s2">. This means the mutation rate for the high-quality solutions is higher than the mutation rate of the low-quality ones. This causes high disruption in the high qualitiy solutions while making little changes in the low quality solutions. Please make the first element higher than the second element.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-761"><a href="#GA.__init__-761"><span class="linenos"> 761</span></a>                                    <span class="n">first_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">second_el</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="GA.__init__-762"><a href="#GA.__init__-762"><span class="linenos"> 762</span></a>                        <span class="c1"># At this point outside the loop, all values of the parameter &#39;mutation_num_genes&#39; are validated. Eveyrthing is OK.</span>
</span><span id="GA.__init__-763"><a href="#GA.__init__-763"><span class="linenos"> 763</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-764"><a href="#GA.__init__-764"><span class="linenos"> 764</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-765"><a href="#GA.__init__-765"><span class="linenos"> 765</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-766"><a href="#GA.__init__-766"><span class="linenos"> 766</span></a>                            <span class="s2">&quot;When mutation_type=&#39;adaptive&#39;, then the &#39;mutation_num_genes&#39; parameter must have only 2 elements but (</span><span class="si">{mutation_num_genes_length}</span><span class="s2">) element(s) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-767"><a href="#GA.__init__-767"><span class="linenos"> 767</span></a>                                <span class="n">mutation_num_genes_length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-768"><a href="#GA.__init__-768"><span class="linenos"> 768</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-769"><a href="#GA.__init__-769"><span class="linenos"> 769</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-770"><a href="#GA.__init__-770"><span class="linenos"> 770</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-771"><a href="#GA.__init__-771"><span class="linenos"> 771</span></a>                        <span class="s2">&quot;Unexpected type for the &#39;mutation_num_genes&#39; parameter. When mutation_type=&#39;adaptive&#39;, then list/tuple/numpy.ndarray is expected but (</span><span class="si">{mutation_num_genes_value}</span><span class="s2">) of type </span><span class="si">{mutation_num_genes_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-772"><a href="#GA.__init__-772"><span class="linenos"> 772</span></a>                            <span class="n">mutation_num_genes_value</span><span class="o">=</span><span class="n">mutation_num_genes</span><span class="p">,</span>
</span><span id="GA.__init__-773"><a href="#GA.__init__-773"><span class="linenos"> 773</span></a>                            <span class="n">mutation_num_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">mutation_num_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-774"><a href="#GA.__init__-774"><span class="linenos"> 774</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-775"><a href="#GA.__init__-775"><span class="linenos"> 775</span></a>            <span class="k">pass</span>
</span><span id="GA.__init__-776"><a href="#GA.__init__-776"><span class="linenos"> 776</span></a>
</span><span id="GA.__init__-777"><a href="#GA.__init__-777"><span class="linenos"> 777</span></a>        <span class="c1"># Validating mutation_by_replacement and mutation_type</span>
</span><span id="GA.__init__-778"><a href="#GA.__init__-778"><span class="linenos"> 778</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="o">!=</span> <span class="s2">&quot;random&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.__init__-779"><a href="#GA.__init__-779"><span class="linenos"> 779</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-780"><a href="#GA.__init__-780"><span class="linenos"> 780</span></a>                <span class="s2">&quot;The mutation_by_replacement parameter is set to True while the mutation_type parameter is not set to random but (</span><span class="si">{mut_type}</span><span class="s2">). Note that the mutation_by_replacement parameter has an effect only when mutation_type=&#39;random&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-781"><a href="#GA.__init__-781"><span class="linenos"> 781</span></a>                    <span class="n">mut_type</span><span class="o">=</span><span class="n">mutation_type</span><span class="p">))</span>
</span><span id="GA.__init__-782"><a href="#GA.__init__-782"><span class="linenos"> 782</span></a>
</span><span id="GA.__init__-783"><a href="#GA.__init__-783"><span class="linenos"> 783</span></a>        <span class="c1"># Check if crossover and mutation are both disabled.</span>
</span><span id="GA.__init__-784"><a href="#GA.__init__-784"><span class="linenos"> 784</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-785"><a href="#GA.__init__-785"><span class="linenos"> 785</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-786"><a href="#GA.__init__-786"><span class="linenos"> 786</span></a>                <span class="s2">&quot;The 2 parameters mutation_type and crossover_type are None. This disables any type of evolution the genetic algorithm can make. As a result, the genetic algorithm cannot find a better solution that the best solution in the initial population.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-787"><a href="#GA.__init__-787"><span class="linenos"> 787</span></a>
</span><span id="GA.__init__-788"><a href="#GA.__init__-788"><span class="linenos"> 788</span></a>        <span class="c1"># select_parents: Refers to a method that selects the parents based on the parent selection type specified in the parent_selection_type attribute.</span>
</span><span id="GA.__init__-789"><a href="#GA.__init__-789"><span class="linenos"> 789</span></a>        <span class="c1"># Validating the selected type of parent selection: parent_selection_type</span>
</span><span id="GA.__init__-790"><a href="#GA.__init__-790"><span class="linenos"> 790</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="GA.__init__-791"><a href="#GA.__init__-791"><span class="linenos"> 791</span></a>            <span class="c1"># Check if the parent_selection_type is a function that accepts 3 paramaters.</span>
</span><span id="GA.__init__-792"><a href="#GA.__init__-792"><span class="linenos"> 792</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="GA.__init__-793"><a href="#GA.__init__-793"><span class="linenos"> 793</span></a>                <span class="c1"># population: Added in PyGAD 2.16.0. It should used only to support custom parent selection functions. Otherwise, it should be left to None to retirve the population by self.population.</span>
</span><span id="GA.__init__-794"><a href="#GA.__init__-794"><span class="linenos"> 794</span></a>                <span class="c1"># The parent selection function assigned to the parent_selection_type parameter is validated.</span>
</span><span id="GA.__init__-795"><a href="#GA.__init__-795"><span class="linenos"> 795</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="GA.__init__-796"><a href="#GA.__init__-796"><span class="linenos"> 796</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-797"><a href="#GA.__init__-797"><span class="linenos"> 797</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-798"><a href="#GA.__init__-798"><span class="linenos"> 798</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-799"><a href="#GA.__init__-799"><span class="linenos"> 799</span></a>                    <span class="s2">&quot;When &#39;parent_selection_type&#39; is assigned to a user-defined function, then this parent selection function must accept 3 parameters:</span><span class="se">\n</span><span class="s2">1) The fitness values of the current population.</span><span class="se">\n</span><span class="s2">2) The number of parents needed.</span><span class="se">\n</span><span class="s2">3) The instance from the pygad.GA class to retrieve any property like population, gene data type, gene space, etc.</span><span class="se">\n\n</span><span class="s2">The passed parent selection function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-800"><a href="#GA.__init__-800"><span class="linenos"> 800</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="GA.__init__-801"><a href="#GA.__init__-801"><span class="linenos"> 801</span></a>                        <span class="n">argcount</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-802"><a href="#GA.__init__-802"><span class="linenos"> 802</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="GA.__init__-803"><a href="#GA.__init__-803"><span class="linenos"> 803</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-804"><a href="#GA.__init__-804"><span class="linenos"> 804</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-805"><a href="#GA.__init__-805"><span class="linenos"> 805</span></a>                <span class="s2">&quot;The expected type of the &#39;parent_selection_type&#39; parameter is either callable or str but (</span><span class="si">{parent_selection_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-806"><a href="#GA.__init__-806"><span class="linenos"> 806</span></a>                    <span class="n">parent_selection_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parent_selection_type</span><span class="p">)))</span>
</span><span id="GA.__init__-807"><a href="#GA.__init__-807"><span class="linenos"> 807</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-808"><a href="#GA.__init__-808"><span class="linenos"> 808</span></a>            <span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="GA.__init__-809"><a href="#GA.__init__-809"><span class="linenos"> 809</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-810"><a href="#GA.__init__-810"><span class="linenos"> 810</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span>
</span><span id="GA.__init__-811"><a href="#GA.__init__-811"><span class="linenos"> 811</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rws&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-812"><a href="#GA.__init__-812"><span class="linenos"> 812</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roulette_wheel_selection</span>
</span><span id="GA.__init__-813"><a href="#GA.__init__-813"><span class="linenos"> 813</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sus&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-814"><a href="#GA.__init__-814"><span class="linenos"> 814</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stochastic_universal_selection</span>
</span><span id="GA.__init__-815"><a href="#GA.__init__-815"><span class="linenos"> 815</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-816"><a href="#GA.__init__-816"><span class="linenos"> 816</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_selection</span>
</span><span id="GA.__init__-817"><a href="#GA.__init__-817"><span class="linenos"> 817</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-818"><a href="#GA.__init__-818"><span class="linenos"> 818</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tournament_selection</span>
</span><span id="GA.__init__-819"><a href="#GA.__init__-819"><span class="linenos"> 819</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;rank&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-820"><a href="#GA.__init__-820"><span class="linenos"> 820</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank_selection</span>
</span><span id="GA.__init__-821"><a href="#GA.__init__-821"><span class="linenos"> 821</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-822"><a href="#GA.__init__-822"><span class="linenos"> 822</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-823"><a href="#GA.__init__-823"><span class="linenos"> 823</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-824"><a href="#GA.__init__-824"><span class="linenos"> 824</span></a>                    <span class="s2">&quot;Undefined parent selection type: </span><span class="si">{parent_selection_type}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the &#39;parent_selection_type&#39; parameter does not refer to one of the supported parent selection techniques which are: </span><span class="se">\n</span><span class="s2">-sss (for steady state selection)</span><span class="se">\n</span><span class="s2">-rws (for roulette wheel selection)</span><span class="se">\n</span><span class="s2">-sus (for stochastic universal selection)</span><span class="se">\n</span><span class="s2">-rank (for rank selection)</span><span class="se">\n</span><span class="s2">-random (for random selection)</span><span class="se">\n</span><span class="s2">-tournament (for tournament selection).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-825"><a href="#GA.__init__-825"><span class="linenos"> 825</span></a>                        <span class="n">parent_selection_type</span><span class="o">=</span><span class="n">parent_selection_type</span><span class="p">))</span>
</span><span id="GA.__init__-826"><a href="#GA.__init__-826"><span class="linenos"> 826</span></a>
</span><span id="GA.__init__-827"><a href="#GA.__init__-827"><span class="linenos"> 827</span></a>        <span class="c1"># For tournament selection, validate the K value.</span>
</span><span id="GA.__init__-828"><a href="#GA.__init__-828"><span class="linenos"> 828</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;tournament&quot;</span><span class="p">):</span>
</span><span id="GA.__init__-829"><a href="#GA.__init__-829"><span class="linenos"> 829</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA.__init__-830"><a href="#GA.__init__-830"><span class="linenos"> 830</span></a>                <span class="n">K_tournament</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA.__init__-831"><a href="#GA.__init__-831"><span class="linenos"> 831</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-832"><a href="#GA.__init__-832"><span class="linenos"> 832</span></a>                    <span class="s2">&quot;K of the tournament selection (</span><span class="si">{K_tournament}</span><span class="s2">) should not be greater than the number of solutions within the population (</span><span class="si">{sol_per_pop}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">K will be clipped to be equal to the number of solutions in the population (sol_per_pop).</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-833"><a href="#GA.__init__-833"><span class="linenos"> 833</span></a>                        <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">,</span> <span class="n">sol_per_pop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">))</span>
</span><span id="GA.__init__-834"><a href="#GA.__init__-834"><span class="linenos"> 834</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="n">K_tournament</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.__init__-835"><a href="#GA.__init__-835"><span class="linenos"> 835</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-836"><a href="#GA.__init__-836"><span class="linenos"> 836</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;K of the tournament selection cannot be &lt;=0 but (</span><span class="si">{K_tournament}</span><span class="s2">) found.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-837"><a href="#GA.__init__-837"><span class="linenos"> 837</span></a>                    <span class="n">K_tournament</span><span class="o">=</span><span class="n">K_tournament</span><span class="p">))</span>
</span><span id="GA.__init__-838"><a href="#GA.__init__-838"><span class="linenos"> 838</span></a>
</span><span id="GA.__init__-839"><a href="#GA.__init__-839"><span class="linenos"> 839</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span> <span class="o">=</span> <span class="n">K_tournament</span>
</span><span id="GA.__init__-840"><a href="#GA.__init__-840"><span class="linenos"> 840</span></a>
</span><span id="GA.__init__-841"><a href="#GA.__init__-841"><span class="linenos"> 841</span></a>        <span class="c1"># Validating the number of parents to keep in the next population: keep_parents</span>
</span><span id="GA.__init__-842"><a href="#GA.__init__-842"><span class="linenos"> 842</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="GA.__init__-843"><a href="#GA.__init__-843"><span class="linenos"> 843</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-844"><a href="#GA.__init__-844"><span class="linenos"> 844</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-845"><a href="#GA.__init__-845"><span class="linenos"> 845</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_parents parameter. The value </span><span class="si">{keep_parents}</span><span class="s2"> of type </span><span class="si">{keep_parents_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-846"><a href="#GA.__init__-846"><span class="linenos"> 846</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">,</span> <span class="n">keep_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_parents</span><span class="p">)))</span>
</span><span id="GA.__init__-847"><a href="#GA.__init__-847"><span class="linenos"> 847</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="ow">or</span> <span class="n">keep_parents</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA.__init__-848"><a href="#GA.__init__-848"><span class="linenos"> 848</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-849"><a href="#GA.__init__-849"><span class="linenos"> 849</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-850"><a href="#GA.__init__-850"><span class="linenos"> 850</span></a>                <span class="s2">&quot;Incorrect value to the keep_parents parameter: </span><span class="si">{keep_parents}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_parent parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Less than or equal to num_parents_mating</span><span class="se">\n</span><span class="s2">3) Greater than or equal to -1.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-851"><a href="#GA.__init__-851"><span class="linenos"> 851</span></a>                    <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">))</span>
</span><span id="GA.__init__-852"><a href="#GA.__init__-852"><span class="linenos"> 852</span></a>
</span><span id="GA.__init__-853"><a href="#GA.__init__-853"><span class="linenos"> 853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">=</span> <span class="n">keep_parents</span>
</span><span id="GA.__init__-854"><a href="#GA.__init__-854"><span class="linenos"> 854</span></a>
</span><span id="GA.__init__-855"><a href="#GA.__init__-855"><span class="linenos"> 855</span></a>        <span class="k">if</span> <span class="n">parent_selection_type</span> <span class="o">==</span> <span class="s2">&quot;sss&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-856"><a href="#GA.__init__-856"><span class="linenos"> 856</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-857"><a href="#GA.__init__-857"><span class="linenos"> 857</span></a>                <span class="s2">&quot;The steady-state parent (sss) selection operator is used despite that no parents are kept in the next generation.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-858"><a href="#GA.__init__-858"><span class="linenos"> 858</span></a>
</span><span id="GA.__init__-859"><a href="#GA.__init__-859"><span class="linenos"> 859</span></a>        <span class="c1"># Validating the number of elitism to keep in the next population: keep_elitism</span>
</span><span id="GA.__init__-860"><a href="#GA.__init__-860"><span class="linenos"> 860</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">):</span>
</span><span id="GA.__init__-861"><a href="#GA.__init__-861"><span class="linenos"> 861</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-862"><a href="#GA.__init__-862"><span class="linenos"> 862</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-863"><a href="#GA.__init__-863"><span class="linenos"> 863</span></a>                <span class="s2">&quot;Incorrect type of the value assigned to the keep_elitism parameter. The value </span><span class="si">{keep_elitism}</span><span class="s2"> of type </span><span class="si">{keep_elitism_type}</span><span class="s2"> found but an integer is expected.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-864"><a href="#GA.__init__-864"><span class="linenos"> 864</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">,</span> <span class="n">keep_elitism_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">keep_elitism</span><span class="p">)))</span>
</span><span id="GA.__init__-865"><a href="#GA.__init__-865"><span class="linenos"> 865</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="n">keep_elitism</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="ow">or</span> <span class="n">keep_elitism</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.__init__-866"><a href="#GA.__init__-866"><span class="linenos"> 866</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-867"><a href="#GA.__init__-867"><span class="linenos"> 867</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-868"><a href="#GA.__init__-868"><span class="linenos"> 868</span></a>                <span class="s2">&quot;Incorrect value to the keep_elitism parameter: </span><span class="si">{keep_elitism}</span><span class="s2">. </span><span class="se">\n</span><span class="s2">The assigned value to the keep_elitism parameter must satisfy the following conditions: </span><span class="se">\n</span><span class="s2">1) Less than or equal to sol_per_pop</span><span class="se">\n</span><span class="s2">2) Greater than or equal to 0.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-869"><a href="#GA.__init__-869"><span class="linenos"> 869</span></a>                    <span class="n">keep_elitism</span><span class="o">=</span><span class="n">keep_elitism</span><span class="p">))</span>
</span><span id="GA.__init__-870"><a href="#GA.__init__-870"><span class="linenos"> 870</span></a>
</span><span id="GA.__init__-871"><a href="#GA.__init__-871"><span class="linenos"> 871</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">=</span> <span class="n">keep_elitism</span>
</span><span id="GA.__init__-872"><a href="#GA.__init__-872"><span class="linenos"> 872</span></a>
</span><span id="GA.__init__-873"><a href="#GA.__init__-873"><span class="linenos"> 873</span></a>        <span class="c1"># Validate keep_parents.</span>
</span><span id="GA.__init__-874"><a href="#GA.__init__-874"><span class="linenos"> 874</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-875"><a href="#GA.__init__-875"><span class="linenos"> 875</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>  <span class="c1"># Keep all parents in the next population.</span>
</span><span id="GA.__init__-876"><a href="#GA.__init__-876"><span class="linenos"> 876</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>
</span><span id="GA.__init__-877"><a href="#GA.__init__-877"><span class="linenos"> 877</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep no parents in the next population.</span>
</span><span id="GA.__init__-878"><a href="#GA.__init__-878"><span class="linenos"> 878</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA.__init__-879"><a href="#GA.__init__-879"><span class="linenos"> 879</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>  <span class="c1"># Keep the specified number of parents in the next population.</span>
</span><span id="GA.__init__-880"><a href="#GA.__init__-880"><span class="linenos"> 880</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="GA.__init__-881"><a href="#GA.__init__-881"><span class="linenos"> 881</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-882"><a href="#GA.__init__-882"><span class="linenos"> 882</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span>
</span><span id="GA.__init__-883"><a href="#GA.__init__-883"><span class="linenos"> 883</span></a>
</span><span id="GA.__init__-884"><a href="#GA.__init__-884"><span class="linenos"> 884</span></a>        <span class="c1"># Check if the fitness_func is a function.</span>
</span><span id="GA.__init__-885"><a href="#GA.__init__-885"><span class="linenos"> 885</span></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">):</span>
</span><span id="GA.__init__-886"><a href="#GA.__init__-886"><span class="linenos"> 886</span></a>            <span class="c1"># Check if the fitness function accepts 2 paramaters.</span>
</span><span id="GA.__init__-887"><a href="#GA.__init__-887"><span class="linenos"> 887</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-888"><a href="#GA.__init__-888"><span class="linenos"> 888</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span> <span class="o">=</span> <span class="n">fitness_func</span>
</span><span id="GA.__init__-889"><a href="#GA.__init__-889"><span class="linenos"> 889</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-890"><a href="#GA.__init__-890"><span class="linenos"> 890</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-891"><a href="#GA.__init__-891"><span class="linenos"> 891</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-892"><a href="#GA.__init__-892"><span class="linenos"> 892</span></a>                    <span class="s2">&quot;The fitness function must accept 2 parameters:</span><span class="se">\n</span><span class="s2">1) A solution to calculate its fitness value.</span><span class="se">\n</span><span class="s2">2) The solution&#39;s index within the population.</span><span class="se">\n\n</span><span class="s2">The passed fitness function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-893"><a href="#GA.__init__-893"><span class="linenos"> 893</span></a>                        <span class="n">funcname</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">fitness_func</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-894"><a href="#GA.__init__-894"><span class="linenos"> 894</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-895"><a href="#GA.__init__-895"><span class="linenos"> 895</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-896"><a href="#GA.__init__-896"><span class="linenos"> 896</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-897"><a href="#GA.__init__-897"><span class="linenos"> 897</span></a>                <span class="s2">&quot;The value assigned to the fitness_func parameter is expected to be of type function but (</span><span class="si">{fitness_func_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-898"><a href="#GA.__init__-898"><span class="linenos"> 898</span></a>                    <span class="n">fitness_func_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness_func</span><span class="p">)))</span>
</span><span id="GA.__init__-899"><a href="#GA.__init__-899"><span class="linenos"> 899</span></a>
</span><span id="GA.__init__-900"><a href="#GA.__init__-900"><span class="linenos"> 900</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
</span><span id="GA.__init__-901"><a href="#GA.__init__-901"><span class="linenos"> 901</span></a>
</span><span id="GA.__init__-902"><a href="#GA.__init__-902"><span class="linenos"> 902</span></a>        <span class="c1"># Check if the on_start exists.</span>
</span><span id="GA.__init__-903"><a href="#GA.__init__-903"><span class="linenos"> 903</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-904"><a href="#GA.__init__-904"><span class="linenos"> 904</span></a>            <span class="c1"># Check if the on_start is a function.</span>
</span><span id="GA.__init__-905"><a href="#GA.__init__-905"><span class="linenos"> 905</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_start</span><span class="p">):</span>
</span><span id="GA.__init__-906"><a href="#GA.__init__-906"><span class="linenos"> 906</span></a>                <span class="c1"># Check if the on_start function accepts only a single paramater.</span>
</span><span id="GA.__init__-907"><a href="#GA.__init__-907"><span class="linenos"> 907</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.__init__-908"><a href="#GA.__init__-908"><span class="linenos"> 908</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="n">on_start</span>
</span><span id="GA.__init__-909"><a href="#GA.__init__-909"><span class="linenos"> 909</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-910"><a href="#GA.__init__-910"><span class="linenos"> 910</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-911"><a href="#GA.__init__-911"><span class="linenos"> 911</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-912"><a href="#GA.__init__-912"><span class="linenos"> 912</span></a>                        <span class="s2">&quot;The function assigned to the on_start parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-913"><a href="#GA.__init__-913"><span class="linenos"> 913</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_start</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-914"><a href="#GA.__init__-914"><span class="linenos"> 914</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-915"><a href="#GA.__init__-915"><span class="linenos"> 915</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-916"><a href="#GA.__init__-916"><span class="linenos"> 916</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-917"><a href="#GA.__init__-917"><span class="linenos"> 917</span></a>                    <span class="s2">&quot;The value assigned to the on_start parameter is expected to be of type function but (</span><span class="si">{on_start_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-918"><a href="#GA.__init__-918"><span class="linenos"> 918</span></a>                        <span class="n">on_start_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_start</span><span class="p">)))</span>
</span><span id="GA.__init__-919"><a href="#GA.__init__-919"><span class="linenos"> 919</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-920"><a href="#GA.__init__-920"><span class="linenos"> 920</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-921"><a href="#GA.__init__-921"><span class="linenos"> 921</span></a>
</span><span id="GA.__init__-922"><a href="#GA.__init__-922"><span class="linenos"> 922</span></a>        <span class="c1"># Check if the on_fitness exists.</span>
</span><span id="GA.__init__-923"><a href="#GA.__init__-923"><span class="linenos"> 923</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-924"><a href="#GA.__init__-924"><span class="linenos"> 924</span></a>            <span class="c1"># Check if the on_fitness is a function.</span>
</span><span id="GA.__init__-925"><a href="#GA.__init__-925"><span class="linenos"> 925</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">):</span>
</span><span id="GA.__init__-926"><a href="#GA.__init__-926"><span class="linenos"> 926</span></a>                <span class="c1"># Check if the on_fitness function accepts 2 paramaters.</span>
</span><span id="GA.__init__-927"><a href="#GA.__init__-927"><span class="linenos"> 927</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-928"><a href="#GA.__init__-928"><span class="linenos"> 928</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="n">on_fitness</span>
</span><span id="GA.__init__-929"><a href="#GA.__init__-929"><span class="linenos"> 929</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-930"><a href="#GA.__init__-930"><span class="linenos"> 930</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-931"><a href="#GA.__init__-931"><span class="linenos"> 931</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-932"><a href="#GA.__init__-932"><span class="linenos"> 932</span></a>                        <span class="s2">&quot;The function assigned to the on_fitness parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-933"><a href="#GA.__init__-933"><span class="linenos"> 933</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_fitness</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-934"><a href="#GA.__init__-934"><span class="linenos"> 934</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-935"><a href="#GA.__init__-935"><span class="linenos"> 935</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-936"><a href="#GA.__init__-936"><span class="linenos"> 936</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-937"><a href="#GA.__init__-937"><span class="linenos"> 937</span></a>                    <span class="s2">&quot;The value assigned to the on_fitness parameter is expected to be of type function but (</span><span class="si">{on_fitness_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-938"><a href="#GA.__init__-938"><span class="linenos"> 938</span></a>                        <span class="n">on_fitness_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_fitness</span><span class="p">)))</span>
</span><span id="GA.__init__-939"><a href="#GA.__init__-939"><span class="linenos"> 939</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-940"><a href="#GA.__init__-940"><span class="linenos"> 940</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-941"><a href="#GA.__init__-941"><span class="linenos"> 941</span></a>
</span><span id="GA.__init__-942"><a href="#GA.__init__-942"><span class="linenos"> 942</span></a>        <span class="c1"># Check if the on_parents exists.</span>
</span><span id="GA.__init__-943"><a href="#GA.__init__-943"><span class="linenos"> 943</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-944"><a href="#GA.__init__-944"><span class="linenos"> 944</span></a>            <span class="c1"># Check if the on_parents is a function.</span>
</span><span id="GA.__init__-945"><a href="#GA.__init__-945"><span class="linenos"> 945</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_parents</span><span class="p">):</span>
</span><span id="GA.__init__-946"><a href="#GA.__init__-946"><span class="linenos"> 946</span></a>                <span class="c1"># Check if the on_parents function accepts 2 paramaters.</span>
</span><span id="GA.__init__-947"><a href="#GA.__init__-947"><span class="linenos"> 947</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-948"><a href="#GA.__init__-948"><span class="linenos"> 948</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="n">on_parents</span>
</span><span id="GA.__init__-949"><a href="#GA.__init__-949"><span class="linenos"> 949</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-950"><a href="#GA.__init__-950"><span class="linenos"> 950</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-951"><a href="#GA.__init__-951"><span class="linenos"> 951</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-952"><a href="#GA.__init__-952"><span class="linenos"> 952</span></a>                        <span class="s2">&quot;The function assigned to the on_parents parameter must accept 2 parameters representing the instance of the genetic algorithm and the fitness values of all solutions.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-953"><a href="#GA.__init__-953"><span class="linenos"> 953</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_parents</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-954"><a href="#GA.__init__-954"><span class="linenos"> 954</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-955"><a href="#GA.__init__-955"><span class="linenos"> 955</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-956"><a href="#GA.__init__-956"><span class="linenos"> 956</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-957"><a href="#GA.__init__-957"><span class="linenos"> 957</span></a>                    <span class="s2">&quot;The value assigned to the on_parents parameter is expected to be of type function but (</span><span class="si">{on_parents_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-958"><a href="#GA.__init__-958"><span class="linenos"> 958</span></a>                        <span class="n">on_parents_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_parents</span><span class="p">)))</span>
</span><span id="GA.__init__-959"><a href="#GA.__init__-959"><span class="linenos"> 959</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-960"><a href="#GA.__init__-960"><span class="linenos"> 960</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-961"><a href="#GA.__init__-961"><span class="linenos"> 961</span></a>
</span><span id="GA.__init__-962"><a href="#GA.__init__-962"><span class="linenos"> 962</span></a>        <span class="c1"># Check if the on_crossover exists.</span>
</span><span id="GA.__init__-963"><a href="#GA.__init__-963"><span class="linenos"> 963</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-964"><a href="#GA.__init__-964"><span class="linenos"> 964</span></a>            <span class="c1"># Check if the on_crossover is a function.</span>
</span><span id="GA.__init__-965"><a href="#GA.__init__-965"><span class="linenos"> 965</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">):</span>
</span><span id="GA.__init__-966"><a href="#GA.__init__-966"><span class="linenos"> 966</span></a>                <span class="c1"># Check if the on_crossover function accepts 2 paramaters.</span>
</span><span id="GA.__init__-967"><a href="#GA.__init__-967"><span class="linenos"> 967</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-968"><a href="#GA.__init__-968"><span class="linenos"> 968</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="n">on_crossover</span>
</span><span id="GA.__init__-969"><a href="#GA.__init__-969"><span class="linenos"> 969</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-970"><a href="#GA.__init__-970"><span class="linenos"> 970</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-971"><a href="#GA.__init__-971"><span class="linenos"> 971</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-972"><a href="#GA.__init__-972"><span class="linenos"> 972</span></a>                        <span class="s2">&quot;The function assigned to the on_crossover parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring generated using crossover.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-973"><a href="#GA.__init__-973"><span class="linenos"> 973</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_crossover</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-974"><a href="#GA.__init__-974"><span class="linenos"> 974</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-975"><a href="#GA.__init__-975"><span class="linenos"> 975</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-976"><a href="#GA.__init__-976"><span class="linenos"> 976</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-977"><a href="#GA.__init__-977"><span class="linenos"> 977</span></a>                    <span class="s2">&quot;The value assigned to the on_crossover parameter is expected to be of type function but (</span><span class="si">{on_crossover_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-978"><a href="#GA.__init__-978"><span class="linenos"> 978</span></a>                        <span class="n">on_crossover_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_crossover</span><span class="p">)))</span>
</span><span id="GA.__init__-979"><a href="#GA.__init__-979"><span class="linenos"> 979</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-980"><a href="#GA.__init__-980"><span class="linenos"> 980</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-981"><a href="#GA.__init__-981"><span class="linenos"> 981</span></a>
</span><span id="GA.__init__-982"><a href="#GA.__init__-982"><span class="linenos"> 982</span></a>        <span class="c1"># Check if the on_mutation exists.</span>
</span><span id="GA.__init__-983"><a href="#GA.__init__-983"><span class="linenos"> 983</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-984"><a href="#GA.__init__-984"><span class="linenos"> 984</span></a>            <span class="c1"># Check if the on_mutation is a function.</span>
</span><span id="GA.__init__-985"><a href="#GA.__init__-985"><span class="linenos"> 985</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">):</span>
</span><span id="GA.__init__-986"><a href="#GA.__init__-986"><span class="linenos"> 986</span></a>                <span class="c1"># Check if the on_mutation function accepts 2 paramaters.</span>
</span><span id="GA.__init__-987"><a href="#GA.__init__-987"><span class="linenos"> 987</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-988"><a href="#GA.__init__-988"><span class="linenos"> 988</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="n">on_mutation</span>
</span><span id="GA.__init__-989"><a href="#GA.__init__-989"><span class="linenos"> 989</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-990"><a href="#GA.__init__-990"><span class="linenos"> 990</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-991"><a href="#GA.__init__-991"><span class="linenos"> 991</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-992"><a href="#GA.__init__-992"><span class="linenos"> 992</span></a>                        <span class="s2">&quot;The function assigned to the on_mutation parameter must accept 2 parameters representing the instance of the genetic algorithm and the offspring after applying the mutation operation.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-993"><a href="#GA.__init__-993"><span class="linenos"> 993</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_mutation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-994"><a href="#GA.__init__-994"><span class="linenos"> 994</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-995"><a href="#GA.__init__-995"><span class="linenos"> 995</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-996"><a href="#GA.__init__-996"><span class="linenos"> 996</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-997"><a href="#GA.__init__-997"><span class="linenos"> 997</span></a>                    <span class="s2">&quot;The value assigned to the on_mutation parameter is expected to be of type function but (</span><span class="si">{on_mutation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-998"><a href="#GA.__init__-998"><span class="linenos"> 998</span></a>                        <span class="n">on_mutation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_mutation</span><span class="p">)))</span>
</span><span id="GA.__init__-999"><a href="#GA.__init__-999"><span class="linenos"> 999</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1000"><a href="#GA.__init__-1000"><span class="linenos">1000</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1001"><a href="#GA.__init__-1001"><span class="linenos">1001</span></a>
</span><span id="GA.__init__-1002"><a href="#GA.__init__-1002"><span class="linenos">1002</span></a>        <span class="c1"># Check if the callback_generation exists.</span>
</span><span id="GA.__init__-1003"><a href="#GA.__init__-1003"><span class="linenos">1003</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">callback_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-1004"><a href="#GA.__init__-1004"><span class="linenos">1004</span></a>            <span class="c1"># Check if the callback_generation is a function.</span>
</span><span id="GA.__init__-1005"><a href="#GA.__init__-1005"><span class="linenos">1005</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">):</span>
</span><span id="GA.__init__-1006"><a href="#GA.__init__-1006"><span class="linenos">1006</span></a>                <span class="c1"># Check if the callback_generation function accepts only a single paramater.</span>
</span><span id="GA.__init__-1007"><a href="#GA.__init__-1007"><span class="linenos">1007</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.__init__-1008"><a href="#GA.__init__-1008"><span class="linenos">1008</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="GA.__init__-1009"><a href="#GA.__init__-1009"><span class="linenos">1009</span></a>                    <span class="n">on_generation</span> <span class="o">=</span> <span class="n">callback_generation</span>
</span><span id="GA.__init__-1010"><a href="#GA.__init__-1010"><span class="linenos">1010</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-1011"><a href="#GA.__init__-1011"><span class="linenos">1011</span></a>                        <span class="s2">&quot;Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and will be removed in a later release of PyGAD. Please use the on_generation parameter instead.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-1012"><a href="#GA.__init__-1012"><span class="linenos">1012</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1013"><a href="#GA.__init__-1013"><span class="linenos">1013</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1014"><a href="#GA.__init__-1014"><span class="linenos">1014</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1015"><a href="#GA.__init__-1015"><span class="linenos">1015</span></a>                        <span class="s2">&quot;The function assigned to the callback_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1016"><a href="#GA.__init__-1016"><span class="linenos">1016</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span>
</span><span id="GA.__init__-1017"><a href="#GA.__init__-1017"><span class="linenos">1017</span></a>                            <span class="n">argcount</span><span class="o">=</span><span class="n">callback_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-1018"><a href="#GA.__init__-1018"><span class="linenos">1018</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1019"><a href="#GA.__init__-1019"><span class="linenos">1019</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1020"><a href="#GA.__init__-1020"><span class="linenos">1020</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1021"><a href="#GA.__init__-1021"><span class="linenos">1021</span></a>                    <span class="s2">&quot;The value assigned to the callback_generation parameter is expected to be of type function but (</span><span class="si">{callback_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1022"><a href="#GA.__init__-1022"><span class="linenos">1022</span></a>                        <span class="n">callback_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">callback_generation</span><span class="p">)))</span>
</span><span id="GA.__init__-1023"><a href="#GA.__init__-1023"><span class="linenos">1023</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1024"><a href="#GA.__init__-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callback_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1025"><a href="#GA.__init__-1025"><span class="linenos">1025</span></a>
</span><span id="GA.__init__-1026"><a href="#GA.__init__-1026"><span class="linenos">1026</span></a>        <span class="c1"># Check if the on_generation exists.</span>
</span><span id="GA.__init__-1027"><a href="#GA.__init__-1027"><span class="linenos">1027</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-1028"><a href="#GA.__init__-1028"><span class="linenos">1028</span></a>            <span class="c1"># Check if the on_generation is a function.</span>
</span><span id="GA.__init__-1029"><a href="#GA.__init__-1029"><span class="linenos">1029</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_generation</span><span class="p">):</span>
</span><span id="GA.__init__-1030"><a href="#GA.__init__-1030"><span class="linenos">1030</span></a>                <span class="c1"># Check if the on_generation function accepts only a single paramater.</span>
</span><span id="GA.__init__-1031"><a href="#GA.__init__-1031"><span class="linenos">1031</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.__init__-1032"><a href="#GA.__init__-1032"><span class="linenos">1032</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="n">on_generation</span>
</span><span id="GA.__init__-1033"><a href="#GA.__init__-1033"><span class="linenos">1033</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1034"><a href="#GA.__init__-1034"><span class="linenos">1034</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1035"><a href="#GA.__init__-1035"><span class="linenos">1035</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1036"><a href="#GA.__init__-1036"><span class="linenos">1036</span></a>                        <span class="s2">&quot;The function assigned to the on_generation parameter must accept only 1 parameter representing the instance of the genetic algorithm.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1037"><a href="#GA.__init__-1037"><span class="linenos">1037</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_generation</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-1038"><a href="#GA.__init__-1038"><span class="linenos">1038</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1039"><a href="#GA.__init__-1039"><span class="linenos">1039</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1040"><a href="#GA.__init__-1040"><span class="linenos">1040</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1041"><a href="#GA.__init__-1041"><span class="linenos">1041</span></a>                    <span class="s2">&quot;The value assigned to the on_generation parameter is expected to be of type function but (</span><span class="si">{on_generation_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1042"><a href="#GA.__init__-1042"><span class="linenos">1042</span></a>                        <span class="n">on_generation_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_generation</span><span class="p">)))</span>
</span><span id="GA.__init__-1043"><a href="#GA.__init__-1043"><span class="linenos">1043</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1044"><a href="#GA.__init__-1044"><span class="linenos">1044</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1045"><a href="#GA.__init__-1045"><span class="linenos">1045</span></a>
</span><span id="GA.__init__-1046"><a href="#GA.__init__-1046"><span class="linenos">1046</span></a>        <span class="c1"># Check if the on_stop exists.</span>
</span><span id="GA.__init__-1047"><a href="#GA.__init__-1047"><span class="linenos">1047</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-1048"><a href="#GA.__init__-1048"><span class="linenos">1048</span></a>            <span class="c1"># Check if the on_stop is a function.</span>
</span><span id="GA.__init__-1049"><a href="#GA.__init__-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">on_stop</span><span class="p">):</span>
</span><span id="GA.__init__-1050"><a href="#GA.__init__-1050"><span class="linenos">1050</span></a>                <span class="c1"># Check if the on_stop function accepts 2 paramaters.</span>
</span><span id="GA.__init__-1051"><a href="#GA.__init__-1051"><span class="linenos">1051</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="GA.__init__-1052"><a href="#GA.__init__-1052"><span class="linenos">1052</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="n">on_stop</span>
</span><span id="GA.__init__-1053"><a href="#GA.__init__-1053"><span class="linenos">1053</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1054"><a href="#GA.__init__-1054"><span class="linenos">1054</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1055"><a href="#GA.__init__-1055"><span class="linenos">1055</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1056"><a href="#GA.__init__-1056"><span class="linenos">1056</span></a>                        <span class="s2">&quot;The function assigned to the on_stop parameter must accept 2 parameters representing the instance of the genetic algorithm and a list of the fitness values of the solutions in the last population.</span><span class="se">\n</span><span class="s2">The passed function named &#39;</span><span class="si">{funcname}</span><span class="s2">&#39; accepts </span><span class="si">{argcount}</span><span class="s2"> parameter(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1057"><a href="#GA.__init__-1057"><span class="linenos">1057</span></a>                            <span class="n">funcname</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_name</span><span class="p">,</span> <span class="n">argcount</span><span class="o">=</span><span class="n">on_stop</span><span class="o">.</span><span class="vm">__code__</span><span class="o">.</span><span class="n">co_argcount</span><span class="p">))</span>
</span><span id="GA.__init__-1058"><a href="#GA.__init__-1058"><span class="linenos">1058</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1059"><a href="#GA.__init__-1059"><span class="linenos">1059</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1060"><a href="#GA.__init__-1060"><span class="linenos">1060</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1061"><a href="#GA.__init__-1061"><span class="linenos">1061</span></a>                    <span class="s2">&quot;The value assigned to the &#39;on_stop&#39; parameter is expected to be of type function but (</span><span class="si">{on_stop_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1062"><a href="#GA.__init__-1062"><span class="linenos">1062</span></a>                        <span class="n">on_stop_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">on_stop</span><span class="p">)))</span>
</span><span id="GA.__init__-1063"><a href="#GA.__init__-1063"><span class="linenos">1063</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1064"><a href="#GA.__init__-1064"><span class="linenos">1064</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1065"><a href="#GA.__init__-1065"><span class="linenos">1065</span></a>
</span><span id="GA.__init__-1066"><a href="#GA.__init__-1066"><span class="linenos">1066</span></a>        <span class="c1"># Validate delay_after_gen</span>
</span><span id="GA.__init__-1067"><a href="#GA.__init__-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.__init__-1068"><a href="#GA.__init__-1068"><span class="linenos">1068</span></a>            <span class="k">if</span> <span class="n">delay_after_gen</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="GA.__init__-1069"><a href="#GA.__init__-1069"><span class="linenos">1069</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span> <span class="o">=</span> <span class="n">delay_after_gen</span>
</span><span id="GA.__init__-1070"><a href="#GA.__init__-1070"><span class="linenos">1070</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1071"><a href="#GA.__init__-1071"><span class="linenos">1071</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1072"><a href="#GA.__init__-1072"><span class="linenos">1072</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1073"><a href="#GA.__init__-1073"><span class="linenos">1073</span></a>                    <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be a non-negative number. The value passed is </span><span class="si">{delay_after_gen}</span><span class="s2"> of type </span><span class="si">{delay_after_gen_type}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1074"><a href="#GA.__init__-1074"><span class="linenos">1074</span></a>                        <span class="n">delay_after_gen</span><span class="o">=</span><span class="n">delay_after_gen</span><span class="p">,</span> <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="GA.__init__-1075"><a href="#GA.__init__-1075"><span class="linenos">1075</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1076"><a href="#GA.__init__-1076"><span class="linenos">1076</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1077"><a href="#GA.__init__-1077"><span class="linenos">1077</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1078"><a href="#GA.__init__-1078"><span class="linenos">1078</span></a>                <span class="s2">&quot;The value passed to the &#39;delay_after_gen&#39; parameter must be of type int or float but (</span><span class="si">{delay_after_gen_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1079"><a href="#GA.__init__-1079"><span class="linenos">1079</span></a>                    <span class="n">delay_after_gen_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">delay_after_gen</span><span class="p">)))</span>
</span><span id="GA.__init__-1080"><a href="#GA.__init__-1080"><span class="linenos">1080</span></a>
</span><span id="GA.__init__-1081"><a href="#GA.__init__-1081"><span class="linenos">1081</span></a>        <span class="c1"># Validate save_best_solutions</span>
</span><span id="GA.__init__-1082"><a href="#GA.__init__-1082"><span class="linenos">1082</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA.__init__-1083"><a href="#GA.__init__-1083"><span class="linenos">1083</span></a>            <span class="k">if</span> <span class="n">save_best_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.__init__-1084"><a href="#GA.__init__-1084"><span class="linenos">1084</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-1085"><a href="#GA.__init__-1085"><span class="linenos">1085</span></a>                    <span class="s2">&quot;Use the &#39;save_best_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations or number of genes is large.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-1086"><a href="#GA.__init__-1086"><span class="linenos">1086</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1087"><a href="#GA.__init__-1087"><span class="linenos">1087</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1088"><a href="#GA.__init__-1088"><span class="linenos">1088</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1089"><a href="#GA.__init__-1089"><span class="linenos">1089</span></a>                <span class="s2">&quot;The value passed to the &#39;save_best_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_best_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1090"><a href="#GA.__init__-1090"><span class="linenos">1090</span></a>                    <span class="n">save_best_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_best_solutions</span><span class="p">)))</span>
</span><span id="GA.__init__-1091"><a href="#GA.__init__-1091"><span class="linenos">1091</span></a>
</span><span id="GA.__init__-1092"><a href="#GA.__init__-1092"><span class="linenos">1092</span></a>        <span class="c1"># Validate save_solutions</span>
</span><span id="GA.__init__-1093"><a href="#GA.__init__-1093"><span class="linenos">1093</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="GA.__init__-1094"><a href="#GA.__init__-1094"><span class="linenos">1094</span></a>            <span class="k">if</span> <span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.__init__-1095"><a href="#GA.__init__-1095"><span class="linenos">1095</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.__init__-1096"><a href="#GA.__init__-1096"><span class="linenos">1096</span></a>                    <span class="s2">&quot;Use the &#39;save_solutions&#39; parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-1097"><a href="#GA.__init__-1097"><span class="linenos">1097</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1098"><a href="#GA.__init__-1098"><span class="linenos">1098</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1099"><a href="#GA.__init__-1099"><span class="linenos">1099</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1100"><a href="#GA.__init__-1100"><span class="linenos">1100</span></a>                <span class="s2">&quot;The value passed to the &#39;save_solutions&#39; parameter must be of type bool but (</span><span class="si">{save_solutions_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1101"><a href="#GA.__init__-1101"><span class="linenos">1101</span></a>                    <span class="n">save_solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">save_solutions</span><span class="p">)))</span>
</span><span id="GA.__init__-1102"><a href="#GA.__init__-1102"><span class="linenos">1102</span></a>
</span><span id="GA.__init__-1103"><a href="#GA.__init__-1103"><span class="linenos">1103</span></a>        <span class="c1"># Validate allow_duplicate_genes</span>
</span><span id="GA.__init__-1104"><a href="#GA.__init__-1104"><span class="linenos">1104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="GA.__init__-1105"><a href="#GA.__init__-1105"><span class="linenos">1105</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1106"><a href="#GA.__init__-1106"><span class="linenos">1106</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1107"><a href="#GA.__init__-1107"><span class="linenos">1107</span></a>                <span class="s2">&quot;The expected type of the &#39;allow_duplicate_genes&#39; parameter is bool but (</span><span class="si">{allow_duplicate_genes_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1108"><a href="#GA.__init__-1108"><span class="linenos">1108</span></a>                    <span class="n">allow_duplicate_genes_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">allow_duplicate_genes</span><span class="p">)))</span>
</span><span id="GA.__init__-1109"><a href="#GA.__init__-1109"><span class="linenos">1109</span></a>
</span><span id="GA.__init__-1110"><a href="#GA.__init__-1110"><span class="linenos">1110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">=</span> <span class="n">allow_duplicate_genes</span>
</span><span id="GA.__init__-1111"><a href="#GA.__init__-1111"><span class="linenos">1111</span></a>
</span><span id="GA.__init__-1112"><a href="#GA.__init__-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.__init__-1113"><a href="#GA.__init__-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;reach&quot;</span><span class="p">,</span> <span class="s2">&quot;saturate&quot;</span><span class="p">]</span>
</span><span id="GA.__init__-1114"><a href="#GA.__init__-1114"><span class="linenos">1114</span></a>        <span class="k">if</span> <span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-1115"><a href="#GA.__init__-1115"><span class="linenos">1115</span></a>            <span class="c1"># None: Stop after passing through all generations.</span>
</span><span id="GA.__init__-1116"><a href="#GA.__init__-1116"><span class="linenos">1116</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1117"><a href="#GA.__init__-1117"><span class="linenos">1117</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA.__init__-1118"><a href="#GA.__init__-1118"><span class="linenos">1118</span></a>            <span class="c1"># reach_{target_fitness}: Stop if the target fitness value is reached.</span>
</span><span id="GA.__init__-1119"><a href="#GA.__init__-1119"><span class="linenos">1119</span></a>            <span class="c1"># saturate_{num_generations}: Stop if the fitness value does not change (saturates) for the given number of generations.</span>
</span><span id="GA.__init__-1120"><a href="#GA.__init__-1120"><span class="linenos">1120</span></a>            <span class="n">criterion</span> <span class="o">=</span> <span class="n">stop_criteria</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-1121"><a href="#GA.__init__-1121"><span class="linenos">1121</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-1122"><a href="#GA.__init__-1122"><span class="linenos">1122</span></a>                <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.__init__-1123"><a href="#GA.__init__-1123"><span class="linenos">1123</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.__init__-1124"><a href="#GA.__init__-1124"><span class="linenos">1124</span></a>
</span><span id="GA.__init__-1125"><a href="#GA.__init__-1125"><span class="linenos">1125</span></a>                <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="GA.__init__-1126"><a href="#GA.__init__-1126"><span class="linenos">1126</span></a>                    <span class="k">pass</span>
</span><span id="GA.__init__-1127"><a href="#GA.__init__-1127"><span class="linenos">1127</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1128"><a href="#GA.__init__-1128"><span class="linenos">1128</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1129"><a href="#GA.__init__-1129"><span class="linenos">1129</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1130"><a href="#GA.__init__-1130"><span class="linenos">1130</span></a>                        <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are &#39;</span><span class="si">{supported_stop_words}</span><span class="s2">&#39; but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1131"><a href="#GA.__init__-1131"><span class="linenos">1131</span></a>                            <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="GA.__init__-1132"><a href="#GA.__init__-1132"><span class="linenos">1132</span></a>
</span><span id="GA.__init__-1133"><a href="#GA.__init__-1133"><span class="linenos">1133</span></a>                <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="GA.__init__-1134"><a href="#GA.__init__-1134"><span class="linenos">1134</span></a>                    <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="GA.__init__-1135"><a href="#GA.__init__-1135"><span class="linenos">1135</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1136"><a href="#GA.__init__-1136"><span class="linenos">1136</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1137"><a href="#GA.__init__-1137"><span class="linenos">1137</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1138"><a href="#GA.__init__-1138"><span class="linenos">1138</span></a>                        <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1139"><a href="#GA.__init__-1139"><span class="linenos">1139</span></a>                            <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="GA.__init__-1140"><a href="#GA.__init__-1140"><span class="linenos">1140</span></a>
</span><span id="GA.__init__-1141"><a href="#GA.__init__-1141"><span class="linenos">1141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="GA.__init__-1142"><a href="#GA.__init__-1142"><span class="linenos">1142</span></a>
</span><span id="GA.__init__-1143"><a href="#GA.__init__-1143"><span class="linenos">1143</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1144"><a href="#GA.__init__-1144"><span class="linenos">1144</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1145"><a href="#GA.__init__-1145"><span class="linenos">1145</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1146"><a href="#GA.__init__-1146"><span class="linenos">1146</span></a>                    <span class="s2">&quot;For format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but &#39;</span><span class="si">{stop_criteria}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1147"><a href="#GA.__init__-1147"><span class="linenos">1147</span></a>                        <span class="n">stop_criteria</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="GA.__init__-1148"><a href="#GA.__init__-1148"><span class="linenos">1148</span></a>
</span><span id="GA.__init__-1149"><a href="#GA.__init__-1149"><span class="linenos">1149</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
</span><span id="GA.__init__-1150"><a href="#GA.__init__-1150"><span class="linenos">1150</span></a>            <span class="c1"># Remove duplicate criterira by converting the list to a set then back to a list.</span>
</span><span id="GA.__init__-1151"><a href="#GA.__init__-1151"><span class="linenos">1151</span></a>            <span class="n">stop_criteria</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">))</span>
</span><span id="GA.__init__-1152"><a href="#GA.__init__-1152"><span class="linenos">1152</span></a>            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">):</span>
</span><span id="GA.__init__-1153"><a href="#GA.__init__-1153"><span class="linenos">1153</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA.__init__-1154"><a href="#GA.__init__-1154"><span class="linenos">1154</span></a>                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
</span><span id="GA.__init__-1155"><a href="#GA.__init__-1155"><span class="linenos">1155</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">criterion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-1156"><a href="#GA.__init__-1156"><span class="linenos">1156</span></a>                        <span class="n">stop_word</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.__init__-1157"><a href="#GA.__init__-1157"><span class="linenos">1157</span></a>                        <span class="n">number</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.__init__-1158"><a href="#GA.__init__-1158"><span class="linenos">1158</span></a>
</span><span id="GA.__init__-1159"><a href="#GA.__init__-1159"><span class="linenos">1159</span></a>                        <span class="k">if</span> <span class="n">stop_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">:</span>
</span><span id="GA.__init__-1160"><a href="#GA.__init__-1160"><span class="linenos">1160</span></a>                            <span class="k">pass</span>
</span><span id="GA.__init__-1161"><a href="#GA.__init__-1161"><span class="linenos">1161</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1162"><a href="#GA.__init__-1162"><span class="linenos">1162</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1163"><a href="#GA.__init__-1163"><span class="linenos">1163</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1164"><a href="#GA.__init__-1164"><span class="linenos">1164</span></a>                                <span class="s2">&quot;In the &#39;stop_criteria&#39; parameter, the supported stop words are </span><span class="si">{supported_stop_words}</span><span class="s2"> but &#39;</span><span class="si">{stop_word}</span><span class="s2">&#39; found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1165"><a href="#GA.__init__-1165"><span class="linenos">1165</span></a>                                    <span class="n">supported_stop_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_stop_words</span><span class="p">,</span> <span class="n">stop_word</span><span class="o">=</span><span class="n">stop_word</span><span class="p">))</span>
</span><span id="GA.__init__-1166"><a href="#GA.__init__-1166"><span class="linenos">1166</span></a>
</span><span id="GA.__init__-1167"><a href="#GA.__init__-1167"><span class="linenos">1167</span></a>                        <span class="k">if</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
</span><span id="GA.__init__-1168"><a href="#GA.__init__-1168"><span class="linenos">1168</span></a>                            <span class="n">number</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</span><span id="GA.__init__-1169"><a href="#GA.__init__-1169"><span class="linenos">1169</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1170"><a href="#GA.__init__-1170"><span class="linenos">1170</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1171"><a href="#GA.__init__-1171"><span class="linenos">1171</span></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1172"><a href="#GA.__init__-1172"><span class="linenos">1172</span></a>                                <span class="s2">&quot;The value following the stop word in the &#39;stop_criteria&#39; parameter must be a number but the value &#39;</span><span class="si">{stop_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_val_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1173"><a href="#GA.__init__-1173"><span class="linenos">1173</span></a>                                    <span class="n">stop_val</span><span class="o">=</span><span class="n">number</span><span class="p">,</span> <span class="n">stop_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">number</span><span class="p">)))</span>
</span><span id="GA.__init__-1174"><a href="#GA.__init__-1174"><span class="linenos">1174</span></a>
</span><span id="GA.__init__-1175"><a href="#GA.__init__-1175"><span class="linenos">1175</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">stop_word</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">ftol_abs</span><span class="p">])</span>
</span><span id="GA.__init__-1176"><a href="#GA.__init__-1176"><span class="linenos">1176</span></a>
</span><span id="GA.__init__-1177"><a href="#GA.__init__-1177"><span class="linenos">1177</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1178"><a href="#GA.__init__-1178"><span class="linenos">1178</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1179"><a href="#GA.__init__-1179"><span class="linenos">1179</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1180"><a href="#GA.__init__-1180"><span class="linenos">1180</span></a>                            <span class="s2">&quot;The format of a single criterion in the &#39;stop_criteria&#39; parameter is &#39;word_number&#39; but </span><span class="si">{stop_criteria}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1181"><a href="#GA.__init__-1181"><span class="linenos">1181</span></a>                                <span class="n">stop_criteria</span><span class="o">=</span><span class="n">criterion</span><span class="p">))</span>
</span><span id="GA.__init__-1182"><a href="#GA.__init__-1182"><span class="linenos">1182</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1183"><a href="#GA.__init__-1183"><span class="linenos">1183</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1184"><a href="#GA.__init__-1184"><span class="linenos">1184</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1185"><a href="#GA.__init__-1185"><span class="linenos">1185</span></a>                        <span class="s2">&quot;When the &#39;stop_criteria&#39; parameter is assigned a tuple/list/numpy.ndarray, then its elements must be strings but the value &#39;</span><span class="si">{stop_criteria_val}</span><span class="s2">&#39; of type </span><span class="si">{stop_criteria_val_type}</span><span class="s2"> found at index </span><span class="si">{stop_criteria_val_idx}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1186"><a href="#GA.__init__-1186"><span class="linenos">1186</span></a>                            <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">val</span><span class="p">,</span> <span class="n">stop_criteria_val_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">stop_criteria_val_idx</span><span class="o">=</span><span class="n">idx</span><span class="p">))</span>
</span><span id="GA.__init__-1187"><a href="#GA.__init__-1187"><span class="linenos">1187</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1188"><a href="#GA.__init__-1188"><span class="linenos">1188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1189"><a href="#GA.__init__-1189"><span class="linenos">1189</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1190"><a href="#GA.__init__-1190"><span class="linenos">1190</span></a>                <span class="s2">&quot;The expected value of the &#39;stop_criteria&#39; is a single string or a list/tuple/numpy.ndarray of strings but the value </span><span class="si">{stop_criteria_val}</span><span class="s2"> of type </span><span class="si">{stop_criteria_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1191"><a href="#GA.__init__-1191"><span class="linenos">1191</span></a>                    <span class="n">stop_criteria_val</span><span class="o">=</span><span class="n">stop_criteria</span><span class="p">,</span> <span class="n">stop_criteria_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">stop_criteria</span><span class="p">)))</span>
</span><span id="GA.__init__-1192"><a href="#GA.__init__-1192"><span class="linenos">1192</span></a>
</span><span id="GA.__init__-1193"><a href="#GA.__init__-1193"><span class="linenos">1193</span></a>        <span class="k">if</span> <span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.__init__-1194"><a href="#GA.__init__-1194"><span class="linenos">1194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1195"><a href="#GA.__init__-1195"><span class="linenos">1195</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.__init__-1196"><a href="#GA.__init__-1196"><span class="linenos">1196</span></a>            <span class="k">if</span> <span class="n">parallel_processing</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-1197"><a href="#GA.__init__-1197"><span class="linenos">1197</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thread&quot;</span><span class="p">,</span> <span class="n">parallel_processing</span><span class="p">]</span>
</span><span id="GA.__init__-1198"><a href="#GA.__init__-1198"><span class="linenos">1198</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1199"><a href="#GA.__init__-1199"><span class="linenos">1199</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1200"><a href="#GA.__init__-1200"><span class="linenos">1200</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1201"><a href="#GA.__init__-1201"><span class="linenos">1201</span></a>                    <span class="s2">&quot;When the &#39;parallel_processing&#39; parameter is assigned an integer, then the integer must be positive but the value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1202"><a href="#GA.__init__-1202"><span class="linenos">1202</span></a>                        <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">))</span>
</span><span id="GA.__init__-1203"><a href="#GA.__init__-1203"><span class="linenos">1203</span></a>        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">]:</span>
</span><span id="GA.__init__-1204"><a href="#GA.__init__-1204"><span class="linenos">1204</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="GA.__init__-1205"><a href="#GA.__init__-1205"><span class="linenos">1205</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA.__init__-1206"><a href="#GA.__init__-1206"><span class="linenos">1206</span></a>                    <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;process&quot;</span><span class="p">,</span> <span class="s2">&quot;thread&quot;</span><span class="p">]:</span>
</span><span id="GA.__init__-1207"><a href="#GA.__init__-1207"><span class="linenos">1207</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span> <span class="ow">and</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
</span><span id="GA.__init__-1208"><a href="#GA.__init__-1208"><span class="linenos">1208</span></a>                                <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.__init__-1209"><a href="#GA.__init__-1209"><span class="linenos">1209</span></a>                            <span class="k">if</span> <span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.__init__-1210"><a href="#GA.__init__-1210"><span class="linenos">1210</span></a>                                <span class="c1"># If the number of processes/threads is 0, this means no parallel processing is used. It is equivelant to setting parallel_processing=None.</span>
</span><span id="GA.__init__-1211"><a href="#GA.__init__-1211"><span class="linenos">1211</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1212"><a href="#GA.__init__-1212"><span class="linenos">1212</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1213"><a href="#GA.__init__-1213"><span class="linenos">1213</span></a>                                <span class="c1"># Whether the second value is None or a positive integer.</span>
</span><span id="GA.__init__-1214"><a href="#GA.__init__-1214"><span class="linenos">1214</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="o">=</span> <span class="n">parallel_processing</span>
</span><span id="GA.__init__-1215"><a href="#GA.__init__-1215"><span class="linenos">1215</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1216"><a href="#GA.__init__-1216"><span class="linenos">1216</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1217"><a href="#GA.__init__-1217"><span class="linenos">1217</span></a>                            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1218"><a href="#GA.__init__-1218"><span class="linenos">1218</span></a>                                <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the second element must be an integer but the value (</span><span class="si">{second_value}</span><span class="s2">) of type (</span><span class="si">{second_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1219"><a href="#GA.__init__-1219"><span class="linenos">1219</span></a>                                    <span class="n">second_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span><span id="GA.__init__-1220"><a href="#GA.__init__-1220"><span class="linenos">1220</span></a>                                    <span class="n">second_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
</span><span id="GA.__init__-1221"><a href="#GA.__init__-1221"><span class="linenos">1221</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1222"><a href="#GA.__init__-1222"><span class="linenos">1222</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1223"><a href="#GA.__init__-1223"><span class="linenos">1223</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1224"><a href="#GA.__init__-1224"><span class="linenos">1224</span></a>                            <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the value of the first element must be either &#39;process&#39; or &#39;thread&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1225"><a href="#GA.__init__-1225"><span class="linenos">1225</span></a>                                <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="GA.__init__-1226"><a href="#GA.__init__-1226"><span class="linenos">1226</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1227"><a href="#GA.__init__-1227"><span class="linenos">1227</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1228"><a href="#GA.__init__-1228"><span class="linenos">1228</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="GA.__init__-1229"><a href="#GA.__init__-1229"><span class="linenos">1229</span></a>                        <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then the first element must be of type &#39;str&#39; but the value (</span><span class="si">{first_value}</span><span class="s2">) of type (</span><span class="si">{first_value_type}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1230"><a href="#GA.__init__-1230"><span class="linenos">1230</span></a>                            <span class="n">first_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">first_value_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
</span><span id="GA.__init__-1231"><a href="#GA.__init__-1231"><span class="linenos">1231</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1232"><a href="#GA.__init__-1232"><span class="linenos">1232</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1233"><a href="#GA.__init__-1233"><span class="linenos">1233</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1234"><a href="#GA.__init__-1234"><span class="linenos">1234</span></a>                    <span class="s2">&quot;When a list or tuple is assigned to the &#39;parallel_processing&#39; parameter, then it must have 2 elements but (</span><span class="si">{num_elements}</span><span class="s2">) found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1235"><a href="#GA.__init__-1235"><span class="linenos">1235</span></a>                        <span class="n">num_elements</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="GA.__init__-1236"><a href="#GA.__init__-1236"><span class="linenos">1236</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.__init__-1237"><a href="#GA.__init__-1237"><span class="linenos">1237</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1238"><a href="#GA.__init__-1238"><span class="linenos">1238</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.__init__-1239"><a href="#GA.__init__-1239"><span class="linenos">1239</span></a>                <span class="s2">&quot;Unexpected value (</span><span class="si">{parallel_processing_value}</span><span class="s2">) of type (</span><span class="si">{parallel_processing_type}</span><span class="s2">) assigned to the &#39;parallel_processing&#39; parameter. The accepted values for this parameter are:</span><span class="se">\n</span><span class="s2">1) None: (Default) It means no parallel processing is used.</span><span class="se">\n</span><span class="s2">2) A positive integer referring to the number of threads to be used (i.e. threads, not processes, are used.</span><span class="se">\n</span><span class="s2">3) list/tuple: If a list or a tuple of exactly 2 elements is assigned, then:</span><span class="se">\n\t</span><span class="s2">*1) The first element can be either &#39;process&#39; or &#39;thread&#39; to specify whether processes or threads are used, respectively.</span><span class="se">\n\t</span><span class="s2">*2) The second element can be:</span><span class="se">\n\t\t</span><span class="s2">**1) A positive integer to select the maximum number of processes or threads to be used.</span><span class="se">\n\t\t</span><span class="s2">**2) 0 to indicate that parallel processing is not used. This is identical to setting &#39;parallel_processing=None&#39;.</span><span class="se">\n\t\t</span><span class="s2">**3) None to use the default value as calculated by the concurrent.futures module.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.__init__-1240"><a href="#GA.__init__-1240"><span class="linenos">1240</span></a>                    <span class="n">parallel_processing_value</span><span class="o">=</span><span class="n">parallel_processing</span><span class="p">,</span> <span class="n">parallel_processing_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">parallel_processing</span><span class="p">)))</span>
</span><span id="GA.__init__-1241"><a href="#GA.__init__-1241"><span class="linenos">1241</span></a>
</span><span id="GA.__init__-1242"><a href="#GA.__init__-1242"><span class="linenos">1242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.__init__-1243"><a href="#GA.__init__-1243"><span class="linenos">1243</span></a>
</span><span id="GA.__init__-1244"><a href="#GA.__init__-1244"><span class="linenos">1244</span></a>        <span class="c1"># Set the `run_completed` property to False. It is set to `True` only after the `run()` method is complete.</span>
</span><span id="GA.__init__-1245"><a href="#GA.__init__-1245"><span class="linenos">1245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.__init__-1246"><a href="#GA.__init__-1246"><span class="linenos">1246</span></a>
</span><span id="GA.__init__-1247"><a href="#GA.__init__-1247"><span class="linenos">1247</span></a>        <span class="c1"># The number of completed generations.</span>
</span><span id="GA.__init__-1248"><a href="#GA.__init__-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.__init__-1249"><a href="#GA.__init__-1249"><span class="linenos">1249</span></a>
</span><span id="GA.__init__-1250"><a href="#GA.__init__-1250"><span class="linenos">1250</span></a>        <span class="c1"># At this point, all necessary parameters validation is done successfully and we are sure that the parameters are valid.</span>
</span><span id="GA.__init__-1251"><a href="#GA.__init__-1251"><span class="linenos">1251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True when all the parameters passed in the GA class constructor are valid.</span>
</span><span id="GA.__init__-1252"><a href="#GA.__init__-1252"><span class="linenos">1252</span></a>
</span><span id="GA.__init__-1253"><a href="#GA.__init__-1253"><span class="linenos">1253</span></a>        <span class="c1"># Parameters of the genetic algorithm.</span>
</span><span id="GA.__init__-1254"><a href="#GA.__init__-1254"><span class="linenos">1254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">num_generations</span><span class="p">)</span>
</span><span id="GA.__init__-1255"><a href="#GA.__init__-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span> <span class="o">=</span> <span class="n">parent_selection_type</span>
</span><span id="GA.__init__-1256"><a href="#GA.__init__-1256"><span class="linenos">1256</span></a>
</span><span id="GA.__init__-1257"><a href="#GA.__init__-1257"><span class="linenos">1257</span></a>        <span class="c1"># Parameters of the mutation operation.</span>
</span><span id="GA.__init__-1258"><a href="#GA.__init__-1258"><span class="linenos">1258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_percent_genes</span> <span class="o">=</span> <span class="n">mutation_percent_genes</span>
</span><span id="GA.__init__-1259"><a href="#GA.__init__-1259"><span class="linenos">1259</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span> <span class="o">=</span> <span class="n">mutation_num_genes</span>
</span><span id="GA.__init__-1260"><a href="#GA.__init__-1260"><span class="linenos">1260</span></a>
</span><span id="GA.__init__-1261"><a href="#GA.__init__-1261"><span class="linenos">1261</span></a>        <span class="c1"># Even such this parameter is declared in the class header, it is assigned to the object here to access it after saving the object.</span>
</span><span id="GA.__init__-1262"><a href="#GA.__init__-1262"><span class="linenos">1262</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># A list holding the fitness value of the best solution for each generation.</span>
</span><span id="GA.__init__-1263"><a href="#GA.__init__-1263"><span class="linenos">1263</span></a>
</span><span id="GA.__init__-1264"><a href="#GA.__init__-1264"><span class="linenos">1264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># The generation number at which the best fitness value is reached. It is only assigned the generation number after the `run()` method completes. Otherwise, its value is -1.</span>
</span><span id="GA.__init__-1265"><a href="#GA.__init__-1265"><span class="linenos">1265</span></a>
</span><span id="GA.__init__-1266"><a href="#GA.__init__-1266"><span class="linenos">1266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span> <span class="o">=</span> <span class="n">save_best_solutions</span>
</span><span id="GA.__init__-1267"><a href="#GA.__init__-1267"><span class="linenos">1267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the best solution in each generation.</span>
</span><span id="GA.__init__-1268"><a href="#GA.__init__-1268"><span class="linenos">1268</span></a>
</span><span id="GA.__init__-1269"><a href="#GA.__init__-1269"><span class="linenos">1269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">=</span> <span class="n">save_solutions</span>
</span><span id="GA.__init__-1270"><a href="#GA.__init__-1270"><span class="linenos">1270</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the solutions in each generation.</span>
</span><span id="GA.__init__-1271"><a href="#GA.__init__-1271"><span class="linenos">1271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Holds the fitness of the solutions in each generation.</span>
</span><span id="GA.__init__-1272"><a href="#GA.__init__-1272"><span class="linenos">1272</span></a>
</span><span id="GA.__init__-1273"><a href="#GA.__init__-1273"><span class="linenos">1273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the fitness values of all solutions in the last generation.</span>
</span><span id="GA.__init__-1274"><a href="#GA.__init__-1274"><span class="linenos">1274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the parents of the last generation.</span>
</span><span id="GA.__init__-1275"><a href="#GA.__init__-1275"><span class="linenos">1275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying crossover in the last generation.</span>
</span><span id="GA.__init__-1276"><a href="#GA.__init__-1276"><span class="linenos">1276</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># A list holding the offspring after applying mutation in the last generation.</span>
</span><span id="GA.__init__-1277"><a href="#GA.__init__-1277"><span class="linenos">1277</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Holds the fitness values of one generation before the fitness values saved in the last_generation_fitness attribute. Added in PyGAD 2.26.2</span>
</span><span id="GA.__init__-1278"><a href="#GA.__init__-1278"><span class="linenos">1278</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Added in PyGAD 2.18.0. A NumPy array holding the elitism in the current generation according to the value passed in the keep_elitism parameter.</span>
</span></pre></div>


            <div class="docstring"><p>The constructor of the GA class accepts all parameters required to create an instance of the GA class. It validates such parameters.</p>

<p>num_generations: Number of generations.
num_parents_mating: Number of solutions to be selected as parents in the mating pool.</p>

<p>fitness_func: Accepts a function that must accept 2 parameters (a single solution and its index in the population) and return the fitness value of the solution. Available starting from PyGAD 1.0.17 until 1.0.20 with a single parameter representing the solution. Changed in PyGAD 2.0.0 and higher to include the second parameter representing the solution index.</p>

<p>initial_population: A user-defined initial population. It is useful when the user wants to start the generations with a custom initial population. It defaults to None which means no initial population is specified by the user. In this case, PyGAD creates an initial population using the 'sol_per_pop' and 'num_genes' parameters. An exception is raised if the 'initial_population' is None while any of the 2 parameters ('sol_per_pop' or 'num_genes') is also None.
sol_per_pop: Number of solutions in the population.
num_genes: Number of parameters in the function.</p>

<p>init_range_low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.
init_range_high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</p>

<h1 id="it-is-ok-to-set-the-value-of-any-of-the-2-parameters-init_range_low-and-init_range_high-to-be-equal-higher-or-lower-than-the-other-parameter-ie-init_range_low-is-not-needed-to-be-lower-than-init_range_high">It is OK to set the value of any of the 2 parameters ('init_range_low' and 'init_range_high') to be equal, higher or lower than the other parameter (i.e. init_range_low is not needed to be lower than init_range_high).</h1>

<p>gene_type: The type of the gene. It is assigned to any of these types (int, float, numpy.int, numpy.int8, numpy.int16, numpy.int32, numpy.int64, numpy.uint, numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64, numpy.float, numpy.float16, numpy.float32, numpy.float64) and forces all the genes to be of that type.</p>

<p>parent_selection_type: Type of parent selection.
keep_parents: If 0, this means no parent in the current population will be used in the next population. If -1, this means all parents in the current population will be used in the next population. If set to a value &gt; 0, then the specified value refers to the number of parents in the current population to be used in the next population. Some parent selection operators such as rank selection, favor population diversity and therefore keeping the parents in the next generation can be beneficial. However, some other parent selection operators, such as roulette wheel selection (RWS), have higher selection pressure and keeping more than one parent in the next generation can seriously harm population diversity. This parameter have an effect only when the keep_elitism parameter is 0. Thanks to Prof. Fernando Jiménez Barrionuevo (<a href="http://webs.um.es/fernan">http://webs.um.es/fernan</a>) for editing this sentence.
K_tournament: When the value of 'parent_selection_type' is 'tournament', the 'K_tournament' parameter specifies the number of solutions from which a parent is selected randomly.</p>

<p>keep_elitism: Added in PyGAD 2.18.0. It can take the value 0 or a positive integer that satisfies (0 &lt;= keep_elitism &lt;= sol_per_pop). It defaults to 1 which means only the best solution in the current generation is kept in the next generation. If assigned 0, this means it has no effect. If assigned a positive integer K, then the best K solutions are kept in the next generation. It cannot be assigned a value greater than the value assigned to the sol_per_pop parameter. If this parameter has a value different than 0, then the keep_parents parameter will have no effect.</p>

<p>crossover_type: Type of the crossover opreator. If  crossover_type=None, then the crossover step is bypassed which means no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.
crossover_probability: The probability of selecting a solution for the crossover operation. If the solution probability is &lt;= crossover_probability, the solution is selected. The value must be between 0 and 1 inclusive.</p>

<p>mutation_type: Type of the mutation opreator. If mutation_type=None, then the mutation step is bypassed which means no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.
mutation_probability: The probability of selecting a gene for the mutation operation. If the gene probability is &lt;= mutation_probability, the gene is selected. It accepts either a single value for fixed mutation or a list/tuple/numpy.ndarray of 2 values for adaptive mutation. The values must be between 0 and 1 inclusive. If specified, then no need for the 2 parameters mutation_percent_genes and mutation_num_genes.</p>

<p>mutation_by_replacement: An optional bool parameter. It works only when the selected type of mutation is random (mutation_type="random"). In this case, setting mutation_by_replacement=True means replace the gene by the randomly generated value. If False, then it has no effect and random mutation works by adding the random value to the gene.</p>

<p>mutation_percent_genes: Percentage of genes to mutate which defaults to the string 'default' which means 10%. This parameter has no action if any of the 2 parameters mutation_probability or mutation_num_genes exist.
mutation_num_genes: Number of genes to mutate which defaults to None. If the parameter mutation_num_genes exists, then no need for the parameter mutation_percent_genes. This parameter has no action if the mutation_probability parameter exists.
random_mutation_min_val: The minimum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to -1.0.
random_mutation_max_val: The maximum value of the range from which a random value is selected to be added to the selected gene(s) to mutate. It defaults to 1.0.</p>

<p>gene_space: It accepts a list of all possible values of the gene. This list is used in the mutation step. Should be used only if the gene space is a set of discrete values. No need for the 2 parameters (random_mutation_min_val and random_mutation_max_val) if the parameter gene_space exists. Added in PyGAD 2.5.0. In PyGAD 2.11.0, the gene_space can be assigned a dict.</p>

<p>on_start: Accepts a function to be called only once before the genetic algorithm starts its evolution. This function must accept a single parameter representing the instance of the genetic algorithm. Added in PyGAD 2.6.0.
on_fitness: Accepts a function to be called after calculating the fitness values of all solutions in the population. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of all solutions' fitness values. Added in PyGAD 2.6.0.
on_parents: Accepts a function to be called after selecting the parents that mates. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the selected parents. Added in PyGAD 2.6.0.
on_crossover: Accepts a function to be called each time the crossover operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring generated using crossover. Added in PyGAD 2.6.0.
on_mutation: Accepts a function to be called each time the mutation operation is applied. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one represents the offspring after applying the mutation. Added in PyGAD 2.6.0.
callback_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned "stop", then the run() method stops without completing the other generations. Starting from PyGAD 2.6.0, the callback_generation parameter is deprecated and should be replaced by the on_generation parameter.
on_generation: Accepts a function to be called after each generation. This function must accept a single parameter representing the instance of the genetic algorithm. If the function returned "stop", then the run() method stops without completing the other generations. Added in PyGAD 2.6.0.
on_stop: Accepts a function to be called only once exactly before the genetic algorithm stops or when it completes all the generations. This function must accept 2 parameters: the first one represents the instance of the genetic algorithm and the second one is a list of fitness values of the last population's solutions. Added in PyGAD 2.6.0.</p>

<p>delay_after_gen: Added in PyGAD 2.4.0. It accepts a non-negative number specifying the number of seconds to wait after a generation completes and before going to the next generation. It defaults to 0.0 which means no delay after the generation.</p>

<p>save_best_solutions: Added in PyGAD 2.9.0 and its type is bool. If True, then the best solution in each generation is saved into the 'best_solutions' attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations or the number of genes is large.
save_solutions: Added in PyGAD 2.15.0 and its type is bool. If True, then all solutions in each generation are saved into the 'solutions' attribute. Use this parameter with caution as it may cause memory overflow when either the number of generations, number of genes, or number of solutions in population is large.</p>

<p>suppress_warnings: Added in PyGAD 2.10.0 and its type is bool. If True, then no warning messages will be displayed. It defaults to False.</p>

<p>allow_duplicate_genes: Added in PyGAD 2.13.0. If True, then a solution/chromosome may have duplicate gene values. If False, then each gene will have a unique value in its solution.</p>

<p>stop_criteria: Added in PyGAD 2.15.0. It is assigned to some criteria to stop the evolution if at least one criterion holds.</p>

<p>parallel_processing: Added in PyGAD 2.17.0. Defaults to <code>None</code> which means no parallel processing is used. If a positive integer is assigned, it specifies the number of threads to be used. If a list or a tuple of exactly 2 elements is assigned, then: 1) The first element can be either "process" or "thread" to specify whether processes or threads are used, respectively. 2) The second element can be: 1) A positive integer to select the maximum number of processes or threads to be used. 2) 0 to indicate that parallel processing is not used. This is identical to setting 'parallel_processing=None'. 3) None to use the default value as calculated by the concurrent.futures module.</p>

<p>random_seed: Added in PyGAD 2.18.0. It defines the random seed to be used by the random function generators (we use random functions in the NumPy and random modules). This helps to reproduce the same results by setting the same random seed.</p>
</div>


                            </div>
                            <div id="GA.supported_int_types" class="classattr">
                                <div class="attr variable">
            <span class="name">supported_int_types</span>        =
<input id="GA.supported_int_types-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="GA.supported_int_types-view-value"></label><span class="default_value">[&lt;class &#39;int&#39;&gt;, &lt;class &#39;numpy.int8&#39;&gt;, &lt;class &#39;numpy.int16&#39;&gt;, &lt;class &#39;numpy.int32&#39;&gt;, &lt;class &#39;numpy.int64&#39;&gt;, &lt;class &#39;numpy.uint32&#39;&gt;, &lt;class &#39;numpy.uint8&#39;&gt;, &lt;class &#39;numpy.uint16&#39;&gt;, &lt;class &#39;numpy.uint32&#39;&gt;, &lt;class &#39;numpy.uint64&#39;&gt;]</span>

        
    </div>
    <a class="headerlink" href="#GA.supported_int_types"></a>
    
    

                            </div>
                            <div id="GA.supported_float_types" class="classattr">
                                <div class="attr variable">
            <span class="name">supported_float_types</span>        =
<span class="default_value">[&lt;class &#39;float&#39;&gt;, &lt;class &#39;numpy.float16&#39;&gt;, &lt;class &#39;numpy.float32&#39;&gt;, &lt;class &#39;numpy.float64&#39;&gt;]</span>

        
    </div>
    <a class="headerlink" href="#GA.supported_float_types"></a>
    
    

                            </div>
                            <div id="GA.supported_int_float_types" class="classattr">
                                <div class="attr variable">
            <span class="name">supported_int_float_types</span>        =
<input id="GA.supported_int_float_types-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="GA.supported_int_float_types-view-value"></label><span class="default_value">[&lt;class &#39;int&#39;&gt;, &lt;class &#39;numpy.int8&#39;&gt;, &lt;class &#39;numpy.int16&#39;&gt;, &lt;class &#39;numpy.int32&#39;&gt;, &lt;class &#39;numpy.int64&#39;&gt;, &lt;class &#39;numpy.uint32&#39;&gt;, &lt;class &#39;numpy.uint8&#39;&gt;, &lt;class &#39;numpy.uint16&#39;&gt;, &lt;class &#39;numpy.uint32&#39;&gt;, &lt;class &#39;numpy.uint64&#39;&gt;, &lt;class &#39;float&#39;&gt;, &lt;class &#39;numpy.float16&#39;&gt;, &lt;class &#39;numpy.float32&#39;&gt;, &lt;class &#39;numpy.float64&#39;&gt;]</span>

        
    </div>
    <a class="headerlink" href="#GA.supported_int_float_types"></a>
    
    

                            </div>
                            <div id="GA.random_seed" class="classattr">
                                <div class="attr variable">
            <span class="name">random_seed</span>

        
    </div>
    <a class="headerlink" href="#GA.random_seed"></a>
    
    

                            </div>
                            <div id="GA.mutation_by_replacement" class="classattr">
                                <div class="attr variable">
            <span class="name">mutation_by_replacement</span>

        
    </div>
    <a class="headerlink" href="#GA.mutation_by_replacement"></a>
    
    

                            </div>
                            <div id="GA.gene_space_nested" class="classattr">
                                <div class="attr variable">
            <span class="name">gene_space_nested</span>

        
    </div>
    <a class="headerlink" href="#GA.gene_space_nested"></a>
    
    

                            </div>
                            <div id="GA.gene_space" class="classattr">
                                <div class="attr variable">
            <span class="name">gene_space</span>

        
    </div>
    <a class="headerlink" href="#GA.gene_space"></a>
    
    

                            </div>
                            <div id="GA.random_mutation_min_val" class="classattr">
                                <div class="attr variable">
            <span class="name">random_mutation_min_val</span>

        
    </div>
    <a class="headerlink" href="#GA.random_mutation_min_val"></a>
    
    

                            </div>
                            <div id="GA.random_mutation_max_val" class="classattr">
                                <div class="attr variable">
            <span class="name">random_mutation_max_val</span>

        
    </div>
    <a class="headerlink" href="#GA.random_mutation_max_val"></a>
    
    

                            </div>
                            <div id="GA.initial_population" class="classattr">
                                <div class="attr variable">
            <span class="name">initial_population</span>

        
    </div>
    <a class="headerlink" href="#GA.initial_population"></a>
    
    

                            </div>
                            <div id="GA.population" class="classattr">
                                <div class="attr variable">
            <span class="name">population</span>

        
    </div>
    <a class="headerlink" href="#GA.population"></a>
    
    

                            </div>
                            <div id="GA.num_parents_mating" class="classattr">
                                <div class="attr variable">
            <span class="name">num_parents_mating</span>

        
    </div>
    <a class="headerlink" href="#GA.num_parents_mating"></a>
    
    

                            </div>
                            <div id="GA.crossover_type" class="classattr">
                                <div class="attr variable">
            <span class="name">crossover_type</span>

        
    </div>
    <a class="headerlink" href="#GA.crossover_type"></a>
    
    

                            </div>
                            <div id="GA.mutation_type" class="classattr">
                                <div class="attr variable">
            <span class="name">mutation_type</span>

        
    </div>
    <a class="headerlink" href="#GA.mutation_type"></a>
    
    

                            </div>
                            <div id="GA.K_tournament" class="classattr">
                                <div class="attr variable">
            <span class="name">K_tournament</span>

        
    </div>
    <a class="headerlink" href="#GA.K_tournament"></a>
    
    

                            </div>
                            <div id="GA.keep_parents" class="classattr">
                                <div class="attr variable">
            <span class="name">keep_parents</span>

        
    </div>
    <a class="headerlink" href="#GA.keep_parents"></a>
    
    

                            </div>
                            <div id="GA.keep_elitism" class="classattr">
                                <div class="attr variable">
            <span class="name">keep_elitism</span>

        
    </div>
    <a class="headerlink" href="#GA.keep_elitism"></a>
    
    

                            </div>
                            <div id="GA.args" class="classattr">
                                <div class="attr variable">
            <span class="name">args</span>

        
    </div>
    <a class="headerlink" href="#GA.args"></a>
    
    

                            </div>
                            <div id="GA.allow_duplicate_genes" class="classattr">
                                <div class="attr variable">
            <span class="name">allow_duplicate_genes</span>

        
    </div>
    <a class="headerlink" href="#GA.allow_duplicate_genes"></a>
    
    

                            </div>
                            <div id="GA.stop_criteria" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_criteria</span>

        
    </div>
    <a class="headerlink" href="#GA.stop_criteria"></a>
    
    

                            </div>
                            <div id="GA.supported_stop_words" class="classattr">
                                <div class="attr variable">
            <span class="name">supported_stop_words</span>

        
    </div>
    <a class="headerlink" href="#GA.supported_stop_words"></a>
    
    

                            </div>
                            <div id="GA.run_completed" class="classattr">
                                <div class="attr variable">
            <span class="name">run_completed</span>

        
    </div>
    <a class="headerlink" href="#GA.run_completed"></a>
    
    

                            </div>
                            <div id="GA.generations_completed" class="classattr">
                                <div class="attr variable">
            <span class="name">generations_completed</span>

        
    </div>
    <a class="headerlink" href="#GA.generations_completed"></a>
    
    

                            </div>
                            <div id="GA.valid_parameters" class="classattr">
                                <div class="attr variable">
            <span class="name">valid_parameters</span>

        
    </div>
    <a class="headerlink" href="#GA.valid_parameters"></a>
    
    

                            </div>
                            <div id="GA.num_generations" class="classattr">
                                <div class="attr variable">
            <span class="name">num_generations</span>

        
    </div>
    <a class="headerlink" href="#GA.num_generations"></a>
    
    

                            </div>
                            <div id="GA.parent_selection_type" class="classattr">
                                <div class="attr variable">
            <span class="name">parent_selection_type</span>

        
    </div>
    <a class="headerlink" href="#GA.parent_selection_type"></a>
    
    

                            </div>
                            <div id="GA.mutation_percent_genes" class="classattr">
                                <div class="attr variable">
            <span class="name">mutation_percent_genes</span>

        
    </div>
    <a class="headerlink" href="#GA.mutation_percent_genes"></a>
    
    

                            </div>
                            <div id="GA.mutation_num_genes" class="classattr">
                                <div class="attr variable">
            <span class="name">mutation_num_genes</span>

        
    </div>
    <a class="headerlink" href="#GA.mutation_num_genes"></a>
    
    

                            </div>
                            <div id="GA.best_solutions_fitness" class="classattr">
                                <div class="attr variable">
            <span class="name">best_solutions_fitness</span>

        
    </div>
    <a class="headerlink" href="#GA.best_solutions_fitness"></a>
    
    

                            </div>
                            <div id="GA.best_solution_generation" class="classattr">
                                <div class="attr variable">
            <span class="name">best_solution_generation</span>

        
    </div>
    <a class="headerlink" href="#GA.best_solution_generation"></a>
    
    

                            </div>
                            <div id="GA.save_best_solutions" class="classattr">
                                <div class="attr variable">
            <span class="name">save_best_solutions</span>

        
    </div>
    <a class="headerlink" href="#GA.save_best_solutions"></a>
    
    

                            </div>
                            <div id="GA.best_solutions" class="classattr">
                                <div class="attr variable">
            <span class="name">best_solutions</span>

        
    </div>
    <a class="headerlink" href="#GA.best_solutions"></a>
    
    

                            </div>
                            <div id="GA.save_solutions" class="classattr">
                                <div class="attr variable">
            <span class="name">save_solutions</span>

        
    </div>
    <a class="headerlink" href="#GA.save_solutions"></a>
    
    

                            </div>
                            <div id="GA.solutions" class="classattr">
                                <div class="attr variable">
            <span class="name">solutions</span>

        
    </div>
    <a class="headerlink" href="#GA.solutions"></a>
    
    

                            </div>
                            <div id="GA.solutions_fitness" class="classattr">
                                <div class="attr variable">
            <span class="name">solutions_fitness</span>

        
    </div>
    <a class="headerlink" href="#GA.solutions_fitness"></a>
    
    

                            </div>
                            <div id="GA.last_generation_fitness" class="classattr">
                                <div class="attr variable">
            <span class="name">last_generation_fitness</span>

        
    </div>
    <a class="headerlink" href="#GA.last_generation_fitness"></a>
    
    

                            </div>
                            <div id="GA.last_generation_parents" class="classattr">
                                <div class="attr variable">
            <span class="name">last_generation_parents</span>

        
    </div>
    <a class="headerlink" href="#GA.last_generation_parents"></a>
    
    

                            </div>
                            <div id="GA.last_generation_offspring_crossover" class="classattr">
                                <div class="attr variable">
            <span class="name">last_generation_offspring_crossover</span>

        
    </div>
    <a class="headerlink" href="#GA.last_generation_offspring_crossover"></a>
    
    

                            </div>
                            <div id="GA.last_generation_offspring_mutation" class="classattr">
                                <div class="attr variable">
            <span class="name">last_generation_offspring_mutation</span>

        
    </div>
    <a class="headerlink" href="#GA.last_generation_offspring_mutation"></a>
    
    

                            </div>
                            <div id="GA.previous_generation_fitness" class="classattr">
                                <div class="attr variable">
            <span class="name">previous_generation_fitness</span>

        
    </div>
    <a class="headerlink" href="#GA.previous_generation_fitness"></a>
    
    

                            </div>
                            <div id="GA.last_generation_elitism" class="classattr">
                                <div class="attr variable">
            <span class="name">last_generation_elitism</span>

        
    </div>
    <a class="headerlink" href="#GA.last_generation_elitism"></a>
    
    

                            </div>
                            <div id="GA.round_genes" class="classattr">
                                        <input id="GA.round_genes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">round_genes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">solutions</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.round_genes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.round_genes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.round_genes-1280"><a href="#GA.round_genes-1280"><span class="linenos">1280</span></a>    <span class="k">def</span> <span class="nf">round_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solutions</span><span class="p">):</span>
</span><span id="GA.round_genes-1281"><a href="#GA.round_genes-1281"><span class="linenos">1281</span></a>        <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.round_genes-1282"><a href="#GA.round_genes-1282"><span class="linenos">1282</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span><span class="p">:</span>
</span><span id="GA.round_genes-1283"><a href="#GA.round_genes-1283"><span class="linenos">1283</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.round_genes-1284"><a href="#GA.round_genes-1284"><span class="linenos">1284</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.round_genes-1285"><a href="#GA.round_genes-1285"><span class="linenos">1285</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.round_genes-1286"><a href="#GA.round_genes-1286"><span class="linenos">1286</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.round_genes-1287"><a href="#GA.round_genes-1287"><span class="linenos">1287</span></a>                    <span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">solutions</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.round_genes-1288"><a href="#GA.round_genes-1288"><span class="linenos">1288</span></a>                                                                       <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.round_genes-1289"><a href="#GA.round_genes-1289"><span class="linenos">1289</span></a>                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.round_genes-1290"><a href="#GA.round_genes-1290"><span class="linenos">1290</span></a>        <span class="k">return</span> <span class="n">solutions</span>
</span></pre></div>


    

                            </div>
                            <div id="GA.initialize_population" class="classattr">
                                        <input id="GA.initialize_population-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">initialize_population</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">low</span>,</span><span class="param">	<span class="n">high</span>,</span><span class="param">	<span class="n">allow_duplicate_genes</span>,</span><span class="param">	<span class="n">mutation_by_replacement</span>,</span><span class="param">	<span class="n">gene_type</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.initialize_population-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.initialize_population"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.initialize_population-1292"><a href="#GA.initialize_population-1292"><span class="linenos">1292</span></a>    <span class="k">def</span> <span class="nf">initialize_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">,</span> <span class="n">allow_duplicate_genes</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">):</span>
</span><span id="GA.initialize_population-1293"><a href="#GA.initialize_population-1293"><span class="linenos">1293</span></a>
</span><span id="GA.initialize_population-1294"><a href="#GA.initialize_population-1294"><span class="linenos">1294</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.initialize_population-1295"><a href="#GA.initialize_population-1295"><span class="linenos">1295</span></a><span class="sd">        Creates an initial population randomly as a NumPy array. The array is saved in the instance attribute named &#39;population&#39;.</span>
</span><span id="GA.initialize_population-1296"><a href="#GA.initialize_population-1296"><span class="linenos">1296</span></a>
</span><span id="GA.initialize_population-1297"><a href="#GA.initialize_population-1297"><span class="linenos">1297</span></a><span class="sd">        low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.</span>
</span><span id="GA.initialize_population-1298"><a href="#GA.initialize_population-1298"><span class="linenos">1298</span></a><span class="sd">        high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</span>
</span><span id="GA.initialize_population-1299"><a href="#GA.initialize_population-1299"><span class="linenos">1299</span></a>
</span><span id="GA.initialize_population-1300"><a href="#GA.initialize_population-1300"><span class="linenos">1300</span></a><span class="sd">        This method assigns the values of the following 3 instance attributes:</span>
</span><span id="GA.initialize_population-1301"><a href="#GA.initialize_population-1301"><span class="linenos">1301</span></a><span class="sd">            1. pop_size: Size of the population.</span>
</span><span id="GA.initialize_population-1302"><a href="#GA.initialize_population-1302"><span class="linenos">1302</span></a><span class="sd">            2. population: Initially, holds the initial population and later updated after each generation.</span>
</span><span id="GA.initialize_population-1303"><a href="#GA.initialize_population-1303"><span class="linenos">1303</span></a><span class="sd">            3. init_population: Keeping the initial population.</span>
</span><span id="GA.initialize_population-1304"><a href="#GA.initialize_population-1304"><span class="linenos">1304</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.initialize_population-1305"><a href="#GA.initialize_population-1305"><span class="linenos">1305</span></a>
</span><span id="GA.initialize_population-1306"><a href="#GA.initialize_population-1306"><span class="linenos">1306</span></a>        <span class="c1"># Population size = (number of chromosomes, number of genes per chromosome)</span>
</span><span id="GA.initialize_population-1307"><a href="#GA.initialize_population-1307"><span class="linenos">1307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">,</span>
</span><span id="GA.initialize_population-1308"><a href="#GA.initialize_population-1308"><span class="linenos">1308</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>  <span class="c1"># The population will have sol_per_pop chromosome where each chromosome has num_genes genes.</span>
</span><span id="GA.initialize_population-1309"><a href="#GA.initialize_population-1309"><span class="linenos">1309</span></a>
</span><span id="GA.initialize_population-1310"><a href="#GA.initialize_population-1310"><span class="linenos">1310</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.initialize_population-1311"><a href="#GA.initialize_population-1311"><span class="linenos">1311</span></a>            <span class="c1"># Creating the initial population randomly.</span>
</span><span id="GA.initialize_population-1312"><a href="#GA.initialize_population-1312"><span class="linenos">1312</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.initialize_population-1313"><a href="#GA.initialize_population-1313"><span class="linenos">1313</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1314"><a href="#GA.initialize_population-1314"><span class="linenos">1314</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1315"><a href="#GA.initialize_population-1315"><span class="linenos">1315</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA.initialize_population-1316"><a href="#GA.initialize_population-1316"><span class="linenos">1316</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA.initialize_population-1317"><a href="#GA.initialize_population-1317"><span class="linenos">1317</span></a>                                                    <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA.initialize_population-1318"><a href="#GA.initialize_population-1318"><span class="linenos">1318</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1319"><a href="#GA.initialize_population-1319"><span class="linenos">1319</span></a>                <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA.initialize_population-1320"><a href="#GA.initialize_population-1320"><span class="linenos">1320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.initialize_population-1321"><a href="#GA.initialize_population-1321"><span class="linenos">1321</span></a>                <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA.initialize_population-1322"><a href="#GA.initialize_population-1322"><span class="linenos">1322</span></a>                <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.initialize_population-1323"><a href="#GA.initialize_population-1323"><span class="linenos">1323</span></a>                    <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA.initialize_population-1324"><a href="#GA.initialize_population-1324"><span class="linenos">1324</span></a>                    <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1325"><a href="#GA.initialize_population-1325"><span class="linenos">1325</span></a>                                                                     <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1326"><a href="#GA.initialize_population-1326"><span class="linenos">1326</span></a>                                                                     <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1327"><a href="#GA.initialize_population-1327"><span class="linenos">1327</span></a>                                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1328"><a href="#GA.initialize_population-1328"><span class="linenos">1328</span></a>                    <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA.initialize_population-1329"><a href="#GA.initialize_population-1329"><span class="linenos">1329</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA.initialize_population-1330"><a href="#GA.initialize_population-1330"><span class="linenos">1330</span></a>
</span><span id="GA.initialize_population-1331"><a href="#GA.initialize_population-1331"><span class="linenos">1331</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.initialize_population-1332"><a href="#GA.initialize_population-1332"><span class="linenos">1332</span></a>                <span class="k">for</span> <span class="n">solution_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.initialize_population-1333"><a href="#GA.initialize_population-1333"><span class="linenos">1333</span></a>                    <span class="c1"># print(&quot;Before&quot;, self.population[solution_idx])</span>
</span><span id="GA.initialize_population-1334"><a href="#GA.initialize_population-1334"><span class="linenos">1334</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA.initialize_population-1335"><a href="#GA.initialize_population-1335"><span class="linenos">1335</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">solution_idx</span><span class="p">],</span>
</span><span id="GA.initialize_population-1336"><a href="#GA.initialize_population-1336"><span class="linenos">1336</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1337"><a href="#GA.initialize_population-1337"><span class="linenos">1337</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1338"><a href="#GA.initialize_population-1338"><span class="linenos">1338</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.initialize_population-1339"><a href="#GA.initialize_population-1339"><span class="linenos">1339</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.initialize_population-1340"><a href="#GA.initialize_population-1340"><span class="linenos">1340</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.initialize_population-1341"><a href="#GA.initialize_population-1341"><span class="linenos">1341</span></a>                    <span class="c1"># print(&quot;After&quot;, self.population[solution_idx])</span>
</span><span id="GA.initialize_population-1342"><a href="#GA.initialize_population-1342"><span class="linenos">1342</span></a>
</span><span id="GA.initialize_population-1343"><a href="#GA.initialize_population-1343"><span class="linenos">1343</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.initialize_population-1344"><a href="#GA.initialize_population-1344"><span class="linenos">1344</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.initialize_population-1345"><a href="#GA.initialize_population-1345"><span class="linenos">1345</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1346"><a href="#GA.initialize_population-1346"><span class="linenos">1346</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA.initialize_population-1347"><a href="#GA.initialize_population-1347"><span class="linenos">1347</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.initialize_population-1348"><a href="#GA.initialize_population-1348"><span class="linenos">1348</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="GA.initialize_population-1349"><a href="#GA.initialize_population-1349"><span class="linenos">1349</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="GA.initialize_population-1350"><a href="#GA.initialize_population-1350"><span class="linenos">1350</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">range</span><span class="p">:</span>
</span><span id="GA.initialize_population-1351"><a href="#GA.initialize_population-1351"><span class="linenos">1351</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.initialize_population-1352"><a href="#GA.initialize_population-1352"><span class="linenos">1352</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1353"><a href="#GA.initialize_population-1353"><span class="linenos">1353</span></a>                                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.initialize_population-1354"><a href="#GA.initialize_population-1354"><span class="linenos">1354</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="GA.initialize_population-1355"><a href="#GA.initialize_population-1355"><span class="linenos">1355</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.initialize_population-1356"><a href="#GA.initialize_population-1356"><span class="linenos">1356</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1357"><a href="#GA.initialize_population-1357"><span class="linenos">1357</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1358"><a href="#GA.initialize_population-1358"><span class="linenos">1358</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1359"><a href="#GA.initialize_population-1359"><span class="linenos">1359</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1360"><a href="#GA.initialize_population-1360"><span class="linenos">1360</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA.initialize_population-1361"><a href="#GA.initialize_population-1361"><span class="linenos">1361</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA.initialize_population-1362"><a href="#GA.initialize_population-1362"><span class="linenos">1362</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA.initialize_population-1363"><a href="#GA.initialize_population-1363"><span class="linenos">1363</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.initialize_population-1364"><a href="#GA.initialize_population-1364"><span class="linenos">1364</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.initialize_population-1365"><a href="#GA.initialize_population-1365"><span class="linenos">1365</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA.initialize_population-1366"><a href="#GA.initialize_population-1366"><span class="linenos">1366</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1367"><a href="#GA.initialize_population-1367"><span class="linenos">1367</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1368"><a href="#GA.initialize_population-1368"><span class="linenos">1368</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1369"><a href="#GA.initialize_population-1369"><span class="linenos">1369</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1370"><a href="#GA.initialize_population-1370"><span class="linenos">1370</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1371"><a href="#GA.initialize_population-1371"><span class="linenos">1371</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1372"><a href="#GA.initialize_population-1372"><span class="linenos">1372</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA.initialize_population-1373"><a href="#GA.initialize_population-1373"><span class="linenos">1373</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1374"><a href="#GA.initialize_population-1374"><span class="linenos">1374</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1375"><a href="#GA.initialize_population-1375"><span class="linenos">1375</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1376"><a href="#GA.initialize_population-1376"><span class="linenos">1376</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1377"><a href="#GA.initialize_population-1377"><span class="linenos">1377</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.initialize_population-1378"><a href="#GA.initialize_population-1378"><span class="linenos">1378</span></a>
</span><span id="GA.initialize_population-1379"><a href="#GA.initialize_population-1379"><span class="linenos">1379</span></a>                            <span class="c1"># The following commented code replace the None value with a single number that will not change again.</span>
</span><span id="GA.initialize_population-1380"><a href="#GA.initialize_population-1380"><span class="linenos">1380</span></a>                            <span class="c1"># This means the gene value will be the same across all solutions.</span>
</span><span id="GA.initialize_population-1381"><a href="#GA.initialize_population-1381"><span class="linenos">1381</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="GA.initialize_population-1382"><a href="#GA.initialize_population-1382"><span class="linenos">1382</span></a>                            <span class="c1">#                high=high,</span>
</span><span id="GA.initialize_population-1383"><a href="#GA.initialize_population-1383"><span class="linenos">1383</span></a>                            <span class="c1">#                size=1), dtype=self.gene_type[0])[0]</span>
</span><span id="GA.initialize_population-1384"><a href="#GA.initialize_population-1384"><span class="linenos">1384</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="GA.initialize_population-1385"><a href="#GA.initialize_population-1385"><span class="linenos">1385</span></a>
</span><span id="GA.initialize_population-1386"><a href="#GA.initialize_population-1386"><span class="linenos">1386</span></a>                            <span class="c1"># The above problem is solved by keeping the None value in the gene_space parameter. This forces PyGAD to generate this value for each solution.</span>
</span><span id="GA.initialize_population-1387"><a href="#GA.initialize_population-1387"><span class="linenos">1387</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1388"><a href="#GA.initialize_population-1388"><span class="linenos">1388</span></a>                                                                                                    <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1389"><a href="#GA.initialize_population-1389"><span class="linenos">1389</span></a>                                                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1390"><a href="#GA.initialize_population-1390"><span class="linenos">1390</span></a>                                                                               <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1391"><a href="#GA.initialize_population-1391"><span class="linenos">1391</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.initialize_population-1392"><a href="#GA.initialize_population-1392"><span class="linenos">1392</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.initialize_population-1393"><a href="#GA.initialize_population-1393"><span class="linenos">1393</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1394"><a href="#GA.initialize_population-1394"><span class="linenos">1394</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.initialize_population-1395"><a href="#GA.initialize_population-1395"><span class="linenos">1395</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span><span class="p">):</span>
</span><span id="GA.initialize_population-1396"><a href="#GA.initialize_population-1396"><span class="linenos">1396</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.initialize_population-1397"><a href="#GA.initialize_population-1397"><span class="linenos">1397</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,</span> <span class="nb">range</span><span class="p">]:</span>
</span><span id="GA.initialize_population-1398"><a href="#GA.initialize_population-1398"><span class="linenos">1398</span></a>                            <span class="c1"># Check if the gene space has None values. If any, then replace it with randomly generated values according to the 3 attributes init_range_low, init_range_high, and gene_type.</span>
</span><span id="GA.initialize_population-1399"><a href="#GA.initialize_population-1399"><span class="linenos">1399</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.initialize_population-1400"><a href="#GA.initialize_population-1400"><span class="linenos">1400</span></a>                            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]):</span>
</span><span id="GA.initialize_population-1401"><a href="#GA.initialize_population-1401"><span class="linenos">1401</span></a>                                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.initialize_population-1402"><a href="#GA.initialize_population-1402"><span class="linenos">1402</span></a>                                    <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1403"><a href="#GA.initialize_population-1403"><span class="linenos">1403</span></a>                                                                                                        <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1404"><a href="#GA.initialize_population-1404"><span class="linenos">1404</span></a>                                                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1405"><a href="#GA.initialize_population-1405"><span class="linenos">1405</span></a>                                                                                   <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1406"><a href="#GA.initialize_population-1406"><span class="linenos">1406</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA.initialize_population-1407"><a href="#GA.initialize_population-1407"><span class="linenos">1407</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA.initialize_population-1408"><a href="#GA.initialize_population-1408"><span class="linenos">1408</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">])</span>
</span><span id="GA.initialize_population-1409"><a href="#GA.initialize_population-1409"><span class="linenos">1409</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.initialize_population-1410"><a href="#GA.initialize_population-1410"><span class="linenos">1410</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.initialize_population-1411"><a href="#GA.initialize_population-1411"><span class="linenos">1411</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.initialize_population-1412"><a href="#GA.initialize_population-1412"><span class="linenos">1412</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA.initialize_population-1413"><a href="#GA.initialize_population-1413"><span class="linenos">1413</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1414"><a href="#GA.initialize_population-1414"><span class="linenos">1414</span></a>                                                                               <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1415"><a href="#GA.initialize_population-1415"><span class="linenos">1415</span></a>                                                                               <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1416"><a href="#GA.initialize_population-1416"><span class="linenos">1416</span></a>                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1417"><a href="#GA.initialize_population-1417"><span class="linenos">1417</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1418"><a href="#GA.initialize_population-1418"><span class="linenos">1418</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1419"><a href="#GA.initialize_population-1419"><span class="linenos">1419</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> \
</span><span id="GA.initialize_population-1420"><a href="#GA.initialize_population-1420"><span class="linenos">1420</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1421"><a href="#GA.initialize_population-1421"><span class="linenos">1421</span></a>                                                                   <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1422"><a href="#GA.initialize_population-1422"><span class="linenos">1422</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1423"><a href="#GA.initialize_population-1423"><span class="linenos">1423</span></a>                                              <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1424"><a href="#GA.initialize_population-1424"><span class="linenos">1424</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.initialize_population-1425"><a href="#GA.initialize_population-1425"><span class="linenos">1425</span></a>                            <span class="c1"># self.gene_space[gene_idx] = numpy.asarray(numpy.random.uniform(low=low,</span>
</span><span id="GA.initialize_population-1426"><a href="#GA.initialize_population-1426"><span class="linenos">1426</span></a>                            <span class="c1">#                                                                high=high,</span>
</span><span id="GA.initialize_population-1427"><a href="#GA.initialize_population-1427"><span class="linenos">1427</span></a>                            <span class="c1">#                                                                size=1),</span>
</span><span id="GA.initialize_population-1428"><a href="#GA.initialize_population-1428"><span class="linenos">1428</span></a>                            <span class="c1">#                                           dtype=self.gene_type[gene_idx][0])[0]</span>
</span><span id="GA.initialize_population-1429"><a href="#GA.initialize_population-1429"><span class="linenos">1429</span></a>
</span><span id="GA.initialize_population-1430"><a href="#GA.initialize_population-1430"><span class="linenos">1430</span></a>                            <span class="c1"># self.population[sol_idx, gene_idx] = self.gene_space[gene_idx].copy()</span>
</span><span id="GA.initialize_population-1431"><a href="#GA.initialize_population-1431"><span class="linenos">1431</span></a>
</span><span id="GA.initialize_population-1432"><a href="#GA.initialize_population-1432"><span class="linenos">1432</span></a>                            <span class="n">temp</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1433"><a href="#GA.initialize_population-1433"><span class="linenos">1433</span></a>                                                                      <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1434"><a href="#GA.initialize_population-1434"><span class="linenos">1434</span></a>                                                                      <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1435"><a href="#GA.initialize_population-1435"><span class="linenos">1435</span></a>                                                 <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1436"><a href="#GA.initialize_population-1436"><span class="linenos">1436</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA.initialize_population-1437"><a href="#GA.initialize_population-1437"><span class="linenos">1437</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.initialize_population-1438"><a href="#GA.initialize_population-1438"><span class="linenos">1438</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.initialize_population-1439"><a href="#GA.initialize_population-1439"><span class="linenos">1439</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1440"><a href="#GA.initialize_population-1440"><span class="linenos">1440</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.initialize_population-1441"><a href="#GA.initialize_population-1441"><span class="linenos">1441</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="GA.initialize_population-1442"><a href="#GA.initialize_population-1442"><span class="linenos">1442</span></a>                <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA.initialize_population-1443"><a href="#GA.initialize_population-1443"><span class="linenos">1443</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.initialize_population-1444"><a href="#GA.initialize_population-1444"><span class="linenos">1444</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1445"><a href="#GA.initialize_population-1445"><span class="linenos">1445</span></a>                                                                                  <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1446"><a href="#GA.initialize_population-1446"><span class="linenos">1446</span></a>                                                                                  <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1447"><a href="#GA.initialize_population-1447"><span class="linenos">1447</span></a>                                                             <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1448"><a href="#GA.initialize_population-1448"><span class="linenos">1448</span></a>
</span><span id="GA.initialize_population-1449"><a href="#GA.initialize_population-1449"><span class="linenos">1449</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="GA.initialize_population-1450"><a href="#GA.initialize_population-1450"><span class="linenos">1450</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.initialize_population-1451"><a href="#GA.initialize_population-1451"><span class="linenos">1451</span></a>                    <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.initialize_population-1452"><a href="#GA.initialize_population-1452"><span class="linenos">1452</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1453"><a href="#GA.initialize_population-1453"><span class="linenos">1453</span></a>                                                                                         <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1454"><a href="#GA.initialize_population-1454"><span class="linenos">1454</span></a>                                                                                         <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1455"><a href="#GA.initialize_population-1455"><span class="linenos">1455</span></a>                                                                            <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA.initialize_population-1456"><a href="#GA.initialize_population-1456"><span class="linenos">1456</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1457"><a href="#GA.initialize_population-1457"><span class="linenos">1457</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1458"><a href="#GA.initialize_population-1458"><span class="linenos">1458</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1459"><a href="#GA.initialize_population-1459"><span class="linenos">1459</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1460"><a href="#GA.initialize_population-1460"><span class="linenos">1460</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA.initialize_population-1461"><a href="#GA.initialize_population-1461"><span class="linenos">1461</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA.initialize_population-1462"><a href="#GA.initialize_population-1462"><span class="linenos">1462</span></a>                                                            <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA.initialize_population-1463"><a href="#GA.initialize_population-1463"><span class="linenos">1463</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1464"><a href="#GA.initialize_population-1464"><span class="linenos">1464</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="GA.initialize_population-1465"><a href="#GA.initialize_population-1465"><span class="linenos">1465</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">),</span>
</span><span id="GA.initialize_population-1466"><a href="#GA.initialize_population-1466"><span class="linenos">1466</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span>
</span><span id="GA.initialize_population-1467"><a href="#GA.initialize_population-1467"><span class="linenos">1467</span></a>                                                        <span class="mi">0</span><span class="p">])</span>  <span class="c1"># A NumPy array holding the initial population.</span>
</span><span id="GA.initialize_population-1468"><a href="#GA.initialize_population-1468"><span class="linenos">1468</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1469"><a href="#GA.initialize_population-1469"><span class="linenos">1469</span></a>                <span class="c1"># Replace all the None values with random values using the init_range_low, init_range_high, and gene_type attributes.</span>
</span><span id="GA.initialize_population-1470"><a href="#GA.initialize_population-1470"><span class="linenos">1470</span></a>                <span class="k">for</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">curr_gene_space</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">):</span>
</span><span id="GA.initialize_population-1471"><a href="#GA.initialize_population-1471"><span class="linenos">1471</span></a>                    <span class="k">if</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.initialize_population-1472"><a href="#GA.initialize_population-1472"><span class="linenos">1472</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">low</span><span class="p">,</span>
</span><span id="GA.initialize_population-1473"><a href="#GA.initialize_population-1473"><span class="linenos">1473</span></a>                                                                                       <span class="n">high</span><span class="o">=</span><span class="n">high</span><span class="p">,</span>
</span><span id="GA.initialize_population-1474"><a href="#GA.initialize_population-1474"><span class="linenos">1474</span></a>                                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span><span id="GA.initialize_population-1475"><a href="#GA.initialize_population-1475"><span class="linenos">1475</span></a>                                                                  <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.initialize_population-1476"><a href="#GA.initialize_population-1476"><span class="linenos">1476</span></a>
</span><span id="GA.initialize_population-1477"><a href="#GA.initialize_population-1477"><span class="linenos">1477</span></a>                <span class="c1"># Creating the initial population by randomly selecting the genes&#39; values from the values inside the &#39;gene_space&#39; parameter.</span>
</span><span id="GA.initialize_population-1478"><a href="#GA.initialize_population-1478"><span class="linenos">1478</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.initialize_population-1479"><a href="#GA.initialize_population-1479"><span class="linenos">1479</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA.initialize_population-1480"><a href="#GA.initialize_population-1480"><span class="linenos">1480</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.initialize_population-1481"><a href="#GA.initialize_population-1481"><span class="linenos">1481</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA.initialize_population-1482"><a href="#GA.initialize_population-1482"><span class="linenos">1482</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.initialize_population-1483"><a href="#GA.initialize_population-1483"><span class="linenos">1483</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA.initialize_population-1484"><a href="#GA.initialize_population-1484"><span class="linenos">1484</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.initialize_population-1485"><a href="#GA.initialize_population-1485"><span class="linenos">1485</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span>
</span><span id="GA.initialize_population-1486"><a href="#GA.initialize_population-1486"><span class="linenos">1486</span></a>                                <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1487"><a href="#GA.initialize_population-1487"><span class="linenos">1487</span></a>                                                                 <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1488"><a href="#GA.initialize_population-1488"><span class="linenos">1488</span></a>                                                                 <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1489"><a href="#GA.initialize_population-1489"><span class="linenos">1489</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1490"><a href="#GA.initialize_population-1490"><span class="linenos">1490</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1491"><a href="#GA.initialize_population-1491"><span class="linenos">1491</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1492"><a href="#GA.initialize_population-1492"><span class="linenos">1492</span></a>                            <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1493"><a href="#GA.initialize_population-1493"><span class="linenos">1493</span></a>                                                                             <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.initialize_population-1494"><a href="#GA.initialize_population-1494"><span class="linenos">1494</span></a>                                                                             <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1495"><a href="#GA.initialize_population-1495"><span class="linenos">1495</span></a>                                                        <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1496"><a href="#GA.initialize_population-1496"><span class="linenos">1496</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA.initialize_population-1497"><a href="#GA.initialize_population-1497"><span class="linenos">1497</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA.initialize_population-1498"><a href="#GA.initialize_population-1498"><span class="linenos">1498</span></a>
</span><span id="GA.initialize_population-1499"><a href="#GA.initialize_population-1499"><span class="linenos">1499</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.initialize_population-1500"><a href="#GA.initialize_population-1500"><span class="linenos">1500</span></a>                    <span class="c1"># Create an empty population of dtype=object to support storing mixed data types within the same array.</span>
</span><span id="GA.initialize_population-1501"><a href="#GA.initialize_population-1501"><span class="linenos">1501</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.initialize_population-1502"><a href="#GA.initialize_population-1502"><span class="linenos">1502</span></a>                    <span class="c1"># Loop through the genes, randomly generate the values of a single gene across the entire population, and add the values of each gene to the population.</span>
</span><span id="GA.initialize_population-1503"><a href="#GA.initialize_population-1503"><span class="linenos">1503</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">):</span>
</span><span id="GA.initialize_population-1504"><a href="#GA.initialize_population-1504"><span class="linenos">1504</span></a>                        <span class="c1"># A vector of all values of this single gene across all solutions in the population.</span>
</span><span id="GA.initialize_population-1505"><a href="#GA.initialize_population-1505"><span class="linenos">1505</span></a>                        <span class="n">gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">,</span>
</span><span id="GA.initialize_population-1506"><a href="#GA.initialize_population-1506"><span class="linenos">1506</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.initialize_population-1507"><a href="#GA.initialize_population-1507"><span class="linenos">1507</span></a>                                                    <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.initialize_population-1508"><a href="#GA.initialize_population-1508"><span class="linenos">1508</span></a>                        <span class="c1"># Adding the current gene values to the population.</span>
</span><span id="GA.initialize_population-1509"><a href="#GA.initialize_population-1509"><span class="linenos">1509</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">gene_values</span>
</span><span id="GA.initialize_population-1510"><a href="#GA.initialize_population-1510"><span class="linenos">1510</span></a>
</span><span id="GA.initialize_population-1511"><a href="#GA.initialize_population-1511"><span class="linenos">1511</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.initialize_population-1512"><a href="#GA.initialize_population-1512"><span class="linenos">1512</span></a>            <span class="k">if</span> <span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.initialize_population-1513"><a href="#GA.initialize_population-1513"><span class="linenos">1513</span></a>                <span class="k">for</span> <span class="n">sol_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.initialize_population-1514"><a href="#GA.initialize_population-1514"><span class="linenos">1514</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA.initialize_population-1515"><a href="#GA.initialize_population-1515"><span class="linenos">1515</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">],</span>
</span><span id="GA.initialize_population-1516"><a href="#GA.initialize_population-1516"><span class="linenos">1516</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.initialize_population-1517"><a href="#GA.initialize_population-1517"><span class="linenos">1517</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA.initialize_population-1518"><a href="#GA.initialize_population-1518"><span class="linenos">1518</span></a>                        <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.initialize_population-1519"><a href="#GA.initialize_population-1519"><span class="linenos">1519</span></a>
</span><span id="GA.initialize_population-1520"><a href="#GA.initialize_population-1520"><span class="linenos">1520</span></a>        <span class="c1"># Keeping the initial population in the initial_population attribute.</span>
</span><span id="GA.initialize_population-1521"><a href="#GA.initialize_population-1521"><span class="linenos">1521</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">initial_population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Creates an initial population randomly as a NumPy array. The array is saved in the instance attribute named 'population'.</p>

<p>low: The lower value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20 and higher.
high: The upper value of the random range from which the gene values in the initial population are selected. It defaults to -4. Available in PyGAD 1.0.20.</p>

<p>This method assigns the values of the following 3 instance attributes:
    1. pop_size: Size of the population.
    2. population: Initially, holds the initial population and later updated after each generation.
    3. init_population: Keeping the initial population.</p>
</div>


                            </div>
                            <div id="GA.cal_pop_fitness" class="classattr">
                                        <input id="GA.cal_pop_fitness-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cal_pop_fitness</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.cal_pop_fitness-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.cal_pop_fitness"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.cal_pop_fitness-1523"><a href="#GA.cal_pop_fitness-1523"><span class="linenos">1523</span></a>    <span class="k">def</span> <span class="nf">cal_pop_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1524"><a href="#GA.cal_pop_fitness-1524"><span class="linenos">1524</span></a>
</span><span id="GA.cal_pop_fitness-1525"><a href="#GA.cal_pop_fitness-1525"><span class="linenos">1525</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.cal_pop_fitness-1526"><a href="#GA.cal_pop_fitness-1526"><span class="linenos">1526</span></a><span class="sd">        Calculating the fitness values of all solutions in the current population.</span>
</span><span id="GA.cal_pop_fitness-1527"><a href="#GA.cal_pop_fitness-1527"><span class="linenos">1527</span></a><span class="sd">        It returns:</span>
</span><span id="GA.cal_pop_fitness-1528"><a href="#GA.cal_pop_fitness-1528"><span class="linenos">1528</span></a><span class="sd">            -fitness: An array of the calculated fitness values.</span>
</span><span id="GA.cal_pop_fitness-1529"><a href="#GA.cal_pop_fitness-1529"><span class="linenos">1529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.cal_pop_fitness-1530"><a href="#GA.cal_pop_fitness-1530"><span class="linenos">1530</span></a>
</span><span id="GA.cal_pop_fitness-1531"><a href="#GA.cal_pop_fitness-1531"><span class="linenos">1531</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1532"><a href="#GA.cal_pop_fitness-1532"><span class="linenos">1532</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1533"><a href="#GA.cal_pop_fitness-1533"><span class="linenos">1533</span></a>                <span class="s2">&quot;ERROR calling the cal_pop_fitness() method: </span><span class="se">\n</span><span class="s2">Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1534"><a href="#GA.cal_pop_fitness-1534"><span class="linenos">1534</span></a>
</span><span id="GA.cal_pop_fitness-1535"><a href="#GA.cal_pop_fitness-1535"><span class="linenos">1535</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;undefined&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1536"><a href="#GA.cal_pop_fitness-1536"><span class="linenos">1536</span></a>
</span><span id="GA.cal_pop_fitness-1537"><a href="#GA.cal_pop_fitness-1537"><span class="linenos">1537</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1538"><a href="#GA.cal_pop_fitness-1538"><span class="linenos">1538</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="GA.cal_pop_fitness-1539"><a href="#GA.cal_pop_fitness-1539"><span class="linenos">1539</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1540"><a href="#GA.cal_pop_fitness-1540"><span class="linenos">1540</span></a>
</span><span id="GA.cal_pop_fitness-1541"><a href="#GA.cal_pop_fitness-1541"><span class="linenos">1541</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="GA.cal_pop_fitness-1542"><a href="#GA.cal_pop_fitness-1542"><span class="linenos">1542</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1543"><a href="#GA.cal_pop_fitness-1543"><span class="linenos">1543</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="GA.cal_pop_fitness-1544"><a href="#GA.cal_pop_fitness-1544"><span class="linenos">1544</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="GA.cal_pop_fitness-1545"><a href="#GA.cal_pop_fitness-1545"><span class="linenos">1545</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1546"><a href="#GA.cal_pop_fitness-1546"><span class="linenos">1546</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1547"><a href="#GA.cal_pop_fitness-1547"><span class="linenos">1547</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="GA.cal_pop_fitness-1548"><a href="#GA.cal_pop_fitness-1548"><span class="linenos">1548</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1549"><a href="#GA.cal_pop_fitness-1549"><span class="linenos">1549</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="GA.cal_pop_fitness-1550"><a href="#GA.cal_pop_fitness-1550"><span class="linenos">1550</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1551"><a href="#GA.cal_pop_fitness-1551"><span class="linenos">1551</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="GA.cal_pop_fitness-1552"><a href="#GA.cal_pop_fitness-1552"><span class="linenos">1552</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1553"><a href="#GA.cal_pop_fitness-1553"><span class="linenos">1553</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1554"><a href="#GA.cal_pop_fitness-1554"><span class="linenos">1554</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">sol</span><span class="p">,</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1555"><a href="#GA.cal_pop_fitness-1555"><span class="linenos">1555</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1556"><a href="#GA.cal_pop_fitness-1556"><span class="linenos">1556</span></a>                        <span class="k">pass</span>
</span><span id="GA.cal_pop_fitness-1557"><a href="#GA.cal_pop_fitness-1557"><span class="linenos">1557</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1558"><a href="#GA.cal_pop_fitness-1558"><span class="linenos">1558</span></a>                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1559"><a href="#GA.cal_pop_fitness-1559"><span class="linenos">1559</span></a>                            <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1560"><a href="#GA.cal_pop_fitness-1560"><span class="linenos">1560</span></a>                                <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="GA.cal_pop_fitness-1561"><a href="#GA.cal_pop_fitness-1561"><span class="linenos">1561</span></a>                <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA.cal_pop_fitness-1562"><a href="#GA.cal_pop_fitness-1562"><span class="linenos">1562</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1563"><a href="#GA.cal_pop_fitness-1563"><span class="linenos">1563</span></a>
</span><span id="GA.cal_pop_fitness-1564"><a href="#GA.cal_pop_fitness-1564"><span class="linenos">1564</span></a>            <span class="c1"># Calculating the fitness value of each solution in the current population.</span>
</span><span id="GA.cal_pop_fitness-1565"><a href="#GA.cal_pop_fitness-1565"><span class="linenos">1565</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1566"><a href="#GA.cal_pop_fitness-1566"><span class="linenos">1566</span></a>                <span class="c1"># Check if the `save_solutions` parameter is `True` and whether the solution already exists in the `solutions` list. If so, use its fitness rather than calculating it again.</span>
</span><span id="GA.cal_pop_fitness-1567"><a href="#GA.cal_pop_fitness-1567"><span class="linenos">1567</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1568"><a href="#GA.cal_pop_fitness-1568"><span class="linenos">1568</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sol</span><span class="p">))]</span>
</span><span id="GA.cal_pop_fitness-1569"><a href="#GA.cal_pop_fitness-1569"><span class="linenos">1569</span></a>                <span class="c1"># If the solutions are not saved (i.e. `save_solutions=False`), check if this solution is a parent from the previous generation and its fitness value is already calculated. If so, use the fitness value instead of calling the fitness function.</span>
</span><span id="GA.cal_pop_fitness-1570"><a href="#GA.cal_pop_fitness-1570"><span class="linenos">1570</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1571"><a href="#GA.cal_pop_fitness-1571"><span class="linenos">1571</span></a>                        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1572"><a href="#GA.cal_pop_fitness-1572"><span class="linenos">1572</span></a>                    <span class="c1"># Index of the parent in the parents array (self.last_generation_parents). This is not its index within the population.</span>
</span><span id="GA.cal_pop_fitness-1573"><a href="#GA.cal_pop_fitness-1573"><span class="linenos">1573</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span> <span class="o">==</span> <span class="n">sol</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1574"><a href="#GA.cal_pop_fitness-1574"><span class="linenos">1574</span></a>                    <span class="c1"># Index of the parent in the population.</span>
</span><span id="GA.cal_pop_fitness-1575"><a href="#GA.cal_pop_fitness-1575"><span class="linenos">1575</span></a>                    <span class="n">parent_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1576"><a href="#GA.cal_pop_fitness-1576"><span class="linenos">1576</span></a>                    <span class="c1"># Use the parent&#39;s index to return its pre-calculated fitness value.</span>
</span><span id="GA.cal_pop_fitness-1577"><a href="#GA.cal_pop_fitness-1577"><span class="linenos">1577</span></a>                    <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span><span class="n">parent_idx</span><span class="p">]</span>
</span><span id="GA.cal_pop_fitness-1578"><a href="#GA.cal_pop_fitness-1578"><span class="linenos">1578</span></a>
</span><span id="GA.cal_pop_fitness-1579"><a href="#GA.cal_pop_fitness-1579"><span class="linenos">1579</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA.cal_pop_fitness-1580"><a href="#GA.cal_pop_fitness-1580"><span class="linenos">1580</span></a>
</span><span id="GA.cal_pop_fitness-1581"><a href="#GA.cal_pop_fitness-1581"><span class="linenos">1581</span></a>            <span class="c1"># Decide which class to use based on whether the user selected &quot;process&quot; or &quot;thread&quot;</span>
</span><span id="GA.cal_pop_fitness-1582"><a href="#GA.cal_pop_fitness-1582"><span class="linenos">1582</span></a>            <span class="c1"># if self.parallel_processing[0] == &quot;process&quot;:</span>
</span><span id="GA.cal_pop_fitness-1583"><a href="#GA.cal_pop_fitness-1583"><span class="linenos">1583</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ProcessPoolExecutor</span>
</span><span id="GA.cal_pop_fitness-1584"><a href="#GA.cal_pop_fitness-1584"><span class="linenos">1584</span></a>            <span class="c1"># else:</span>
</span><span id="GA.cal_pop_fitness-1585"><a href="#GA.cal_pop_fitness-1585"><span class="linenos">1585</span></a>            <span class="c1">#     ExecutorClassR = concurrent.futures.ThreadPoolExecutor</span>
</span><span id="GA.cal_pop_fitness-1586"><a href="#GA.cal_pop_fitness-1586"><span class="linenos">1586</span></a>
</span><span id="GA.cal_pop_fitness-1587"><a href="#GA.cal_pop_fitness-1587"><span class="linenos">1587</span></a>            <span class="c1"># with multiprocessing.Pool(self.parallel_processing[1]) as pool:</span>
</span><span id="GA.cal_pop_fitness-1588"><a href="#GA.cal_pop_fitness-1588"><span class="linenos">1588</span></a>
</span><span id="GA.cal_pop_fitness-1589"><a href="#GA.cal_pop_fitness-1589"><span class="linenos">1589</span></a>            <span class="n">solutions_to_submit_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.cal_pop_fitness-1590"><a href="#GA.cal_pop_fitness-1590"><span class="linenos">1590</span></a>            <span class="n">solutions_to_submit</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.cal_pop_fitness-1591"><a href="#GA.cal_pop_fitness-1591"><span class="linenos">1591</span></a>
</span><span id="GA.cal_pop_fitness-1592"><a href="#GA.cal_pop_fitness-1592"><span class="linenos">1592</span></a>            <span class="k">for</span> <span class="n">sol_idx</span><span class="p">,</span> <span class="n">sol</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
</span><span id="GA.cal_pop_fitness-1593"><a href="#GA.cal_pop_fitness-1593"><span class="linenos">1593</span></a>                <span class="c1"># The &quot;undefined&quot; value means that the fitness of this solution must be calculated.</span>
</span><span id="GA.cal_pop_fitness-1594"><a href="#GA.cal_pop_fitness-1594"><span class="linenos">1594</span></a>                <span class="k">if</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">sol_idx</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1595"><a href="#GA.cal_pop_fitness-1595"><span class="linenos">1595</span></a>                    <span class="n">solutions_to_submit</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
</span><span id="GA.cal_pop_fitness-1596"><a href="#GA.cal_pop_fitness-1596"><span class="linenos">1596</span></a>                    <span class="n">solutions_to_submit_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol_idx</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1597"><a href="#GA.cal_pop_fitness-1597"><span class="linenos">1597</span></a>
</span><span id="GA.cal_pop_fitness-1598"><a href="#GA.cal_pop_fitness-1598"><span class="linenos">1598</span></a>            <span class="n">worker</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1599"><a href="#GA.cal_pop_fitness-1599"><span class="linenos">1599</span></a>
</span><span id="GA.cal_pop_fitness-1600"><a href="#GA.cal_pop_fitness-1600"><span class="linenos">1600</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">fitness</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span>
</span><span id="GA.cal_pop_fitness-1601"><a href="#GA.cal_pop_fitness-1601"><span class="linenos">1601</span></a>                    <span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">starmap</span><span class="p">(</span><span class="n">worker</span>
</span><span id="GA.cal_pop_fitness-1602"><a href="#GA.cal_pop_fitness-1602"><span class="linenos">1602</span></a>                        <span class="p">,</span> <span class="nb">zip</span><span class="p">(</span><span class="n">solutions_to_submit</span>
</span><span id="GA.cal_pop_fitness-1603"><a href="#GA.cal_pop_fitness-1603"><span class="linenos">1603</span></a>                            <span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solutions_to_submit_indices</span><span class="p">)))</span>
</span><span id="GA.cal_pop_fitness-1604"><a href="#GA.cal_pop_fitness-1604"><span class="linenos">1604</span></a>                                   <span class="p">)):</span>
</span><span id="GA.cal_pop_fitness-1605"><a href="#GA.cal_pop_fitness-1605"><span class="linenos">1605</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1606"><a href="#GA.cal_pop_fitness-1606"><span class="linenos">1606</span></a>                    <span class="n">pop_fitness</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">fitness</span>
</span><span id="GA.cal_pop_fitness-1607"><a href="#GA.cal_pop_fitness-1607"><span class="linenos">1607</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.cal_pop_fitness-1608"><a href="#GA.cal_pop_fitness-1608"><span class="linenos">1608</span></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1609"><a href="#GA.cal_pop_fitness-1609"><span class="linenos">1609</span></a>                        <span class="s2">&quot;The fitness function should return a number but the value </span><span class="si">{fit_val}</span><span class="s2"> of type </span><span class="si">{fit_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.cal_pop_fitness-1610"><a href="#GA.cal_pop_fitness-1610"><span class="linenos">1610</span></a>                            <span class="n">fit_val</span><span class="o">=</span><span class="n">fitness</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">fitness</span><span class="p">)))</span>
</span><span id="GA.cal_pop_fitness-1611"><a href="#GA.cal_pop_fitness-1611"><span class="linenos">1611</span></a>
</span><span id="GA.cal_pop_fitness-1612"><a href="#GA.cal_pop_fitness-1612"><span class="linenos">1612</span></a>        <span class="n">pop_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">)</span>
</span><span id="GA.cal_pop_fitness-1613"><a href="#GA.cal_pop_fitness-1613"><span class="linenos">1613</span></a>
</span><span id="GA.cal_pop_fitness-1614"><a href="#GA.cal_pop_fitness-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="n">pop_fitness</span>
</span></pre></div>


            <div class="docstring"><p>Calculating the fitness values of all solutions in the current population.
It returns:
    -fitness: An array of the calculated fitness values.</p>
</div>


                            </div>
                            <div id="GA.run" class="classattr">
                                        <input id="GA.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.run-1616"><a href="#GA.run-1616"><span class="linenos">1616</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA.run-1617"><a href="#GA.run-1617"><span class="linenos">1617</span></a>
</span><span id="GA.run-1618"><a href="#GA.run-1618"><span class="linenos">1618</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.run-1619"><a href="#GA.run-1619"><span class="linenos">1619</span></a><span class="sd">        Runs the genetic algorithm. This is the main method in which the genetic algorithm is evolved through a number of generations.</span>
</span><span id="GA.run-1620"><a href="#GA.run-1620"><span class="linenos">1620</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.run-1621"><a href="#GA.run-1621"><span class="linenos">1621</span></a>
</span><span id="GA.run-1622"><a href="#GA.run-1622"><span class="linenos">1622</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valid_parameters</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.run-1623"><a href="#GA.run-1623"><span class="linenos">1623</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
</span><span id="GA.run-1624"><a href="#GA.run-1624"><span class="linenos">1624</span></a>                <span class="s2">&quot;Error calling the run() method: </span><span class="se">\n</span><span class="s2">The run() method cannot be executed with invalid parameters. Please check the parameters passed while creating an instance of the GA class.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="GA.run-1625"><a href="#GA.run-1625"><span class="linenos">1625</span></a>
</span><span id="GA.run-1626"><a href="#GA.run-1626"><span class="linenos">1626</span></a>        <span class="c1"># Starting from PyGAD 2.18.0, the 4 properties (best_solutions, best_solutions_fitness, solutions, and solutions_fitness) are no longer reset with each call to the run() method. Instead, they are extended.</span>
</span><span id="GA.run-1627"><a href="#GA.run-1627"><span class="linenos">1627</span></a>        <span class="c1"># For example, if there are 50 generations and the user set save_best_solutions=True, then the length of the 2 properties best_solutions and best_solutions_fitness will be 50 after the first call to the run() method, then 100 after the second call, 150 after the third, and so on.</span>
</span><span id="GA.run-1628"><a href="#GA.run-1628"><span class="linenos">1628</span></a>
</span><span id="GA.run-1629"><a href="#GA.run-1629"><span class="linenos">1629</span></a>        <span class="c1"># self.best_solutions: Holds the best solution in each generation.</span>
</span><span id="GA.run-1630"><a href="#GA.run-1630"><span class="linenos">1630</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.run-1631"><a href="#GA.run-1631"><span class="linenos">1631</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="GA.run-1632"><a href="#GA.run-1632"><span class="linenos">1632</span></a>        <span class="c1"># self.best_solutions_fitness: A list holding the fitness value of the best solution for each generation.</span>
</span><span id="GA.run-1633"><a href="#GA.run-1633"><span class="linenos">1633</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.run-1634"><a href="#GA.run-1634"><span class="linenos">1634</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span>
</span><span id="GA.run-1635"><a href="#GA.run-1635"><span class="linenos">1635</span></a>        <span class="c1"># self.solutions: Holds the solutions in each generation.</span>
</span><span id="GA.run-1636"><a href="#GA.run-1636"><span class="linenos">1636</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.run-1637"><a href="#GA.run-1637"><span class="linenos">1637</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="GA.run-1638"><a href="#GA.run-1638"><span class="linenos">1638</span></a>        <span class="c1"># self.solutions_fitness: Holds the fitness of the solutions in each generation.</span>
</span><span id="GA.run-1639"><a href="#GA.run-1639"><span class="linenos">1639</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.run-1640"><a href="#GA.run-1640"><span class="linenos">1640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="p">)</span>
</span><span id="GA.run-1641"><a href="#GA.run-1641"><span class="linenos">1641</span></a>
</span><span id="GA.run-1642"><a href="#GA.run-1642"><span class="linenos">1642</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1643"><a href="#GA.run-1643"><span class="linenos">1643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GA.run-1644"><a href="#GA.run-1644"><span class="linenos">1644</span></a>
</span><span id="GA.run-1645"><a href="#GA.run-1645"><span class="linenos">1645</span></a>        <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="GA.run-1646"><a href="#GA.run-1646"><span class="linenos">1646</span></a>
</span><span id="GA.run-1647"><a href="#GA.run-1647"><span class="linenos">1647</span></a>        <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="GA.run-1648"><a href="#GA.run-1648"><span class="linenos">1648</span></a>
</span><span id="GA.run-1649"><a href="#GA.run-1649"><span class="linenos">1649</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.run-1650"><a href="#GA.run-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="GA.run-1651"><a href="#GA.run-1651"><span class="linenos">1651</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1652"><a href="#GA.run-1652"><span class="linenos">1652</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.run-1653"><a href="#GA.run-1653"><span class="linenos">1653</span></a>
</span><span id="GA.run-1654"><a href="#GA.run-1654"><span class="linenos">1654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA.run-1655"><a href="#GA.run-1655"><span class="linenos">1655</span></a>
</span><span id="GA.run-1656"><a href="#GA.run-1656"><span class="linenos">1656</span></a>        <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="GA.run-1657"><a href="#GA.run-1657"><span class="linenos">1657</span></a>            <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1658"><a href="#GA.run-1658"><span class="linenos">1658</span></a>
</span><span id="GA.run-1659"><a href="#GA.run-1659"><span class="linenos">1659</span></a>        <span class="c1"># Appending the best solution in the initial population to the best_solutions list.</span>
</span><span id="GA.run-1660"><a href="#GA.run-1660"><span class="linenos">1660</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA.run-1661"><a href="#GA.run-1661"><span class="linenos">1661</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="GA.run-1662"><a href="#GA.run-1662"><span class="linenos">1662</span></a>
</span><span id="GA.run-1663"><a href="#GA.run-1663"><span class="linenos">1663</span></a>        <span class="k">for</span> <span class="n">generation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_generations</span><span class="p">):</span>
</span><span id="GA.run-1664"><a href="#GA.run-1664"><span class="linenos">1664</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1665"><a href="#GA.run-1665"><span class="linenos">1665</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1666"><a href="#GA.run-1666"><span class="linenos">1666</span></a>
</span><span id="GA.run-1667"><a href="#GA.run-1667"><span class="linenos">1667</span></a>            <span class="c1"># Appending the fitness value of the best solution in the current generation to the best_solutions_fitness attribute.</span>
</span><span id="GA.run-1668"><a href="#GA.run-1668"><span class="linenos">1668</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA.run-1669"><a href="#GA.run-1669"><span class="linenos">1669</span></a>
</span><span id="GA.run-1670"><a href="#GA.run-1670"><span class="linenos">1670</span></a>            <span class="c1"># Appending the solutions in the current generation to the solutions list.</span>
</span><span id="GA.run-1671"><a href="#GA.run-1671"><span class="linenos">1671</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA.run-1672"><a href="#GA.run-1672"><span class="linenos">1672</span></a>                <span class="c1"># self.solutions.extend(self.population.copy())</span>
</span><span id="GA.run-1673"><a href="#GA.run-1673"><span class="linenos">1673</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.run-1674"><a href="#GA.run-1674"><span class="linenos">1674</span></a>                <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="GA.run-1675"><a href="#GA.run-1675"><span class="linenos">1675</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="GA.run-1676"><a href="#GA.run-1676"><span class="linenos">1676</span></a>
</span><span id="GA.run-1677"><a href="#GA.run-1677"><span class="linenos">1677</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1678"><a href="#GA.run-1678"><span class="linenos">1678</span></a>
</span><span id="GA.run-1679"><a href="#GA.run-1679"><span class="linenos">1679</span></a>            <span class="c1"># Selecting the best parents in the population for mating.</span>
</span><span id="GA.run-1680"><a href="#GA.run-1680"><span class="linenos">1680</span></a>            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_selection_type</span><span class="p">):</span>
</span><span id="GA.run-1681"><a href="#GA.run-1681"><span class="linenos">1681</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="GA.run-1682"><a href="#GA.run-1682"><span class="linenos">1682</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="GA.run-1683"><a href="#GA.run-1683"><span class="linenos">1683</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1684"><a href="#GA.run-1684"><span class="linenos">1684</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_parents</span><span class="p">(</span>
</span><span id="GA.run-1685"><a href="#GA.run-1685"><span class="linenos">1685</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span><span class="p">)</span>
</span><span id="GA.run-1686"><a href="#GA.run-1686"><span class="linenos">1686</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1687"><a href="#GA.run-1687"><span class="linenos">1687</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">on_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">)</span>
</span><span id="GA.run-1688"><a href="#GA.run-1688"><span class="linenos">1688</span></a>
</span><span id="GA.run-1689"><a href="#GA.run-1689"><span class="linenos">1689</span></a>            <span class="c1"># If self.crossover_type=None, then no crossover is applied and thus no offspring will be created in the next generations. The next generation will use the solutions in the current population.</span>
</span><span id="GA.run-1690"><a href="#GA.run-1690"><span class="linenos">1690</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.run-1691"><a href="#GA.run-1691"><span class="linenos">1691</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.run-1692"><a href="#GA.run-1692"><span class="linenos">1692</span></a>                    <span class="n">num_parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span>
</span><span id="GA.run-1693"><a href="#GA.run-1693"><span class="linenos">1693</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="n">num_parents_to_keep</span><span class="p">:</span>
</span><span id="GA.run-1694"><a href="#GA.run-1694"><span class="linenos">1694</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="GA.run-1695"><a href="#GA.run-1695"><span class="linenos">1695</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1696"><a href="#GA.run-1696"><span class="linenos">1696</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA.run-1697"><a href="#GA.run-1697"><span class="linenos">1697</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="GA.run-1698"><a href="#GA.run-1698"><span class="linenos">1698</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="GA.run-1699"><a href="#GA.run-1699"><span class="linenos">1699</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA.run-1700"><a href="#GA.run-1700"><span class="linenos">1700</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="GA.run-1701"><a href="#GA.run-1701"><span class="linenos">1701</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1702"><a href="#GA.run-1702"><span class="linenos">1702</span></a>                    <span class="c1"># The steady_state_selection() method is called to select the best solutions (i.e. elitism). The keep_elitism parameter defines the number of these solutions.</span>
</span><span id="GA.run-1703"><a href="#GA.run-1703"><span class="linenos">1703</span></a>                    <span class="c1"># The steady_state_selection() method is still called here even if its output may not be used given that the condition of the next if statement is True. The reason is that it will be used later.</span>
</span><span id="GA.run-1704"><a href="#GA.run-1704"><span class="linenos">1704</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA.run-1705"><a href="#GA.run-1705"><span class="linenos">1705</span></a>                                                                                  <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA.run-1706"><a href="#GA.run-1706"><span class="linenos">1706</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">:</span>
</span><span id="GA.run-1707"><a href="#GA.run-1707"><span class="linenos">1707</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">]</span>
</span><span id="GA.run-1708"><a href="#GA.run-1708"><span class="linenos">1708</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1709"><a href="#GA.run-1709"><span class="linenos">1709</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span>
</span><span id="GA.run-1710"><a href="#GA.run-1710"><span class="linenos">1710</span></a>                                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:(</span>
</span><span id="GA.run-1711"><a href="#GA.run-1711"><span class="linenos">1711</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span> <span class="o">-</span>
</span><span id="GA.run-1712"><a href="#GA.run-1712"><span class="linenos">1712</span></a>                                                                                                  <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA.run-1713"><a href="#GA.run-1713"><span class="linenos">1713</span></a>                                                                                                      <span class="mi">0</span><span class="p">])]))</span>
</span><span id="GA.run-1714"><a href="#GA.run-1714"><span class="linenos">1714</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1715"><a href="#GA.run-1715"><span class="linenos">1715</span></a>                <span class="c1"># Generating offspring using crossover.</span>
</span><span id="GA.run-1716"><a href="#GA.run-1716"><span class="linenos">1716</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_type</span><span class="p">):</span>
</span><span id="GA.run-1717"><a href="#GA.run-1717"><span class="linenos">1717</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA.run-1718"><a href="#GA.run-1718"><span class="linenos">1718</span></a>                                                                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="GA.run-1719"><a href="#GA.run-1719"><span class="linenos">1719</span></a>                                                                              <span class="bp">self</span><span class="p">)</span>
</span><span id="GA.run-1720"><a href="#GA.run-1720"><span class="linenos">1720</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1721"><a href="#GA.run-1721"><span class="linenos">1721</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="p">,</span>
</span><span id="GA.run-1722"><a href="#GA.run-1722"><span class="linenos">1722</span></a>                                                                              <span class="n">offspring_size</span><span class="o">=</span><span class="p">(</span>
</span><span id="GA.run-1723"><a href="#GA.run-1723"><span class="linenos">1723</span></a>                                                                              <span class="bp">self</span><span class="o">.</span><span class="n">num_offspring</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">))</span>
</span><span id="GA.run-1724"><a href="#GA.run-1724"><span class="linenos">1724</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1725"><a href="#GA.run-1725"><span class="linenos">1725</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="GA.run-1726"><a href="#GA.run-1726"><span class="linenos">1726</span></a>
</span><span id="GA.run-1727"><a href="#GA.run-1727"><span class="linenos">1727</span></a>            <span class="c1"># If self.mutation_type=None, then no mutation is applied and thus no changes are applied to the offspring created using the crossover operation. The offspring will be used unchanged in the next generation.</span>
</span><span id="GA.run-1728"><a href="#GA.run-1728"><span class="linenos">1728</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.run-1729"><a href="#GA.run-1729"><span class="linenos">1729</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span>
</span><span id="GA.run-1730"><a href="#GA.run-1730"><span class="linenos">1730</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1731"><a href="#GA.run-1731"><span class="linenos">1731</span></a>                <span class="c1"># Adding some variations to the offspring using mutation.</span>
</span><span id="GA.run-1732"><a href="#GA.run-1732"><span class="linenos">1732</span></a>                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span><span class="p">):</span>
</span><span id="GA.run-1733"><a href="#GA.run-1733"><span class="linenos">1733</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">,</span>
</span><span id="GA.run-1734"><a href="#GA.run-1734"><span class="linenos">1734</span></a>                                                                            <span class="bp">self</span><span class="p">)</span>
</span><span id="GA.run-1735"><a href="#GA.run-1735"><span class="linenos">1735</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1736"><a href="#GA.run-1736"><span class="linenos">1736</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_crossover</span><span class="p">)</span>
</span><span id="GA.run-1737"><a href="#GA.run-1737"><span class="linenos">1737</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1738"><a href="#GA.run-1738"><span class="linenos">1738</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">on_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span><span class="p">)</span>
</span><span id="GA.run-1739"><a href="#GA.run-1739"><span class="linenos">1739</span></a>
</span><span id="GA.run-1740"><a href="#GA.run-1740"><span class="linenos">1740</span></a>            <span class="c1"># Update the population attribute according to the offspring generated.</span>
</span><span id="GA.run-1741"><a href="#GA.run-1741"><span class="linenos">1741</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.run-1742"><a href="#GA.run-1742"><span class="linenos">1742</span></a>                <span class="c1"># If the keep_elitism parameter is 0, then the keep_parents parameter will be used to decide if the parents are kept in the next generation.</span>
</span><span id="GA.run-1743"><a href="#GA.run-1743"><span class="linenos">1743</span></a>                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.run-1744"><a href="#GA.run-1744"><span class="linenos">1744</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA.run-1745"><a href="#GA.run-1745"><span class="linenos">1745</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA.run-1746"><a href="#GA.run-1746"><span class="linenos">1746</span></a>                    <span class="c1"># Creating the new population based on the parents and offspring.</span>
</span><span id="GA.run-1747"><a href="#GA.run-1747"><span class="linenos">1747</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span>
</span><span id="GA.run-1748"><a href="#GA.run-1748"><span class="linenos">1748</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA.run-1749"><a href="#GA.run-1749"><span class="linenos">1749</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.run-1750"><a href="#GA.run-1750"><span class="linenos">1750</span></a>                    <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA.run-1751"><a href="#GA.run-1751"><span class="linenos">1751</span></a>                                                                     <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="GA.run-1752"><a href="#GA.run-1752"><span class="linenos">1752</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA.run-1753"><a href="#GA.run-1753"><span class="linenos">1753</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">parents_to_keep</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA.run-1754"><a href="#GA.run-1754"><span class="linenos">1754</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.run-1755"><a href="#GA.run-1755"><span class="linenos">1755</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA.run-1756"><a href="#GA.run-1756"><span class="linenos">1756</span></a>                                                                              <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA.run-1757"><a href="#GA.run-1757"><span class="linenos">1757</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span>
</span><span id="GA.run-1758"><a href="#GA.run-1758"><span class="linenos">1758</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_elitism</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_offspring_mutation</span>
</span><span id="GA.run-1759"><a href="#GA.run-1759"><span class="linenos">1759</span></a>
</span><span id="GA.run-1760"><a href="#GA.run-1760"><span class="linenos">1760</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">=</span> <span class="n">generation</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># The generations_completed attribute holds the number of the last completed generation.</span>
</span><span id="GA.run-1761"><a href="#GA.run-1761"><span class="linenos">1761</span></a>
</span><span id="GA.run-1762"><a href="#GA.run-1762"><span class="linenos">1762</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">previous_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.run-1763"><a href="#GA.run-1763"><span class="linenos">1763</span></a>
</span><span id="GA.run-1764"><a href="#GA.run-1764"><span class="linenos">1764</span></a>            <span class="c1"># Measuring the fitness of each chromosome in the population. Save the fitness in the last_generation_fitness attribute.</span>
</span><span id="GA.run-1765"><a href="#GA.run-1765"><span class="linenos">1765</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA.run-1766"><a href="#GA.run-1766"><span class="linenos">1766</span></a>            <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span>
</span><span id="GA.run-1767"><a href="#GA.run-1767"><span class="linenos">1767</span></a>                <span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1768"><a href="#GA.run-1768"><span class="linenos">1768</span></a>
</span><span id="GA.run-1769"><a href="#GA.run-1769"><span class="linenos">1769</span></a>            <span class="c1"># Appending the best solution in the current generation to the best_solutions list.</span>
</span><span id="GA.run-1770"><a href="#GA.run-1770"><span class="linenos">1770</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA.run-1771"><a href="#GA.run-1771"><span class="linenos">1771</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution</span><span class="p">)</span>
</span><span id="GA.run-1772"><a href="#GA.run-1772"><span class="linenos">1772</span></a>
</span><span id="GA.run-1773"><a href="#GA.run-1773"><span class="linenos">1773</span></a>            <span class="c1"># If the callback_generation attribute is not None, then cal the callback function after the generation.</span>
</span><span id="GA.run-1774"><a href="#GA.run-1774"><span class="linenos">1774</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1775"><a href="#GA.run-1775"><span class="linenos">1775</span></a>                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_generation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GA.run-1776"><a href="#GA.run-1776"><span class="linenos">1776</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;stop&quot;</span><span class="p">:</span>
</span><span id="GA.run-1777"><a href="#GA.run-1777"><span class="linenos">1777</span></a>                    <span class="c1"># Before aborting the loop, save the fitness value of the best solution.</span>
</span><span id="GA.run-1778"><a href="#GA.run-1778"><span class="linenos">1778</span></a>                    <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1779"><a href="#GA.run-1779"><span class="linenos">1779</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA.run-1780"><a href="#GA.run-1780"><span class="linenos">1780</span></a>                    <span class="k">break</span>
</span><span id="GA.run-1781"><a href="#GA.run-1781"><span class="linenos">1781</span></a>
</span><span id="GA.run-1782"><a href="#GA.run-1782"><span class="linenos">1782</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.run-1783"><a href="#GA.run-1783"><span class="linenos">1783</span></a>                <span class="k">for</span> <span class="n">criterion</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop_criteria</span><span class="p">:</span>
</span><span id="GA.run-1784"><a href="#GA.run-1784"><span class="linenos">1784</span></a>                    <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;reach&quot;</span><span class="p">:</span>
</span><span id="GA.run-1785"><a href="#GA.run-1785"><span class="linenos">1785</span></a>                        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="GA.run-1786"><a href="#GA.run-1786"><span class="linenos">1786</span></a>                            <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.run-1787"><a href="#GA.run-1787"><span class="linenos">1787</span></a>                            <span class="k">break</span>
</span><span id="GA.run-1788"><a href="#GA.run-1788"><span class="linenos">1788</span></a>                    <span class="k">elif</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;saturate&quot;</span><span class="p">:</span>
</span><span id="GA.run-1789"><a href="#GA.run-1789"><span class="linenos">1789</span></a>                        <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.run-1790"><a href="#GA.run-1790"><span class="linenos">1790</span></a>                        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&gt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.run-1791"><a href="#GA.run-1791"><span class="linenos">1791</span></a>                            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span>
</span><span id="GA.run-1792"><a href="#GA.run-1792"><span class="linenos">1792</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">-</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span> <span class="o">&lt;=</span> <span class="n">criterion</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
</span><span id="GA.run-1793"><a href="#GA.run-1793"><span class="linenos">1793</span></a>                                <span class="n">stop_run</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GA.run-1794"><a href="#GA.run-1794"><span class="linenos">1794</span></a>                                <span class="k">break</span>
</span><span id="GA.run-1795"><a href="#GA.run-1795"><span class="linenos">1795</span></a>
</span><span id="GA.run-1796"><a href="#GA.run-1796"><span class="linenos">1796</span></a>            <span class="k">if</span> <span class="n">stop_run</span><span class="p">:</span>
</span><span id="GA.run-1797"><a href="#GA.run-1797"><span class="linenos">1797</span></a>                <span class="k">break</span>
</span><span id="GA.run-1798"><a href="#GA.run-1798"><span class="linenos">1798</span></a>
</span><span id="GA.run-1799"><a href="#GA.run-1799"><span class="linenos">1799</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delay_after_gen</span><span class="p">)</span>
</span><span id="GA.run-1800"><a href="#GA.run-1800"><span class="linenos">1800</span></a>
</span><span id="GA.run-1801"><a href="#GA.run-1801"><span class="linenos">1801</span></a>        <span class="c1"># Save the fitness of the last generation.</span>
</span><span id="GA.run-1802"><a href="#GA.run-1802"><span class="linenos">1802</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA.run-1803"><a href="#GA.run-1803"><span class="linenos">1803</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.run-1804"><a href="#GA.run-1804"><span class="linenos">1804</span></a>            <span class="n">population_as_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">population_as_list</span><span class="p">]</span>
</span><span id="GA.run-1805"><a href="#GA.run-1805"><span class="linenos">1805</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">population_as_list</span><span class="p">)</span>
</span><span id="GA.run-1806"><a href="#GA.run-1806"><span class="linenos">1806</span></a>
</span><span id="GA.run-1807"><a href="#GA.run-1807"><span class="linenos">1807</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">solutions_fitness</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1808"><a href="#GA.run-1808"><span class="linenos">1808</span></a>
</span><span id="GA.run-1809"><a href="#GA.run-1809"><span class="linenos">1809</span></a>        <span class="c1"># Save the fitness value of the best solution.</span>
</span><span id="GA.run-1810"><a href="#GA.run-1810"><span class="linenos">1810</span></a>
</span><span id="GA.run-1811"><a href="#GA.run-1811"><span class="linenos">1811</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solution</span><span class="p">(</span><span class="n">pop_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1812"><a href="#GA.run-1812"><span class="linenos">1812</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_solution_fitness</span><span class="p">)</span>
</span><span id="GA.run-1813"><a href="#GA.run-1813"><span class="linenos">1813</span></a>
</span><span id="GA.run-1814"><a href="#GA.run-1814"><span class="linenos">1814</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solution_generation</span> <span class="o">=</span> \
</span><span id="GA.run-1815"><a href="#GA.run-1815"><span class="linenos">1815</span></a>        <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">)))[</span><span class="mi">0</span><span class="p">][</span>
</span><span id="GA.run-1816"><a href="#GA.run-1816"><span class="linenos">1816</span></a>            <span class="mi">0</span><span class="p">]</span>
</span><span id="GA.run-1817"><a href="#GA.run-1817"><span class="linenos">1817</span></a>        <span class="c1"># After the run() method completes, the run_completed flag is changed from False to True.</span>
</span><span id="GA.run-1818"><a href="#GA.run-1818"><span class="linenos">1818</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">run_completed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Set to True only after the run() method completes gracefully.</span>
</span><span id="GA.run-1819"><a href="#GA.run-1819"><span class="linenos">1819</span></a>
</span><span id="GA.run-1820"><a href="#GA.run-1820"><span class="linenos">1820</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.run-1821"><a href="#GA.run-1821"><span class="linenos">1821</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">on_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">)</span>
</span><span id="GA.run-1822"><a href="#GA.run-1822"><span class="linenos">1822</span></a>
</span><span id="GA.run-1823"><a href="#GA.run-1823"><span class="linenos">1823</span></a>        <span class="c1"># Converting the &#39;best_solutions&#39; list into a NumPy array.</span>
</span><span id="GA.run-1824"><a href="#GA.run-1824"><span class="linenos">1824</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span><span class="p">)</span>
</span><span id="GA.run-1825"><a href="#GA.run-1825"><span class="linenos">1825</span></a>
</span><span id="GA.run-1826"><a href="#GA.run-1826"><span class="linenos">1826</span></a>        <span class="c1"># Converting the &#39;solutions&#39; list into a NumPy array.</span>
</span><span id="GA.run-1827"><a href="#GA.run-1827"><span class="linenos">1827</span></a>        <span class="c1"># self.solutions = numpy.array(self.solutions)</span>
</span></pre></div>


            <div class="docstring"><p>Runs the genetic algorithm. This is the main method in which the genetic algorithm is evolved through a number of generations.</p>
</div>


                            </div>
                            <div id="GA.steady_state_selection" class="classattr">
                                        <input id="GA.steady_state_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">steady_state_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.steady_state_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.steady_state_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.steady_state_selection-1829"><a href="#GA.steady_state_selection-1829"><span class="linenos">1829</span></a>    <span class="k">def</span> <span class="nf">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.steady_state_selection-1830"><a href="#GA.steady_state_selection-1830"><span class="linenos">1830</span></a>
</span><span id="GA.steady_state_selection-1831"><a href="#GA.steady_state_selection-1831"><span class="linenos">1831</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.steady_state_selection-1832"><a href="#GA.steady_state_selection-1832"><span class="linenos">1832</span></a><span class="sd">        Selects the parents using the steady-state selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.steady_state_selection-1833"><a href="#GA.steady_state_selection-1833"><span class="linenos">1833</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.steady_state_selection-1834"><a href="#GA.steady_state_selection-1834"><span class="linenos">1834</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.steady_state_selection-1835"><a href="#GA.steady_state_selection-1835"><span class="linenos">1835</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.steady_state_selection-1836"><a href="#GA.steady_state_selection-1836"><span class="linenos">1836</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.steady_state_selection-1837"><a href="#GA.steady_state_selection-1837"><span class="linenos">1837</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.steady_state_selection-1838"><a href="#GA.steady_state_selection-1838"><span class="linenos">1838</span></a>
</span><span id="GA.steady_state_selection-1839"><a href="#GA.steady_state_selection-1839"><span class="linenos">1839</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="GA.steady_state_selection-1840"><a href="#GA.steady_state_selection-1840"><span class="linenos">1840</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="GA.steady_state_selection-1841"><a href="#GA.steady_state_selection-1841"><span class="linenos">1841</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA.steady_state_selection-1842"><a href="#GA.steady_state_selection-1842"><span class="linenos">1842</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.steady_state_selection-1843"><a href="#GA.steady_state_selection-1843"><span class="linenos">1843</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.steady_state_selection-1844"><a href="#GA.steady_state_selection-1844"><span class="linenos">1844</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.steady_state_selection-1845"><a href="#GA.steady_state_selection-1845"><span class="linenos">1845</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.steady_state_selection-1846"><a href="#GA.steady_state_selection-1846"><span class="linenos">1846</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.steady_state_selection-1847"><a href="#GA.steady_state_selection-1847"><span class="linenos">1847</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.steady_state_selection-1848"><a href="#GA.steady_state_selection-1848"><span class="linenos">1848</span></a>
</span><span id="GA.steady_state_selection-1849"><a href="#GA.steady_state_selection-1849"><span class="linenos">1849</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents using the steady-state selection technique. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.rank_selection" class="classattr">
                                        <input id="GA.rank_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">rank_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.rank_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.rank_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.rank_selection-1851"><a href="#GA.rank_selection-1851"><span class="linenos">1851</span></a>    <span class="k">def</span> <span class="nf">rank_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.rank_selection-1852"><a href="#GA.rank_selection-1852"><span class="linenos">1852</span></a>
</span><span id="GA.rank_selection-1853"><a href="#GA.rank_selection-1853"><span class="linenos">1853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.rank_selection-1854"><a href="#GA.rank_selection-1854"><span class="linenos">1854</span></a><span class="sd">        Selects the parents using the rank selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.rank_selection-1855"><a href="#GA.rank_selection-1855"><span class="linenos">1855</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.rank_selection-1856"><a href="#GA.rank_selection-1856"><span class="linenos">1856</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.rank_selection-1857"><a href="#GA.rank_selection-1857"><span class="linenos">1857</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.rank_selection-1858"><a href="#GA.rank_selection-1858"><span class="linenos">1858</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.rank_selection-1859"><a href="#GA.rank_selection-1859"><span class="linenos">1859</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.rank_selection-1860"><a href="#GA.rank_selection-1860"><span class="linenos">1860</span></a>
</span><span id="GA.rank_selection-1861"><a href="#GA.rank_selection-1861"><span class="linenos">1861</span></a>        <span class="n">fitness_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">fitness</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="GA.rank_selection-1862"><a href="#GA.rank_selection-1862"><span class="linenos">1862</span></a>        <span class="n">fitness_sorted</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
</span><span id="GA.rank_selection-1863"><a href="#GA.rank_selection-1863"><span class="linenos">1863</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA.rank_selection-1864"><a href="#GA.rank_selection-1864"><span class="linenos">1864</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.rank_selection-1865"><a href="#GA.rank_selection-1865"><span class="linenos">1865</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.rank_selection-1866"><a href="#GA.rank_selection-1866"><span class="linenos">1866</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.rank_selection-1867"><a href="#GA.rank_selection-1867"><span class="linenos">1867</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.rank_selection-1868"><a href="#GA.rank_selection-1868"><span class="linenos">1868</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.rank_selection-1869"><a href="#GA.rank_selection-1869"><span class="linenos">1869</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">fitness_sorted</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.rank_selection-1870"><a href="#GA.rank_selection-1870"><span class="linenos">1870</span></a>
</span><span id="GA.rank_selection-1871"><a href="#GA.rank_selection-1871"><span class="linenos">1871</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">fitness_sorted</span><span class="p">[:</span><span class="n">num_parents</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents using the rank selection technique. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.random_selection" class="classattr">
                                        <input id="GA.random_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">random_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.random_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.random_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.random_selection-1873"><a href="#GA.random_selection-1873"><span class="linenos">1873</span></a>    <span class="k">def</span> <span class="nf">random_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.random_selection-1874"><a href="#GA.random_selection-1874"><span class="linenos">1874</span></a>
</span><span id="GA.random_selection-1875"><a href="#GA.random_selection-1875"><span class="linenos">1875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.random_selection-1876"><a href="#GA.random_selection-1876"><span class="linenos">1876</span></a><span class="sd">        Selects the parents randomly. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.random_selection-1877"><a href="#GA.random_selection-1877"><span class="linenos">1877</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.random_selection-1878"><a href="#GA.random_selection-1878"><span class="linenos">1878</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.random_selection-1879"><a href="#GA.random_selection-1879"><span class="linenos">1879</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.random_selection-1880"><a href="#GA.random_selection-1880"><span class="linenos">1880</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.random_selection-1881"><a href="#GA.random_selection-1881"><span class="linenos">1881</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.random_selection-1882"><a href="#GA.random_selection-1882"><span class="linenos">1882</span></a>
</span><span id="GA.random_selection-1883"><a href="#GA.random_selection-1883"><span class="linenos">1883</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.random_selection-1884"><a href="#GA.random_selection-1884"><span class="linenos">1884</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.random_selection-1885"><a href="#GA.random_selection-1885"><span class="linenos">1885</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.random_selection-1886"><a href="#GA.random_selection-1886"><span class="linenos">1886</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.random_selection-1887"><a href="#GA.random_selection-1887"><span class="linenos">1887</span></a>
</span><span id="GA.random_selection-1888"><a href="#GA.random_selection-1888"><span class="linenos">1888</span></a>        <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">num_parents</span><span class="p">)</span>
</span><span id="GA.random_selection-1889"><a href="#GA.random_selection-1889"><span class="linenos">1889</span></a>
</span><span id="GA.random_selection-1890"><a href="#GA.random_selection-1890"><span class="linenos">1890</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.random_selection-1891"><a href="#GA.random_selection-1891"><span class="linenos">1891</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">parent_num</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.random_selection-1892"><a href="#GA.random_selection-1892"><span class="linenos">1892</span></a>
</span><span id="GA.random_selection-1893"><a href="#GA.random_selection-1893"><span class="linenos">1893</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">rand_indices</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents randomly. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.tournament_selection" class="classattr">
                                        <input id="GA.tournament_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">tournament_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.tournament_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.tournament_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.tournament_selection-1895"><a href="#GA.tournament_selection-1895"><span class="linenos">1895</span></a>    <span class="k">def</span> <span class="nf">tournament_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.tournament_selection-1896"><a href="#GA.tournament_selection-1896"><span class="linenos">1896</span></a>
</span><span id="GA.tournament_selection-1897"><a href="#GA.tournament_selection-1897"><span class="linenos">1897</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.tournament_selection-1898"><a href="#GA.tournament_selection-1898"><span class="linenos">1898</span></a><span class="sd">        Selects the parents using the tournament selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.tournament_selection-1899"><a href="#GA.tournament_selection-1899"><span class="linenos">1899</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.tournament_selection-1900"><a href="#GA.tournament_selection-1900"><span class="linenos">1900</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.tournament_selection-1901"><a href="#GA.tournament_selection-1901"><span class="linenos">1901</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.tournament_selection-1902"><a href="#GA.tournament_selection-1902"><span class="linenos">1902</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.tournament_selection-1903"><a href="#GA.tournament_selection-1903"><span class="linenos">1903</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.tournament_selection-1904"><a href="#GA.tournament_selection-1904"><span class="linenos">1904</span></a>
</span><span id="GA.tournament_selection-1905"><a href="#GA.tournament_selection-1905"><span class="linenos">1905</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.tournament_selection-1906"><a href="#GA.tournament_selection-1906"><span class="linenos">1906</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.tournament_selection-1907"><a href="#GA.tournament_selection-1907"><span class="linenos">1907</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.tournament_selection-1908"><a href="#GA.tournament_selection-1908"><span class="linenos">1908</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.tournament_selection-1909"><a href="#GA.tournament_selection-1909"><span class="linenos">1909</span></a>
</span><span id="GA.tournament_selection-1910"><a href="#GA.tournament_selection-1910"><span class="linenos">1910</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.tournament_selection-1911"><a href="#GA.tournament_selection-1911"><span class="linenos">1911</span></a>
</span><span id="GA.tournament_selection-1912"><a href="#GA.tournament_selection-1912"><span class="linenos">1912</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.tournament_selection-1913"><a href="#GA.tournament_selection-1913"><span class="linenos">1913</span></a>            <span class="n">rand_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">fitness</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K_tournament</span><span class="p">)</span>
</span><span id="GA.tournament_selection-1914"><a href="#GA.tournament_selection-1914"><span class="linenos">1914</span></a>            <span class="n">K_fitnesses</span> <span class="o">=</span> <span class="n">fitness</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">]</span>
</span><span id="GA.tournament_selection-1915"><a href="#GA.tournament_selection-1915"><span class="linenos">1915</span></a>            <span class="n">selected_parent_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">K_fitnesses</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">K_fitnesses</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.tournament_selection-1916"><a href="#GA.tournament_selection-1916"><span class="linenos">1916</span></a>            <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">])</span>
</span><span id="GA.tournament_selection-1917"><a href="#GA.tournament_selection-1917"><span class="linenos">1917</span></a>            <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">rand_indices</span><span class="p">[</span><span class="n">selected_parent_idx</span><span class="p">],</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.tournament_selection-1918"><a href="#GA.tournament_selection-1918"><span class="linenos">1918</span></a>
</span><span id="GA.tournament_selection-1919"><a href="#GA.tournament_selection-1919"><span class="linenos">1919</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents using the tournament selection technique. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.roulette_wheel_selection" class="classattr">
                                        <input id="GA.roulette_wheel_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">roulette_wheel_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.roulette_wheel_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.roulette_wheel_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.roulette_wheel_selection-1921"><a href="#GA.roulette_wheel_selection-1921"><span class="linenos">1921</span></a>    <span class="k">def</span> <span class="nf">roulette_wheel_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.roulette_wheel_selection-1922"><a href="#GA.roulette_wheel_selection-1922"><span class="linenos">1922</span></a>
</span><span id="GA.roulette_wheel_selection-1923"><a href="#GA.roulette_wheel_selection-1923"><span class="linenos">1923</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.roulette_wheel_selection-1924"><a href="#GA.roulette_wheel_selection-1924"><span class="linenos">1924</span></a><span class="sd">        Selects the parents using the roulette wheel selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.roulette_wheel_selection-1925"><a href="#GA.roulette_wheel_selection-1925"><span class="linenos">1925</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.roulette_wheel_selection-1926"><a href="#GA.roulette_wheel_selection-1926"><span class="linenos">1926</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.roulette_wheel_selection-1927"><a href="#GA.roulette_wheel_selection-1927"><span class="linenos">1927</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.roulette_wheel_selection-1928"><a href="#GA.roulette_wheel_selection-1928"><span class="linenos">1928</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.roulette_wheel_selection-1929"><a href="#GA.roulette_wheel_selection-1929"><span class="linenos">1929</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.roulette_wheel_selection-1930"><a href="#GA.roulette_wheel_selection-1930"><span class="linenos">1930</span></a>
</span><span id="GA.roulette_wheel_selection-1931"><a href="#GA.roulette_wheel_selection-1931"><span class="linenos">1931</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA.roulette_wheel_selection-1932"><a href="#GA.roulette_wheel_selection-1932"><span class="linenos">1932</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.roulette_wheel_selection-1933"><a href="#GA.roulette_wheel_selection-1933"><span class="linenos">1933</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="GA.roulette_wheel_selection-1934"><a href="#GA.roulette_wheel_selection-1934"><span class="linenos">1934</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="GA.roulette_wheel_selection-1935"><a href="#GA.roulette_wheel_selection-1935"><span class="linenos">1935</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA.roulette_wheel_selection-1936"><a href="#GA.roulette_wheel_selection-1936"><span class="linenos">1936</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="GA.roulette_wheel_selection-1937"><a href="#GA.roulette_wheel_selection-1937"><span class="linenos">1937</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA.roulette_wheel_selection-1938"><a href="#GA.roulette_wheel_selection-1938"><span class="linenos">1938</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="GA.roulette_wheel_selection-1939"><a href="#GA.roulette_wheel_selection-1939"><span class="linenos">1939</span></a>
</span><span id="GA.roulette_wheel_selection-1940"><a href="#GA.roulette_wheel_selection-1940"><span class="linenos">1940</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="GA.roulette_wheel_selection-1941"><a href="#GA.roulette_wheel_selection-1941"><span class="linenos">1941</span></a>
</span><span id="GA.roulette_wheel_selection-1942"><a href="#GA.roulette_wheel_selection-1942"><span class="linenos">1942</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="GA.roulette_wheel_selection-1943"><a href="#GA.roulette_wheel_selection-1943"><span class="linenos">1943</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.roulette_wheel_selection-1944"><a href="#GA.roulette_wheel_selection-1944"><span class="linenos">1944</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.roulette_wheel_selection-1945"><a href="#GA.roulette_wheel_selection-1945"><span class="linenos">1945</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA.roulette_wheel_selection-1946"><a href="#GA.roulette_wheel_selection-1946"><span class="linenos">1946</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="GA.roulette_wheel_selection-1947"><a href="#GA.roulette_wheel_selection-1947"><span class="linenos">1947</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA.roulette_wheel_selection-1948"><a href="#GA.roulette_wheel_selection-1948"><span class="linenos">1948</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="GA.roulette_wheel_selection-1949"><a href="#GA.roulette_wheel_selection-1949"><span class="linenos">1949</span></a>
</span><span id="GA.roulette_wheel_selection-1950"><a href="#GA.roulette_wheel_selection-1950"><span class="linenos">1950</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA.roulette_wheel_selection-1951"><a href="#GA.roulette_wheel_selection-1951"><span class="linenos">1951</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.roulette_wheel_selection-1952"><a href="#GA.roulette_wheel_selection-1952"><span class="linenos">1952</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.roulette_wheel_selection-1953"><a href="#GA.roulette_wheel_selection-1953"><span class="linenos">1953</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.roulette_wheel_selection-1954"><a href="#GA.roulette_wheel_selection-1954"><span class="linenos">1954</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.roulette_wheel_selection-1955"><a href="#GA.roulette_wheel_selection-1955"><span class="linenos">1955</span></a>
</span><span id="GA.roulette_wheel_selection-1956"><a href="#GA.roulette_wheel_selection-1956"><span class="linenos">1956</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.roulette_wheel_selection-1957"><a href="#GA.roulette_wheel_selection-1957"><span class="linenos">1957</span></a>
</span><span id="GA.roulette_wheel_selection-1958"><a href="#GA.roulette_wheel_selection-1958"><span class="linenos">1958</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.roulette_wheel_selection-1959"><a href="#GA.roulette_wheel_selection-1959"><span class="linenos">1959</span></a>            <span class="n">rand_prob</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span>
</span><span id="GA.roulette_wheel_selection-1960"><a href="#GA.roulette_wheel_selection-1960"><span class="linenos">1960</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.roulette_wheel_selection-1961"><a href="#GA.roulette_wheel_selection-1961"><span class="linenos">1961</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_prob</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_prob</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="GA.roulette_wheel_selection-1962"><a href="#GA.roulette_wheel_selection-1962"><span class="linenos">1962</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.roulette_wheel_selection-1963"><a href="#GA.roulette_wheel_selection-1963"><span class="linenos">1963</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="GA.roulette_wheel_selection-1964"><a href="#GA.roulette_wheel_selection-1964"><span class="linenos">1964</span></a>                    <span class="k">break</span>
</span><span id="GA.roulette_wheel_selection-1965"><a href="#GA.roulette_wheel_selection-1965"><span class="linenos">1965</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents using the roulette wheel selection technique. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.stochastic_universal_selection" class="classattr">
                                        <input id="GA.stochastic_universal_selection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stochastic_universal_selection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">fitness</span>, </span><span class="param"><span class="n">num_parents</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.stochastic_universal_selection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.stochastic_universal_selection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.stochastic_universal_selection-1967"><a href="#GA.stochastic_universal_selection-1967"><span class="linenos">1967</span></a>    <span class="k">def</span> <span class="nf">stochastic_universal_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fitness</span><span class="p">,</span> <span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.stochastic_universal_selection-1968"><a href="#GA.stochastic_universal_selection-1968"><span class="linenos">1968</span></a>
</span><span id="GA.stochastic_universal_selection-1969"><a href="#GA.stochastic_universal_selection-1969"><span class="linenos">1969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.stochastic_universal_selection-1970"><a href="#GA.stochastic_universal_selection-1970"><span class="linenos">1970</span></a><span class="sd">        Selects the parents using the stochastic universal selection technique. Later, these parents will mate to produce the offspring.</span>
</span><span id="GA.stochastic_universal_selection-1971"><a href="#GA.stochastic_universal_selection-1971"><span class="linenos">1971</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.stochastic_universal_selection-1972"><a href="#GA.stochastic_universal_selection-1972"><span class="linenos">1972</span></a><span class="sd">            -fitness: The fitness values of the solutions in the current population.</span>
</span><span id="GA.stochastic_universal_selection-1973"><a href="#GA.stochastic_universal_selection-1973"><span class="linenos">1973</span></a><span class="sd">            -num_parents: The number of parents to be selected.</span>
</span><span id="GA.stochastic_universal_selection-1974"><a href="#GA.stochastic_universal_selection-1974"><span class="linenos">1974</span></a><span class="sd">        It returns an array of the selected parents.</span>
</span><span id="GA.stochastic_universal_selection-1975"><a href="#GA.stochastic_universal_selection-1975"><span class="linenos">1975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.stochastic_universal_selection-1976"><a href="#GA.stochastic_universal_selection-1976"><span class="linenos">1976</span></a>
</span><span id="GA.stochastic_universal_selection-1977"><a href="#GA.stochastic_universal_selection-1977"><span class="linenos">1977</span></a>        <span class="n">fitness_sum</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA.stochastic_universal_selection-1978"><a href="#GA.stochastic_universal_selection-1978"><span class="linenos">1978</span></a>        <span class="k">if</span> <span class="n">fitness_sum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.stochastic_universal_selection-1979"><a href="#GA.stochastic_universal_selection-1979"><span class="linenos">1979</span></a>            <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;Cannot proceed because the sum of fitness values is zero. Cannot divide by zero.&quot;</span><span class="p">)</span>
</span><span id="GA.stochastic_universal_selection-1980"><a href="#GA.stochastic_universal_selection-1980"><span class="linenos">1980</span></a>        <span class="n">probs</span> <span class="o">=</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">fitness_sum</span>
</span><span id="GA.stochastic_universal_selection-1981"><a href="#GA.stochastic_universal_selection-1981"><span class="linenos">1981</span></a>        <span class="n">probs_start</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA.stochastic_universal_selection-1982"><a href="#GA.stochastic_universal_selection-1982"><span class="linenos">1982</span></a>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the start values of the ranges of probabilities.</span>
</span><span id="GA.stochastic_universal_selection-1983"><a href="#GA.stochastic_universal_selection-1983"><span class="linenos">1983</span></a>        <span class="n">probs_end</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
</span><span id="GA.stochastic_universal_selection-1984"><a href="#GA.stochastic_universal_selection-1984"><span class="linenos">1984</span></a>                                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>  <span class="c1"># An array holding the end values of the ranges of probabilities.</span>
</span><span id="GA.stochastic_universal_selection-1985"><a href="#GA.stochastic_universal_selection-1985"><span class="linenos">1985</span></a>
</span><span id="GA.stochastic_universal_selection-1986"><a href="#GA.stochastic_universal_selection-1986"><span class="linenos">1986</span></a>        <span class="n">curr</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="GA.stochastic_universal_selection-1987"><a href="#GA.stochastic_universal_selection-1987"><span class="linenos">1987</span></a>
</span><span id="GA.stochastic_universal_selection-1988"><a href="#GA.stochastic_universal_selection-1988"><span class="linenos">1988</span></a>        <span class="c1"># Calculating the probabilities of the solutions to form a roulette wheel.</span>
</span><span id="GA.stochastic_universal_selection-1989"><a href="#GA.stochastic_universal_selection-1989"><span class="linenos">1989</span></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.stochastic_universal_selection-1990"><a href="#GA.stochastic_universal_selection-1990"><span class="linenos">1990</span></a>            <span class="n">min_probs_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">probs</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.stochastic_universal_selection-1991"><a href="#GA.stochastic_universal_selection-1991"><span class="linenos">1991</span></a>            <span class="n">probs_start</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA.stochastic_universal_selection-1992"><a href="#GA.stochastic_universal_selection-1992"><span class="linenos">1992</span></a>            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span> <span class="o">+</span> <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span>
</span><span id="GA.stochastic_universal_selection-1993"><a href="#GA.stochastic_universal_selection-1993"><span class="linenos">1993</span></a>            <span class="n">probs_end</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr</span>
</span><span id="GA.stochastic_universal_selection-1994"><a href="#GA.stochastic_universal_selection-1994"><span class="linenos">1994</span></a>            <span class="n">probs</span><span class="p">[</span><span class="n">min_probs_idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99999999999</span>
</span><span id="GA.stochastic_universal_selection-1995"><a href="#GA.stochastic_universal_selection-1995"><span class="linenos">1995</span></a>
</span><span id="GA.stochastic_universal_selection-1996"><a href="#GA.stochastic_universal_selection-1996"><span class="linenos">1996</span></a>        <span class="n">pointers_distance</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_parents_mating</span>  <span class="c1"># Distance between different pointers.</span>
</span><span id="GA.stochastic_universal_selection-1997"><a href="#GA.stochastic_universal_selection-1997"><span class="linenos">1997</span></a>        <span class="n">first_pointer</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">pointers_distance</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Location of the first pointer.</span>
</span><span id="GA.stochastic_universal_selection-1998"><a href="#GA.stochastic_universal_selection-1998"><span class="linenos">1998</span></a>
</span><span id="GA.stochastic_universal_selection-1999"><a href="#GA.stochastic_universal_selection-1999"><span class="linenos">1999</span></a>        <span class="c1"># Selecting the best individuals in the current generation as parents for producing the offspring of the next generation.</span>
</span><span id="GA.stochastic_universal_selection-2000"><a href="#GA.stochastic_universal_selection-2000"><span class="linenos">2000</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.stochastic_universal_selection-2001"><a href="#GA.stochastic_universal_selection-2001"><span class="linenos">2001</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.stochastic_universal_selection-2002"><a href="#GA.stochastic_universal_selection-2002"><span class="linenos">2002</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.stochastic_universal_selection-2003"><a href="#GA.stochastic_universal_selection-2003"><span class="linenos">2003</span></a>            <span class="n">parents</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">num_parents</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.stochastic_universal_selection-2004"><a href="#GA.stochastic_universal_selection-2004"><span class="linenos">2004</span></a>
</span><span id="GA.stochastic_universal_selection-2005"><a href="#GA.stochastic_universal_selection-2005"><span class="linenos">2005</span></a>        <span class="n">parents_indices</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.stochastic_universal_selection-2006"><a href="#GA.stochastic_universal_selection-2006"><span class="linenos">2006</span></a>
</span><span id="GA.stochastic_universal_selection-2007"><a href="#GA.stochastic_universal_selection-2007"><span class="linenos">2007</span></a>        <span class="k">for</span> <span class="n">parent_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_parents</span><span class="p">):</span>
</span><span id="GA.stochastic_universal_selection-2008"><a href="#GA.stochastic_universal_selection-2008"><span class="linenos">2008</span></a>            <span class="n">rand_pointer</span> <span class="o">=</span> <span class="n">first_pointer</span> <span class="o">+</span> <span class="n">parent_num</span> <span class="o">*</span> <span class="n">pointers_distance</span>
</span><span id="GA.stochastic_universal_selection-2009"><a href="#GA.stochastic_universal_selection-2009"><span class="linenos">2009</span></a>            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">probs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.stochastic_universal_selection-2010"><a href="#GA.stochastic_universal_selection-2010"><span class="linenos">2010</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">rand_pointer</span> <span class="o">&gt;=</span> <span class="n">probs_start</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">and</span> <span class="n">rand_pointer</span> <span class="o">&lt;</span> <span class="n">probs_end</span><span class="p">[</span><span class="n">idx</span><span class="p">]):</span>
</span><span id="GA.stochastic_universal_selection-2011"><a href="#GA.stochastic_universal_selection-2011"><span class="linenos">2011</span></a>                    <span class="n">parents</span><span class="p">[</span><span class="n">parent_num</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.stochastic_universal_selection-2012"><a href="#GA.stochastic_universal_selection-2012"><span class="linenos">2012</span></a>                    <span class="n">parents_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</span><span id="GA.stochastic_universal_selection-2013"><a href="#GA.stochastic_universal_selection-2013"><span class="linenos">2013</span></a>                    <span class="k">break</span>
</span><span id="GA.stochastic_universal_selection-2014"><a href="#GA.stochastic_universal_selection-2014"><span class="linenos">2014</span></a>        <span class="k">return</span> <span class="n">parents</span><span class="p">,</span> <span class="n">parents_indices</span>
</span></pre></div>


            <div class="docstring"><p>Selects the parents using the stochastic universal selection technique. Later, these parents will mate to produce the offspring.
It accepts 2 parameters:
    -fitness: The fitness values of the solutions in the current population.
    -num_parents: The number of parents to be selected.
It returns an array of the selected parents.</p>
</div>


                            </div>
                            <div id="GA.single_point_crossover" class="classattr">
                                        <input id="GA.single_point_crossover-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">single_point_crossover</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">parents</span>, </span><span class="param"><span class="n">offspring_size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.single_point_crossover-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.single_point_crossover"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.single_point_crossover-2016"><a href="#GA.single_point_crossover-2016"><span class="linenos">2016</span></a>    <span class="k">def</span> <span class="nf">single_point_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA.single_point_crossover-2017"><a href="#GA.single_point_crossover-2017"><span class="linenos">2017</span></a>
</span><span id="GA.single_point_crossover-2018"><a href="#GA.single_point_crossover-2018"><span class="linenos">2018</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.single_point_crossover-2019"><a href="#GA.single_point_crossover-2019"><span class="linenos">2019</span></a><span class="sd">        Applies the single-point crossover. It selects a point randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="GA.single_point_crossover-2020"><a href="#GA.single_point_crossover-2020"><span class="linenos">2020</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.single_point_crossover-2021"><a href="#GA.single_point_crossover-2021"><span class="linenos">2021</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA.single_point_crossover-2022"><a href="#GA.single_point_crossover-2022"><span class="linenos">2022</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA.single_point_crossover-2023"><a href="#GA.single_point_crossover-2023"><span class="linenos">2023</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA.single_point_crossover-2024"><a href="#GA.single_point_crossover-2024"><span class="linenos">2024</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.single_point_crossover-2025"><a href="#GA.single_point_crossover-2025"><span class="linenos">2025</span></a>
</span><span id="GA.single_point_crossover-2026"><a href="#GA.single_point_crossover-2026"><span class="linenos">2026</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2027"><a href="#GA.single_point_crossover-2027"><span class="linenos">2027</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.single_point_crossover-2028"><a href="#GA.single_point_crossover-2028"><span class="linenos">2028</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2029"><a href="#GA.single_point_crossover-2029"><span class="linenos">2029</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.single_point_crossover-2030"><a href="#GA.single_point_crossover-2030"><span class="linenos">2030</span></a>
</span><span id="GA.single_point_crossover-2031"><a href="#GA.single_point_crossover-2031"><span class="linenos">2031</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.single_point_crossover-2032"><a href="#GA.single_point_crossover-2032"><span class="linenos">2032</span></a>            <span class="c1"># The point at which crossover takes place between two parents. Usually, it is at the center.</span>
</span><span id="GA.single_point_crossover-2033"><a href="#GA.single_point_crossover-2033"><span class="linenos">2033</span></a>            <span class="n">crossover_point</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2034"><a href="#GA.single_point_crossover-2034"><span class="linenos">2034</span></a>
</span><span id="GA.single_point_crossover-2035"><a href="#GA.single_point_crossover-2035"><span class="linenos">2035</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.single_point_crossover-2036"><a href="#GA.single_point_crossover-2036"><span class="linenos">2036</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.single_point_crossover-2037"><a href="#GA.single_point_crossover-2037"><span class="linenos">2037</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2038"><a href="#GA.single_point_crossover-2038"><span class="linenos">2038</span></a>
</span><span id="GA.single_point_crossover-2039"><a href="#GA.single_point_crossover-2039"><span class="linenos">2039</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA.single_point_crossover-2040"><a href="#GA.single_point_crossover-2040"><span class="linenos">2040</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2041"><a href="#GA.single_point_crossover-2041"><span class="linenos">2041</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA.single_point_crossover-2042"><a href="#GA.single_point_crossover-2042"><span class="linenos">2042</span></a>                    <span class="k">continue</span>
</span><span id="GA.single_point_crossover-2043"><a href="#GA.single_point_crossover-2043"><span class="linenos">2043</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2044"><a href="#GA.single_point_crossover-2044"><span class="linenos">2044</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2045"><a href="#GA.single_point_crossover-2045"><span class="linenos">2045</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA.single_point_crossover-2046"><a href="#GA.single_point_crossover-2046"><span class="linenos">2046</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2047"><a href="#GA.single_point_crossover-2047"><span class="linenos">2047</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.single_point_crossover-2048"><a href="#GA.single_point_crossover-2048"><span class="linenos">2048</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2049"><a href="#GA.single_point_crossover-2049"><span class="linenos">2049</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2050"><a href="#GA.single_point_crossover-2050"><span class="linenos">2050</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2051"><a href="#GA.single_point_crossover-2051"><span class="linenos">2051</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA.single_point_crossover-2052"><a href="#GA.single_point_crossover-2052"><span class="linenos">2052</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2053"><a href="#GA.single_point_crossover-2053"><span class="linenos">2053</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA.single_point_crossover-2054"><a href="#GA.single_point_crossover-2054"><span class="linenos">2054</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2055"><a href="#GA.single_point_crossover-2055"><span class="linenos">2055</span></a>
</span><span id="GA.single_point_crossover-2056"><a href="#GA.single_point_crossover-2056"><span class="linenos">2056</span></a>            <span class="c1"># The new offspring has its first half of its genes from the first parent.</span>
</span><span id="GA.single_point_crossover-2057"><a href="#GA.single_point_crossover-2057"><span class="linenos">2057</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point</span><span class="p">]</span>
</span><span id="GA.single_point_crossover-2058"><a href="#GA.single_point_crossover-2058"><span class="linenos">2058</span></a>            <span class="c1"># The new offspring has its second half of its genes from the second parent.</span>
</span><span id="GA.single_point_crossover-2059"><a href="#GA.single_point_crossover-2059"><span class="linenos">2059</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point</span><span class="p">:]</span>
</span><span id="GA.single_point_crossover-2060"><a href="#GA.single_point_crossover-2060"><span class="linenos">2060</span></a>
</span><span id="GA.single_point_crossover-2061"><a href="#GA.single_point_crossover-2061"><span class="linenos">2061</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA.single_point_crossover-2062"><a href="#GA.single_point_crossover-2062"><span class="linenos">2062</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2063"><a href="#GA.single_point_crossover-2063"><span class="linenos">2063</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.single_point_crossover-2064"><a href="#GA.single_point_crossover-2064"><span class="linenos">2064</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.single_point_crossover-2065"><a href="#GA.single_point_crossover-2065"><span class="linenos">2065</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.single_point_crossover-2066"><a href="#GA.single_point_crossover-2066"><span class="linenos">2066</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.single_point_crossover-2067"><a href="#GA.single_point_crossover-2067"><span class="linenos">2067</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.single_point_crossover-2068"><a href="#GA.single_point_crossover-2068"><span class="linenos">2068</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.single_point_crossover-2069"><a href="#GA.single_point_crossover-2069"><span class="linenos">2069</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.single_point_crossover-2070"><a href="#GA.single_point_crossover-2070"><span class="linenos">2070</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.single_point_crossover-2071"><a href="#GA.single_point_crossover-2071"><span class="linenos">2071</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.single_point_crossover-2072"><a href="#GA.single_point_crossover-2072"><span class="linenos">2072</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.single_point_crossover-2073"><a href="#GA.single_point_crossover-2073"><span class="linenos">2073</span></a>
</span><span id="GA.single_point_crossover-2074"><a href="#GA.single_point_crossover-2074"><span class="linenos">2074</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the single-point crossover. It selects a point randomly at which crossover takes place between the pairs of parents.
It accepts 2 parameters:
    -parents: The parents to mate for producing the offspring.
    -offspring_size: The size of the offspring to produce.
It returns an array the produced offspring.</p>
</div>


                            </div>
                            <div id="GA.two_points_crossover" class="classattr">
                                        <input id="GA.two_points_crossover-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">two_points_crossover</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">parents</span>, </span><span class="param"><span class="n">offspring_size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.two_points_crossover-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.two_points_crossover"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.two_points_crossover-2076"><a href="#GA.two_points_crossover-2076"><span class="linenos">2076</span></a>    <span class="k">def</span> <span class="nf">two_points_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA.two_points_crossover-2077"><a href="#GA.two_points_crossover-2077"><span class="linenos">2077</span></a>
</span><span id="GA.two_points_crossover-2078"><a href="#GA.two_points_crossover-2078"><span class="linenos">2078</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.two_points_crossover-2079"><a href="#GA.two_points_crossover-2079"><span class="linenos">2079</span></a><span class="sd">        Applies the 2 points crossover. It selects the 2 points randomly at which crossover takes place between the pairs of parents.</span>
</span><span id="GA.two_points_crossover-2080"><a href="#GA.two_points_crossover-2080"><span class="linenos">2080</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.two_points_crossover-2081"><a href="#GA.two_points_crossover-2081"><span class="linenos">2081</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA.two_points_crossover-2082"><a href="#GA.two_points_crossover-2082"><span class="linenos">2082</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA.two_points_crossover-2083"><a href="#GA.two_points_crossover-2083"><span class="linenos">2083</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA.two_points_crossover-2084"><a href="#GA.two_points_crossover-2084"><span class="linenos">2084</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.two_points_crossover-2085"><a href="#GA.two_points_crossover-2085"><span class="linenos">2085</span></a>
</span><span id="GA.two_points_crossover-2086"><a href="#GA.two_points_crossover-2086"><span class="linenos">2086</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2087"><a href="#GA.two_points_crossover-2087"><span class="linenos">2087</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.two_points_crossover-2088"><a href="#GA.two_points_crossover-2088"><span class="linenos">2088</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2089"><a href="#GA.two_points_crossover-2089"><span class="linenos">2089</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.two_points_crossover-2090"><a href="#GA.two_points_crossover-2090"><span class="linenos">2090</span></a>
</span><span id="GA.two_points_crossover-2091"><a href="#GA.two_points_crossover-2091"><span class="linenos">2091</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.two_points_crossover-2092"><a href="#GA.two_points_crossover-2092"><span class="linenos">2092</span></a>            <span class="k">if</span> <span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span>
</span><span id="GA.two_points_crossover-2093"><a href="#GA.two_points_crossover-2093"><span class="linenos">2093</span></a>                <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># If the chromosome has only a single gene. In this case, this gene is copied from the second parent.</span>
</span><span id="GA.two_points_crossover-2094"><a href="#GA.two_points_crossover-2094"><span class="linenos">2094</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.two_points_crossover-2095"><a href="#GA.two_points_crossover-2095"><span class="linenos">2095</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2096"><a href="#GA.two_points_crossover-2096"><span class="linenos">2096</span></a>                <span class="n">crossover_point1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2097"><a href="#GA.two_points_crossover-2097"><span class="linenos">2097</span></a>
</span><span id="GA.two_points_crossover-2098"><a href="#GA.two_points_crossover-2098"><span class="linenos">2098</span></a>            <span class="n">crossover_point2</span> <span class="o">=</span> <span class="n">crossover_point1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span>
</span><span id="GA.two_points_crossover-2099"><a href="#GA.two_points_crossover-2099"><span class="linenos">2099</span></a>                <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># The second point must always be greater than the first point.</span>
</span><span id="GA.two_points_crossover-2100"><a href="#GA.two_points_crossover-2100"><span class="linenos">2100</span></a>
</span><span id="GA.two_points_crossover-2101"><a href="#GA.two_points_crossover-2101"><span class="linenos">2101</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.two_points_crossover-2102"><a href="#GA.two_points_crossover-2102"><span class="linenos">2102</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.two_points_crossover-2103"><a href="#GA.two_points_crossover-2103"><span class="linenos">2103</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2104"><a href="#GA.two_points_crossover-2104"><span class="linenos">2104</span></a>
</span><span id="GA.two_points_crossover-2105"><a href="#GA.two_points_crossover-2105"><span class="linenos">2105</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA.two_points_crossover-2106"><a href="#GA.two_points_crossover-2106"><span class="linenos">2106</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2107"><a href="#GA.two_points_crossover-2107"><span class="linenos">2107</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA.two_points_crossover-2108"><a href="#GA.two_points_crossover-2108"><span class="linenos">2108</span></a>                    <span class="k">continue</span>
</span><span id="GA.two_points_crossover-2109"><a href="#GA.two_points_crossover-2109"><span class="linenos">2109</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2110"><a href="#GA.two_points_crossover-2110"><span class="linenos">2110</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2111"><a href="#GA.two_points_crossover-2111"><span class="linenos">2111</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA.two_points_crossover-2112"><a href="#GA.two_points_crossover-2112"><span class="linenos">2112</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2113"><a href="#GA.two_points_crossover-2113"><span class="linenos">2113</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.two_points_crossover-2114"><a href="#GA.two_points_crossover-2114"><span class="linenos">2114</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2115"><a href="#GA.two_points_crossover-2115"><span class="linenos">2115</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2116"><a href="#GA.two_points_crossover-2116"><span class="linenos">2116</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2117"><a href="#GA.two_points_crossover-2117"><span class="linenos">2117</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA.two_points_crossover-2118"><a href="#GA.two_points_crossover-2118"><span class="linenos">2118</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2119"><a href="#GA.two_points_crossover-2119"><span class="linenos">2119</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA.two_points_crossover-2120"><a href="#GA.two_points_crossover-2120"><span class="linenos">2120</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2121"><a href="#GA.two_points_crossover-2121"><span class="linenos">2121</span></a>
</span><span id="GA.two_points_crossover-2122"><a href="#GA.two_points_crossover-2122"><span class="linenos">2122</span></a>            <span class="c1"># The genes from the beginning of the chromosome up to the first point are copied from the first parent.</span>
</span><span id="GA.two_points_crossover-2123"><a href="#GA.two_points_crossover-2123"><span class="linenos">2123</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="n">crossover_point1</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2124"><a href="#GA.two_points_crossover-2124"><span class="linenos">2124</span></a>            <span class="c1"># The genes from the second point up to the end of the chromosome are copied from the first parent.</span>
</span><span id="GA.two_points_crossover-2125"><a href="#GA.two_points_crossover-2125"><span class="linenos">2125</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">crossover_point2</span><span class="p">:]</span>
</span><span id="GA.two_points_crossover-2126"><a href="#GA.two_points_crossover-2126"><span class="linenos">2126</span></a>            <span class="c1"># The genes between the 2 points are copied from the second parent.</span>
</span><span id="GA.two_points_crossover-2127"><a href="#GA.two_points_crossover-2127"><span class="linenos">2127</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">crossover_point1</span><span class="p">:</span><span class="n">crossover_point2</span><span class="p">]</span>
</span><span id="GA.two_points_crossover-2128"><a href="#GA.two_points_crossover-2128"><span class="linenos">2128</span></a>
</span><span id="GA.two_points_crossover-2129"><a href="#GA.two_points_crossover-2129"><span class="linenos">2129</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA.two_points_crossover-2130"><a href="#GA.two_points_crossover-2130"><span class="linenos">2130</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2131"><a href="#GA.two_points_crossover-2131"><span class="linenos">2131</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.two_points_crossover-2132"><a href="#GA.two_points_crossover-2132"><span class="linenos">2132</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.two_points_crossover-2133"><a href="#GA.two_points_crossover-2133"><span class="linenos">2133</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.two_points_crossover-2134"><a href="#GA.two_points_crossover-2134"><span class="linenos">2134</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.two_points_crossover-2135"><a href="#GA.two_points_crossover-2135"><span class="linenos">2135</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.two_points_crossover-2136"><a href="#GA.two_points_crossover-2136"><span class="linenos">2136</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.two_points_crossover-2137"><a href="#GA.two_points_crossover-2137"><span class="linenos">2137</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.two_points_crossover-2138"><a href="#GA.two_points_crossover-2138"><span class="linenos">2138</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.two_points_crossover-2139"><a href="#GA.two_points_crossover-2139"><span class="linenos">2139</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.two_points_crossover-2140"><a href="#GA.two_points_crossover-2140"><span class="linenos">2140</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.two_points_crossover-2141"><a href="#GA.two_points_crossover-2141"><span class="linenos">2141</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the 2 points crossover. It selects the 2 points randomly at which crossover takes place between the pairs of parents.
It accepts 2 parameters:
    -parents: The parents to mate for producing the offspring.
    -offspring_size: The size of the offspring to produce.
It returns an array the produced offspring.</p>
</div>


                            </div>
                            <div id="GA.uniform_crossover" class="classattr">
                                        <input id="GA.uniform_crossover-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">uniform_crossover</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">parents</span>, </span><span class="param"><span class="n">offspring_size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.uniform_crossover-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.uniform_crossover"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.uniform_crossover-2143"><a href="#GA.uniform_crossover-2143"><span class="linenos">2143</span></a>    <span class="k">def</span> <span class="nf">uniform_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA.uniform_crossover-2144"><a href="#GA.uniform_crossover-2144"><span class="linenos">2144</span></a>
</span><span id="GA.uniform_crossover-2145"><a href="#GA.uniform_crossover-2145"><span class="linenos">2145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.uniform_crossover-2146"><a href="#GA.uniform_crossover-2146"><span class="linenos">2146</span></a><span class="sd">        Applies the uniform crossover. For each gene, a parent out of the 2 mating parents is selected randomly and the gene is copied from it.</span>
</span><span id="GA.uniform_crossover-2147"><a href="#GA.uniform_crossover-2147"><span class="linenos">2147</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.uniform_crossover-2148"><a href="#GA.uniform_crossover-2148"><span class="linenos">2148</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA.uniform_crossover-2149"><a href="#GA.uniform_crossover-2149"><span class="linenos">2149</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA.uniform_crossover-2150"><a href="#GA.uniform_crossover-2150"><span class="linenos">2150</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA.uniform_crossover-2151"><a href="#GA.uniform_crossover-2151"><span class="linenos">2151</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.uniform_crossover-2152"><a href="#GA.uniform_crossover-2152"><span class="linenos">2152</span></a>
</span><span id="GA.uniform_crossover-2153"><a href="#GA.uniform_crossover-2153"><span class="linenos">2153</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2154"><a href="#GA.uniform_crossover-2154"><span class="linenos">2154</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.uniform_crossover-2155"><a href="#GA.uniform_crossover-2155"><span class="linenos">2155</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2156"><a href="#GA.uniform_crossover-2156"><span class="linenos">2156</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.uniform_crossover-2157"><a href="#GA.uniform_crossover-2157"><span class="linenos">2157</span></a>
</span><span id="GA.uniform_crossover-2158"><a href="#GA.uniform_crossover-2158"><span class="linenos">2158</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.uniform_crossover-2159"><a href="#GA.uniform_crossover-2159"><span class="linenos">2159</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.uniform_crossover-2160"><a href="#GA.uniform_crossover-2160"><span class="linenos">2160</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.uniform_crossover-2161"><a href="#GA.uniform_crossover-2161"><span class="linenos">2161</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2162"><a href="#GA.uniform_crossover-2162"><span class="linenos">2162</span></a>
</span><span id="GA.uniform_crossover-2163"><a href="#GA.uniform_crossover-2163"><span class="linenos">2163</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA.uniform_crossover-2164"><a href="#GA.uniform_crossover-2164"><span class="linenos">2164</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2165"><a href="#GA.uniform_crossover-2165"><span class="linenos">2165</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA.uniform_crossover-2166"><a href="#GA.uniform_crossover-2166"><span class="linenos">2166</span></a>                    <span class="k">continue</span>
</span><span id="GA.uniform_crossover-2167"><a href="#GA.uniform_crossover-2167"><span class="linenos">2167</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2168"><a href="#GA.uniform_crossover-2168"><span class="linenos">2168</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2169"><a href="#GA.uniform_crossover-2169"><span class="linenos">2169</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA.uniform_crossover-2170"><a href="#GA.uniform_crossover-2170"><span class="linenos">2170</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2171"><a href="#GA.uniform_crossover-2171"><span class="linenos">2171</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.uniform_crossover-2172"><a href="#GA.uniform_crossover-2172"><span class="linenos">2172</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2173"><a href="#GA.uniform_crossover-2173"><span class="linenos">2173</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2174"><a href="#GA.uniform_crossover-2174"><span class="linenos">2174</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2175"><a href="#GA.uniform_crossover-2175"><span class="linenos">2175</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA.uniform_crossover-2176"><a href="#GA.uniform_crossover-2176"><span class="linenos">2176</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2177"><a href="#GA.uniform_crossover-2177"><span class="linenos">2177</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA.uniform_crossover-2178"><a href="#GA.uniform_crossover-2178"><span class="linenos">2178</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2179"><a href="#GA.uniform_crossover-2179"><span class="linenos">2179</span></a>
</span><span id="GA.uniform_crossover-2180"><a href="#GA.uniform_crossover-2180"><span class="linenos">2180</span></a>            <span class="n">genes_source</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.uniform_crossover-2181"><a href="#GA.uniform_crossover-2181"><span class="linenos">2181</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.uniform_crossover-2182"><a href="#GA.uniform_crossover-2182"><span class="linenos">2182</span></a>                <span class="k">if</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.uniform_crossover-2183"><a href="#GA.uniform_crossover-2183"><span class="linenos">2183</span></a>                    <span class="c1"># The gene will be copied from the first parent if the current gene index is 0.</span>
</span><span id="GA.uniform_crossover-2184"><a href="#GA.uniform_crossover-2184"><span class="linenos">2184</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2185"><a href="#GA.uniform_crossover-2185"><span class="linenos">2185</span></a>                <span class="k">elif</span> <span class="p">(</span><span class="n">genes_source</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.uniform_crossover-2186"><a href="#GA.uniform_crossover-2186"><span class="linenos">2186</span></a>                    <span class="c1"># The gene will be copied from the second parent if the current gene index is 1.</span>
</span><span id="GA.uniform_crossover-2187"><a href="#GA.uniform_crossover-2187"><span class="linenos">2187</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.uniform_crossover-2188"><a href="#GA.uniform_crossover-2188"><span class="linenos">2188</span></a>
</span><span id="GA.uniform_crossover-2189"><a href="#GA.uniform_crossover-2189"><span class="linenos">2189</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA.uniform_crossover-2190"><a href="#GA.uniform_crossover-2190"><span class="linenos">2190</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2191"><a href="#GA.uniform_crossover-2191"><span class="linenos">2191</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.uniform_crossover-2192"><a href="#GA.uniform_crossover-2192"><span class="linenos">2192</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.uniform_crossover-2193"><a href="#GA.uniform_crossover-2193"><span class="linenos">2193</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.uniform_crossover-2194"><a href="#GA.uniform_crossover-2194"><span class="linenos">2194</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.uniform_crossover-2195"><a href="#GA.uniform_crossover-2195"><span class="linenos">2195</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.uniform_crossover-2196"><a href="#GA.uniform_crossover-2196"><span class="linenos">2196</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.uniform_crossover-2197"><a href="#GA.uniform_crossover-2197"><span class="linenos">2197</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.uniform_crossover-2198"><a href="#GA.uniform_crossover-2198"><span class="linenos">2198</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.uniform_crossover-2199"><a href="#GA.uniform_crossover-2199"><span class="linenos">2199</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.uniform_crossover-2200"><a href="#GA.uniform_crossover-2200"><span class="linenos">2200</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.uniform_crossover-2201"><a href="#GA.uniform_crossover-2201"><span class="linenos">2201</span></a>
</span><span id="GA.uniform_crossover-2202"><a href="#GA.uniform_crossover-2202"><span class="linenos">2202</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the uniform crossover. For each gene, a parent out of the 2 mating parents is selected randomly and the gene is copied from it.
It accepts 2 parameters:
    -parents: The parents to mate for producing the offspring.
    -offspring_size: The size of the offspring to produce.
It returns an array the produced offspring.</p>
</div>


                            </div>
                            <div id="GA.scattered_crossover" class="classattr">
                                        <input id="GA.scattered_crossover-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">scattered_crossover</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">parents</span>, </span><span class="param"><span class="n">offspring_size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.scattered_crossover-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.scattered_crossover"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.scattered_crossover-2204"><a href="#GA.scattered_crossover-2204"><span class="linenos">2204</span></a>    <span class="k">def</span> <span class="nf">scattered_crossover</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">offspring_size</span><span class="p">):</span>
</span><span id="GA.scattered_crossover-2205"><a href="#GA.scattered_crossover-2205"><span class="linenos">2205</span></a>
</span><span id="GA.scattered_crossover-2206"><a href="#GA.scattered_crossover-2206"><span class="linenos">2206</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.scattered_crossover-2207"><a href="#GA.scattered_crossover-2207"><span class="linenos">2207</span></a><span class="sd">        Applies the scattered crossover. It randomly selects the gene from one of the 2 parents.</span>
</span><span id="GA.scattered_crossover-2208"><a href="#GA.scattered_crossover-2208"><span class="linenos">2208</span></a><span class="sd">        It accepts 2 parameters:</span>
</span><span id="GA.scattered_crossover-2209"><a href="#GA.scattered_crossover-2209"><span class="linenos">2209</span></a><span class="sd">            -parents: The parents to mate for producing the offspring.</span>
</span><span id="GA.scattered_crossover-2210"><a href="#GA.scattered_crossover-2210"><span class="linenos">2210</span></a><span class="sd">            -offspring_size: The size of the offspring to produce.</span>
</span><span id="GA.scattered_crossover-2211"><a href="#GA.scattered_crossover-2211"><span class="linenos">2211</span></a><span class="sd">        It returns an array the produced offspring.</span>
</span><span id="GA.scattered_crossover-2212"><a href="#GA.scattered_crossover-2212"><span class="linenos">2212</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.scattered_crossover-2213"><a href="#GA.scattered_crossover-2213"><span class="linenos">2213</span></a>
</span><span id="GA.scattered_crossover-2214"><a href="#GA.scattered_crossover-2214"><span class="linenos">2214</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2215"><a href="#GA.scattered_crossover-2215"><span class="linenos">2215</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.scattered_crossover-2216"><a href="#GA.scattered_crossover-2216"><span class="linenos">2216</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2217"><a href="#GA.scattered_crossover-2217"><span class="linenos">2217</span></a>            <span class="n">offspring</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
</span><span id="GA.scattered_crossover-2218"><a href="#GA.scattered_crossover-2218"><span class="linenos">2218</span></a>
</span><span id="GA.scattered_crossover-2219"><a href="#GA.scattered_crossover-2219"><span class="linenos">2219</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.scattered_crossover-2220"><a href="#GA.scattered_crossover-2220"><span class="linenos">2220</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.scattered_crossover-2221"><a href="#GA.scattered_crossover-2221"><span class="linenos">2221</span></a>                <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.scattered_crossover-2222"><a href="#GA.scattered_crossover-2222"><span class="linenos">2222</span></a>                <span class="n">indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crossover_probability</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2223"><a href="#GA.scattered_crossover-2223"><span class="linenos">2223</span></a>
</span><span id="GA.scattered_crossover-2224"><a href="#GA.scattered_crossover-2224"><span class="linenos">2224</span></a>                <span class="c1"># If no parent satisfied the probability, no crossover is applied and a parent is selected.</span>
</span><span id="GA.scattered_crossover-2225"><a href="#GA.scattered_crossover-2225"><span class="linenos">2225</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2226"><a href="#GA.scattered_crossover-2226"><span class="linenos">2226</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents</span><span class="p">[</span><span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
</span><span id="GA.scattered_crossover-2227"><a href="#GA.scattered_crossover-2227"><span class="linenos">2227</span></a>                    <span class="k">continue</span>
</span><span id="GA.scattered_crossover-2228"><a href="#GA.scattered_crossover-2228"><span class="linenos">2228</span></a>                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2229"><a href="#GA.scattered_crossover-2229"><span class="linenos">2229</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2230"><a href="#GA.scattered_crossover-2230"><span class="linenos">2230</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">parent1_idx</span>
</span><span id="GA.scattered_crossover-2231"><a href="#GA.scattered_crossover-2231"><span class="linenos">2231</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2232"><a href="#GA.scattered_crossover-2232"><span class="linenos">2232</span></a>                    <span class="n">indices</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">indices</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.scattered_crossover-2233"><a href="#GA.scattered_crossover-2233"><span class="linenos">2233</span></a>                    <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2234"><a href="#GA.scattered_crossover-2234"><span class="linenos">2234</span></a>                    <span class="n">parent2_idx</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2235"><a href="#GA.scattered_crossover-2235"><span class="linenos">2235</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2236"><a href="#GA.scattered_crossover-2236"><span class="linenos">2236</span></a>                <span class="c1"># Index of the first parent to mate.</span>
</span><span id="GA.scattered_crossover-2237"><a href="#GA.scattered_crossover-2237"><span class="linenos">2237</span></a>                <span class="n">parent1_idx</span> <span class="o">=</span> <span class="n">k</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2238"><a href="#GA.scattered_crossover-2238"><span class="linenos">2238</span></a>                <span class="c1"># Index of the second parent to mate.</span>
</span><span id="GA.scattered_crossover-2239"><a href="#GA.scattered_crossover-2239"><span class="linenos">2239</span></a>                <span class="n">parent2_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scattered_crossover-2240"><a href="#GA.scattered_crossover-2240"><span class="linenos">2240</span></a>
</span><span id="GA.scattered_crossover-2241"><a href="#GA.scattered_crossover-2241"><span class="linenos">2241</span></a>            <span class="c1"># A 0/1 vector where 0 means the gene is taken from the first parent and 1 means the gene is taken from the second parent.</span>
</span><span id="GA.scattered_crossover-2242"><a href="#GA.scattered_crossover-2242"><span class="linenos">2242</span></a>            <span class="n">gene_sources</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">)</span>
</span><span id="GA.scattered_crossover-2243"><a href="#GA.scattered_crossover-2243"><span class="linenos">2243</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gene_sources</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent1_idx</span><span class="p">,</span> <span class="p">:],</span> <span class="n">parents</span><span class="p">[</span><span class="n">parent2_idx</span><span class="p">,</span> <span class="p">:])</span>
</span><span id="GA.scattered_crossover-2244"><a href="#GA.scattered_crossover-2244"><span class="linenos">2244</span></a>
</span><span id="GA.scattered_crossover-2245"><a href="#GA.scattered_crossover-2245"><span class="linenos">2245</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GA.scattered_crossover-2246"><a href="#GA.scattered_crossover-2246"><span class="linenos">2246</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2247"><a href="#GA.scattered_crossover-2247"><span class="linenos">2247</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.scattered_crossover-2248"><a href="#GA.scattered_crossover-2248"><span class="linenos">2248</span></a>                                                                             <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.scattered_crossover-2249"><a href="#GA.scattered_crossover-2249"><span class="linenos">2249</span></a>                                                                             <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.scattered_crossover-2250"><a href="#GA.scattered_crossover-2250"><span class="linenos">2250</span></a>                                                                             <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.scattered_crossover-2251"><a href="#GA.scattered_crossover-2251"><span class="linenos">2251</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.scattered_crossover-2252"><a href="#GA.scattered_crossover-2252"><span class="linenos">2252</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.scattered_crossover-2253"><a href="#GA.scattered_crossover-2253"><span class="linenos">2253</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.scattered_crossover-2254"><a href="#GA.scattered_crossover-2254"><span class="linenos">2254</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
</span><span id="GA.scattered_crossover-2255"><a href="#GA.scattered_crossover-2255"><span class="linenos">2255</span></a>                                                                             <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.scattered_crossover-2256"><a href="#GA.scattered_crossover-2256"><span class="linenos">2256</span></a>                                                                             <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.scattered_crossover-2257"><a href="#GA.scattered_crossover-2257"><span class="linenos">2257</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the scattered crossover. It randomly selects the gene from one of the 2 parents.
It accepts 2 parameters:
    -parents: The parents to mate for producing the offspring.
    -offspring_size: The size of the offspring to produce.
It returns an array the produced offspring.</p>
</div>


                            </div>
                            <div id="GA.random_mutation" class="classattr">
                                        <input id="GA.random_mutation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">random_mutation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.random_mutation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.random_mutation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.random_mutation-2259"><a href="#GA.random_mutation-2259"><span class="linenos">2259</span></a>    <span class="k">def</span> <span class="nf">random_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.random_mutation-2260"><a href="#GA.random_mutation-2260"><span class="linenos">2260</span></a>
</span><span id="GA.random_mutation-2261"><a href="#GA.random_mutation-2261"><span class="linenos">2261</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.random_mutation-2262"><a href="#GA.random_mutation-2262"><span class="linenos">2262</span></a><span class="sd">        Applies the random mutation which changes the values of a number of genes randomly.</span>
</span><span id="GA.random_mutation-2263"><a href="#GA.random_mutation-2263"><span class="linenos">2263</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.random_mutation-2264"><a href="#GA.random_mutation-2264"><span class="linenos">2264</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.random_mutation-2265"><a href="#GA.random_mutation-2265"><span class="linenos">2265</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.random_mutation-2266"><a href="#GA.random_mutation-2266"><span class="linenos">2266</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.random_mutation-2267"><a href="#GA.random_mutation-2267"><span class="linenos">2267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.random_mutation-2268"><a href="#GA.random_mutation-2268"><span class="linenos">2268</span></a>
</span><span id="GA.random_mutation-2269"><a href="#GA.random_mutation-2269"><span class="linenos">2269</span></a>        <span class="c1"># If the mutation values are selected from the mutation space, the attribute &#39;gene_space&#39; is not None. Otherwise, it is None.</span>
</span><span id="GA.random_mutation-2270"><a href="#GA.random_mutation-2270"><span class="linenos">2270</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="GA.random_mutation-2271"><a href="#GA.random_mutation-2271"><span class="linenos">2271</span></a>
</span><span id="GA.random_mutation-2272"><a href="#GA.random_mutation-2272"><span class="linenos">2272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.random_mutation-2273"><a href="#GA.random_mutation-2273"><span class="linenos">2273</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="GA.random_mutation-2274"><a href="#GA.random_mutation-2274"><span class="linenos">2274</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.random_mutation-2275"><a href="#GA.random_mutation-2275"><span class="linenos">2275</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA.random_mutation-2276"><a href="#GA.random_mutation-2276"><span class="linenos">2276</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.random_mutation-2277"><a href="#GA.random_mutation-2277"><span class="linenos">2277</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.random_mutation-2278"><a href="#GA.random_mutation-2278"><span class="linenos">2278</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.random_mutation-2279"><a href="#GA.random_mutation-2279"><span class="linenos">2279</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.random_mutation-2280"><a href="#GA.random_mutation-2280"><span class="linenos">2280</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="GA.random_mutation-2281"><a href="#GA.random_mutation-2281"><span class="linenos">2281</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.random_mutation-2282"><a href="#GA.random_mutation-2282"><span class="linenos">2282</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.random_mutation-2283"><a href="#GA.random_mutation-2283"><span class="linenos">2283</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.random_mutation-2284"><a href="#GA.random_mutation-2284"><span class="linenos">2284</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.random_mutation-2285"><a href="#GA.random_mutation-2285"><span class="linenos">2285</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.random_mutation-2286"><a href="#GA.random_mutation-2286"><span class="linenos">2286</span></a>
</span><span id="GA.random_mutation-2287"><a href="#GA.random_mutation-2287"><span class="linenos">2287</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the random mutation which changes the values of a number of genes randomly.
The random value is selected either using the 'gene_space' parameter or the 2 parameters 'random_mutation_min_val' and 'random_mutation_max_val'.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.mutation_by_space" class="classattr">
                                        <input id="GA.mutation_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mutation_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.mutation_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.mutation_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.mutation_by_space-2289"><a href="#GA.mutation_by_space-2289"><span class="linenos">2289</span></a>    <span class="k">def</span> <span class="nf">mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.mutation_by_space-2290"><a href="#GA.mutation_by_space-2290"><span class="linenos">2290</span></a>
</span><span id="GA.mutation_by_space-2291"><a href="#GA.mutation_by_space-2291"><span class="linenos">2291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.mutation_by_space-2292"><a href="#GA.mutation_by_space-2292"><span class="linenos">2292</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space.</span>
</span><span id="GA.mutation_by_space-2293"><a href="#GA.mutation_by_space-2293"><span class="linenos">2293</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.mutation_by_space-2294"><a href="#GA.mutation_by_space-2294"><span class="linenos">2294</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.mutation_by_space-2295"><a href="#GA.mutation_by_space-2295"><span class="linenos">2295</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="GA.mutation_by_space-2296"><a href="#GA.mutation_by_space-2296"><span class="linenos">2296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.mutation_by_space-2297"><a href="#GA.mutation_by_space-2297"><span class="linenos">2297</span></a>
</span><span id="GA.mutation_by_space-2298"><a href="#GA.mutation_by_space-2298"><span class="linenos">2298</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="GA.mutation_by_space-2299"><a href="#GA.mutation_by_space-2299"><span class="linenos">2299</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.mutation_by_space-2300"><a href="#GA.mutation_by_space-2300"><span class="linenos">2300</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.mutation_by_space-2301"><a href="#GA.mutation_by_space-2301"><span class="linenos">2301</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2302"><a href="#GA.mutation_by_space-2302"><span class="linenos">2302</span></a>
</span><span id="GA.mutation_by_space-2303"><a href="#GA.mutation_by_space-2303"><span class="linenos">2303</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2304"><a href="#GA.mutation_by_space-2304"><span class="linenos">2304</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_by_space-2305"><a href="#GA.mutation_by_space-2305"><span class="linenos">2305</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA.mutation_by_space-2306"><a href="#GA.mutation_by_space-2306"><span class="linenos">2306</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.mutation_by_space-2307"><a href="#GA.mutation_by_space-2307"><span class="linenos">2307</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2308"><a href="#GA.mutation_by_space-2308"><span class="linenos">2308</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_by_space-2309"><a href="#GA.mutation_by_space-2309"><span class="linenos">2309</span></a>
</span><span id="GA.mutation_by_space-2310"><a href="#GA.mutation_by_space-2310"><span class="linenos">2310</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA.mutation_by_space-2311"><a href="#GA.mutation_by_space-2311"><span class="linenos">2311</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2312"><a href="#GA.mutation_by_space-2312"><span class="linenos">2312</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA.mutation_by_space-2313"><a href="#GA.mutation_by_space-2313"><span class="linenos">2313</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.mutation_by_space-2314"><a href="#GA.mutation_by_space-2314"><span class="linenos">2314</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2315"><a href="#GA.mutation_by_space-2315"><span class="linenos">2315</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_by_space-2316"><a href="#GA.mutation_by_space-2316"><span class="linenos">2316</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_by_space-2317"><a href="#GA.mutation_by_space-2317"><span class="linenos">2317</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2318"><a href="#GA.mutation_by_space-2318"><span class="linenos">2318</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2319"><a href="#GA.mutation_by_space-2319"><span class="linenos">2319</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA.mutation_by_space-2320"><a href="#GA.mutation_by_space-2320"><span class="linenos">2320</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2321"><a href="#GA.mutation_by_space-2321"><span class="linenos">2321</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA.mutation_by_space-2322"><a href="#GA.mutation_by_space-2322"><span class="linenos">2322</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2323"><a href="#GA.mutation_by_space-2323"><span class="linenos">2323</span></a>                        <span class="c1"># The gene&#39;s space of type dict specifies the lower and upper limits of a gene.</span>
</span><span id="GA.mutation_by_space-2324"><a href="#GA.mutation_by_space-2324"><span class="linenos">2324</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.mutation_by_space-2325"><a href="#GA.mutation_by_space-2325"><span class="linenos">2325</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2326"><a href="#GA.mutation_by_space-2326"><span class="linenos">2326</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2327"><a href="#GA.mutation_by_space-2327"><span class="linenos">2327</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.mutation_by_space-2328"><a href="#GA.mutation_by_space-2328"><span class="linenos">2328</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2329"><a href="#GA.mutation_by_space-2329"><span class="linenos">2329</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2330"><a href="#GA.mutation_by_space-2330"><span class="linenos">2330</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2331"><a href="#GA.mutation_by_space-2331"><span class="linenos">2331</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2332"><a href="#GA.mutation_by_space-2332"><span class="linenos">2332</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2333"><a href="#GA.mutation_by_space-2333"><span class="linenos">2333</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2334"><a href="#GA.mutation_by_space-2334"><span class="linenos">2334</span></a>                        <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_by_space-2335"><a href="#GA.mutation_by_space-2335"><span class="linenos">2335</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA.mutation_by_space-2336"><a href="#GA.mutation_by_space-2336"><span class="linenos">2336</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2337"><a href="#GA.mutation_by_space-2337"><span class="linenos">2337</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_by_space-2338"><a href="#GA.mutation_by_space-2338"><span class="linenos">2338</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA.mutation_by_space-2339"><a href="#GA.mutation_by_space-2339"><span class="linenos">2339</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2340"><a href="#GA.mutation_by_space-2340"><span class="linenos">2340</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.mutation_by_space-2341"><a href="#GA.mutation_by_space-2341"><span class="linenos">2341</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.mutation_by_space-2342"><a href="#GA.mutation_by_space-2342"><span class="linenos">2342</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2343"><a href="#GA.mutation_by_space-2343"><span class="linenos">2343</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_by_space-2344"><a href="#GA.mutation_by_space-2344"><span class="linenos">2344</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2345"><a href="#GA.mutation_by_space-2345"><span class="linenos">2345</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2346"><a href="#GA.mutation_by_space-2346"><span class="linenos">2346</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2347"><a href="#GA.mutation_by_space-2347"><span class="linenos">2347</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_by_space-2348"><a href="#GA.mutation_by_space-2348"><span class="linenos">2348</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2349"><a href="#GA.mutation_by_space-2349"><span class="linenos">2349</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA.mutation_by_space-2350"><a href="#GA.mutation_by_space-2350"><span class="linenos">2350</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.mutation_by_space-2351"><a href="#GA.mutation_by_space-2351"><span class="linenos">2351</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2352"><a href="#GA.mutation_by_space-2352"><span class="linenos">2352</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2353"><a href="#GA.mutation_by_space-2353"><span class="linenos">2353</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.mutation_by_space-2354"><a href="#GA.mutation_by_space-2354"><span class="linenos">2354</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2355"><a href="#GA.mutation_by_space-2355"><span class="linenos">2355</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2356"><a href="#GA.mutation_by_space-2356"><span class="linenos">2356</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2357"><a href="#GA.mutation_by_space-2357"><span class="linenos">2357</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2358"><a href="#GA.mutation_by_space-2358"><span class="linenos">2358</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2359"><a href="#GA.mutation_by_space-2359"><span class="linenos">2359</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2360"><a href="#GA.mutation_by_space-2360"><span class="linenos">2360</span></a>                        <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="GA.mutation_by_space-2361"><a href="#GA.mutation_by_space-2361"><span class="linenos">2361</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.mutation_by_space-2362"><a href="#GA.mutation_by_space-2362"><span class="linenos">2362</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2363"><a href="#GA.mutation_by_space-2363"><span class="linenos">2363</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_by_space-2364"><a href="#GA.mutation_by_space-2364"><span class="linenos">2364</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2365"><a href="#GA.mutation_by_space-2365"><span class="linenos">2365</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2366"><a href="#GA.mutation_by_space-2366"><span class="linenos">2366</span></a>                    <span class="c1"># value_from_space = random.choice(self.gene_space)</span>
</span><span id="GA.mutation_by_space-2367"><a href="#GA.mutation_by_space-2367"><span class="linenos">2367</span></a>
</span><span id="GA.mutation_by_space-2368"><a href="#GA.mutation_by_space-2368"><span class="linenos">2368</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2369"><a href="#GA.mutation_by_space-2369"><span class="linenos">2369</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_by_space-2370"><a href="#GA.mutation_by_space-2370"><span class="linenos">2370</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_by_space-2371"><a href="#GA.mutation_by_space-2371"><span class="linenos">2371</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2372"><a href="#GA.mutation_by_space-2372"><span class="linenos">2372</span></a>
</span><span id="GA.mutation_by_space-2373"><a href="#GA.mutation_by_space-2373"><span class="linenos">2373</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA.mutation_by_space-2374"><a href="#GA.mutation_by_space-2374"><span class="linenos">2374</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2375"><a href="#GA.mutation_by_space-2375"><span class="linenos">2375</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2376"><a href="#GA.mutation_by_space-2376"><span class="linenos">2376</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.mutation_by_space-2377"><a href="#GA.mutation_by_space-2377"><span class="linenos">2377</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_by_space-2378"><a href="#GA.mutation_by_space-2378"><span class="linenos">2378</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2379"><a href="#GA.mutation_by_space-2379"><span class="linenos">2379</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2380"><a href="#GA.mutation_by_space-2380"><span class="linenos">2380</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2381"><a href="#GA.mutation_by_space-2381"><span class="linenos">2381</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2382"><a href="#GA.mutation_by_space-2382"><span class="linenos">2382</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.mutation_by_space-2383"><a href="#GA.mutation_by_space-2383"><span class="linenos">2383</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_by_space-2384"><a href="#GA.mutation_by_space-2384"><span class="linenos">2384</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2385"><a href="#GA.mutation_by_space-2385"><span class="linenos">2385</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2386"><a href="#GA.mutation_by_space-2386"><span class="linenos">2386</span></a>
</span><span id="GA.mutation_by_space-2387"><a href="#GA.mutation_by_space-2387"><span class="linenos">2387</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.mutation_by_space-2388"><a href="#GA.mutation_by_space-2388"><span class="linenos">2388</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA.mutation_by_space-2389"><a href="#GA.mutation_by_space-2389"><span class="linenos">2389</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.mutation_by_space-2390"><a href="#GA.mutation_by_space-2390"><span class="linenos">2390</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.mutation_by_space-2391"><a href="#GA.mutation_by_space-2391"><span class="linenos">2391</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.mutation_by_space-2392"><a href="#GA.mutation_by_space-2392"><span class="linenos">2392</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the random mutation using the mutation values' space.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring using the mutation space.</p>
</div>


                            </div>
                            <div id="GA.mutation_probs_by_space" class="classattr">
                                        <input id="GA.mutation_probs_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mutation_probs_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.mutation_probs_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.mutation_probs_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.mutation_probs_by_space-2394"><a href="#GA.mutation_probs_by_space-2394"><span class="linenos">2394</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.mutation_probs_by_space-2395"><a href="#GA.mutation_probs_by_space-2395"><span class="linenos">2395</span></a>
</span><span id="GA.mutation_probs_by_space-2396"><a href="#GA.mutation_probs_by_space-2396"><span class="linenos">2396</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.mutation_probs_by_space-2397"><a href="#GA.mutation_probs_by_space-2397"><span class="linenos">2397</span></a><span class="sd">        Applies the random mutation using the mutation values&#39; space and the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated based on the mutation space.</span>
</span><span id="GA.mutation_probs_by_space-2398"><a href="#GA.mutation_probs_by_space-2398"><span class="linenos">2398</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.mutation_probs_by_space-2399"><a href="#GA.mutation_probs_by_space-2399"><span class="linenos">2399</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.mutation_probs_by_space-2400"><a href="#GA.mutation_probs_by_space-2400"><span class="linenos">2400</span></a><span class="sd">        It returns an array of the mutated offspring using the mutation space.</span>
</span><span id="GA.mutation_probs_by_space-2401"><a href="#GA.mutation_probs_by_space-2401"><span class="linenos">2401</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.mutation_probs_by_space-2402"><a href="#GA.mutation_probs_by_space-2402"><span class="linenos">2402</span></a>
</span><span id="GA.mutation_probs_by_space-2403"><a href="#GA.mutation_probs_by_space-2403"><span class="linenos">2403</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected mutated gene.</span>
</span><span id="GA.mutation_probs_by_space-2404"><a href="#GA.mutation_probs_by_space-2404"><span class="linenos">2404</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.mutation_probs_by_space-2405"><a href="#GA.mutation_probs_by_space-2405"><span class="linenos">2405</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_by_space-2406"><a href="#GA.mutation_probs_by_space-2406"><span class="linenos">2406</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.mutation_probs_by_space-2407"><a href="#GA.mutation_probs_by_space-2407"><span class="linenos">2407</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2408"><a href="#GA.mutation_probs_by_space-2408"><span class="linenos">2408</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2409"><a href="#GA.mutation_probs_by_space-2409"><span class="linenos">2409</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_probs_by_space-2410"><a href="#GA.mutation_probs_by_space-2410"><span class="linenos">2410</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA.mutation_probs_by_space-2411"><a href="#GA.mutation_probs_by_space-2411"><span class="linenos">2411</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.mutation_probs_by_space-2412"><a href="#GA.mutation_probs_by_space-2412"><span class="linenos">2412</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2413"><a href="#GA.mutation_probs_by_space-2413"><span class="linenos">2413</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_probs_by_space-2414"><a href="#GA.mutation_probs_by_space-2414"><span class="linenos">2414</span></a>
</span><span id="GA.mutation_probs_by_space-2415"><a href="#GA.mutation_probs_by_space-2415"><span class="linenos">2415</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA.mutation_probs_by_space-2416"><a href="#GA.mutation_probs_by_space-2416"><span class="linenos">2416</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2417"><a href="#GA.mutation_probs_by_space-2417"><span class="linenos">2417</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA.mutation_probs_by_space-2418"><a href="#GA.mutation_probs_by_space-2418"><span class="linenos">2418</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.mutation_probs_by_space-2419"><a href="#GA.mutation_probs_by_space-2419"><span class="linenos">2419</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2420"><a href="#GA.mutation_probs_by_space-2420"><span class="linenos">2420</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_by_space-2421"><a href="#GA.mutation_probs_by_space-2421"><span class="linenos">2421</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_by_space-2422"><a href="#GA.mutation_probs_by_space-2422"><span class="linenos">2422</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2423"><a href="#GA.mutation_probs_by_space-2423"><span class="linenos">2423</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2424"><a href="#GA.mutation_probs_by_space-2424"><span class="linenos">2424</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA.mutation_probs_by_space-2425"><a href="#GA.mutation_probs_by_space-2425"><span class="linenos">2425</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2426"><a href="#GA.mutation_probs_by_space-2426"><span class="linenos">2426</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA.mutation_probs_by_space-2427"><a href="#GA.mutation_probs_by_space-2427"><span class="linenos">2427</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2428"><a href="#GA.mutation_probs_by_space-2428"><span class="linenos">2428</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_probs_by_space-2429"><a href="#GA.mutation_probs_by_space-2429"><span class="linenos">2429</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.mutation_probs_by_space-2430"><a href="#GA.mutation_probs_by_space-2430"><span class="linenos">2430</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2431"><a href="#GA.mutation_probs_by_space-2431"><span class="linenos">2431</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2432"><a href="#GA.mutation_probs_by_space-2432"><span class="linenos">2432</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.mutation_probs_by_space-2433"><a href="#GA.mutation_probs_by_space-2433"><span class="linenos">2433</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2434"><a href="#GA.mutation_probs_by_space-2434"><span class="linenos">2434</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2435"><a href="#GA.mutation_probs_by_space-2435"><span class="linenos">2435</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2436"><a href="#GA.mutation_probs_by_space-2436"><span class="linenos">2436</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2437"><a href="#GA.mutation_probs_by_space-2437"><span class="linenos">2437</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2438"><a href="#GA.mutation_probs_by_space-2438"><span class="linenos">2438</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2439"><a href="#GA.mutation_probs_by_space-2439"><span class="linenos">2439</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_probs_by_space-2440"><a href="#GA.mutation_probs_by_space-2440"><span class="linenos">2440</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA.mutation_probs_by_space-2441"><a href="#GA.mutation_probs_by_space-2441"><span class="linenos">2441</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2442"><a href="#GA.mutation_probs_by_space-2442"><span class="linenos">2442</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_probs_by_space-2443"><a href="#GA.mutation_probs_by_space-2443"><span class="linenos">2443</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA.mutation_probs_by_space-2444"><a href="#GA.mutation_probs_by_space-2444"><span class="linenos">2444</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2445"><a href="#GA.mutation_probs_by_space-2445"><span class="linenos">2445</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.mutation_probs_by_space-2446"><a href="#GA.mutation_probs_by_space-2446"><span class="linenos">2446</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.mutation_probs_by_space-2447"><a href="#GA.mutation_probs_by_space-2447"><span class="linenos">2447</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2448"><a href="#GA.mutation_probs_by_space-2448"><span class="linenos">2448</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_probs_by_space-2449"><a href="#GA.mutation_probs_by_space-2449"><span class="linenos">2449</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2450"><a href="#GA.mutation_probs_by_space-2450"><span class="linenos">2450</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2451"><a href="#GA.mutation_probs_by_space-2451"><span class="linenos">2451</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2452"><a href="#GA.mutation_probs_by_space-2452"><span class="linenos">2452</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.mutation_probs_by_space-2453"><a href="#GA.mutation_probs_by_space-2453"><span class="linenos">2453</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2454"><a href="#GA.mutation_probs_by_space-2454"><span class="linenos">2454</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.mutation_probs_by_space-2455"><a href="#GA.mutation_probs_by_space-2455"><span class="linenos">2455</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2456"><a href="#GA.mutation_probs_by_space-2456"><span class="linenos">2456</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2457"><a href="#GA.mutation_probs_by_space-2457"><span class="linenos">2457</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.mutation_probs_by_space-2458"><a href="#GA.mutation_probs_by_space-2458"><span class="linenos">2458</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2459"><a href="#GA.mutation_probs_by_space-2459"><span class="linenos">2459</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2460"><a href="#GA.mutation_probs_by_space-2460"><span class="linenos">2460</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2461"><a href="#GA.mutation_probs_by_space-2461"><span class="linenos">2461</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2462"><a href="#GA.mutation_probs_by_space-2462"><span class="linenos">2462</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2463"><a href="#GA.mutation_probs_by_space-2463"><span class="linenos">2463</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2464"><a href="#GA.mutation_probs_by_space-2464"><span class="linenos">2464</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.mutation_probs_by_space-2465"><a href="#GA.mutation_probs_by_space-2465"><span class="linenos">2465</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.mutation_probs_by_space-2466"><a href="#GA.mutation_probs_by_space-2466"><span class="linenos">2466</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2467"><a href="#GA.mutation_probs_by_space-2467"><span class="linenos">2467</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.mutation_probs_by_space-2468"><a href="#GA.mutation_probs_by_space-2468"><span class="linenos">2468</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2469"><a href="#GA.mutation_probs_by_space-2469"><span class="linenos">2469</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2470"><a href="#GA.mutation_probs_by_space-2470"><span class="linenos">2470</span></a>
</span><span id="GA.mutation_probs_by_space-2471"><a href="#GA.mutation_probs_by_space-2471"><span class="linenos">2471</span></a>                    <span class="c1"># Assigning the selected value from the space to the gene.</span>
</span><span id="GA.mutation_probs_by_space-2472"><a href="#GA.mutation_probs_by_space-2472"><span class="linenos">2472</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2473"><a href="#GA.mutation_probs_by_space-2473"><span class="linenos">2473</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2474"><a href="#GA.mutation_probs_by_space-2474"><span class="linenos">2474</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.mutation_probs_by_space-2475"><a href="#GA.mutation_probs_by_space-2475"><span class="linenos">2475</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_by_space-2476"><a href="#GA.mutation_probs_by_space-2476"><span class="linenos">2476</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2477"><a href="#GA.mutation_probs_by_space-2477"><span class="linenos">2477</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2478"><a href="#GA.mutation_probs_by_space-2478"><span class="linenos">2478</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2479"><a href="#GA.mutation_probs_by_space-2479"><span class="linenos">2479</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2480"><a href="#GA.mutation_probs_by_space-2480"><span class="linenos">2480</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA.mutation_probs_by_space-2481"><a href="#GA.mutation_probs_by_space-2481"><span class="linenos">2481</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.mutation_probs_by_space-2482"><a href="#GA.mutation_probs_by_space-2482"><span class="linenos">2482</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_by_space-2483"><a href="#GA.mutation_probs_by_space-2483"><span class="linenos">2483</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2484"><a href="#GA.mutation_probs_by_space-2484"><span class="linenos">2484</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2485"><a href="#GA.mutation_probs_by_space-2485"><span class="linenos">2485</span></a>
</span><span id="GA.mutation_probs_by_space-2486"><a href="#GA.mutation_probs_by_space-2486"><span class="linenos">2486</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.mutation_probs_by_space-2487"><a href="#GA.mutation_probs_by_space-2487"><span class="linenos">2487</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA.mutation_probs_by_space-2488"><a href="#GA.mutation_probs_by_space-2488"><span class="linenos">2488</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.mutation_probs_by_space-2489"><a href="#GA.mutation_probs_by_space-2489"><span class="linenos">2489</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.mutation_probs_by_space-2490"><a href="#GA.mutation_probs_by_space-2490"><span class="linenos">2490</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.mutation_probs_by_space-2491"><a href="#GA.mutation_probs_by_space-2491"><span class="linenos">2491</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the random mutation using the mutation values' space and the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated based on the mutation space.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring using the mutation space.</p>
</div>


                            </div>
                            <div id="GA.mutation_randomly" class="classattr">
                                        <input id="GA.mutation_randomly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mutation_randomly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.mutation_randomly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.mutation_randomly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.mutation_randomly-2493"><a href="#GA.mutation_randomly-2493"><span class="linenos">2493</span></a>    <span class="k">def</span> <span class="nf">mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.mutation_randomly-2494"><a href="#GA.mutation_randomly-2494"><span class="linenos">2494</span></a>
</span><span id="GA.mutation_randomly-2495"><a href="#GA.mutation_randomly-2495"><span class="linenos">2495</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.mutation_randomly-2496"><a href="#GA.mutation_randomly-2496"><span class="linenos">2496</span></a><span class="sd">        Applies the random mutation the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="GA.mutation_randomly-2497"><a href="#GA.mutation_randomly-2497"><span class="linenos">2497</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.mutation_randomly-2498"><a href="#GA.mutation_randomly-2498"><span class="linenos">2498</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.mutation_randomly-2499"><a href="#GA.mutation_randomly-2499"><span class="linenos">2499</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.mutation_randomly-2500"><a href="#GA.mutation_randomly-2500"><span class="linenos">2500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.mutation_randomly-2501"><a href="#GA.mutation_randomly-2501"><span class="linenos">2501</span></a>
</span><span id="GA.mutation_randomly-2502"><a href="#GA.mutation_randomly-2502"><span class="linenos">2502</span></a>        <span class="c1"># Random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA.mutation_randomly-2503"><a href="#GA.mutation_randomly-2503"><span class="linenos">2503</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.mutation_randomly-2504"><a href="#GA.mutation_randomly-2504"><span class="linenos">2504</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.mutation_randomly-2505"><a href="#GA.mutation_randomly-2505"><span class="linenos">2505</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2506"><a href="#GA.mutation_randomly-2506"><span class="linenos">2506</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="GA.mutation_randomly-2507"><a href="#GA.mutation_randomly-2507"><span class="linenos">2507</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2508"><a href="#GA.mutation_randomly-2508"><span class="linenos">2508</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2509"><a href="#GA.mutation_randomly-2509"><span class="linenos">2509</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2510"><a href="#GA.mutation_randomly-2510"><span class="linenos">2510</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA.mutation_randomly-2511"><a href="#GA.mutation_randomly-2511"><span class="linenos">2511</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2512"><a href="#GA.mutation_randomly-2512"><span class="linenos">2512</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2513"><a href="#GA.mutation_randomly-2513"><span class="linenos">2513</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2514"><a href="#GA.mutation_randomly-2514"><span class="linenos">2514</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2515"><a href="#GA.mutation_randomly-2515"><span class="linenos">2515</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2516"><a href="#GA.mutation_randomly-2516"><span class="linenos">2516</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2517"><a href="#GA.mutation_randomly-2517"><span class="linenos">2517</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_randomly-2518"><a href="#GA.mutation_randomly-2518"><span class="linenos">2518</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA.mutation_randomly-2519"><a href="#GA.mutation_randomly-2519"><span class="linenos">2519</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2520"><a href="#GA.mutation_randomly-2520"><span class="linenos">2520</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2521"><a href="#GA.mutation_randomly-2521"><span class="linenos">2521</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2522"><a href="#GA.mutation_randomly-2522"><span class="linenos">2522</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2523"><a href="#GA.mutation_randomly-2523"><span class="linenos">2523</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2524"><a href="#GA.mutation_randomly-2524"><span class="linenos">2524</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2525"><a href="#GA.mutation_randomly-2525"><span class="linenos">2525</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_randomly-2526"><a href="#GA.mutation_randomly-2526"><span class="linenos">2526</span></a>
</span><span id="GA.mutation_randomly-2527"><a href="#GA.mutation_randomly-2527"><span class="linenos">2527</span></a>                <span class="c1"># Round the gene</span>
</span><span id="GA.mutation_randomly-2528"><a href="#GA.mutation_randomly-2528"><span class="linenos">2528</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2529"><a href="#GA.mutation_randomly-2529"><span class="linenos">2529</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2530"><a href="#GA.mutation_randomly-2530"><span class="linenos">2530</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_randomly-2531"><a href="#GA.mutation_randomly-2531"><span class="linenos">2531</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2532"><a href="#GA.mutation_randomly-2532"><span class="linenos">2532</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2533"><a href="#GA.mutation_randomly-2533"><span class="linenos">2533</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_randomly-2534"><a href="#GA.mutation_randomly-2534"><span class="linenos">2534</span></a>
</span><span id="GA.mutation_randomly-2535"><a href="#GA.mutation_randomly-2535"><span class="linenos">2535</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA.mutation_randomly-2536"><a href="#GA.mutation_randomly-2536"><span class="linenos">2536</span></a>
</span><span id="GA.mutation_randomly-2537"><a href="#GA.mutation_randomly-2537"><span class="linenos">2537</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.mutation_randomly-2538"><a href="#GA.mutation_randomly-2538"><span class="linenos">2538</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA.mutation_randomly-2539"><a href="#GA.mutation_randomly-2539"><span class="linenos">2539</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.mutation_randomly-2540"><a href="#GA.mutation_randomly-2540"><span class="linenos">2540</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2541"><a href="#GA.mutation_randomly-2541"><span class="linenos">2541</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2542"><a href="#GA.mutation_randomly-2542"><span class="linenos">2542</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2543"><a href="#GA.mutation_randomly-2543"><span class="linenos">2543</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.mutation_randomly-2544"><a href="#GA.mutation_randomly-2544"><span class="linenos">2544</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.mutation_randomly-2545"><a href="#GA.mutation_randomly-2545"><span class="linenos">2545</span></a>
</span><span id="GA.mutation_randomly-2546"><a href="#GA.mutation_randomly-2546"><span class="linenos">2546</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the random mutation the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.mutation_probs_randomly" class="classattr">
                                        <input id="GA.mutation_probs_randomly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mutation_probs_randomly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.mutation_probs_randomly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.mutation_probs_randomly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.mutation_probs_randomly-2548"><a href="#GA.mutation_probs_randomly-2548"><span class="linenos">2548</span></a>    <span class="k">def</span> <span class="nf">mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.mutation_probs_randomly-2549"><a href="#GA.mutation_probs_randomly-2549"><span class="linenos">2549</span></a>
</span><span id="GA.mutation_probs_randomly-2550"><a href="#GA.mutation_probs_randomly-2550"><span class="linenos">2550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.mutation_probs_randomly-2551"><a href="#GA.mutation_probs_randomly-2551"><span class="linenos">2551</span></a><span class="sd">        Applies the random mutation using the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.</span>
</span><span id="GA.mutation_probs_randomly-2552"><a href="#GA.mutation_probs_randomly-2552"><span class="linenos">2552</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.mutation_probs_randomly-2553"><a href="#GA.mutation_probs_randomly-2553"><span class="linenos">2553</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.mutation_probs_randomly-2554"><a href="#GA.mutation_probs_randomly-2554"><span class="linenos">2554</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.mutation_probs_randomly-2555"><a href="#GA.mutation_probs_randomly-2555"><span class="linenos">2555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.mutation_probs_randomly-2556"><a href="#GA.mutation_probs_randomly-2556"><span class="linenos">2556</span></a>
</span><span id="GA.mutation_probs_randomly-2557"><a href="#GA.mutation_probs_randomly-2557"><span class="linenos">2557</span></a>        <span class="c1"># Random mutation changes one or more gene in each offspring randomly.</span>
</span><span id="GA.mutation_probs_randomly-2558"><a href="#GA.mutation_probs_randomly-2558"><span class="linenos">2558</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.mutation_probs_randomly-2559"><a href="#GA.mutation_probs_randomly-2559"><span class="linenos">2559</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_randomly-2560"><a href="#GA.mutation_probs_randomly-2560"><span class="linenos">2560</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.mutation_probs_randomly-2561"><a href="#GA.mutation_probs_randomly-2561"><span class="linenos">2561</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2562"><a href="#GA.mutation_probs_randomly-2562"><span class="linenos">2562</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="GA.mutation_probs_randomly-2563"><a href="#GA.mutation_probs_randomly-2563"><span class="linenos">2563</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2564"><a href="#GA.mutation_probs_randomly-2564"><span class="linenos">2564</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2565"><a href="#GA.mutation_probs_randomly-2565"><span class="linenos">2565</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2566"><a href="#GA.mutation_probs_randomly-2566"><span class="linenos">2566</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA.mutation_probs_randomly-2567"><a href="#GA.mutation_probs_randomly-2567"><span class="linenos">2567</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2568"><a href="#GA.mutation_probs_randomly-2568"><span class="linenos">2568</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2569"><a href="#GA.mutation_probs_randomly-2569"><span class="linenos">2569</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2570"><a href="#GA.mutation_probs_randomly-2570"><span class="linenos">2570</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2571"><a href="#GA.mutation_probs_randomly-2571"><span class="linenos">2571</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2572"><a href="#GA.mutation_probs_randomly-2572"><span class="linenos">2572</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2573"><a href="#GA.mutation_probs_randomly-2573"><span class="linenos">2573</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_probs_randomly-2574"><a href="#GA.mutation_probs_randomly-2574"><span class="linenos">2574</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA.mutation_probs_randomly-2575"><a href="#GA.mutation_probs_randomly-2575"><span class="linenos">2575</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2576"><a href="#GA.mutation_probs_randomly-2576"><span class="linenos">2576</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2577"><a href="#GA.mutation_probs_randomly-2577"><span class="linenos">2577</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2578"><a href="#GA.mutation_probs_randomly-2578"><span class="linenos">2578</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2579"><a href="#GA.mutation_probs_randomly-2579"><span class="linenos">2579</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA.mutation_probs_randomly-2580"><a href="#GA.mutation_probs_randomly-2580"><span class="linenos">2580</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2581"><a href="#GA.mutation_probs_randomly-2581"><span class="linenos">2581</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2582"><a href="#GA.mutation_probs_randomly-2582"><span class="linenos">2582</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.mutation_probs_randomly-2583"><a href="#GA.mutation_probs_randomly-2583"><span class="linenos">2583</span></a>
</span><span id="GA.mutation_probs_randomly-2584"><a href="#GA.mutation_probs_randomly-2584"><span class="linenos">2584</span></a>                    <span class="c1"># Round the gene</span>
</span><span id="GA.mutation_probs_randomly-2585"><a href="#GA.mutation_probs_randomly-2585"><span class="linenos">2585</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2586"><a href="#GA.mutation_probs_randomly-2586"><span class="linenos">2586</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2587"><a href="#GA.mutation_probs_randomly-2587"><span class="linenos">2587</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_randomly-2588"><a href="#GA.mutation_probs_randomly-2588"><span class="linenos">2588</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2589"><a href="#GA.mutation_probs_randomly-2589"><span class="linenos">2589</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2590"><a href="#GA.mutation_probs_randomly-2590"><span class="linenos">2590</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.mutation_probs_randomly-2591"><a href="#GA.mutation_probs_randomly-2591"><span class="linenos">2591</span></a>
</span><span id="GA.mutation_probs_randomly-2592"><a href="#GA.mutation_probs_randomly-2592"><span class="linenos">2592</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA.mutation_probs_randomly-2593"><a href="#GA.mutation_probs_randomly-2593"><span class="linenos">2593</span></a>
</span><span id="GA.mutation_probs_randomly-2594"><a href="#GA.mutation_probs_randomly-2594"><span class="linenos">2594</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.mutation_probs_randomly-2595"><a href="#GA.mutation_probs_randomly-2595"><span class="linenos">2595</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA.mutation_probs_randomly-2596"><a href="#GA.mutation_probs_randomly-2596"><span class="linenos">2596</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.mutation_probs_randomly-2597"><a href="#GA.mutation_probs_randomly-2597"><span class="linenos">2597</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2598"><a href="#GA.mutation_probs_randomly-2598"><span class="linenos">2598</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2599"><a href="#GA.mutation_probs_randomly-2599"><span class="linenos">2599</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2600"><a href="#GA.mutation_probs_randomly-2600"><span class="linenos">2600</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.mutation_probs_randomly-2601"><a href="#GA.mutation_probs_randomly-2601"><span class="linenos">2601</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.mutation_probs_randomly-2602"><a href="#GA.mutation_probs_randomly-2602"><span class="linenos">2602</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the random mutation using the mutation probability. For each gene, if its probability is &lt;= that mutation probability, then it will be mutated randomly.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.swap_mutation" class="classattr">
                                        <input id="GA.swap_mutation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">swap_mutation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.swap_mutation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.swap_mutation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.swap_mutation-2604"><a href="#GA.swap_mutation-2604"><span class="linenos">2604</span></a>    <span class="k">def</span> <span class="nf">swap_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.swap_mutation-2605"><a href="#GA.swap_mutation-2605"><span class="linenos">2605</span></a>
</span><span id="GA.swap_mutation-2606"><a href="#GA.swap_mutation-2606"><span class="linenos">2606</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.swap_mutation-2607"><a href="#GA.swap_mutation-2607"><span class="linenos">2607</span></a><span class="sd">        Applies the swap mutation which interchanges the values of 2 randomly selected genes.</span>
</span><span id="GA.swap_mutation-2608"><a href="#GA.swap_mutation-2608"><span class="linenos">2608</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.swap_mutation-2609"><a href="#GA.swap_mutation-2609"><span class="linenos">2609</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.swap_mutation-2610"><a href="#GA.swap_mutation-2610"><span class="linenos">2610</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.swap_mutation-2611"><a href="#GA.swap_mutation-2611"><span class="linenos">2611</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.swap_mutation-2612"><a href="#GA.swap_mutation-2612"><span class="linenos">2612</span></a>
</span><span id="GA.swap_mutation-2613"><a href="#GA.swap_mutation-2613"><span class="linenos">2613</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.swap_mutation-2614"><a href="#GA.swap_mutation-2614"><span class="linenos">2614</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.swap_mutation-2615"><a href="#GA.swap_mutation-2615"><span class="linenos">2615</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.swap_mutation-2616"><a href="#GA.swap_mutation-2616"><span class="linenos">2616</span></a>
</span><span id="GA.swap_mutation-2617"><a href="#GA.swap_mutation-2617"><span class="linenos">2617</span></a>            <span class="n">temp</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span>
</span><span id="GA.swap_mutation-2618"><a href="#GA.swap_mutation-2618"><span class="linenos">2618</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">]</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span>
</span><span id="GA.swap_mutation-2619"><a href="#GA.swap_mutation-2619"><span class="linenos">2619</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</span><span id="GA.swap_mutation-2620"><a href="#GA.swap_mutation-2620"><span class="linenos">2620</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the swap mutation which interchanges the values of 2 randomly selected genes.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.inversion_mutation" class="classattr">
                                        <input id="GA.inversion_mutation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inversion_mutation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.inversion_mutation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.inversion_mutation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.inversion_mutation-2622"><a href="#GA.inversion_mutation-2622"><span class="linenos">2622</span></a>    <span class="k">def</span> <span class="nf">inversion_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.inversion_mutation-2623"><a href="#GA.inversion_mutation-2623"><span class="linenos">2623</span></a>
</span><span id="GA.inversion_mutation-2624"><a href="#GA.inversion_mutation-2624"><span class="linenos">2624</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.inversion_mutation-2625"><a href="#GA.inversion_mutation-2625"><span class="linenos">2625</span></a><span class="sd">        Applies the inversion mutation which selects a subset of genes and inverts them (in order).</span>
</span><span id="GA.inversion_mutation-2626"><a href="#GA.inversion_mutation-2626"><span class="linenos">2626</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.inversion_mutation-2627"><a href="#GA.inversion_mutation-2627"><span class="linenos">2627</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.inversion_mutation-2628"><a href="#GA.inversion_mutation-2628"><span class="linenos">2628</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.inversion_mutation-2629"><a href="#GA.inversion_mutation-2629"><span class="linenos">2629</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.inversion_mutation-2630"><a href="#GA.inversion_mutation-2630"><span class="linenos">2630</span></a>
</span><span id="GA.inversion_mutation-2631"><a href="#GA.inversion_mutation-2631"><span class="linenos">2631</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.inversion_mutation-2632"><a href="#GA.inversion_mutation-2632"><span class="linenos">2632</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.inversion_mutation-2633"><a href="#GA.inversion_mutation-2633"><span class="linenos">2633</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.inversion_mutation-2634"><a href="#GA.inversion_mutation-2634"><span class="linenos">2634</span></a>
</span><span id="GA.inversion_mutation-2635"><a href="#GA.inversion_mutation-2635"><span class="linenos">2635</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">])</span>
</span><span id="GA.inversion_mutation-2636"><a href="#GA.inversion_mutation-2636"><span class="linenos">2636</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">mutation_gene1</span><span class="p">:</span><span class="n">mutation_gene2</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="GA.inversion_mutation-2637"><a href="#GA.inversion_mutation-2637"><span class="linenos">2637</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the inversion mutation which selects a subset of genes and inverts them (in order).
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.scramble_mutation" class="classattr">
                                        <input id="GA.scramble_mutation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">scramble_mutation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.scramble_mutation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.scramble_mutation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.scramble_mutation-2639"><a href="#GA.scramble_mutation-2639"><span class="linenos">2639</span></a>    <span class="k">def</span> <span class="nf">scramble_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.scramble_mutation-2640"><a href="#GA.scramble_mutation-2640"><span class="linenos">2640</span></a>
</span><span id="GA.scramble_mutation-2641"><a href="#GA.scramble_mutation-2641"><span class="linenos">2641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.scramble_mutation-2642"><a href="#GA.scramble_mutation-2642"><span class="linenos">2642</span></a><span class="sd">        Applies the scramble mutation which selects a subset of genes and shuffles their order randomly.</span>
</span><span id="GA.scramble_mutation-2643"><a href="#GA.scramble_mutation-2643"><span class="linenos">2643</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.scramble_mutation-2644"><a href="#GA.scramble_mutation-2644"><span class="linenos">2644</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.scramble_mutation-2645"><a href="#GA.scramble_mutation-2645"><span class="linenos">2645</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.scramble_mutation-2646"><a href="#GA.scramble_mutation-2646"><span class="linenos">2646</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.scramble_mutation-2647"><a href="#GA.scramble_mutation-2647"><span class="linenos">2647</span></a>
</span><span id="GA.scramble_mutation-2648"><a href="#GA.scramble_mutation-2648"><span class="linenos">2648</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.scramble_mutation-2649"><a href="#GA.scramble_mutation-2649"><span class="linenos">2649</span></a>            <span class="n">mutation_gene1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.scramble_mutation-2650"><a href="#GA.scramble_mutation-2650"><span class="linenos">2650</span></a>            <span class="n">mutation_gene2</span> <span class="o">=</span> <span class="n">mutation_gene1</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="GA.scramble_mutation-2651"><a href="#GA.scramble_mutation-2651"><span class="linenos">2651</span></a>            <span class="n">genes_range</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">mutation_gene1</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">mutation_gene2</span><span class="p">)</span>
</span><span id="GA.scramble_mutation-2652"><a href="#GA.scramble_mutation-2652"><span class="linenos">2652</span></a>            <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">genes_range</span><span class="p">)</span>
</span><span id="GA.scramble_mutation-2653"><a href="#GA.scramble_mutation-2653"><span class="linenos">2653</span></a>
</span><span id="GA.scramble_mutation-2654"><a href="#GA.scramble_mutation-2654"><span class="linenos">2654</span></a>            <span class="n">genes_to_scramble</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">])</span>
</span><span id="GA.scramble_mutation-2655"><a href="#GA.scramble_mutation-2655"><span class="linenos">2655</span></a>            <span class="n">offspring</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">genes_range</span><span class="p">]</span> <span class="o">=</span> <span class="n">genes_to_scramble</span>
</span><span id="GA.scramble_mutation-2656"><a href="#GA.scramble_mutation-2656"><span class="linenos">2656</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the scramble mutation which selects a subset of genes and shuffles their order randomly.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation_population_fitness" class="classattr">
                                        <input id="GA.adaptive_mutation_population_fitness-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation_population_fitness</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation_population_fitness-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation_population_fitness"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation_population_fitness-2658"><a href="#GA.adaptive_mutation_population_fitness-2658"><span class="linenos">2658</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2659"><a href="#GA.adaptive_mutation_population_fitness-2659"><span class="linenos">2659</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2660"><a href="#GA.adaptive_mutation_population_fitness-2660"><span class="linenos">2660</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_population_fitness-2661"><a href="#GA.adaptive_mutation_population_fitness-2661"><span class="linenos">2661</span></a><span class="sd">        A helper method to calculate the average fitness of the solutions before applying the adaptive mutation.</span>
</span><span id="GA.adaptive_mutation_population_fitness-2662"><a href="#GA.adaptive_mutation_population_fitness-2662"><span class="linenos">2662</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation_population_fitness-2663"><a href="#GA.adaptive_mutation_population_fitness-2663"><span class="linenos">2663</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation_population_fitness-2664"><a href="#GA.adaptive_mutation_population_fitness-2664"><span class="linenos">2664</span></a><span class="sd">        It returns the average fitness to be used in adaptive mutation.</span>
</span><span id="GA.adaptive_mutation_population_fitness-2665"><a href="#GA.adaptive_mutation_population_fitness-2665"><span class="linenos">2665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_population_fitness-2666"><a href="#GA.adaptive_mutation_population_fitness-2666"><span class="linenos">2666</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2667"><a href="#GA.adaptive_mutation_population_fitness-2667"><span class="linenos">2667</span></a>        <span class="n">fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.adaptive_mutation_population_fitness-2668"><a href="#GA.adaptive_mutation_population_fitness-2668"><span class="linenos">2668</span></a>        <span class="n">temp_population</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_population_fitness-2669"><a href="#GA.adaptive_mutation_population_fitness-2669"><span class="linenos">2669</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2670"><a href="#GA.adaptive_mutation_population_fitness-2670"><span class="linenos">2670</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2671"><a href="#GA.adaptive_mutation_population_fitness-2671"><span class="linenos">2671</span></a>            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2672"><a href="#GA.adaptive_mutation_population_fitness-2672"><span class="linenos">2672</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.adaptive_mutation_population_fitness-2673"><a href="#GA.adaptive_mutation_population_fitness-2673"><span class="linenos">2673</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2674"><a href="#GA.adaptive_mutation_population_fitness-2674"><span class="linenos">2674</span></a>                <span class="n">parents_to_keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.adaptive_mutation_population_fitness-2675"><a href="#GA.adaptive_mutation_population_fitness-2675"><span class="linenos">2675</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA.adaptive_mutation_population_fitness-2676"><a href="#GA.adaptive_mutation_population_fitness-2676"><span class="linenos">2676</span></a>            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2677"><a href="#GA.adaptive_mutation_population_fitness-2677"><span class="linenos">2677</span></a>                <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_population_fitness-2678"><a href="#GA.adaptive_mutation_population_fitness-2678"><span class="linenos">2678</span></a>                                                                 <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_parents</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_population_fitness-2679"><a href="#GA.adaptive_mutation_population_fitness-2679"><span class="linenos">2679</span></a>                <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA.adaptive_mutation_population_fitness-2680"><a href="#GA.adaptive_mutation_population_fitness-2680"><span class="linenos">2680</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_population_fitness-2681"><a href="#GA.adaptive_mutation_population_fitness-2681"><span class="linenos">2681</span></a>            <span class="n">parents_to_keep</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">steady_state_selection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_population_fitness-2682"><a href="#GA.adaptive_mutation_population_fitness-2682"><span class="linenos">2682</span></a>                                                             <span class="n">num_parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">keep_elitism</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_population_fitness-2683"><a href="#GA.adaptive_mutation_population_fitness-2683"><span class="linenos">2683</span></a>            <span class="n">temp_population</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">parents_to_keep</span>
</span><span id="GA.adaptive_mutation_population_fitness-2684"><a href="#GA.adaptive_mutation_population_fitness-2684"><span class="linenos">2684</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2685"><a href="#GA.adaptive_mutation_population_fitness-2685"><span class="linenos">2685</span></a>        <span class="n">temp_population</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">offspring</span>
</span><span id="GA.adaptive_mutation_population_fitness-2686"><a href="#GA.adaptive_mutation_population_fitness-2686"><span class="linenos">2686</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2687"><a href="#GA.adaptive_mutation_population_fitness-2687"><span class="linenos">2687</span></a>        <span class="n">fitness</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_fitness</span><span class="p">[</span>
</span><span id="GA.adaptive_mutation_population_fitness-2688"><a href="#GA.adaptive_mutation_population_fitness-2688"><span class="linenos">2688</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">last_generation_parents_indices</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_population_fitness-2689"><a href="#GA.adaptive_mutation_population_fitness-2689"><span class="linenos">2689</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2690"><a href="#GA.adaptive_mutation_population_fitness-2690"><span class="linenos">2690</span></a>        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">),</span> <span class="n">fitness</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_population_fitness-2691"><a href="#GA.adaptive_mutation_population_fitness-2691"><span class="linenos">2691</span></a>            <span class="c1"># fitness[idx] = self.fitness_func(temp_population[idx], None)</span>
</span><span id="GA.adaptive_mutation_population_fitness-2692"><a href="#GA.adaptive_mutation_population_fitness-2692"><span class="linenos">2692</span></a>            <span class="n">fitness</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fitness_func</span><span class="p">(</span><span class="n">temp_population</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>  <span class="c1"># FERMATRICA FIX</span>
</span><span id="GA.adaptive_mutation_population_fitness-2693"><a href="#GA.adaptive_mutation_population_fitness-2693"><span class="linenos">2693</span></a>        <span class="n">average_fitness</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fitness</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_population_fitness-2694"><a href="#GA.adaptive_mutation_population_fitness-2694"><span class="linenos">2694</span></a>
</span><span id="GA.adaptive_mutation_population_fitness-2695"><a href="#GA.adaptive_mutation_population_fitness-2695"><span class="linenos">2695</span></a>        <span class="k">return</span> <span class="n">average_fitness</span><span class="p">,</span> <span class="n">fitness</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">parents_to_keep</span><span class="p">):]</span>
</span></pre></div>


            <div class="docstring"><p>A helper method to calculate the average fitness of the solutions before applying the adaptive mutation.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns the average fitness to be used in adaptive mutation.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation" class="classattr">
                                        <input id="GA.adaptive_mutation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation-2697"><a href="#GA.adaptive_mutation-2697"><span class="linenos">2697</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation-2698"><a href="#GA.adaptive_mutation-2698"><span class="linenos">2698</span></a>
</span><span id="GA.adaptive_mutation-2699"><a href="#GA.adaptive_mutation-2699"><span class="linenos">2699</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation-2700"><a href="#GA.adaptive_mutation-2700"><span class="linenos">2700</span></a><span class="sd">        Applies the adaptive mutation which changes the values of a number of genes randomly. In adaptive mutation, the number of genes to mutate differs based on the fitness value of the solution.</span>
</span><span id="GA.adaptive_mutation-2701"><a href="#GA.adaptive_mutation-2701"><span class="linenos">2701</span></a><span class="sd">        The random value is selected either using the &#39;gene_space&#39; parameter or the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation-2702"><a href="#GA.adaptive_mutation-2702"><span class="linenos">2702</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation-2703"><a href="#GA.adaptive_mutation-2703"><span class="linenos">2703</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation-2704"><a href="#GA.adaptive_mutation-2704"><span class="linenos">2704</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.adaptive_mutation-2705"><a href="#GA.adaptive_mutation-2705"><span class="linenos">2705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation-2706"><a href="#GA.adaptive_mutation-2706"><span class="linenos">2706</span></a>
</span><span id="GA.adaptive_mutation-2707"><a href="#GA.adaptive_mutation-2707"><span class="linenos">2707</span></a>        <span class="c1"># If the attribute &#39;gene_space&#39; exists (i.e. not None), then the mutation values are selected from the &#39;gene_space&#39; parameter according to the space of values of each gene. Otherwise, it is selected randomly based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation-2708"><a href="#GA.adaptive_mutation-2708"><span class="linenos">2708</span></a>        <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation. Otherwise, the &#39;mutation_num_genes&#39; parameter is used.</span>
</span><span id="GA.adaptive_mutation-2709"><a href="#GA.adaptive_mutation-2709"><span class="linenos">2709</span></a>
</span><span id="GA.adaptive_mutation-2710"><a href="#GA.adaptive_mutation-2710"><span class="linenos">2710</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation-2711"><a href="#GA.adaptive_mutation-2711"><span class="linenos">2711</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter does not exist (i.e. None), then the parameter &#39;mutation_num_genes&#39; is used in the mutation.</span>
</span><span id="GA.adaptive_mutation-2712"><a href="#GA.adaptive_mutation-2712"><span class="linenos">2712</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation-2713"><a href="#GA.adaptive_mutation-2713"><span class="linenos">2713</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA.adaptive_mutation-2714"><a href="#GA.adaptive_mutation-2714"><span class="linenos">2714</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation-2715"><a href="#GA.adaptive_mutation-2715"><span class="linenos">2715</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation-2716"><a href="#GA.adaptive_mutation-2716"><span class="linenos">2716</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation-2717"><a href="#GA.adaptive_mutation-2717"><span class="linenos">2717</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation-2718"><a href="#GA.adaptive_mutation-2718"><span class="linenos">2718</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation-2719"><a href="#GA.adaptive_mutation-2719"><span class="linenos">2719</span></a>            <span class="c1"># When the &#39;mutation_probability&#39; parameter exists (i.e. not None), then it is used in the mutation.</span>
</span><span id="GA.adaptive_mutation-2720"><a href="#GA.adaptive_mutation-2720"><span class="linenos">2720</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation-2721"><a href="#GA.adaptive_mutation-2721"><span class="linenos">2721</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; exists (i.e. not None), the mutation values are selected randomly from the space of values of each gene.</span>
</span><span id="GA.adaptive_mutation-2722"><a href="#GA.adaptive_mutation-2722"><span class="linenos">2722</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation-2723"><a href="#GA.adaptive_mutation-2723"><span class="linenos">2723</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation-2724"><a href="#GA.adaptive_mutation-2724"><span class="linenos">2724</span></a>                <span class="c1"># When the attribute &#39;gene_space&#39; does not exist (i.e. None), the mutation values are selected randomly based on the continuous range specified by the 2 attributes &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation-2725"><a href="#GA.adaptive_mutation-2725"><span class="linenos">2725</span></a>                <span class="n">offspring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation-2726"><a href="#GA.adaptive_mutation-2726"><span class="linenos">2726</span></a>
</span><span id="GA.adaptive_mutation-2727"><a href="#GA.adaptive_mutation-2727"><span class="linenos">2727</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the adaptive mutation which changes the values of a number of genes randomly. In adaptive mutation, the number of genes to mutate differs based on the fitness value of the solution.
The random value is selected either using the 'gene_space' parameter or the 2 parameters 'random_mutation_min_val' and 'random_mutation_max_val'.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation_by_space" class="classattr">
                                        <input id="GA.adaptive_mutation_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation_by_space-2729"><a href="#GA.adaptive_mutation_by_space-2729"><span class="linenos">2729</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_by_space-2730"><a href="#GA.adaptive_mutation_by_space-2730"><span class="linenos">2730</span></a>
</span><span id="GA.adaptive_mutation_by_space-2731"><a href="#GA.adaptive_mutation_by_space-2731"><span class="linenos">2731</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_by_space-2732"><a href="#GA.adaptive_mutation_by_space-2732"><span class="linenos">2732</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_num_genes&#39; and &#39;gene_space&#39;.</span>
</span><span id="GA.adaptive_mutation_by_space-2733"><a href="#GA.adaptive_mutation_by_space-2733"><span class="linenos">2733</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="GA.adaptive_mutation_by_space-2734"><a href="#GA.adaptive_mutation_by_space-2734"><span class="linenos">2734</span></a><span class="sd">        The random values are selected from the &#39;gene_space&#39; parameter.</span>
</span><span id="GA.adaptive_mutation_by_space-2735"><a href="#GA.adaptive_mutation_by_space-2735"><span class="linenos">2735</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation_by_space-2736"><a href="#GA.adaptive_mutation_by_space-2736"><span class="linenos">2736</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation_by_space-2737"><a href="#GA.adaptive_mutation_by_space-2737"><span class="linenos">2737</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.adaptive_mutation_by_space-2738"><a href="#GA.adaptive_mutation_by_space-2738"><span class="linenos">2738</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_by_space-2739"><a href="#GA.adaptive_mutation_by_space-2739"><span class="linenos">2739</span></a>
</span><span id="GA.adaptive_mutation_by_space-2740"><a href="#GA.adaptive_mutation_by_space-2740"><span class="linenos">2740</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="GA.adaptive_mutation_by_space-2741"><a href="#GA.adaptive_mutation_by_space-2741"><span class="linenos">2741</span></a>
</span><span id="GA.adaptive_mutation_by_space-2742"><a href="#GA.adaptive_mutation_by_space-2742"><span class="linenos">2742</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2743"><a href="#GA.adaptive_mutation_by_space-2743"><span class="linenos">2743</span></a>
</span><span id="GA.adaptive_mutation_by_space-2744"><a href="#GA.adaptive_mutation_by_space-2744"><span class="linenos">2744</span></a>        <span class="c1"># Adaptive mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA.adaptive_mutation_by_space-2745"><a href="#GA.adaptive_mutation_by_space-2745"><span class="linenos">2745</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="GA.adaptive_mutation_by_space-2746"><a href="#GA.adaptive_mutation_by_space-2746"><span class="linenos">2746</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_by_space-2747"><a href="#GA.adaptive_mutation_by_space-2747"><span class="linenos">2747</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2748"><a href="#GA.adaptive_mutation_by_space-2748"><span class="linenos">2748</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2749"><a href="#GA.adaptive_mutation_by_space-2749"><span class="linenos">2749</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2750"><a href="#GA.adaptive_mutation_by_space-2750"><span class="linenos">2750</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2751"><a href="#GA.adaptive_mutation_by_space-2751"><span class="linenos">2751</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.adaptive_mutation_by_space-2752"><a href="#GA.adaptive_mutation_by_space-2752"><span class="linenos">2752</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2753"><a href="#GA.adaptive_mutation_by_space-2753"><span class="linenos">2753</span></a>
</span><span id="GA.adaptive_mutation_by_space-2754"><a href="#GA.adaptive_mutation_by_space-2754"><span class="linenos">2754</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2755"><a href="#GA.adaptive_mutation_by_space-2755"><span class="linenos">2755</span></a>                    <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_by_space-2756"><a href="#GA.adaptive_mutation_by_space-2756"><span class="linenos">2756</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA.adaptive_mutation_by_space-2757"><a href="#GA.adaptive_mutation_by_space-2757"><span class="linenos">2757</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.adaptive_mutation_by_space-2758"><a href="#GA.adaptive_mutation_by_space-2758"><span class="linenos">2758</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2759"><a href="#GA.adaptive_mutation_by_space-2759"><span class="linenos">2759</span></a>                        <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2760"><a href="#GA.adaptive_mutation_by_space-2760"><span class="linenos">2760</span></a>
</span><span id="GA.adaptive_mutation_by_space-2761"><a href="#GA.adaptive_mutation_by_space-2761"><span class="linenos">2761</span></a>                    <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA.adaptive_mutation_by_space-2762"><a href="#GA.adaptive_mutation_by_space-2762"><span class="linenos">2762</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2763"><a href="#GA.adaptive_mutation_by_space-2763"><span class="linenos">2763</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA.adaptive_mutation_by_space-2764"><a href="#GA.adaptive_mutation_by_space-2764"><span class="linenos">2764</span></a>                    <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation_by_space-2765"><a href="#GA.adaptive_mutation_by_space-2765"><span class="linenos">2765</span></a>                    <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2766"><a href="#GA.adaptive_mutation_by_space-2766"><span class="linenos">2766</span></a>                        <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_by_space-2767"><a href="#GA.adaptive_mutation_by_space-2767"><span class="linenos">2767</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_by_space-2768"><a href="#GA.adaptive_mutation_by_space-2768"><span class="linenos">2768</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2769"><a href="#GA.adaptive_mutation_by_space-2769"><span class="linenos">2769</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2770"><a href="#GA.adaptive_mutation_by_space-2770"><span class="linenos">2770</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA.adaptive_mutation_by_space-2771"><a href="#GA.adaptive_mutation_by_space-2771"><span class="linenos">2771</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2772"><a href="#GA.adaptive_mutation_by_space-2772"><span class="linenos">2772</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA.adaptive_mutation_by_space-2773"><a href="#GA.adaptive_mutation_by_space-2773"><span class="linenos">2773</span></a>                    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2774"><a href="#GA.adaptive_mutation_by_space-2774"><span class="linenos">2774</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_by_space-2775"><a href="#GA.adaptive_mutation_by_space-2775"><span class="linenos">2775</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.adaptive_mutation_by_space-2776"><a href="#GA.adaptive_mutation_by_space-2776"><span class="linenos">2776</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2777"><a href="#GA.adaptive_mutation_by_space-2777"><span class="linenos">2777</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2778"><a href="#GA.adaptive_mutation_by_space-2778"><span class="linenos">2778</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.adaptive_mutation_by_space-2779"><a href="#GA.adaptive_mutation_by_space-2779"><span class="linenos">2779</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2780"><a href="#GA.adaptive_mutation_by_space-2780"><span class="linenos">2780</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2781"><a href="#GA.adaptive_mutation_by_space-2781"><span class="linenos">2781</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2782"><a href="#GA.adaptive_mutation_by_space-2782"><span class="linenos">2782</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2783"><a href="#GA.adaptive_mutation_by_space-2783"><span class="linenos">2783</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2784"><a href="#GA.adaptive_mutation_by_space-2784"><span class="linenos">2784</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2785"><a href="#GA.adaptive_mutation_by_space-2785"><span class="linenos">2785</span></a>                        <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_by_space-2786"><a href="#GA.adaptive_mutation_by_space-2786"><span class="linenos">2786</span></a>                        <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA.adaptive_mutation_by_space-2787"><a href="#GA.adaptive_mutation_by_space-2787"><span class="linenos">2787</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2788"><a href="#GA.adaptive_mutation_by_space-2788"><span class="linenos">2788</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2789"><a href="#GA.adaptive_mutation_by_space-2789"><span class="linenos">2789</span></a>                        <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA.adaptive_mutation_by_space-2790"><a href="#GA.adaptive_mutation_by_space-2790"><span class="linenos">2790</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2791"><a href="#GA.adaptive_mutation_by_space-2791"><span class="linenos">2791</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_by_space-2792"><a href="#GA.adaptive_mutation_by_space-2792"><span class="linenos">2792</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.adaptive_mutation_by_space-2793"><a href="#GA.adaptive_mutation_by_space-2793"><span class="linenos">2793</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2794"><a href="#GA.adaptive_mutation_by_space-2794"><span class="linenos">2794</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2795"><a href="#GA.adaptive_mutation_by_space-2795"><span class="linenos">2795</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2796"><a href="#GA.adaptive_mutation_by_space-2796"><span class="linenos">2796</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2797"><a href="#GA.adaptive_mutation_by_space-2797"><span class="linenos">2797</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2798"><a href="#GA.adaptive_mutation_by_space-2798"><span class="linenos">2798</span></a>                    <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_by_space-2799"><a href="#GA.adaptive_mutation_by_space-2799"><span class="linenos">2799</span></a>                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2800"><a href="#GA.adaptive_mutation_by_space-2800"><span class="linenos">2800</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.adaptive_mutation_by_space-2801"><a href="#GA.adaptive_mutation_by_space-2801"><span class="linenos">2801</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2802"><a href="#GA.adaptive_mutation_by_space-2802"><span class="linenos">2802</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2803"><a href="#GA.adaptive_mutation_by_space-2803"><span class="linenos">2803</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.adaptive_mutation_by_space-2804"><a href="#GA.adaptive_mutation_by_space-2804"><span class="linenos">2804</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2805"><a href="#GA.adaptive_mutation_by_space-2805"><span class="linenos">2805</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2806"><a href="#GA.adaptive_mutation_by_space-2806"><span class="linenos">2806</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2807"><a href="#GA.adaptive_mutation_by_space-2807"><span class="linenos">2807</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2808"><a href="#GA.adaptive_mutation_by_space-2808"><span class="linenos">2808</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2809"><a href="#GA.adaptive_mutation_by_space-2809"><span class="linenos">2809</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2810"><a href="#GA.adaptive_mutation_by_space-2810"><span class="linenos">2810</span></a>                        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.adaptive_mutation_by_space-2811"><a href="#GA.adaptive_mutation_by_space-2811"><span class="linenos">2811</span></a>                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2812"><a href="#GA.adaptive_mutation_by_space-2812"><span class="linenos">2812</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_by_space-2813"><a href="#GA.adaptive_mutation_by_space-2813"><span class="linenos">2813</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2814"><a href="#GA.adaptive_mutation_by_space-2814"><span class="linenos">2814</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2815"><a href="#GA.adaptive_mutation_by_space-2815"><span class="linenos">2815</span></a>
</span><span id="GA.adaptive_mutation_by_space-2816"><a href="#GA.adaptive_mutation_by_space-2816"><span class="linenos">2816</span></a>                <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2817"><a href="#GA.adaptive_mutation_by_space-2817"><span class="linenos">2817</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_by_space-2818"><a href="#GA.adaptive_mutation_by_space-2818"><span class="linenos">2818</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_by_space-2819"><a href="#GA.adaptive_mutation_by_space-2819"><span class="linenos">2819</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2820"><a href="#GA.adaptive_mutation_by_space-2820"><span class="linenos">2820</span></a>
</span><span id="GA.adaptive_mutation_by_space-2821"><a href="#GA.adaptive_mutation_by_space-2821"><span class="linenos">2821</span></a>                <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA.adaptive_mutation_by_space-2822"><a href="#GA.adaptive_mutation_by_space-2822"><span class="linenos">2822</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2823"><a href="#GA.adaptive_mutation_by_space-2823"><span class="linenos">2823</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2824"><a href="#GA.adaptive_mutation_by_space-2824"><span class="linenos">2824</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.adaptive_mutation_by_space-2825"><a href="#GA.adaptive_mutation_by_space-2825"><span class="linenos">2825</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_by_space-2826"><a href="#GA.adaptive_mutation_by_space-2826"><span class="linenos">2826</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2827"><a href="#GA.adaptive_mutation_by_space-2827"><span class="linenos">2827</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2828"><a href="#GA.adaptive_mutation_by_space-2828"><span class="linenos">2828</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2829"><a href="#GA.adaptive_mutation_by_space-2829"><span class="linenos">2829</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2830"><a href="#GA.adaptive_mutation_by_space-2830"><span class="linenos">2830</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.adaptive_mutation_by_space-2831"><a href="#GA.adaptive_mutation_by_space-2831"><span class="linenos">2831</span></a>                                                                         <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_by_space-2832"><a href="#GA.adaptive_mutation_by_space-2832"><span class="linenos">2832</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2833"><a href="#GA.adaptive_mutation_by_space-2833"><span class="linenos">2833</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2834"><a href="#GA.adaptive_mutation_by_space-2834"><span class="linenos">2834</span></a>
</span><span id="GA.adaptive_mutation_by_space-2835"><a href="#GA.adaptive_mutation_by_space-2835"><span class="linenos">2835</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_by_space-2836"><a href="#GA.adaptive_mutation_by_space-2836"><span class="linenos">2836</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_by_space-2837"><a href="#GA.adaptive_mutation_by_space-2837"><span class="linenos">2837</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_by_space-2838"><a href="#GA.adaptive_mutation_by_space-2838"><span class="linenos">2838</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_by_space-2839"><a href="#GA.adaptive_mutation_by_space-2839"><span class="linenos">2839</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_by_space-2840"><a href="#GA.adaptive_mutation_by_space-2840"><span class="linenos">2840</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the adaptive mutation based on the 2 parameters 'mutation_num_genes' and 'gene_space'.
A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.
The random values are selected from the 'gene_space' parameter.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation_randomly" class="classattr">
                                        <input id="GA.adaptive_mutation_randomly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation_randomly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation_randomly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation_randomly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation_randomly-2842"><a href="#GA.adaptive_mutation_randomly-2842"><span class="linenos">2842</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_randomly-2843"><a href="#GA.adaptive_mutation_randomly-2843"><span class="linenos">2843</span></a>
</span><span id="GA.adaptive_mutation_randomly-2844"><a href="#GA.adaptive_mutation_randomly-2844"><span class="linenos">2844</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_randomly-2845"><a href="#GA.adaptive_mutation_randomly-2845"><span class="linenos">2845</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_num_genes&#39; parameter.</span>
</span><span id="GA.adaptive_mutation_randomly-2846"><a href="#GA.adaptive_mutation_randomly-2846"><span class="linenos">2846</span></a><span class="sd">        A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.</span>
</span><span id="GA.adaptive_mutation_randomly-2847"><a href="#GA.adaptive_mutation_randomly-2847"><span class="linenos">2847</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation_randomly-2848"><a href="#GA.adaptive_mutation_randomly-2848"><span class="linenos">2848</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation_randomly-2849"><a href="#GA.adaptive_mutation_randomly-2849"><span class="linenos">2849</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation_randomly-2850"><a href="#GA.adaptive_mutation_randomly-2850"><span class="linenos">2850</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.adaptive_mutation_randomly-2851"><a href="#GA.adaptive_mutation_randomly-2851"><span class="linenos">2851</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_randomly-2852"><a href="#GA.adaptive_mutation_randomly-2852"><span class="linenos">2852</span></a>
</span><span id="GA.adaptive_mutation_randomly-2853"><a href="#GA.adaptive_mutation_randomly-2853"><span class="linenos">2853</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2854"><a href="#GA.adaptive_mutation_randomly-2854"><span class="linenos">2854</span></a>
</span><span id="GA.adaptive_mutation_randomly-2855"><a href="#GA.adaptive_mutation_randomly-2855"><span class="linenos">2855</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA.adaptive_mutation_randomly-2856"><a href="#GA.adaptive_mutation_randomly-2856"><span class="linenos">2856</span></a>        <span class="c1"># The number of genes to mutate depends on the solution&#39;s fitness value.</span>
</span><span id="GA.adaptive_mutation_randomly-2857"><a href="#GA.adaptive_mutation_randomly-2857"><span class="linenos">2857</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_randomly-2858"><a href="#GA.adaptive_mutation_randomly-2858"><span class="linenos">2858</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2859"><a href="#GA.adaptive_mutation_randomly-2859"><span class="linenos">2859</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_randomly-2860"><a href="#GA.adaptive_mutation_randomly-2860"><span class="linenos">2860</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2861"><a href="#GA.adaptive_mutation_randomly-2861"><span class="linenos">2861</span></a>                <span class="n">adaptive_mutation_num_genes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_num_genes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_randomly-2862"><a href="#GA.adaptive_mutation_randomly-2862"><span class="linenos">2862</span></a>            <span class="n">mutation_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span> <span class="n">adaptive_mutation_num_genes</span><span class="p">))</span>
</span><span id="GA.adaptive_mutation_randomly-2863"><a href="#GA.adaptive_mutation_randomly-2863"><span class="linenos">2863</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="n">mutation_indices</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2864"><a href="#GA.adaptive_mutation_randomly-2864"><span class="linenos">2864</span></a>                <span class="c1"># Generating a random value.</span>
</span><span id="GA.adaptive_mutation_randomly-2865"><a href="#GA.adaptive_mutation_randomly-2865"><span class="linenos">2865</span></a>                <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2866"><a href="#GA.adaptive_mutation_randomly-2866"><span class="linenos">2866</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2867"><a href="#GA.adaptive_mutation_randomly-2867"><span class="linenos">2867</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2868"><a href="#GA.adaptive_mutation_randomly-2868"><span class="linenos">2868</span></a>                <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA.adaptive_mutation_randomly-2869"><a href="#GA.adaptive_mutation_randomly-2869"><span class="linenos">2869</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2870"><a href="#GA.adaptive_mutation_randomly-2870"><span class="linenos">2870</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2871"><a href="#GA.adaptive_mutation_randomly-2871"><span class="linenos">2871</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2872"><a href="#GA.adaptive_mutation_randomly-2872"><span class="linenos">2872</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2873"><a href="#GA.adaptive_mutation_randomly-2873"><span class="linenos">2873</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2874"><a href="#GA.adaptive_mutation_randomly-2874"><span class="linenos">2874</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2875"><a href="#GA.adaptive_mutation_randomly-2875"><span class="linenos">2875</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_randomly-2876"><a href="#GA.adaptive_mutation_randomly-2876"><span class="linenos">2876</span></a>                <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA.adaptive_mutation_randomly-2877"><a href="#GA.adaptive_mutation_randomly-2877"><span class="linenos">2877</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2878"><a href="#GA.adaptive_mutation_randomly-2878"><span class="linenos">2878</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2879"><a href="#GA.adaptive_mutation_randomly-2879"><span class="linenos">2879</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2880"><a href="#GA.adaptive_mutation_randomly-2880"><span class="linenos">2880</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2881"><a href="#GA.adaptive_mutation_randomly-2881"><span class="linenos">2881</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2882"><a href="#GA.adaptive_mutation_randomly-2882"><span class="linenos">2882</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2883"><a href="#GA.adaptive_mutation_randomly-2883"><span class="linenos">2883</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_randomly-2884"><a href="#GA.adaptive_mutation_randomly-2884"><span class="linenos">2884</span></a>
</span><span id="GA.adaptive_mutation_randomly-2885"><a href="#GA.adaptive_mutation_randomly-2885"><span class="linenos">2885</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2886"><a href="#GA.adaptive_mutation_randomly-2886"><span class="linenos">2886</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2887"><a href="#GA.adaptive_mutation_randomly-2887"><span class="linenos">2887</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_randomly-2888"><a href="#GA.adaptive_mutation_randomly-2888"><span class="linenos">2888</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2889"><a href="#GA.adaptive_mutation_randomly-2889"><span class="linenos">2889</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2890"><a href="#GA.adaptive_mutation_randomly-2890"><span class="linenos">2890</span></a>                        <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_randomly-2891"><a href="#GA.adaptive_mutation_randomly-2891"><span class="linenos">2891</span></a>
</span><span id="GA.adaptive_mutation_randomly-2892"><a href="#GA.adaptive_mutation_randomly-2892"><span class="linenos">2892</span></a>                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA.adaptive_mutation_randomly-2893"><a href="#GA.adaptive_mutation_randomly-2893"><span class="linenos">2893</span></a>
</span><span id="GA.adaptive_mutation_randomly-2894"><a href="#GA.adaptive_mutation_randomly-2894"><span class="linenos">2894</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_randomly-2895"><a href="#GA.adaptive_mutation_randomly-2895"><span class="linenos">2895</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_randomly-2896"><a href="#GA.adaptive_mutation_randomly-2896"><span class="linenos">2896</span></a>                        <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_randomly-2897"><a href="#GA.adaptive_mutation_randomly-2897"><span class="linenos">2897</span></a>                        <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2898"><a href="#GA.adaptive_mutation_randomly-2898"><span class="linenos">2898</span></a>                        <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2899"><a href="#GA.adaptive_mutation_randomly-2899"><span class="linenos">2899</span></a>                        <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2900"><a href="#GA.adaptive_mutation_randomly-2900"><span class="linenos">2900</span></a>                        <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_randomly-2901"><a href="#GA.adaptive_mutation_randomly-2901"><span class="linenos">2901</span></a>                        <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_randomly-2902"><a href="#GA.adaptive_mutation_randomly-2902"><span class="linenos">2902</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the adaptive mutation based on the 'mutation_num_genes' parameter.
A number of genes equal are selected randomly for mutation. This number depends on the fitness of the solution.
The random values are selected based on the 2 parameters 'random_mutation_min_val' and 'random_mutation_max_val'.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation_probs_by_space" class="classattr">
                                        <input id="GA.adaptive_mutation_probs_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation_probs_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation_probs_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation_probs_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation_probs_by_space-2904"><a href="#GA.adaptive_mutation_probs_by_space-2904"><span class="linenos">2904</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2905"><a href="#GA.adaptive_mutation_probs_by_space-2905"><span class="linenos">2905</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2906"><a href="#GA.adaptive_mutation_probs_by_space-2906"><span class="linenos">2906</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2907"><a href="#GA.adaptive_mutation_probs_by_space-2907"><span class="linenos">2907</span></a><span class="sd">        Applies the adaptive mutation based on the 2 parameters &#39;mutation_probability&#39; and &#39;gene_space&#39;.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2908"><a href="#GA.adaptive_mutation_probs_by_space-2908"><span class="linenos">2908</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2909"><a href="#GA.adaptive_mutation_probs_by_space-2909"><span class="linenos">2909</span></a><span class="sd">        The random values are selected based on space of values for each gene.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2910"><a href="#GA.adaptive_mutation_probs_by_space-2910"><span class="linenos">2910</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2911"><a href="#GA.adaptive_mutation_probs_by_space-2911"><span class="linenos">2911</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2912"><a href="#GA.adaptive_mutation_probs_by_space-2912"><span class="linenos">2912</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2913"><a href="#GA.adaptive_mutation_probs_by_space-2913"><span class="linenos">2913</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2914"><a href="#GA.adaptive_mutation_probs_by_space-2914"><span class="linenos">2914</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2915"><a href="#GA.adaptive_mutation_probs_by_space-2915"><span class="linenos">2915</span></a>        <span class="c1"># For each offspring, a value from the gene space is selected randomly and assigned to the selected gene for mutation.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2916"><a href="#GA.adaptive_mutation_probs_by_space-2916"><span class="linenos">2916</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2917"><a href="#GA.adaptive_mutation_probs_by_space-2917"><span class="linenos">2917</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2918"><a href="#GA.adaptive_mutation_probs_by_space-2918"><span class="linenos">2918</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2919"><a href="#GA.adaptive_mutation_probs_by_space-2919"><span class="linenos">2919</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2920"><a href="#GA.adaptive_mutation_probs_by_space-2920"><span class="linenos">2920</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2921"><a href="#GA.adaptive_mutation_probs_by_space-2921"><span class="linenos">2921</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2922"><a href="#GA.adaptive_mutation_probs_by_space-2922"><span class="linenos">2922</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2923"><a href="#GA.adaptive_mutation_probs_by_space-2923"><span class="linenos">2923</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2924"><a href="#GA.adaptive_mutation_probs_by_space-2924"><span class="linenos">2924</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2925"><a href="#GA.adaptive_mutation_probs_by_space-2925"><span class="linenos">2925</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2926"><a href="#GA.adaptive_mutation_probs_by_space-2926"><span class="linenos">2926</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2927"><a href="#GA.adaptive_mutation_probs_by_space-2927"><span class="linenos">2927</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2928"><a href="#GA.adaptive_mutation_probs_by_space-2928"><span class="linenos">2928</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2929"><a href="#GA.adaptive_mutation_probs_by_space-2929"><span class="linenos">2929</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2930"><a href="#GA.adaptive_mutation_probs_by_space-2930"><span class="linenos">2930</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2931"><a href="#GA.adaptive_mutation_probs_by_space-2931"><span class="linenos">2931</span></a>                        <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2932"><a href="#GA.adaptive_mutation_probs_by_space-2932"><span class="linenos">2932</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2933"><a href="#GA.adaptive_mutation_probs_by_space-2933"><span class="linenos">2933</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2934"><a href="#GA.adaptive_mutation_probs_by_space-2934"><span class="linenos">2934</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2935"><a href="#GA.adaptive_mutation_probs_by_space-2935"><span class="linenos">2935</span></a>                            <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2936"><a href="#GA.adaptive_mutation_probs_by_space-2936"><span class="linenos">2936</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2937"><a href="#GA.adaptive_mutation_probs_by_space-2937"><span class="linenos">2937</span></a>                        <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2938"><a href="#GA.adaptive_mutation_probs_by_space-2938"><span class="linenos">2938</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2939"><a href="#GA.adaptive_mutation_probs_by_space-2939"><span class="linenos">2939</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2940"><a href="#GA.adaptive_mutation_probs_by_space-2940"><span class="linenos">2940</span></a>                        <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2941"><a href="#GA.adaptive_mutation_probs_by_space-2941"><span class="linenos">2941</span></a>                        <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2942"><a href="#GA.adaptive_mutation_probs_by_space-2942"><span class="linenos">2942</span></a>                            <span class="n">rand_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2943"><a href="#GA.adaptive_mutation_probs_by_space-2943"><span class="linenos">2943</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2944"><a href="#GA.adaptive_mutation_probs_by_space-2944"><span class="linenos">2944</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2945"><a href="#GA.adaptive_mutation_probs_by_space-2945"><span class="linenos">2945</span></a>                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2946"><a href="#GA.adaptive_mutation_probs_by_space-2946"><span class="linenos">2946</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">rand_val</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2947"><a href="#GA.adaptive_mutation_probs_by_space-2947"><span class="linenos">2947</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2948"><a href="#GA.adaptive_mutation_probs_by_space-2948"><span class="linenos">2948</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">rand_val</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2949"><a href="#GA.adaptive_mutation_probs_by_space-2949"><span class="linenos">2949</span></a>                        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2950"><a href="#GA.adaptive_mutation_probs_by_space-2950"><span class="linenos">2950</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2951"><a href="#GA.adaptive_mutation_probs_by_space-2951"><span class="linenos">2951</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2952"><a href="#GA.adaptive_mutation_probs_by_space-2952"><span class="linenos">2952</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2953"><a href="#GA.adaptive_mutation_probs_by_space-2953"><span class="linenos">2953</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2954"><a href="#GA.adaptive_mutation_probs_by_space-2954"><span class="linenos">2954</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2955"><a href="#GA.adaptive_mutation_probs_by_space-2955"><span class="linenos">2955</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2956"><a href="#GA.adaptive_mutation_probs_by_space-2956"><span class="linenos">2956</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2957"><a href="#GA.adaptive_mutation_probs_by_space-2957"><span class="linenos">2957</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2958"><a href="#GA.adaptive_mutation_probs_by_space-2958"><span class="linenos">2958</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2959"><a href="#GA.adaptive_mutation_probs_by_space-2959"><span class="linenos">2959</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2960"><a href="#GA.adaptive_mutation_probs_by_space-2960"><span class="linenos">2960</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2961"><a href="#GA.adaptive_mutation_probs_by_space-2961"><span class="linenos">2961</span></a>                            <span class="c1"># Selecting a value randomly from the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2962"><a href="#GA.adaptive_mutation_probs_by_space-2962"><span class="linenos">2962</span></a>                            <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2963"><a href="#GA.adaptive_mutation_probs_by_space-2963"><span class="linenos">2963</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2964"><a href="#GA.adaptive_mutation_probs_by_space-2964"><span class="linenos">2964</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2965"><a href="#GA.adaptive_mutation_probs_by_space-2965"><span class="linenos">2965</span></a>                            <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2966"><a href="#GA.adaptive_mutation_probs_by_space-2966"><span class="linenos">2966</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2967"><a href="#GA.adaptive_mutation_probs_by_space-2967"><span class="linenos">2967</span></a>                                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2968"><a href="#GA.adaptive_mutation_probs_by_space-2968"><span class="linenos">2968</span></a>                                    <span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2969"><a href="#GA.adaptive_mutation_probs_by_space-2969"><span class="linenos">2969</span></a>                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2970"><a href="#GA.adaptive_mutation_probs_by_space-2970"><span class="linenos">2970</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2971"><a href="#GA.adaptive_mutation_probs_by_space-2971"><span class="linenos">2971</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2972"><a href="#GA.adaptive_mutation_probs_by_space-2972"><span class="linenos">2972</span></a>                                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2973"><a href="#GA.adaptive_mutation_probs_by_space-2973"><span class="linenos">2973</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2974"><a href="#GA.adaptive_mutation_probs_by_space-2974"><span class="linenos">2974</span></a>                        <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2975"><a href="#GA.adaptive_mutation_probs_by_space-2975"><span class="linenos">2975</span></a>                        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2976"><a href="#GA.adaptive_mutation_probs_by_space-2976"><span class="linenos">2976</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2977"><a href="#GA.adaptive_mutation_probs_by_space-2977"><span class="linenos">2977</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2978"><a href="#GA.adaptive_mutation_probs_by_space-2978"><span class="linenos">2978</span></a>                                                                                    <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2979"><a href="#GA.adaptive_mutation_probs_by_space-2979"><span class="linenos">2979</span></a>                                                                                    <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2980"><a href="#GA.adaptive_mutation_probs_by_space-2980"><span class="linenos">2980</span></a>                                                                       <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2981"><a href="#GA.adaptive_mutation_probs_by_space-2981"><span class="linenos">2981</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2982"><a href="#GA.adaptive_mutation_probs_by_space-2982"><span class="linenos">2982</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2983"><a href="#GA.adaptive_mutation_probs_by_space-2983"><span class="linenos">2983</span></a>                                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2984"><a href="#GA.adaptive_mutation_probs_by_space-2984"><span class="linenos">2984</span></a>                                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2985"><a href="#GA.adaptive_mutation_probs_by_space-2985"><span class="linenos">2985</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2986"><a href="#GA.adaptive_mutation_probs_by_space-2986"><span class="linenos">2986</span></a>                            <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2987"><a href="#GA.adaptive_mutation_probs_by_space-2987"><span class="linenos">2987</span></a>                                <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]]))</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2988"><a href="#GA.adaptive_mutation_probs_by_space-2988"><span class="linenos">2988</span></a>                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2989"><a href="#GA.adaptive_mutation_probs_by_space-2989"><span class="linenos">2989</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2990"><a href="#GA.adaptive_mutation_probs_by_space-2990"><span class="linenos">2990</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2991"><a href="#GA.adaptive_mutation_probs_by_space-2991"><span class="linenos">2991</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2992"><a href="#GA.adaptive_mutation_probs_by_space-2992"><span class="linenos">2992</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2993"><a href="#GA.adaptive_mutation_probs_by_space-2993"><span class="linenos">2993</span></a>                    <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2994"><a href="#GA.adaptive_mutation_probs_by_space-2994"><span class="linenos">2994</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2995"><a href="#GA.adaptive_mutation_probs_by_space-2995"><span class="linenos">2995</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2996"><a href="#GA.adaptive_mutation_probs_by_space-2996"><span class="linenos">2996</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2997"><a href="#GA.adaptive_mutation_probs_by_space-2997"><span class="linenos">2997</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-2998"><a href="#GA.adaptive_mutation_probs_by_space-2998"><span class="linenos">2998</span></a>                    <span class="c1"># Assinging the selected value from the space to the gene.</span>
</span><span id="GA.adaptive_mutation_probs_by_space-2999"><a href="#GA.adaptive_mutation_probs_by_space-2999"><span class="linenos">2999</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3000"><a href="#GA.adaptive_mutation_probs_by_space-3000"><span class="linenos">3000</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3001"><a href="#GA.adaptive_mutation_probs_by_space-3001"><span class="linenos">3001</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3002"><a href="#GA.adaptive_mutation_probs_by_space-3002"><span class="linenos">3002</span></a>                                                                             <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3003"><a href="#GA.adaptive_mutation_probs_by_space-3003"><span class="linenos">3003</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3004"><a href="#GA.adaptive_mutation_probs_by_space-3004"><span class="linenos">3004</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3005"><a href="#GA.adaptive_mutation_probs_by_space-3005"><span class="linenos">3005</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3006"><a href="#GA.adaptive_mutation_probs_by_space-3006"><span class="linenos">3006</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3007"><a href="#GA.adaptive_mutation_probs_by_space-3007"><span class="linenos">3007</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3008"><a href="#GA.adaptive_mutation_probs_by_space-3008"><span class="linenos">3008</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3009"><a href="#GA.adaptive_mutation_probs_by_space-3009"><span class="linenos">3009</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3010"><a href="#GA.adaptive_mutation_probs_by_space-3010"><span class="linenos">3010</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3011"><a href="#GA.adaptive_mutation_probs_by_space-3011"><span class="linenos">3011</span></a>                            <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3012"><a href="#GA.adaptive_mutation_probs_by_space-3012"><span class="linenos">3012</span></a>
</span><span id="GA.adaptive_mutation_probs_by_space-3013"><a href="#GA.adaptive_mutation_probs_by_space-3013"><span class="linenos">3013</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3014"><a href="#GA.adaptive_mutation_probs_by_space-3014"><span class="linenos">3014</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_by_space</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3015"><a href="#GA.adaptive_mutation_probs_by_space-3015"><span class="linenos">3015</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3016"><a href="#GA.adaptive_mutation_probs_by_space-3016"><span class="linenos">3016</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3017"><a href="#GA.adaptive_mutation_probs_by_space-3017"><span class="linenos">3017</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_by_space-3018"><a href="#GA.adaptive_mutation_probs_by_space-3018"><span class="linenos">3018</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the adaptive mutation based on the 2 parameters 'mutation_probability' and 'gene_space'.
Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.
The random values are selected based on space of values for each gene.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.adaptive_mutation_probs_randomly" class="classattr">
                                        <input id="GA.adaptive_mutation_probs_randomly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adaptive_mutation_probs_randomly</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">offspring</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.adaptive_mutation_probs_randomly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.adaptive_mutation_probs_randomly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.adaptive_mutation_probs_randomly-3020"><a href="#GA.adaptive_mutation_probs_randomly-3020"><span class="linenos">3020</span></a>    <span class="k">def</span> <span class="nf">adaptive_mutation_probs_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offspring</span><span class="p">):</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3021"><a href="#GA.adaptive_mutation_probs_randomly-3021"><span class="linenos">3021</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3022"><a href="#GA.adaptive_mutation_probs_randomly-3022"><span class="linenos">3022</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3023"><a href="#GA.adaptive_mutation_probs_randomly-3023"><span class="linenos">3023</span></a><span class="sd">        Applies the adaptive mutation based on the &#39;mutation_probability&#39; parameter.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3024"><a href="#GA.adaptive_mutation_probs_randomly-3024"><span class="linenos">3024</span></a><span class="sd">        Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3025"><a href="#GA.adaptive_mutation_probs_randomly-3025"><span class="linenos">3025</span></a><span class="sd">        The random values are selected based on the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3026"><a href="#GA.adaptive_mutation_probs_randomly-3026"><span class="linenos">3026</span></a><span class="sd">        It accepts a single parameter:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3027"><a href="#GA.adaptive_mutation_probs_randomly-3027"><span class="linenos">3027</span></a><span class="sd">            -offspring: The offspring to mutate.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3028"><a href="#GA.adaptive_mutation_probs_randomly-3028"><span class="linenos">3028</span></a><span class="sd">        It returns an array of the mutated offspring.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3029"><a href="#GA.adaptive_mutation_probs_randomly-3029"><span class="linenos">3029</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3030"><a href="#GA.adaptive_mutation_probs_randomly-3030"><span class="linenos">3030</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3031"><a href="#GA.adaptive_mutation_probs_randomly-3031"><span class="linenos">3031</span></a>        <span class="n">average_fitness</span><span class="p">,</span> <span class="n">offspring_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptive_mutation_population_fitness</span><span class="p">(</span><span class="n">offspring</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3032"><a href="#GA.adaptive_mutation_probs_randomly-3032"><span class="linenos">3032</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3033"><a href="#GA.adaptive_mutation_probs_randomly-3033"><span class="linenos">3033</span></a>        <span class="c1"># Adaptive random mutation changes one or more genes in each offspring randomly.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3034"><a href="#GA.adaptive_mutation_probs_randomly-3034"><span class="linenos">3034</span></a>        <span class="c1"># The probability of mutating a gene depends on the solution&#39;s fitness value.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3035"><a href="#GA.adaptive_mutation_probs_randomly-3035"><span class="linenos">3035</span></a>        <span class="k">for</span> <span class="n">offspring_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3036"><a href="#GA.adaptive_mutation_probs_randomly-3036"><span class="linenos">3036</span></a>            <span class="k">if</span> <span class="n">offspring_fitness</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">average_fitness</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3037"><a href="#GA.adaptive_mutation_probs_randomly-3037"><span class="linenos">3037</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3038"><a href="#GA.adaptive_mutation_probs_randomly-3038"><span class="linenos">3038</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3039"><a href="#GA.adaptive_mutation_probs_randomly-3039"><span class="linenos">3039</span></a>                <span class="n">adaptive_mutation_probability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_probability</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3040"><a href="#GA.adaptive_mutation_probs_randomly-3040"><span class="linenos">3040</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3041"><a href="#GA.adaptive_mutation_probs_randomly-3041"><span class="linenos">3041</span></a>            <span class="n">probs</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3042"><a href="#GA.adaptive_mutation_probs_randomly-3042"><span class="linenos">3042</span></a>            <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">offspring</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3043"><a href="#GA.adaptive_mutation_probs_randomly-3043"><span class="linenos">3043</span></a>                <span class="k">if</span> <span class="n">probs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">adaptive_mutation_probability</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3044"><a href="#GA.adaptive_mutation_probs_randomly-3044"><span class="linenos">3044</span></a>                    <span class="c1"># Generating a random value.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3045"><a href="#GA.adaptive_mutation_probs_randomly-3045"><span class="linenos">3045</span></a>                    <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3046"><a href="#GA.adaptive_mutation_probs_randomly-3046"><span class="linenos">3046</span></a>                                                        <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3047"><a href="#GA.adaptive_mutation_probs_randomly-3047"><span class="linenos">3047</span></a>                                                        <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3048"><a href="#GA.adaptive_mutation_probs_randomly-3048"><span class="linenos">3048</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is True, then the random value replaces the current gene value.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3049"><a href="#GA.adaptive_mutation_probs_randomly-3049"><span class="linenos">3049</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3050"><a href="#GA.adaptive_mutation_probs_randomly-3050"><span class="linenos">3050</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3051"><a href="#GA.adaptive_mutation_probs_randomly-3051"><span class="linenos">3051</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3052"><a href="#GA.adaptive_mutation_probs_randomly-3052"><span class="linenos">3052</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3053"><a href="#GA.adaptive_mutation_probs_randomly-3053"><span class="linenos">3053</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3054"><a href="#GA.adaptive_mutation_probs_randomly-3054"><span class="linenos">3054</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3055"><a href="#GA.adaptive_mutation_probs_randomly-3055"><span class="linenos">3055</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3056"><a href="#GA.adaptive_mutation_probs_randomly-3056"><span class="linenos">3056</span></a>                    <span class="c1"># If the mutation_by_replacement attribute is False, then the random value is added to the gene value.</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3057"><a href="#GA.adaptive_mutation_probs_randomly-3057"><span class="linenos">3057</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3058"><a href="#GA.adaptive_mutation_probs_randomly-3058"><span class="linenos">3058</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3059"><a href="#GA.adaptive_mutation_probs_randomly-3059"><span class="linenos">3059</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3060"><a href="#GA.adaptive_mutation_probs_randomly-3060"><span class="linenos">3060</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3061"><a href="#GA.adaptive_mutation_probs_randomly-3061"><span class="linenos">3061</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3062"><a href="#GA.adaptive_mutation_probs_randomly-3062"><span class="linenos">3062</span></a>                                <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">random_value</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3063"><a href="#GA.adaptive_mutation_probs_randomly-3063"><span class="linenos">3063</span></a>                            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">random_value</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3064"><a href="#GA.adaptive_mutation_probs_randomly-3064"><span class="linenos">3064</span></a>                                <span class="n">random_value</span> <span class="o">=</span> <span class="n">random_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3065"><a href="#GA.adaptive_mutation_probs_randomly-3065"><span class="linenos">3065</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3066"><a href="#GA.adaptive_mutation_probs_randomly-3066"><span class="linenos">3066</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3067"><a href="#GA.adaptive_mutation_probs_randomly-3067"><span class="linenos">3067</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3068"><a href="#GA.adaptive_mutation_probs_randomly-3068"><span class="linenos">3068</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3069"><a href="#GA.adaptive_mutation_probs_randomly-3069"><span class="linenos">3069</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3070"><a href="#GA.adaptive_mutation_probs_randomly-3070"><span class="linenos">3070</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3071"><a href="#GA.adaptive_mutation_probs_randomly-3071"><span class="linenos">3071</span></a>                            <span class="n">random_value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">random_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3072"><a href="#GA.adaptive_mutation_probs_randomly-3072"><span class="linenos">3072</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3073"><a href="#GA.adaptive_mutation_probs_randomly-3073"><span class="linenos">3073</span></a>                    <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_value</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3074"><a href="#GA.adaptive_mutation_probs_randomly-3074"><span class="linenos">3074</span></a>
</span><span id="GA.adaptive_mutation_probs_randomly-3075"><a href="#GA.adaptive_mutation_probs_randomly-3075"><span class="linenos">3075</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_duplicate_genes</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3076"><a href="#GA.adaptive_mutation_probs_randomly-3076"><span class="linenos">3076</span></a>                        <span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_duplicate_genes_randomly</span><span class="p">(</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3077"><a href="#GA.adaptive_mutation_probs_randomly-3077"><span class="linenos">3077</span></a>                            <span class="n">solution</span><span class="o">=</span><span class="n">offspring</span><span class="p">[</span><span class="n">offspring_idx</span><span class="p">],</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3078"><a href="#GA.adaptive_mutation_probs_randomly-3078"><span class="linenos">3078</span></a>                            <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3079"><a href="#GA.adaptive_mutation_probs_randomly-3079"><span class="linenos">3079</span></a>                            <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3080"><a href="#GA.adaptive_mutation_probs_randomly-3080"><span class="linenos">3080</span></a>                            <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3081"><a href="#GA.adaptive_mutation_probs_randomly-3081"><span class="linenos">3081</span></a>                            <span class="n">gene_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3082"><a href="#GA.adaptive_mutation_probs_randomly-3082"><span class="linenos">3082</span></a>                            <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="GA.adaptive_mutation_probs_randomly-3083"><a href="#GA.adaptive_mutation_probs_randomly-3083"><span class="linenos">3083</span></a>        <span class="k">return</span> <span class="n">offspring</span>
</span></pre></div>


            <div class="docstring"><p>Applies the adaptive mutation based on the 'mutation_probability' parameter.
Based on whether the solution fitness is above or below a threshold, the mutation is applied diffrently by mutating high or low number of genes.
The random values are selected based on the 2 parameters 'random_mutation_min_val' and 'random_mutation_max_val'.
It accepts a single parameter:
    -offspring: The offspring to mutate.
It returns an array of the mutated offspring.</p>
</div>


                            </div>
                            <div id="GA.solve_duplicate_genes_randomly" class="classattr">
                                        <input id="GA.solve_duplicate_genes_randomly-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solve_duplicate_genes_randomly</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">solution</span>,</span><span class="param">	<span class="n">min_val</span>,</span><span class="param">	<span class="n">max_val</span>,</span><span class="param">	<span class="n">mutation_by_replacement</span>,</span><span class="param">	<span class="n">gene_type</span>,</span><span class="param">	<span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.solve_duplicate_genes_randomly-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.solve_duplicate_genes_randomly"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.solve_duplicate_genes_randomly-3085"><a href="#GA.solve_duplicate_genes_randomly-3085"><span class="linenos">3085</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_randomly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3086"><a href="#GA.solve_duplicate_genes_randomly-3086"><span class="linenos">3086</span></a>                                       <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_randomly-3087"><a href="#GA.solve_duplicate_genes_randomly-3087"><span class="linenos">3087</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3088"><a href="#GA.solve_duplicate_genes_randomly-3088"><span class="linenos">3088</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.solve_duplicate_genes_randomly-3089"><a href="#GA.solve_duplicate_genes_randomly-3089"><span class="linenos">3089</span></a><span class="sd">        Solves the duplicates in a solution by randomly selecting new values for the duplicating genes.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3090"><a href="#GA.solve_duplicate_genes_randomly-3090"><span class="linenos">3090</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3091"><a href="#GA.solve_duplicate_genes_randomly-3091"><span class="linenos">3091</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3092"><a href="#GA.solve_duplicate_genes_randomly-3092"><span class="linenos">3092</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3093"><a href="#GA.solve_duplicate_genes_randomly-3093"><span class="linenos">3093</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3094"><a href="#GA.solve_duplicate_genes_randomly-3094"><span class="linenos">3094</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3095"><a href="#GA.solve_duplicate_genes_randomly-3095"><span class="linenos">3095</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3096"><a href="#GA.solve_duplicate_genes_randomly-3096"><span class="linenos">3096</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3097"><a href="#GA.solve_duplicate_genes_randomly-3097"><span class="linenos">3097</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3098"><a href="#GA.solve_duplicate_genes_randomly-3098"><span class="linenos">3098</span></a><span class="sd">        Returns:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3099"><a href="#GA.solve_duplicate_genes_randomly-3099"><span class="linenos">3099</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3100"><a href="#GA.solve_duplicate_genes_randomly-3100"><span class="linenos">3100</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3101"><a href="#GA.solve_duplicate_genes_randomly-3101"><span class="linenos">3101</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3102"><a href="#GA.solve_duplicate_genes_randomly-3102"><span class="linenos">3102</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.solve_duplicate_genes_randomly-3103"><a href="#GA.solve_duplicate_genes_randomly-3103"><span class="linenos">3103</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3104"><a href="#GA.solve_duplicate_genes_randomly-3104"><span class="linenos">3104</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.solve_duplicate_genes_randomly-3105"><a href="#GA.solve_duplicate_genes_randomly-3105"><span class="linenos">3105</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3106"><a href="#GA.solve_duplicate_genes_randomly-3106"><span class="linenos">3106</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3107"><a href="#GA.solve_duplicate_genes_randomly-3107"><span class="linenos">3107</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3108"><a href="#GA.solve_duplicate_genes_randomly-3108"><span class="linenos">3108</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3109"><a href="#GA.solve_duplicate_genes_randomly-3109"><span class="linenos">3109</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.solve_duplicate_genes_randomly-3110"><a href="#GA.solve_duplicate_genes_randomly-3110"><span class="linenos">3110</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3111"><a href="#GA.solve_duplicate_genes_randomly-3111"><span class="linenos">3111</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3112"><a href="#GA.solve_duplicate_genes_randomly-3112"><span class="linenos">3112</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_randomly-3113"><a href="#GA.solve_duplicate_genes_randomly-3113"><span class="linenos">3113</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3114"><a href="#GA.solve_duplicate_genes_randomly-3114"><span class="linenos">3114</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3115"><a href="#GA.solve_duplicate_genes_randomly-3115"><span class="linenos">3115</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3116"><a href="#GA.solve_duplicate_genes_randomly-3116"><span class="linenos">3116</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3117"><a href="#GA.solve_duplicate_genes_randomly-3117"><span class="linenos">3117</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3118"><a href="#GA.solve_duplicate_genes_randomly-3118"><span class="linenos">3118</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3119"><a href="#GA.solve_duplicate_genes_randomly-3119"><span class="linenos">3119</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3120"><a href="#GA.solve_duplicate_genes_randomly-3120"><span class="linenos">3120</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3121"><a href="#GA.solve_duplicate_genes_randomly-3121"><span class="linenos">3121</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3122"><a href="#GA.solve_duplicate_genes_randomly-3122"><span class="linenos">3122</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3123"><a href="#GA.solve_duplicate_genes_randomly-3123"><span class="linenos">3123</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3124"><a href="#GA.solve_duplicate_genes_randomly-3124"><span class="linenos">3124</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3125"><a href="#GA.solve_duplicate_genes_randomly-3125"><span class="linenos">3125</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3126"><a href="#GA.solve_duplicate_genes_randomly-3126"><span class="linenos">3126</span></a>                                <span class="k">pass</span>
</span><span id="GA.solve_duplicate_genes_randomly-3127"><a href="#GA.solve_duplicate_genes_randomly-3127"><span class="linenos">3127</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3128"><a href="#GA.solve_duplicate_genes_randomly-3128"><span class="linenos">3128</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="GA.solve_duplicate_genes_randomly-3129"><a href="#GA.solve_duplicate_genes_randomly-3129"><span class="linenos">3129</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3130"><a href="#GA.solve_duplicate_genes_randomly-3130"><span class="linenos">3130</span></a>                        <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3131"><a href="#GA.solve_duplicate_genes_randomly-3131"><span class="linenos">3131</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3132"><a href="#GA.solve_duplicate_genes_randomly-3132"><span class="linenos">3132</span></a>                                                                       <span class="n">gene_index</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3133"><a href="#GA.solve_duplicate_genes_randomly-3133"><span class="linenos">3133</span></a>                                                                       <span class="n">min_val</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3134"><a href="#GA.solve_duplicate_genes_randomly-3134"><span class="linenos">3134</span></a>                                                                       <span class="n">max_val</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3135"><a href="#GA.solve_duplicate_genes_randomly-3135"><span class="linenos">3135</span></a>                                                                       <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="n">mutation_by_replacement</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3136"><a href="#GA.solve_duplicate_genes_randomly-3136"><span class="linenos">3136</span></a>                                                                       <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3137"><a href="#GA.solve_duplicate_genes_randomly-3137"><span class="linenos">3137</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3138"><a href="#GA.solve_duplicate_genes_randomly-3138"><span class="linenos">3138</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">min_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3139"><a href="#GA.solve_duplicate_genes_randomly-3139"><span class="linenos">3139</span></a>                                                            <span class="n">high</span><span class="o">=</span><span class="n">max_val</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_randomly-3140"><a href="#GA.solve_duplicate_genes_randomly-3140"><span class="linenos">3140</span></a>                                                            <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3141"><a href="#GA.solve_duplicate_genes_randomly-3141"><span class="linenos">3141</span></a>                            <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3142"><a href="#GA.solve_duplicate_genes_randomly-3142"><span class="linenos">3142</span></a>                                <span class="k">pass</span>
</span><span id="GA.solve_duplicate_genes_randomly-3143"><a href="#GA.solve_duplicate_genes_randomly-3143"><span class="linenos">3143</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3144"><a href="#GA.solve_duplicate_genes_randomly-3144"><span class="linenos">3144</span></a>                                <span class="n">temp_val</span> <span class="o">=</span> <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">temp_val</span>
</span><span id="GA.solve_duplicate_genes_randomly-3145"><a href="#GA.solve_duplicate_genes_randomly-3145"><span class="linenos">3145</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3146"><a href="#GA.solve_duplicate_genes_randomly-3146"><span class="linenos">3146</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3147"><a href="#GA.solve_duplicate_genes_randomly-3147"><span class="linenos">3147</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3148"><a href="#GA.solve_duplicate_genes_randomly-3148"><span class="linenos">3148</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="GA.solve_duplicate_genes_randomly-3149"><a href="#GA.solve_duplicate_genes_randomly-3149"><span class="linenos">3149</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.solve_duplicate_genes_randomly-3150"><a href="#GA.solve_duplicate_genes_randomly-3150"><span class="linenos">3150</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3151"><a href="#GA.solve_duplicate_genes_randomly-3151"><span class="linenos">3151</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3152"><a href="#GA.solve_duplicate_genes_randomly-3152"><span class="linenos">3152</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3153"><a href="#GA.solve_duplicate_genes_randomly-3153"><span class="linenos">3153</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3154"><a href="#GA.solve_duplicate_genes_randomly-3154"><span class="linenos">3154</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">),</span>
</span><span id="GA.solve_duplicate_genes_randomly-3155"><a href="#GA.solve_duplicate_genes_randomly-3155"><span class="linenos">3155</span></a>                                                   <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.solve_duplicate_genes_randomly-3156"><a href="#GA.solve_duplicate_genes_randomly-3156"><span class="linenos">3156</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3157"><a href="#GA.solve_duplicate_genes_randomly-3157"><span class="linenos">3157</span></a>                            <span class="n">temp_val</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">temp_val</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3158"><a href="#GA.solve_duplicate_genes_randomly-3158"><span class="linenos">3158</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3159"><a href="#GA.solve_duplicate_genes_randomly-3159"><span class="linenos">3159</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_randomly-3160"><a href="#GA.solve_duplicate_genes_randomly-3160"><span class="linenos">3160</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA.solve_duplicate_genes_randomly-3161"><a href="#GA.solve_duplicate_genes_randomly-3161"><span class="linenos">3161</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_randomly-3162"><a href="#GA.solve_duplicate_genes_randomly-3162"><span class="linenos">3162</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_randomly-3163"><a href="#GA.solve_duplicate_genes_randomly-3163"><span class="linenos">3163</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="GA.solve_duplicate_genes_randomly-3164"><a href="#GA.solve_duplicate_genes_randomly-3164"><span class="linenos">3164</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3165"><a href="#GA.solve_duplicate_genes_randomly-3165"><span class="linenos">3165</span></a>                        <span class="k">continue</span>
</span><span id="GA.solve_duplicate_genes_randomly-3166"><a href="#GA.solve_duplicate_genes_randomly-3166"><span class="linenos">3166</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_randomly-3167"><a href="#GA.solve_duplicate_genes_randomly-3167"><span class="linenos">3167</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA.solve_duplicate_genes_randomly-3168"><a href="#GA.solve_duplicate_genes_randomly-3168"><span class="linenos">3168</span></a>                        <span class="k">break</span>
</span><span id="GA.solve_duplicate_genes_randomly-3169"><a href="#GA.solve_duplicate_genes_randomly-3169"><span class="linenos">3169</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3170"><a href="#GA.solve_duplicate_genes_randomly-3170"><span class="linenos">3170</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA.solve_duplicate_genes_randomly-3171"><a href="#GA.solve_duplicate_genes_randomly-3171"><span class="linenos">3171</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3172"><a href="#GA.solve_duplicate_genes_randomly-3172"><span class="linenos">3172</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3173"><a href="#GA.solve_duplicate_genes_randomly-3173"><span class="linenos">3173</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA.solve_duplicate_genes_randomly-3174"><a href="#GA.solve_duplicate_genes_randomly-3174"><span class="linenos">3174</span></a>
</span><span id="GA.solve_duplicate_genes_randomly-3175"><a href="#GA.solve_duplicate_genes_randomly-3175"><span class="linenos">3175</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span></pre></div>


            <div class="docstring"><p>Solves the duplicates in a solution by randomly selecting new values for the duplicating genes.</p>

<p>solution: A solution with duplicate values.
min_val: Minimum value of the range to sample a number randomly.
max_val: Maximum value of the range to sample a number randomly.
mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.
gene_type: Exactly the same as the self.gene_type attribute.
num_trials: Maximum number of trials to change the gene value to solve the duplicates.</p>

<p>Returns:
    new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.
    not_unique_indices: Indices of the genes with duplicate values.
    num_unsolved_duplicates: Number of unsolved duplicates.</p>
</div>


                            </div>
                            <div id="GA.solve_duplicate_genes_by_space" class="classattr">
                                        <input id="GA.solve_duplicate_genes_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solve_duplicate_genes_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">solution</span>, </span><span class="param"><span class="n">gene_type</span>, </span><span class="param"><span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span>, </span><span class="param"><span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.solve_duplicate_genes_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.solve_duplicate_genes_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.solve_duplicate_genes_by_space-3177"><a href="#GA.solve_duplicate_genes_by_space-3177"><span class="linenos">3177</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_by_space-3178"><a href="#GA.solve_duplicate_genes_by_space-3178"><span class="linenos">3178</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3179"><a href="#GA.solve_duplicate_genes_by_space-3179"><span class="linenos">3179</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.solve_duplicate_genes_by_space-3180"><a href="#GA.solve_duplicate_genes_by_space-3180"><span class="linenos">3180</span></a><span class="sd">        Solves the duplicates in a solution by selecting values for the duplicating genes from the gene space.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3181"><a href="#GA.solve_duplicate_genes_by_space-3181"><span class="linenos">3181</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3182"><a href="#GA.solve_duplicate_genes_by_space-3182"><span class="linenos">3182</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3183"><a href="#GA.solve_duplicate_genes_by_space-3183"><span class="linenos">3183</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3184"><a href="#GA.solve_duplicate_genes_by_space-3184"><span class="linenos">3184</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3185"><a href="#GA.solve_duplicate_genes_by_space-3185"><span class="linenos">3185</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3186"><a href="#GA.solve_duplicate_genes_by_space-3186"><span class="linenos">3186</span></a><span class="sd">        Returns:</span>
</span><span id="GA.solve_duplicate_genes_by_space-3187"><a href="#GA.solve_duplicate_genes_by_space-3187"><span class="linenos">3187</span></a><span class="sd">            new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3188"><a href="#GA.solve_duplicate_genes_by_space-3188"><span class="linenos">3188</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3189"><a href="#GA.solve_duplicate_genes_by_space-3189"><span class="linenos">3189</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3190"><a href="#GA.solve_duplicate_genes_by_space-3190"><span class="linenos">3190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.solve_duplicate_genes_by_space-3191"><a href="#GA.solve_duplicate_genes_by_space-3191"><span class="linenos">3191</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3192"><a href="#GA.solve_duplicate_genes_by_space-3192"><span class="linenos">3192</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.solve_duplicate_genes_by_space-3193"><a href="#GA.solve_duplicate_genes_by_space-3193"><span class="linenos">3193</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3194"><a href="#GA.solve_duplicate_genes_by_space-3194"><span class="linenos">3194</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3195"><a href="#GA.solve_duplicate_genes_by_space-3195"><span class="linenos">3195</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3196"><a href="#GA.solve_duplicate_genes_by_space-3196"><span class="linenos">3196</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3197"><a href="#GA.solve_duplicate_genes_by_space-3197"><span class="linenos">3197</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3198"><a href="#GA.solve_duplicate_genes_by_space-3198"><span class="linenos">3198</span></a>        <span class="c1"># First try to solve the duplicates.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3199"><a href="#GA.solve_duplicate_genes_by_space-3199"><span class="linenos">3199</span></a>        <span class="c1"># For a solution like [3 2 0 0], the indices of the 2 duplicating genes are 2 and 3.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3200"><a href="#GA.solve_duplicate_genes_by_space-3200"><span class="linenos">3200</span></a>        <span class="c1"># The next call to the find_unique_value() method tries to change the value of the gene with index 3 to solve the duplicate.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3201"><a href="#GA.solve_duplicate_genes_by_space-3201"><span class="linenos">3201</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space-3202"><a href="#GA.solve_duplicate_genes_by_space-3202"><span class="linenos">3202</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_by_space-3203"><a href="#GA.solve_duplicate_genes_by_space-3203"><span class="linenos">3203</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3204"><a href="#GA.solve_duplicate_genes_by_space-3204"><span class="linenos">3204</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3205"><a href="#GA.solve_duplicate_genes_by_space-3205"><span class="linenos">3205</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3206"><a href="#GA.solve_duplicate_genes_by_space-3206"><span class="linenos">3206</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3207"><a href="#GA.solve_duplicate_genes_by_space-3207"><span class="linenos">3207</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3208"><a href="#GA.solve_duplicate_genes_by_space-3208"><span class="linenos">3208</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space-3209"><a href="#GA.solve_duplicate_genes_by_space-3209"><span class="linenos">3209</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3210"><a href="#GA.solve_duplicate_genes_by_space-3210"><span class="linenos">3210</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3211"><a href="#GA.solve_duplicate_genes_by_space-3211"><span class="linenos">3211</span></a>        <span class="c1"># Do another try if there exist duplicate genes.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3212"><a href="#GA.solve_duplicate_genes_by_space-3212"><span class="linenos">3212</span></a>        <span class="c1"># If there are no possible values for the gene 3 with index 3 to solve the duplicate, try to change the value of the other gene with index 2.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3213"><a href="#GA.solve_duplicate_genes_by_space-3213"><span class="linenos">3213</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space-3214"><a href="#GA.solve_duplicate_genes_by_space-3214"><span class="linenos">3214</span></a>            <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">new_solution</span> <span class="o">==</span> <span class="n">new_solution</span><span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_by_space-3215"><a href="#GA.solve_duplicate_genes_by_space-3215"><span class="linenos">3215</span></a>                <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]])</span>
</span><span id="GA.solve_duplicate_genes_by_space-3216"><a href="#GA.solve_duplicate_genes_by_space-3216"><span class="linenos">3216</span></a>            <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_genes_by_space</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_by_space-3217"><a href="#GA.solve_duplicate_genes_by_space-3217"><span class="linenos">3217</span></a>                <span class="n">new_solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3218"><a href="#GA.solve_duplicate_genes_by_space-3218"><span class="linenos">3218</span></a>                <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3219"><a href="#GA.solve_duplicate_genes_by_space-3219"><span class="linenos">3219</span></a>                <span class="n">not_unique_indices</span><span class="o">=</span><span class="n">not_unique_indices</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3220"><a href="#GA.solve_duplicate_genes_by_space-3220"><span class="linenos">3220</span></a>                <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space-3221"><a href="#GA.solve_duplicate_genes_by_space-3221"><span class="linenos">3221</span></a>                <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3222"><a href="#GA.solve_duplicate_genes_by_space-3222"><span class="linenos">3222</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space-3223"><a href="#GA.solve_duplicate_genes_by_space-3223"><span class="linenos">3223</span></a>            <span class="c1"># If there exist duplicate genes, then changing either of the 2 duplicating genes (with indices 2 and 3) will not solve the problem.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3224"><a href="#GA.solve_duplicate_genes_by_space-3224"><span class="linenos">3224</span></a>            <span class="c1"># This problem can be solved by randomly changing one of the non-duplicating genes that may make a room for a unique value in one the 2 duplicating genes.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3225"><a href="#GA.solve_duplicate_genes_by_space-3225"><span class="linenos">3225</span></a>            <span class="c1"># For example, if gene_space=[[3, 0, 1], [4, 1, 2], [0, 2], [3, 2, 0]] and the solution is [3 2 0 0], then the values of the last 2 genes duplicate.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3226"><a href="#GA.solve_duplicate_genes_by_space-3226"><span class="linenos">3226</span></a>            <span class="c1"># There are no possible changes in the last 2 genes to solve the problem. But it could be solved by changing the second gene from 2 to 4.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3227"><a href="#GA.solve_duplicate_genes_by_space-3227"><span class="linenos">3227</span></a>            <span class="c1"># As a result, any of the last 2 genes can take the value 2 and solve the duplicates.</span>
</span><span id="GA.solve_duplicate_genes_by_space-3228"><a href="#GA.solve_duplicate_genes_by_space-3228"><span class="linenos">3228</span></a>            <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space-3229"><a href="#GA.solve_duplicate_genes_by_space-3229"><span class="linenos">3229</span></a>
</span><span id="GA.solve_duplicate_genes_by_space-3230"><a href="#GA.solve_duplicate_genes_by_space-3230"><span class="linenos">3230</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span></pre></div>


            <div class="docstring"><p>Solves the duplicates in a solution by selecting values for the duplicating genes from the gene space.</p>

<p>solution: A solution with duplicate values.
gene_type: Exactly the same as the self.gene_type attribute.
num_trials: Maximum number of trials to change the gene value to solve the duplicates.</p>

<p>Returns:
    new_solution: Solution after trying to solve its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.
    not_unique_indices: Indices of the genes with duplicate values.
    num_unsolved_duplicates: Number of unsolved duplicates.</p>
</div>


                            </div>
                            <div id="GA.solve_duplicate_genes_by_space_OLD" class="classattr">
                                        <input id="GA.solve_duplicate_genes_by_space_OLD-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solve_duplicate_genes_by_space_OLD</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">solution</span>, </span><span class="param"><span class="n">gene_type</span>, </span><span class="param"><span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.solve_duplicate_genes_by_space_OLD-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.solve_duplicate_genes_by_space_OLD"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.solve_duplicate_genes_by_space_OLD-3232"><a href="#GA.solve_duplicate_genes_by_space_OLD-3232"><span class="linenos">3232</span></a>    <span class="k">def</span> <span class="nf">solve_duplicate_genes_by_space_OLD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3233"><a href="#GA.solve_duplicate_genes_by_space_OLD-3233"><span class="linenos">3233</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3234"><a href="#GA.solve_duplicate_genes_by_space_OLD-3234"><span class="linenos">3234</span></a>        <span class="c1"># Just for testing purposes.</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3235"><a href="#GA.solve_duplicate_genes_by_space_OLD-3235"><span class="linenos">3235</span></a>        <span class="c1"># /////////////////////////</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3236"><a href="#GA.solve_duplicate_genes_by_space_OLD-3236"><span class="linenos">3236</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3237"><a href="#GA.solve_duplicate_genes_by_space_OLD-3237"><span class="linenos">3237</span></a>        <span class="n">new_solution</span> <span class="o">=</span> <span class="n">solution</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3238"><a href="#GA.solve_duplicate_genes_by_space_OLD-3238"><span class="linenos">3238</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3239"><a href="#GA.solve_duplicate_genes_by_space_OLD-3239"><span class="linenos">3239</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3240"><a href="#GA.solve_duplicate_genes_by_space_OLD-3240"><span class="linenos">3240</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3241"><a href="#GA.solve_duplicate_genes_by_space_OLD-3241"><span class="linenos">3241</span></a>        <span class="c1"># print(&quot;not_unique_indices OUTSIDE&quot;, not_unique_indices)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3242"><a href="#GA.solve_duplicate_genes_by_space_OLD-3242"><span class="linenos">3242</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3243"><a href="#GA.solve_duplicate_genes_by_space_OLD-3243"><span class="linenos">3243</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3244"><a href="#GA.solve_duplicate_genes_by_space_OLD-3244"><span class="linenos">3244</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_unique_indices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3245"><a href="#GA.solve_duplicate_genes_by_space_OLD-3245"><span class="linenos">3245</span></a>            <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3246"><a href="#GA.solve_duplicate_genes_by_space_OLD-3246"><span class="linenos">3246</span></a>                <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3247"><a href="#GA.solve_duplicate_genes_by_space_OLD-3247"><span class="linenos">3247</span></a>                    <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3248"><a href="#GA.solve_duplicate_genes_by_space_OLD-3248"><span class="linenos">3248</span></a>                                                         <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3249"><a href="#GA.solve_duplicate_genes_by_space_OLD-3249"><span class="linenos">3249</span></a>                                                         <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3250"><a href="#GA.solve_duplicate_genes_by_space_OLD-3250"><span class="linenos">3250</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3251"><a href="#GA.solve_duplicate_genes_by_space_OLD-3251"><span class="linenos">3251</span></a>                    <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3252"><a href="#GA.solve_duplicate_genes_by_space_OLD-3252"><span class="linenos">3252</span></a>                        <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3253"><a href="#GA.solve_duplicate_genes_by_space_OLD-3253"><span class="linenos">3253</span></a>                        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3254"><a href="#GA.solve_duplicate_genes_by_space_OLD-3254"><span class="linenos">3254</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3255"><a href="#GA.solve_duplicate_genes_by_space_OLD-3255"><span class="linenos">3255</span></a>                            <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3256"><a href="#GA.solve_duplicate_genes_by_space_OLD-3256"><span class="linenos">3256</span></a>                                <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">))</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3257"><a href="#GA.solve_duplicate_genes_by_space_OLD-3257"><span class="linenos">3257</span></a>                    <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3258"><a href="#GA.solve_duplicate_genes_by_space_OLD-3258"><span class="linenos">3258</span></a>                        <span class="k">continue</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3259"><a href="#GA.solve_duplicate_genes_by_space_OLD-3259"><span class="linenos">3259</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3260"><a href="#GA.solve_duplicate_genes_by_space_OLD-3260"><span class="linenos">3260</span></a>                        <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3261"><a href="#GA.solve_duplicate_genes_by_space_OLD-3261"><span class="linenos">3261</span></a>                        <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3262"><a href="#GA.solve_duplicate_genes_by_space_OLD-3262"><span class="linenos">3262</span></a>                        <span class="k">break</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3263"><a href="#GA.solve_duplicate_genes_by_space_OLD-3263"><span class="linenos">3263</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3264"><a href="#GA.solve_duplicate_genes_by_space_OLD-3264"><span class="linenos">3264</span></a>                <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3265"><a href="#GA.solve_duplicate_genes_by_space_OLD-3265"><span class="linenos">3265</span></a>                <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3266"><a href="#GA.solve_duplicate_genes_by_space_OLD-3266"><span class="linenos">3266</span></a>                <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3267"><a href="#GA.solve_duplicate_genes_by_space_OLD-3267"><span class="linenos">3267</span></a>                <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3268"><a href="#GA.solve_duplicate_genes_by_space_OLD-3268"><span class="linenos">3268</span></a>
</span><span id="GA.solve_duplicate_genes_by_space_OLD-3269"><a href="#GA.solve_duplicate_genes_by_space_OLD-3269"><span class="linenos">3269</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span></pre></div>


    

                            </div>
                            <div id="GA.unique_int_gene_from_range" class="classattr">
                                        <input id="GA.unique_int_gene_from_range-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unique_int_gene_from_range</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">solution</span>,</span><span class="param">	<span class="n">gene_index</span>,</span><span class="param">	<span class="n">min_val</span>,</span><span class="param">	<span class="n">max_val</span>,</span><span class="param">	<span class="n">mutation_by_replacement</span>,</span><span class="param">	<span class="n">gene_type</span>,</span><span class="param">	<span class="n">step</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.unique_int_gene_from_range-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.unique_int_gene_from_range"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.unique_int_gene_from_range-3271"><a href="#GA.unique_int_gene_from_range-3271"><span class="linenos">3271</span></a>    <span class="k">def</span> <span class="nf">unique_int_gene_from_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_index</span><span class="p">,</span> <span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">mutation_by_replacement</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.unique_int_gene_from_range-3272"><a href="#GA.unique_int_gene_from_range-3272"><span class="linenos">3272</span></a>                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.unique_int_gene_from_range-3273"><a href="#GA.unique_int_gene_from_range-3273"><span class="linenos">3273</span></a>
</span><span id="GA.unique_int_gene_from_range-3274"><a href="#GA.unique_int_gene_from_range-3274"><span class="linenos">3274</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.unique_int_gene_from_range-3275"><a href="#GA.unique_int_gene_from_range-3275"><span class="linenos">3275</span></a><span class="sd">        Finds a unique integer value for the gene.</span>
</span><span id="GA.unique_int_gene_from_range-3276"><a href="#GA.unique_int_gene_from_range-3276"><span class="linenos">3276</span></a>
</span><span id="GA.unique_int_gene_from_range-3277"><a href="#GA.unique_int_gene_from_range-3277"><span class="linenos">3277</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA.unique_int_gene_from_range-3278"><a href="#GA.unique_int_gene_from_range-3278"><span class="linenos">3278</span></a><span class="sd">        gene_index: Index of the gene to find a unique value.</span>
</span><span id="GA.unique_int_gene_from_range-3279"><a href="#GA.unique_int_gene_from_range-3279"><span class="linenos">3279</span></a><span class="sd">        min_val: Minimum value of the range to sample a number randomly.</span>
</span><span id="GA.unique_int_gene_from_range-3280"><a href="#GA.unique_int_gene_from_range-3280"><span class="linenos">3280</span></a><span class="sd">        max_val: Maximum value of the range to sample a number randomly.</span>
</span><span id="GA.unique_int_gene_from_range-3281"><a href="#GA.unique_int_gene_from_range-3281"><span class="linenos">3281</span></a><span class="sd">        mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.</span>
</span><span id="GA.unique_int_gene_from_range-3282"><a href="#GA.unique_int_gene_from_range-3282"><span class="linenos">3282</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA.unique_int_gene_from_range-3283"><a href="#GA.unique_int_gene_from_range-3283"><span class="linenos">3283</span></a>
</span><span id="GA.unique_int_gene_from_range-3284"><a href="#GA.unique_int_gene_from_range-3284"><span class="linenos">3284</span></a><span class="sd">        Returns:</span>
</span><span id="GA.unique_int_gene_from_range-3285"><a href="#GA.unique_int_gene_from_range-3285"><span class="linenos">3285</span></a><span class="sd">            selected_value: The new value of the gene. It may be identical to the original gene value in case there are no possible unique values for the gene.</span>
</span><span id="GA.unique_int_gene_from_range-3286"><a href="#GA.unique_int_gene_from_range-3286"><span class="linenos">3286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.unique_int_gene_from_range-3287"><a href="#GA.unique_int_gene_from_range-3287"><span class="linenos">3287</span></a>
</span><span id="GA.unique_int_gene_from_range-3288"><a href="#GA.unique_int_gene_from_range-3288"><span class="linenos">3288</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3289"><a href="#GA.unique_int_gene_from_range-3289"><span class="linenos">3289</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3290"><a href="#GA.unique_int_gene_from_range-3290"><span class="linenos">3290</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3291"><a href="#GA.unique_int_gene_from_range-3291"><span class="linenos">3291</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3292"><a href="#GA.unique_int_gene_from_range-3292"><span class="linenos">3292</span></a>                <span class="c1"># For non-integer steps, the numpy.arange() function returns zeros id the dtype parameter is set to an integer data type. So, this returns zeros if step is non-integer and dtype is set to an int data type: numpy.arange(min_val, max_val, step, dtype=gene_type[0])</span>
</span><span id="GA.unique_int_gene_from_range-3293"><a href="#GA.unique_int_gene_from_range-3293"><span class="linenos">3293</span></a>                <span class="c1"># To solve this issue, the data type casting will not be handled inside numpy.arange(). The range is generated by numpy.arange() and then the data type is converted using the numpy.asarray() function.</span>
</span><span id="GA.unique_int_gene_from_range-3294"><a href="#GA.unique_int_gene_from_range-3294"><span class="linenos">3294</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3295"><a href="#GA.unique_int_gene_from_range-3295"><span class="linenos">3295</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3296"><a href="#GA.unique_int_gene_from_range-3296"><span class="linenos">3296</span></a>            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3297"><a href="#GA.unique_int_gene_from_range-3297"><span class="linenos">3297</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3298"><a href="#GA.unique_int_gene_from_range-3298"><span class="linenos">3298</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3299"><a href="#GA.unique_int_gene_from_range-3299"><span class="linenos">3299</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">,</span> <span class="n">step</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3300"><a href="#GA.unique_int_gene_from_range-3300"><span class="linenos">3300</span></a>
</span><span id="GA.unique_int_gene_from_range-3301"><a href="#GA.unique_int_gene_from_range-3301"><span class="linenos">3301</span></a>        <span class="k">if</span> <span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3302"><a href="#GA.unique_int_gene_from_range-3302"><span class="linenos">3302</span></a>            <span class="k">pass</span>
</span><span id="GA.unique_int_gene_from_range-3303"><a href="#GA.unique_int_gene_from_range-3303"><span class="linenos">3303</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3304"><a href="#GA.unique_int_gene_from_range-3304"><span class="linenos">3304</span></a>            <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">all_gene_values</span> <span class="o">+</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="GA.unique_int_gene_from_range-3305"><a href="#GA.unique_int_gene_from_range-3305"><span class="linenos">3305</span></a>
</span><span id="GA.unique_int_gene_from_range-3306"><a href="#GA.unique_int_gene_from_range-3306"><span class="linenos">3306</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3307"><a href="#GA.unique_int_gene_from_range-3307"><span class="linenos">3307</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3308"><a href="#GA.unique_int_gene_from_range-3308"><span class="linenos">3308</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="GA.unique_int_gene_from_range-3309"><a href="#GA.unique_int_gene_from_range-3309"><span class="linenos">3309</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3310"><a href="#GA.unique_int_gene_from_range-3310"><span class="linenos">3310</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3311"><a href="#GA.unique_int_gene_from_range-3311"><span class="linenos">3311</span></a>                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="ow">is</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3312"><a href="#GA.unique_int_gene_from_range-3312"><span class="linenos">3312</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3313"><a href="#GA.unique_int_gene_from_range-3313"><span class="linenos">3313</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3314"><a href="#GA.unique_int_gene_from_range-3314"><span class="linenos">3314</span></a>                    <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="GA.unique_int_gene_from_range-3315"><a href="#GA.unique_int_gene_from_range-3315"><span class="linenos">3315</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3316"><a href="#GA.unique_int_gene_from_range-3316"><span class="linenos">3316</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3317"><a href="#GA.unique_int_gene_from_range-3317"><span class="linenos">3317</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">),</span>
</span><span id="GA.unique_int_gene_from_range-3318"><a href="#GA.unique_int_gene_from_range-3318"><span class="linenos">3318</span></a>                                              <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.unique_int_gene_from_range-3319"><a href="#GA.unique_int_gene_from_range-3319"><span class="linenos">3319</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3320"><a href="#GA.unique_int_gene_from_range-3320"><span class="linenos">3320</span></a>                <span class="n">all_gene_values</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_index</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">all_gene_values</span><span class="p">)</span>
</span><span id="GA.unique_int_gene_from_range-3321"><a href="#GA.unique_int_gene_from_range-3321"><span class="linenos">3321</span></a>
</span><span id="GA.unique_int_gene_from_range-3322"><a href="#GA.unique_int_gene_from_range-3322"><span class="linenos">3322</span></a>        <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">all_gene_values</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA.unique_int_gene_from_range-3323"><a href="#GA.unique_int_gene_from_range-3323"><span class="linenos">3323</span></a>
</span><span id="GA.unique_int_gene_from_range-3324"><a href="#GA.unique_int_gene_from_range-3324"><span class="linenos">3324</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3325"><a href="#GA.unique_int_gene_from_range-3325"><span class="linenos">3325</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.unique_int_gene_from_range-3326"><a href="#GA.unique_int_gene_from_range-3326"><span class="linenos">3326</span></a>                <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but there is no enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA.unique_int_gene_from_range-3327"><a href="#GA.unique_int_gene_from_range-3327"><span class="linenos">3327</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_index</span><span class="p">]</span>
</span><span id="GA.unique_int_gene_from_range-3328"><a href="#GA.unique_int_gene_from_range-3328"><span class="linenos">3328</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_int_gene_from_range-3329"><a href="#GA.unique_int_gene_from_range-3329"><span class="linenos">3329</span></a>            <span class="n">selected_value</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.unique_int_gene_from_range-3330"><a href="#GA.unique_int_gene_from_range-3330"><span class="linenos">3330</span></a>
</span><span id="GA.unique_int_gene_from_range-3331"><a href="#GA.unique_int_gene_from_range-3331"><span class="linenos">3331</span></a>        <span class="c1"># if self.gene_type_single == True:</span>
</span><span id="GA.unique_int_gene_from_range-3332"><a href="#GA.unique_int_gene_from_range-3332"><span class="linenos">3332</span></a>        <span class="c1">#    selected_value = gene_type[0](selected_value)</span>
</span><span id="GA.unique_int_gene_from_range-3333"><a href="#GA.unique_int_gene_from_range-3333"><span class="linenos">3333</span></a>        <span class="c1"># else:</span>
</span><span id="GA.unique_int_gene_from_range-3334"><a href="#GA.unique_int_gene_from_range-3334"><span class="linenos">3334</span></a>        <span class="c1">#    selected_value = gene_type[gene_index][0](selected_value)</span>
</span><span id="GA.unique_int_gene_from_range-3335"><a href="#GA.unique_int_gene_from_range-3335"><span class="linenos">3335</span></a>
</span><span id="GA.unique_int_gene_from_range-3336"><a href="#GA.unique_int_gene_from_range-3336"><span class="linenos">3336</span></a>        <span class="k">return</span> <span class="n">selected_value</span>
</span></pre></div>


            <div class="docstring"><p>Finds a unique integer value for the gene.</p>

<p>solution: A solution with duplicate values.
gene_index: Index of the gene to find a unique value.
min_val: Minimum value of the range to sample a number randomly.
max_val: Maximum value of the range to sample a number randomly.
mutation_by_replacement: Identical to the self.mutation_by_replacement attribute.
gene_type: Exactly the same as the self.gene_type attribute.</p>

<p>Returns:
    selected_value: The new value of the gene. It may be identical to the original gene value in case there are no possible unique values for the gene.</p>
</div>


                            </div>
                            <div id="GA.unique_genes_by_space" class="classattr">
                                        <input id="GA.unique_genes_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unique_genes_by_space</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">new_solution</span>,</span><span class="param">	<span class="n">gene_type</span>,</span><span class="param">	<span class="n">not_unique_indices</span>,</span><span class="param">	<span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span>,</span><span class="param">	<span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.unique_genes_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.unique_genes_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.unique_genes_by_space-3338"><a href="#GA.unique_genes_by_space-3338"><span class="linenos">3338</span></a>    <span class="k">def</span> <span class="nf">unique_genes_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_trials</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="GA.unique_genes_by_space-3339"><a href="#GA.unique_genes_by_space-3339"><span class="linenos">3339</span></a>                              <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA.unique_genes_by_space-3340"><a href="#GA.unique_genes_by_space-3340"><span class="linenos">3340</span></a>
</span><span id="GA.unique_genes_by_space-3341"><a href="#GA.unique_genes_by_space-3341"><span class="linenos">3341</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.unique_genes_by_space-3342"><a href="#GA.unique_genes_by_space-3342"><span class="linenos">3342</span></a><span class="sd">        Loops through all the duplicating genes to find unique values that from their gene spaces to solve the duplicates.</span>
</span><span id="GA.unique_genes_by_space-3343"><a href="#GA.unique_genes_by_space-3343"><span class="linenos">3343</span></a><span class="sd">        For each duplicating gene, a call to the unique_gene_by_space() is made.</span>
</span><span id="GA.unique_genes_by_space-3344"><a href="#GA.unique_genes_by_space-3344"><span class="linenos">3344</span></a>
</span><span id="GA.unique_genes_by_space-3345"><a href="#GA.unique_genes_by_space-3345"><span class="linenos">3345</span></a><span class="sd">        new_solution: A solution with duplicate values.</span>
</span><span id="GA.unique_genes_by_space-3346"><a href="#GA.unique_genes_by_space-3346"><span class="linenos">3346</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA.unique_genes_by_space-3347"><a href="#GA.unique_genes_by_space-3347"><span class="linenos">3347</span></a><span class="sd">        not_unique_indices: Indices with duplicating values.</span>
</span><span id="GA.unique_genes_by_space-3348"><a href="#GA.unique_genes_by_space-3348"><span class="linenos">3348</span></a><span class="sd">        num_trials: Maximum number of trials to change the gene value to solve the duplicates.</span>
</span><span id="GA.unique_genes_by_space-3349"><a href="#GA.unique_genes_by_space-3349"><span class="linenos">3349</span></a>
</span><span id="GA.unique_genes_by_space-3350"><a href="#GA.unique_genes_by_space-3350"><span class="linenos">3350</span></a><span class="sd">        Returns:</span>
</span><span id="GA.unique_genes_by_space-3351"><a href="#GA.unique_genes_by_space-3351"><span class="linenos">3351</span></a><span class="sd">            new_solution: Solution after trying to solve all of its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.</span>
</span><span id="GA.unique_genes_by_space-3352"><a href="#GA.unique_genes_by_space-3352"><span class="linenos">3352</span></a><span class="sd">            not_unique_indices: Indices of the genes with duplicate values.</span>
</span><span id="GA.unique_genes_by_space-3353"><a href="#GA.unique_genes_by_space-3353"><span class="linenos">3353</span></a><span class="sd">            num_unsolved_duplicates: Number of unsolved duplicates.</span>
</span><span id="GA.unique_genes_by_space-3354"><a href="#GA.unique_genes_by_space-3354"><span class="linenos">3354</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.unique_genes_by_space-3355"><a href="#GA.unique_genes_by_space-3355"><span class="linenos">3355</span></a>
</span><span id="GA.unique_genes_by_space-3356"><a href="#GA.unique_genes_by_space-3356"><span class="linenos">3356</span></a>        <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.unique_genes_by_space-3357"><a href="#GA.unique_genes_by_space-3357"><span class="linenos">3357</span></a>        <span class="k">for</span> <span class="n">duplicate_index</span> <span class="ow">in</span> <span class="n">not_unique_indices</span><span class="p">:</span>
</span><span id="GA.unique_genes_by_space-3358"><a href="#GA.unique_genes_by_space-3358"><span class="linenos">3358</span></a>            <span class="k">for</span> <span class="n">trial_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_trials</span><span class="p">):</span>
</span><span id="GA.unique_genes_by_space-3359"><a href="#GA.unique_genes_by_space-3359"><span class="linenos">3359</span></a>                <span class="n">temp_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_gene_by_space</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">new_solution</span><span class="p">,</span>
</span><span id="GA.unique_genes_by_space-3360"><a href="#GA.unique_genes_by_space-3360"><span class="linenos">3360</span></a>                                                     <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span>
</span><span id="GA.unique_genes_by_space-3361"><a href="#GA.unique_genes_by_space-3361"><span class="linenos">3361</span></a>                                                     <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">,</span>
</span><span id="GA.unique_genes_by_space-3362"><a href="#GA.unique_genes_by_space-3362"><span class="linenos">3362</span></a>                                                     <span class="n">build_initial_pop</span><span class="o">=</span><span class="n">build_initial_pop</span><span class="p">)</span>
</span><span id="GA.unique_genes_by_space-3363"><a href="#GA.unique_genes_by_space-3363"><span class="linenos">3363</span></a>
</span><span id="GA.unique_genes_by_space-3364"><a href="#GA.unique_genes_by_space-3364"><span class="linenos">3364</span></a>                <span class="k">if</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span> <span class="ow">and</span> <span class="n">trial_index</span> <span class="o">==</span> <span class="p">(</span><span class="n">num_trials</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="GA.unique_genes_by_space-3365"><a href="#GA.unique_genes_by_space-3365"><span class="linenos">3365</span></a>                    <span class="c1"># print(&quot;temp_val, duplicate_index&quot;, temp_val, duplicate_index, new_solution)</span>
</span><span id="GA.unique_genes_by_space-3366"><a href="#GA.unique_genes_by_space-3366"><span class="linenos">3366</span></a>                    <span class="n">num_unsolved_duplicates</span> <span class="o">=</span> <span class="n">num_unsolved_duplicates</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="GA.unique_genes_by_space-3367"><a href="#GA.unique_genes_by_space-3367"><span class="linenos">3367</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.unique_genes_by_space-3368"><a href="#GA.unique_genes_by_space-3368"><span class="linenos">3368</span></a>                        <span class="s2">&quot;Failed to find a unique value for gene with index </span><span class="si">{gene_idx}</span><span class="s2"> whose value is </span><span class="si">{gene_value}</span><span class="s2">. Consider adding more values in the gene space or use a wider range for initial population or random mutation.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.unique_genes_by_space-3369"><a href="#GA.unique_genes_by_space-3369"><span class="linenos">3369</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">duplicate_index</span><span class="p">,</span> <span class="n">gene_value</span><span class="o">=</span><span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]))</span>
</span><span id="GA.unique_genes_by_space-3370"><a href="#GA.unique_genes_by_space-3370"><span class="linenos">3370</span></a>                <span class="k">elif</span> <span class="n">temp_val</span> <span class="ow">in</span> <span class="n">new_solution</span><span class="p">:</span>
</span><span id="GA.unique_genes_by_space-3371"><a href="#GA.unique_genes_by_space-3371"><span class="linenos">3371</span></a>                    <span class="k">continue</span>
</span><span id="GA.unique_genes_by_space-3372"><a href="#GA.unique_genes_by_space-3372"><span class="linenos">3372</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_genes_by_space-3373"><a href="#GA.unique_genes_by_space-3373"><span class="linenos">3373</span></a>                    <span class="n">new_solution</span><span class="p">[</span><span class="n">duplicate_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_val</span>
</span><span id="GA.unique_genes_by_space-3374"><a href="#GA.unique_genes_by_space-3374"><span class="linenos">3374</span></a>                    <span class="c1"># print(&quot;SOLVED&quot;, duplicate_index)</span>
</span><span id="GA.unique_genes_by_space-3375"><a href="#GA.unique_genes_by_space-3375"><span class="linenos">3375</span></a>                    <span class="k">break</span>
</span><span id="GA.unique_genes_by_space-3376"><a href="#GA.unique_genes_by_space-3376"><span class="linenos">3376</span></a>
</span><span id="GA.unique_genes_by_space-3377"><a href="#GA.unique_genes_by_space-3377"><span class="linenos">3377</span></a>        <span class="c1"># Update the list of duplicate indices after each iteration.</span>
</span><span id="GA.unique_genes_by_space-3378"><a href="#GA.unique_genes_by_space-3378"><span class="linenos">3378</span></a>        <span class="n">_</span><span class="p">,</span> <span class="n">unique_gene_indices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_solution</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.unique_genes_by_space-3379"><a href="#GA.unique_genes_by_space-3379"><span class="linenos">3379</span></a>        <span class="n">not_unique_indices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_solution</span><span class="p">)))</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">unique_gene_indices</span><span class="p">)</span>
</span><span id="GA.unique_genes_by_space-3380"><a href="#GA.unique_genes_by_space-3380"><span class="linenos">3380</span></a>        <span class="c1"># print(&quot;not_unique_indices INSIDE&quot;, not_unique_indices)</span>
</span><span id="GA.unique_genes_by_space-3381"><a href="#GA.unique_genes_by_space-3381"><span class="linenos">3381</span></a>
</span><span id="GA.unique_genes_by_space-3382"><a href="#GA.unique_genes_by_space-3382"><span class="linenos">3382</span></a>        <span class="k">return</span> <span class="n">new_solution</span><span class="p">,</span> <span class="n">not_unique_indices</span><span class="p">,</span> <span class="n">num_unsolved_duplicates</span>
</span></pre></div>


            <div class="docstring"><p>Loops through all the duplicating genes to find unique values that from their gene spaces to solve the duplicates.
For each duplicating gene, a call to the unique_gene_by_space() is made.</p>

<p>new_solution: A solution with duplicate values.
gene_type: Exactly the same as the self.gene_type attribute.
not_unique_indices: Indices with duplicating values.
num_trials: Maximum number of trials to change the gene value to solve the duplicates.</p>

<p>Returns:
    new_solution: Solution after trying to solve all of its duplicates. If no duplicates solved, then it is identical to the passed solution parameter.
    not_unique_indices: Indices of the genes with duplicate values.
    num_unsolved_duplicates: Number of unsolved duplicates.</p>
</div>


                            </div>
                            <div id="GA.unique_gene_by_space" class="classattr">
                                        <input id="GA.unique_gene_by_space-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unique_gene_by_space</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">solution</span>, </span><span class="param"><span class="n">gene_idx</span>, </span><span class="param"><span class="n">gene_type</span>, </span><span class="param"><span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.unique_gene_by_space-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.unique_gene_by_space"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.unique_gene_by_space-3384"><a href="#GA.unique_gene_by_space-3384"><span class="linenos">3384</span></a>    <span class="k">def</span> <span class="nf">unique_gene_by_space</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">,</span> <span class="n">gene_idx</span><span class="p">,</span> <span class="n">gene_type</span><span class="p">,</span> <span class="n">build_initial_pop</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="GA.unique_gene_by_space-3385"><a href="#GA.unique_gene_by_space-3385"><span class="linenos">3385</span></a>
</span><span id="GA.unique_gene_by_space-3386"><a href="#GA.unique_gene_by_space-3386"><span class="linenos">3386</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.unique_gene_by_space-3387"><a href="#GA.unique_gene_by_space-3387"><span class="linenos">3387</span></a><span class="sd">        Returns a unique gene value for a single gene based on its value space to solve the duplicates.</span>
</span><span id="GA.unique_gene_by_space-3388"><a href="#GA.unique_gene_by_space-3388"><span class="linenos">3388</span></a>
</span><span id="GA.unique_gene_by_space-3389"><a href="#GA.unique_gene_by_space-3389"><span class="linenos">3389</span></a><span class="sd">        solution: A solution with duplicate values.</span>
</span><span id="GA.unique_gene_by_space-3390"><a href="#GA.unique_gene_by_space-3390"><span class="linenos">3390</span></a><span class="sd">        gene_idx: The index of the gene that duplicates its value with another gene.</span>
</span><span id="GA.unique_gene_by_space-3391"><a href="#GA.unique_gene_by_space-3391"><span class="linenos">3391</span></a><span class="sd">        gene_type: Exactly the same as the self.gene_type attribute.</span>
</span><span id="GA.unique_gene_by_space-3392"><a href="#GA.unique_gene_by_space-3392"><span class="linenos">3392</span></a>
</span><span id="GA.unique_gene_by_space-3393"><a href="#GA.unique_gene_by_space-3393"><span class="linenos">3393</span></a><span class="sd">        Returns:</span>
</span><span id="GA.unique_gene_by_space-3394"><a href="#GA.unique_gene_by_space-3394"><span class="linenos">3394</span></a><span class="sd">            A unique value, if exists, for the gene.</span>
</span><span id="GA.unique_gene_by_space-3395"><a href="#GA.unique_gene_by_space-3395"><span class="linenos">3395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.unique_gene_by_space-3396"><a href="#GA.unique_gene_by_space-3396"><span class="linenos">3396</span></a>
</span><span id="GA.unique_gene_by_space-3397"><a href="#GA.unique_gene_by_space-3397"><span class="linenos">3397</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space_nested</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3398"><a href="#GA.unique_gene_by_space-3398"><span class="linenos">3398</span></a>            <span class="c1"># Returning the current gene space from the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.unique_gene_by_space-3399"><a href="#GA.unique_gene_by_space-3399"><span class="linenos">3399</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
</span><span id="GA.unique_gene_by_space-3400"><a href="#GA.unique_gene_by_space-3400"><span class="linenos">3400</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.unique_gene_by_space-3401"><a href="#GA.unique_gene_by_space-3401"><span class="linenos">3401</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3402"><a href="#GA.unique_gene_by_space-3402"><span class="linenos">3402</span></a>                <span class="n">curr_gene_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.unique_gene_by_space-3403"><a href="#GA.unique_gene_by_space-3403"><span class="linenos">3403</span></a>
</span><span id="GA.unique_gene_by_space-3404"><a href="#GA.unique_gene_by_space-3404"><span class="linenos">3404</span></a>            <span class="c1"># If the gene space has only a single value, use it as the new gene value.</span>
</span><span id="GA.unique_gene_by_space-3405"><a href="#GA.unique_gene_by_space-3405"><span class="linenos">3405</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_float_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3406"><a href="#GA.unique_gene_by_space-3406"><span class="linenos">3406</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span>
</span><span id="GA.unique_gene_by_space-3407"><a href="#GA.unique_gene_by_space-3407"><span class="linenos">3407</span></a>                <span class="c1"># If the gene space is None, apply mutation by adding a random value between the range defined by the 2 parameters &#39;random_mutation_min_val&#39; and &#39;random_mutation_max_val&#39;.</span>
</span><span id="GA.unique_gene_by_space-3408"><a href="#GA.unique_gene_by_space-3408"><span class="linenos">3408</span></a>            <span class="k">elif</span> <span class="n">curr_gene_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3409"><a href="#GA.unique_gene_by_space-3409"><span class="linenos">3409</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3410"><a href="#GA.unique_gene_by_space-3410"><span class="linenos">3410</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3411"><a href="#GA.unique_gene_by_space-3411"><span class="linenos">3411</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3412"><a href="#GA.unique_gene_by_space-3412"><span class="linenos">3412</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3413"><a href="#GA.unique_gene_by_space-3413"><span class="linenos">3413</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3414"><a href="#GA.unique_gene_by_space-3414"><span class="linenos">3414</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3415"><a href="#GA.unique_gene_by_space-3415"><span class="linenos">3415</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3416"><a href="#GA.unique_gene_by_space-3416"><span class="linenos">3416</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3417"><a href="#GA.unique_gene_by_space-3417"><span class="linenos">3417</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3418"><a href="#GA.unique_gene_by_space-3418"><span class="linenos">3418</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3419"><a href="#GA.unique_gene_by_space-3419"><span class="linenos">3419</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3420"><a href="#GA.unique_gene_by_space-3420"><span class="linenos">3420</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3421"><a href="#GA.unique_gene_by_space-3421"><span class="linenos">3421</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3422"><a href="#GA.unique_gene_by_space-3422"><span class="linenos">3422</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3423"><a href="#GA.unique_gene_by_space-3423"><span class="linenos">3423</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3424"><a href="#GA.unique_gene_by_space-3424"><span class="linenos">3424</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="GA.unique_gene_by_space-3425"><a href="#GA.unique_gene_by_space-3425"><span class="linenos">3425</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3426"><a href="#GA.unique_gene_by_space-3426"><span class="linenos">3426</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3427"><a href="#GA.unique_gene_by_space-3427"><span class="linenos">3427</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3428"><a href="#GA.unique_gene_by_space-3428"><span class="linenos">3428</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3429"><a href="#GA.unique_gene_by_space-3429"><span class="linenos">3429</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3430"><a href="#GA.unique_gene_by_space-3430"><span class="linenos">3430</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3431"><a href="#GA.unique_gene_by_space-3431"><span class="linenos">3431</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3432"><a href="#GA.unique_gene_by_space-3432"><span class="linenos">3432</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3433"><a href="#GA.unique_gene_by_space-3433"><span class="linenos">3433</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3434"><a href="#GA.unique_gene_by_space-3434"><span class="linenos">3434</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3435"><a href="#GA.unique_gene_by_space-3435"><span class="linenos">3435</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3436"><a href="#GA.unique_gene_by_space-3436"><span class="linenos">3436</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3437"><a href="#GA.unique_gene_by_space-3437"><span class="linenos">3437</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3438"><a href="#GA.unique_gene_by_space-3438"><span class="linenos">3438</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3439"><a href="#GA.unique_gene_by_space-3439"><span class="linenos">3439</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3440"><a href="#GA.unique_gene_by_space-3440"><span class="linenos">3440</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3441"><a href="#GA.unique_gene_by_space-3441"><span class="linenos">3441</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3442"><a href="#GA.unique_gene_by_space-3442"><span class="linenos">3442</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3443"><a href="#GA.unique_gene_by_space-3443"><span class="linenos">3443</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3444"><a href="#GA.unique_gene_by_space-3444"><span class="linenos">3444</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3445"><a href="#GA.unique_gene_by_space-3445"><span class="linenos">3445</span></a>                                                                               <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3446"><a href="#GA.unique_gene_by_space-3446"><span class="linenos">3446</span></a>                                                                               <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3447"><a href="#GA.unique_gene_by_space-3447"><span class="linenos">3447</span></a>                                                                               <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3448"><a href="#GA.unique_gene_by_space-3448"><span class="linenos">3448</span></a>                                                                               <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3449"><a href="#GA.unique_gene_by_space-3449"><span class="linenos">3449</span></a>                                                                               <span class="c1"># self.mutation_by_replacement,</span>
</span><span id="GA.unique_gene_by_space-3450"><a href="#GA.unique_gene_by_space-3450"><span class="linenos">3450</span></a>                                                                               <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3451"><a href="#GA.unique_gene_by_space-3451"><span class="linenos">3451</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3452"><a href="#GA.unique_gene_by_space-3452"><span class="linenos">3452</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3453"><a href="#GA.unique_gene_by_space-3453"><span class="linenos">3453</span></a>                                                                <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3454"><a href="#GA.unique_gene_by_space-3454"><span class="linenos">3454</span></a>                                                                <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3455"><a href="#GA.unique_gene_by_space-3455"><span class="linenos">3455</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3456"><a href="#GA.unique_gene_by_space-3456"><span class="linenos">3456</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3457"><a href="#GA.unique_gene_by_space-3457"><span class="linenos">3457</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3458"><a href="#GA.unique_gene_by_space-3458"><span class="linenos">3458</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3459"><a href="#GA.unique_gene_by_space-3459"><span class="linenos">3459</span></a>
</span><span id="GA.unique_gene_by_space-3460"><a href="#GA.unique_gene_by_space-3460"><span class="linenos">3460</span></a>            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3461"><a href="#GA.unique_gene_by_space-3461"><span class="linenos">3461</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3462"><a href="#GA.unique_gene_by_space-3462"><span class="linenos">3462</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3463"><a href="#GA.unique_gene_by_space-3463"><span class="linenos">3463</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3464"><a href="#GA.unique_gene_by_space-3464"><span class="linenos">3464</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3465"><a href="#GA.unique_gene_by_space-3465"><span class="linenos">3465</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3466"><a href="#GA.unique_gene_by_space-3466"><span class="linenos">3466</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3467"><a href="#GA.unique_gene_by_space-3467"><span class="linenos">3467</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3468"><a href="#GA.unique_gene_by_space-3468"><span class="linenos">3468</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3469"><a href="#GA.unique_gene_by_space-3469"><span class="linenos">3469</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3470"><a href="#GA.unique_gene_by_space-3470"><span class="linenos">3470</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3471"><a href="#GA.unique_gene_by_space-3471"><span class="linenos">3471</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3472"><a href="#GA.unique_gene_by_space-3472"><span class="linenos">3472</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3473"><a href="#GA.unique_gene_by_space-3473"><span class="linenos">3473</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3474"><a href="#GA.unique_gene_by_space-3474"><span class="linenos">3474</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3475"><a href="#GA.unique_gene_by_space-3475"><span class="linenos">3475</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3476"><a href="#GA.unique_gene_by_space-3476"><span class="linenos">3476</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3477"><a href="#GA.unique_gene_by_space-3477"><span class="linenos">3477</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3478"><a href="#GA.unique_gene_by_space-3478"><span class="linenos">3478</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3479"><a href="#GA.unique_gene_by_space-3479"><span class="linenos">3479</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3480"><a href="#GA.unique_gene_by_space-3480"><span class="linenos">3480</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3481"><a href="#GA.unique_gene_by_space-3481"><span class="linenos">3481</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3482"><a href="#GA.unique_gene_by_space-3482"><span class="linenos">3482</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3483"><a href="#GA.unique_gene_by_space-3483"><span class="linenos">3483</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3484"><a href="#GA.unique_gene_by_space-3484"><span class="linenos">3484</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3485"><a href="#GA.unique_gene_by_space-3485"><span class="linenos">3485</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3486"><a href="#GA.unique_gene_by_space-3486"><span class="linenos">3486</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3487"><a href="#GA.unique_gene_by_space-3487"><span class="linenos">3487</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3488"><a href="#GA.unique_gene_by_space-3488"><span class="linenos">3488</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3489"><a href="#GA.unique_gene_by_space-3489"><span class="linenos">3489</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3490"><a href="#GA.unique_gene_by_space-3490"><span class="linenos">3490</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3491"><a href="#GA.unique_gene_by_space-3491"><span class="linenos">3491</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3492"><a href="#GA.unique_gene_by_space-3492"><span class="linenos">3492</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3493"><a href="#GA.unique_gene_by_space-3493"><span class="linenos">3493</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3494"><a href="#GA.unique_gene_by_space-3494"><span class="linenos">3494</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3495"><a href="#GA.unique_gene_by_space-3495"><span class="linenos">3495</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3496"><a href="#GA.unique_gene_by_space-3496"><span class="linenos">3496</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3497"><a href="#GA.unique_gene_by_space-3497"><span class="linenos">3497</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3498"><a href="#GA.unique_gene_by_space-3498"><span class="linenos">3498</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3499"><a href="#GA.unique_gene_by_space-3499"><span class="linenos">3499</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3500"><a href="#GA.unique_gene_by_space-3500"><span class="linenos">3500</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3501"><a href="#GA.unique_gene_by_space-3501"><span class="linenos">3501</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.unique_gene_by_space-3502"><a href="#GA.unique_gene_by_space-3502"><span class="linenos">3502</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3503"><a href="#GA.unique_gene_by_space-3503"><span class="linenos">3503</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3504"><a href="#GA.unique_gene_by_space-3504"><span class="linenos">3504</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3505"><a href="#GA.unique_gene_by_space-3505"><span class="linenos">3505</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3506"><a href="#GA.unique_gene_by_space-3506"><span class="linenos">3506</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3507"><a href="#GA.unique_gene_by_space-3507"><span class="linenos">3507</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3508"><a href="#GA.unique_gene_by_space-3508"><span class="linenos">3508</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3509"><a href="#GA.unique_gene_by_space-3509"><span class="linenos">3509</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3510"><a href="#GA.unique_gene_by_space-3510"><span class="linenos">3510</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3511"><a href="#GA.unique_gene_by_space-3511"><span class="linenos">3511</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3512"><a href="#GA.unique_gene_by_space-3512"><span class="linenos">3512</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3513"><a href="#GA.unique_gene_by_space-3513"><span class="linenos">3513</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3514"><a href="#GA.unique_gene_by_space-3514"><span class="linenos">3514</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3515"><a href="#GA.unique_gene_by_space-3515"><span class="linenos">3515</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3516"><a href="#GA.unique_gene_by_space-3516"><span class="linenos">3516</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3517"><a href="#GA.unique_gene_by_space-3517"><span class="linenos">3517</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3518"><a href="#GA.unique_gene_by_space-3518"><span class="linenos">3518</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3519"><a href="#GA.unique_gene_by_space-3519"><span class="linenos">3519</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3520"><a href="#GA.unique_gene_by_space-3520"><span class="linenos">3520</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3521"><a href="#GA.unique_gene_by_space-3521"><span class="linenos">3521</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3522"><a href="#GA.unique_gene_by_space-3522"><span class="linenos">3522</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3523"><a href="#GA.unique_gene_by_space-3523"><span class="linenos">3523</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3524"><a href="#GA.unique_gene_by_space-3524"><span class="linenos">3524</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3525"><a href="#GA.unique_gene_by_space-3525"><span class="linenos">3525</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3526"><a href="#GA.unique_gene_by_space-3526"><span class="linenos">3526</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3527"><a href="#GA.unique_gene_by_space-3527"><span class="linenos">3527</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3528"><a href="#GA.unique_gene_by_space-3528"><span class="linenos">3528</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3529"><a href="#GA.unique_gene_by_space-3529"><span class="linenos">3529</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3530"><a href="#GA.unique_gene_by_space-3530"><span class="linenos">3530</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3531"><a href="#GA.unique_gene_by_space-3531"><span class="linenos">3531</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3532"><a href="#GA.unique_gene_by_space-3532"><span class="linenos">3532</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3533"><a href="#GA.unique_gene_by_space-3533"><span class="linenos">3533</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3534"><a href="#GA.unique_gene_by_space-3534"><span class="linenos">3534</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3535"><a href="#GA.unique_gene_by_space-3535"><span class="linenos">3535</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3536"><a href="#GA.unique_gene_by_space-3536"><span class="linenos">3536</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3537"><a href="#GA.unique_gene_by_space-3537"><span class="linenos">3537</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3538"><a href="#GA.unique_gene_by_space-3538"><span class="linenos">3538</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3539"><a href="#GA.unique_gene_by_space-3539"><span class="linenos">3539</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3540"><a href="#GA.unique_gene_by_space-3540"><span class="linenos">3540</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3541"><a href="#GA.unique_gene_by_space-3541"><span class="linenos">3541</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3542"><a href="#GA.unique_gene_by_space-3542"><span class="linenos">3542</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3543"><a href="#GA.unique_gene_by_space-3543"><span class="linenos">3543</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3544"><a href="#GA.unique_gene_by_space-3544"><span class="linenos">3544</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3545"><a href="#GA.unique_gene_by_space-3545"><span class="linenos">3545</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3546"><a href="#GA.unique_gene_by_space-3546"><span class="linenos">3546</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3547"><a href="#GA.unique_gene_by_space-3547"><span class="linenos">3547</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3548"><a href="#GA.unique_gene_by_space-3548"><span class="linenos">3548</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="n">curr_gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3549"><a href="#GA.unique_gene_by_space-3549"><span class="linenos">3549</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3550"><a href="#GA.unique_gene_by_space-3550"><span class="linenos">3550</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3551"><a href="#GA.unique_gene_by_space-3551"><span class="linenos">3551</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.unique_gene_by_space-3552"><a href="#GA.unique_gene_by_space-3552"><span class="linenos">3552</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3553"><a href="#GA.unique_gene_by_space-3553"><span class="linenos">3553</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3554"><a href="#GA.unique_gene_by_space-3554"><span class="linenos">3554</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3555"><a href="#GA.unique_gene_by_space-3555"><span class="linenos">3555</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="n">curr_gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3556"><a href="#GA.unique_gene_by_space-3556"><span class="linenos">3556</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3557"><a href="#GA.unique_gene_by_space-3557"><span class="linenos">3557</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3558"><a href="#GA.unique_gene_by_space-3558"><span class="linenos">3558</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3559"><a href="#GA.unique_gene_by_space-3559"><span class="linenos">3559</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3560"><a href="#GA.unique_gene_by_space-3560"><span class="linenos">3560</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3561"><a href="#GA.unique_gene_by_space-3561"><span class="linenos">3561</span></a>
</span><span id="GA.unique_gene_by_space-3562"><a href="#GA.unique_gene_by_space-3562"><span class="linenos">3562</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3563"><a href="#GA.unique_gene_by_space-3563"><span class="linenos">3563</span></a>                <span class="c1"># Selecting a value randomly based on the current gene&#39;s space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.unique_gene_by_space-3564"><a href="#GA.unique_gene_by_space-3564"><span class="linenos">3564</span></a>                <span class="c1"># If the gene space has only 1 value, then select it. The old and new values of the gene are identical.</span>
</span><span id="GA.unique_gene_by_space-3565"><a href="#GA.unique_gene_by_space-3565"><span class="linenos">3565</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3566"><a href="#GA.unique_gene_by_space-3566"><span class="linenos">3566</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">curr_gene_space</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.unique_gene_by_space-3567"><a href="#GA.unique_gene_by_space-3567"><span class="linenos">3567</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.unique_gene_by_space-3568"><a href="#GA.unique_gene_by_space-3568"><span class="linenos">3568</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the space of the gene with index </span><span class="si">{gene_idx}</span><span class="s2"> has only a single value. Thus, duplicates are possible.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.unique_gene_by_space-3569"><a href="#GA.unique_gene_by_space-3569"><span class="linenos">3569</span></a>                            <span class="n">gene_idx</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">))</span>
</span><span id="GA.unique_gene_by_space-3570"><a href="#GA.unique_gene_by_space-3570"><span class="linenos">3570</span></a>                <span class="c1"># If the gene space has more than 1 value, then select a new one that is different from the current value.</span>
</span><span id="GA.unique_gene_by_space-3571"><a href="#GA.unique_gene_by_space-3571"><span class="linenos">3571</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3572"><a href="#GA.unique_gene_by_space-3572"><span class="linenos">3572</span></a>                    <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">curr_gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA.unique_gene_by_space-3573"><a href="#GA.unique_gene_by_space-3573"><span class="linenos">3573</span></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3574"><a href="#GA.unique_gene_by_space-3574"><span class="linenos">3574</span></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.unique_gene_by_space-3575"><a href="#GA.unique_gene_by_space-3575"><span class="linenos">3575</span></a>                            <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3576"><a href="#GA.unique_gene_by_space-3576"><span class="linenos">3576</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.unique_gene_by_space-3577"><a href="#GA.unique_gene_by_space-3577"><span class="linenos">3577</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3578"><a href="#GA.unique_gene_by_space-3578"><span class="linenos">3578</span></a>                        <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3579"><a href="#GA.unique_gene_by_space-3579"><span class="linenos">3579</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3580"><a href="#GA.unique_gene_by_space-3580"><span class="linenos">3580</span></a>            <span class="c1"># Selecting a value randomly from the global gene space in the &#39;gene_space&#39; attribute.</span>
</span><span id="GA.unique_gene_by_space-3581"><a href="#GA.unique_gene_by_space-3581"><span class="linenos">3581</span></a>            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3582"><a href="#GA.unique_gene_by_space-3582"><span class="linenos">3582</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3583"><a href="#GA.unique_gene_by_space-3583"><span class="linenos">3583</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3584"><a href="#GA.unique_gene_by_space-3584"><span class="linenos">3584</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3585"><a href="#GA.unique_gene_by_space-3585"><span class="linenos">3585</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3586"><a href="#GA.unique_gene_by_space-3586"><span class="linenos">3586</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3587"><a href="#GA.unique_gene_by_space-3587"><span class="linenos">3587</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3588"><a href="#GA.unique_gene_by_space-3588"><span class="linenos">3588</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3589"><a href="#GA.unique_gene_by_space-3589"><span class="linenos">3589</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3590"><a href="#GA.unique_gene_by_space-3590"><span class="linenos">3590</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3591"><a href="#GA.unique_gene_by_space-3591"><span class="linenos">3591</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3592"><a href="#GA.unique_gene_by_space-3592"><span class="linenos">3592</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3593"><a href="#GA.unique_gene_by_space-3593"><span class="linenos">3593</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3594"><a href="#GA.unique_gene_by_space-3594"><span class="linenos">3594</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3595"><a href="#GA.unique_gene_by_space-3595"><span class="linenos">3595</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3596"><a href="#GA.unique_gene_by_space-3596"><span class="linenos">3596</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3597"><a href="#GA.unique_gene_by_space-3597"><span class="linenos">3597</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3598"><a href="#GA.unique_gene_by_space-3598"><span class="linenos">3598</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3599"><a href="#GA.unique_gene_by_space-3599"><span class="linenos">3599</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3600"><a href="#GA.unique_gene_by_space-3600"><span class="linenos">3600</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3601"><a href="#GA.unique_gene_by_space-3601"><span class="linenos">3601</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3602"><a href="#GA.unique_gene_by_space-3602"><span class="linenos">3602</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3603"><a href="#GA.unique_gene_by_space-3603"><span class="linenos">3603</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3604"><a href="#GA.unique_gene_by_space-3604"><span class="linenos">3604</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3605"><a href="#GA.unique_gene_by_space-3605"><span class="linenos">3605</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3606"><a href="#GA.unique_gene_by_space-3606"><span class="linenos">3606</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3607"><a href="#GA.unique_gene_by_space-3607"><span class="linenos">3607</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3608"><a href="#GA.unique_gene_by_space-3608"><span class="linenos">3608</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3609"><a href="#GA.unique_gene_by_space-3609"><span class="linenos">3609</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3610"><a href="#GA.unique_gene_by_space-3610"><span class="linenos">3610</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3611"><a href="#GA.unique_gene_by_space-3611"><span class="linenos">3611</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3612"><a href="#GA.unique_gene_by_space-3612"><span class="linenos">3612</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3613"><a href="#GA.unique_gene_by_space-3613"><span class="linenos">3613</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3614"><a href="#GA.unique_gene_by_space-3614"><span class="linenos">3614</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3615"><a href="#GA.unique_gene_by_space-3615"><span class="linenos">3615</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3616"><a href="#GA.unique_gene_by_space-3616"><span class="linenos">3616</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3617"><a href="#GA.unique_gene_by_space-3617"><span class="linenos">3617</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3618"><a href="#GA.unique_gene_by_space-3618"><span class="linenos">3618</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3619"><a href="#GA.unique_gene_by_space-3619"><span class="linenos">3619</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA.unique_gene_by_space-3620"><a href="#GA.unique_gene_by_space-3620"><span class="linenos">3620</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3621"><a href="#GA.unique_gene_by_space-3621"><span class="linenos">3621</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3622"><a href="#GA.unique_gene_by_space-3622"><span class="linenos">3622</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3623"><a href="#GA.unique_gene_by_space-3623"><span class="linenos">3623</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.unique_gene_by_space-3624"><a href="#GA.unique_gene_by_space-3624"><span class="linenos">3624</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3625"><a href="#GA.unique_gene_by_space-3625"><span class="linenos">3625</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3626"><a href="#GA.unique_gene_by_space-3626"><span class="linenos">3626</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3627"><a href="#GA.unique_gene_by_space-3627"><span class="linenos">3627</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3628"><a href="#GA.unique_gene_by_space-3628"><span class="linenos">3628</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3629"><a href="#GA.unique_gene_by_space-3629"><span class="linenos">3629</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3630"><a href="#GA.unique_gene_by_space-3630"><span class="linenos">3630</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3631"><a href="#GA.unique_gene_by_space-3631"><span class="linenos">3631</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3632"><a href="#GA.unique_gene_by_space-3632"><span class="linenos">3632</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3633"><a href="#GA.unique_gene_by_space-3633"><span class="linenos">3633</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3634"><a href="#GA.unique_gene_by_space-3634"><span class="linenos">3634</span></a>                    <span class="k">if</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="ow">in</span> <span class="n">GA</span><span class="o">.</span><span class="n">supported_int_types</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3635"><a href="#GA.unique_gene_by_space-3635"><span class="linenos">3635</span></a>                        <span class="k">if</span> <span class="n">build_initial_pop</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3636"><a href="#GA.unique_gene_by_space-3636"><span class="linenos">3636</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3637"><a href="#GA.unique_gene_by_space-3637"><span class="linenos">3637</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3638"><a href="#GA.unique_gene_by_space-3638"><span class="linenos">3638</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3639"><a href="#GA.unique_gene_by_space-3639"><span class="linenos">3639</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3640"><a href="#GA.unique_gene_by_space-3640"><span class="linenos">3640</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3641"><a href="#GA.unique_gene_by_space-3641"><span class="linenos">3641</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3642"><a href="#GA.unique_gene_by_space-3642"><span class="linenos">3642</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3643"><a href="#GA.unique_gene_by_space-3643"><span class="linenos">3643</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3644"><a href="#GA.unique_gene_by_space-3644"><span class="linenos">3644</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3645"><a href="#GA.unique_gene_by_space-3645"><span class="linenos">3645</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3646"><a href="#GA.unique_gene_by_space-3646"><span class="linenos">3646</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3647"><a href="#GA.unique_gene_by_space-3647"><span class="linenos">3647</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3648"><a href="#GA.unique_gene_by_space-3648"><span class="linenos">3648</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3649"><a href="#GA.unique_gene_by_space-3649"><span class="linenos">3649</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3650"><a href="#GA.unique_gene_by_space-3650"><span class="linenos">3650</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3651"><a href="#GA.unique_gene_by_space-3651"><span class="linenos">3651</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3652"><a href="#GA.unique_gene_by_space-3652"><span class="linenos">3652</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3653"><a href="#GA.unique_gene_by_space-3653"><span class="linenos">3653</span></a>                            <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3654"><a href="#GA.unique_gene_by_space-3654"><span class="linenos">3654</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3655"><a href="#GA.unique_gene_by_space-3655"><span class="linenos">3655</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3656"><a href="#GA.unique_gene_by_space-3656"><span class="linenos">3656</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3657"><a href="#GA.unique_gene_by_space-3657"><span class="linenos">3657</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3658"><a href="#GA.unique_gene_by_space-3658"><span class="linenos">3658</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3659"><a href="#GA.unique_gene_by_space-3659"><span class="linenos">3659</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3660"><a href="#GA.unique_gene_by_space-3660"><span class="linenos">3660</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3661"><a href="#GA.unique_gene_by_space-3661"><span class="linenos">3661</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3662"><a href="#GA.unique_gene_by_space-3662"><span class="linenos">3662</span></a>                                <span class="n">value_from_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_int_gene_from_range</span><span class="p">(</span><span class="n">solution</span><span class="o">=</span><span class="n">solution</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3663"><a href="#GA.unique_gene_by_space-3663"><span class="linenos">3663</span></a>                                                                                   <span class="n">gene_index</span><span class="o">=</span><span class="n">gene_idx</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3664"><a href="#GA.unique_gene_by_space-3664"><span class="linenos">3664</span></a>                                                                                   <span class="n">min_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3665"><a href="#GA.unique_gene_by_space-3665"><span class="linenos">3665</span></a>                                                                                   <span class="n">max_val</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3666"><a href="#GA.unique_gene_by_space-3666"><span class="linenos">3666</span></a>                                                                                   <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3667"><a href="#GA.unique_gene_by_space-3667"><span class="linenos">3667</span></a>                                                                                   <span class="n">mutation_by_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3668"><a href="#GA.unique_gene_by_space-3668"><span class="linenos">3668</span></a>                                                                                   <span class="n">gene_type</span><span class="o">=</span><span class="n">gene_type</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3669"><a href="#GA.unique_gene_by_space-3669"><span class="linenos">3669</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3670"><a href="#GA.unique_gene_by_space-3670"><span class="linenos">3670</span></a>                        <span class="c1"># When the gene_space is assigned a dict object, then it specifies the lower and upper limits of all genes in the space.</span>
</span><span id="GA.unique_gene_by_space-3671"><a href="#GA.unique_gene_by_space-3671"><span class="linenos">3671</span></a>                        <span class="k">if</span> <span class="s1">&#39;step&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="GA.unique_gene_by_space-3672"><a href="#GA.unique_gene_by_space-3672"><span class="linenos">3672</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3673"><a href="#GA.unique_gene_by_space-3673"><span class="linenos">3673</span></a>                                                                                <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3674"><a href="#GA.unique_gene_by_space-3674"><span class="linenos">3674</span></a>                                                                                <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;step&#39;</span><span class="p">]),</span>
</span><span id="GA.unique_gene_by_space-3675"><a href="#GA.unique_gene_by_space-3675"><span class="linenos">3675</span></a>                                                                   <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3676"><a href="#GA.unique_gene_by_space-3676"><span class="linenos">3676</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3677"><a href="#GA.unique_gene_by_space-3677"><span class="linenos">3677</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3678"><a href="#GA.unique_gene_by_space-3678"><span class="linenos">3678</span></a>                                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">],</span>
</span><span id="GA.unique_gene_by_space-3679"><a href="#GA.unique_gene_by_space-3679"><span class="linenos">3679</span></a>                                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3680"><a href="#GA.unique_gene_by_space-3680"><span class="linenos">3680</span></a>                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mutation_by_replacement</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3681"><a href="#GA.unique_gene_by_space-3681"><span class="linenos">3681</span></a>                            <span class="k">pass</span>
</span><span id="GA.unique_gene_by_space-3682"><a href="#GA.unique_gene_by_space-3682"><span class="linenos">3682</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3683"><a href="#GA.unique_gene_by_space-3683"><span class="linenos">3683</span></a>                            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span> <span class="o">+</span> <span class="n">value_from_space</span>
</span><span id="GA.unique_gene_by_space-3684"><a href="#GA.unique_gene_by_space-3684"><span class="linenos">3684</span></a>
</span><span id="GA.unique_gene_by_space-3685"><a href="#GA.unique_gene_by_space-3685"><span class="linenos">3685</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3686"><a href="#GA.unique_gene_by_space-3686"><span class="linenos">3686</span></a>                <span class="c1"># If the space type is not of type dict, then a value is randomly selected from the gene_space attribute.</span>
</span><span id="GA.unique_gene_by_space-3687"><a href="#GA.unique_gene_by_space-3687"><span class="linenos">3687</span></a>                <span class="n">values_to_select_from</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gene_space</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">solution</span><span class="p">))</span>
</span><span id="GA.unique_gene_by_space-3688"><a href="#GA.unique_gene_by_space-3688"><span class="linenos">3688</span></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3689"><a href="#GA.unique_gene_by_space-3689"><span class="linenos">3689</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span> <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.unique_gene_by_space-3690"><a href="#GA.unique_gene_by_space-3690"><span class="linenos">3690</span></a>                        <span class="s2">&quot;You set &#39;allow_duplicate_genes=False&#39; but the gene space does not have enough values to prevent duplicates.&quot;</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3691"><a href="#GA.unique_gene_by_space-3691"><span class="linenos">3691</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span>
</span><span id="GA.unique_gene_by_space-3692"><a href="#GA.unique_gene_by_space-3692"><span class="linenos">3692</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3693"><a href="#GA.unique_gene_by_space-3693"><span class="linenos">3693</span></a>                    <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">values_to_select_from</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3694"><a href="#GA.unique_gene_by_space-3694"><span class="linenos">3694</span></a>
</span><span id="GA.unique_gene_by_space-3695"><a href="#GA.unique_gene_by_space-3695"><span class="linenos">3695</span></a>        <span class="k">if</span> <span class="n">value_from_space</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3696"><a href="#GA.unique_gene_by_space-3696"><span class="linenos">3696</span></a>            <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_min_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3697"><a href="#GA.unique_gene_by_space-3697"><span class="linenos">3697</span></a>                                                    <span class="n">high</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">random_mutation_max_val</span><span class="p">,</span>
</span><span id="GA.unique_gene_by_space-3698"><a href="#GA.unique_gene_by_space-3698"><span class="linenos">3698</span></a>                                                    <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3699"><a href="#GA.unique_gene_by_space-3699"><span class="linenos">3699</span></a>
</span><span id="GA.unique_gene_by_space-3700"><a href="#GA.unique_gene_by_space-3700"><span class="linenos">3700</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gene_type_single</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3701"><a href="#GA.unique_gene_by_space-3701"><span class="linenos">3701</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3702"><a href="#GA.unique_gene_by_space-3702"><span class="linenos">3702</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.unique_gene_by_space-3703"><a href="#GA.unique_gene_by_space-3703"><span class="linenos">3703</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.unique_gene_by_space-3704"><a href="#GA.unique_gene_by_space-3704"><span class="linenos">3704</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3705"><a href="#GA.unique_gene_by_space-3705"><span class="linenos">3705</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3706"><a href="#GA.unique_gene_by_space-3706"><span class="linenos">3706</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3707"><a href="#GA.unique_gene_by_space-3707"><span class="linenos">3707</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3708"><a href="#GA.unique_gene_by_space-3708"><span class="linenos">3708</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">),</span>
</span><span id="GA.unique_gene_by_space-3709"><a href="#GA.unique_gene_by_space-3709"><span class="linenos">3709</span></a>                                               <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
</span><span id="GA.unique_gene_by_space-3710"><a href="#GA.unique_gene_by_space-3710"><span class="linenos">3710</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.unique_gene_by_space-3711"><a href="#GA.unique_gene_by_space-3711"><span class="linenos">3711</span></a>                <span class="n">value_from_space</span> <span class="o">=</span> <span class="n">gene_type</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">value_from_space</span><span class="p">)</span>
</span><span id="GA.unique_gene_by_space-3712"><a href="#GA.unique_gene_by_space-3712"><span class="linenos">3712</span></a>
</span><span id="GA.unique_gene_by_space-3713"><a href="#GA.unique_gene_by_space-3713"><span class="linenos">3713</span></a>        <span class="k">return</span> <span class="n">value_from_space</span>
</span></pre></div>


            <div class="docstring"><p>Returns a unique gene value for a single gene based on its value space to solve the duplicates.</p>

<p>solution: A solution with duplicate values.
gene_idx: The index of the gene that duplicates its value with another gene.
gene_type: Exactly the same as the self.gene_type attribute.</p>

<p>Returns:
    A unique value, if exists, for the gene.</p>
</div>


                            </div>
                            <div id="GA.best_solution" class="classattr">
                                        <input id="GA.best_solution-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">best_solution</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pop_fitness</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.best_solution-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.best_solution"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.best_solution-3715"><a href="#GA.best_solution-3715"><span class="linenos">3715</span></a>    <span class="k">def</span> <span class="nf">best_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pop_fitness</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.best_solution-3716"><a href="#GA.best_solution-3716"><span class="linenos">3716</span></a>
</span><span id="GA.best_solution-3717"><a href="#GA.best_solution-3717"><span class="linenos">3717</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.best_solution-3718"><a href="#GA.best_solution-3718"><span class="linenos">3718</span></a><span class="sd">        Returns information about the best solution found by the genetic algorithm.</span>
</span><span id="GA.best_solution-3719"><a href="#GA.best_solution-3719"><span class="linenos">3719</span></a><span class="sd">        Accepts the following parameters:</span>
</span><span id="GA.best_solution-3720"><a href="#GA.best_solution-3720"><span class="linenos">3720</span></a><span class="sd">            pop_fitness: An optional parameter holding the fitness values of the solutions in the current population. If None, then the cal_pop_fitness() method is called to calculate the fitness of the population.</span>
</span><span id="GA.best_solution-3721"><a href="#GA.best_solution-3721"><span class="linenos">3721</span></a><span class="sd">        The following are returned:</span>
</span><span id="GA.best_solution-3722"><a href="#GA.best_solution-3722"><span class="linenos">3722</span></a><span class="sd">            -best_solution: Best solution in the current population.</span>
</span><span id="GA.best_solution-3723"><a href="#GA.best_solution-3723"><span class="linenos">3723</span></a><span class="sd">            -best_solution_fitness: Fitness value of the best solution.</span>
</span><span id="GA.best_solution-3724"><a href="#GA.best_solution-3724"><span class="linenos">3724</span></a><span class="sd">            -best_match_idx: Index of the best solution in the current population.</span>
</span><span id="GA.best_solution-3725"><a href="#GA.best_solution-3725"><span class="linenos">3725</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.best_solution-3726"><a href="#GA.best_solution-3726"><span class="linenos">3726</span></a>
</span><span id="GA.best_solution-3727"><a href="#GA.best_solution-3727"><span class="linenos">3727</span></a>        <span class="c1"># Getting the best solution after finishing all generations.</span>
</span><span id="GA.best_solution-3728"><a href="#GA.best_solution-3728"><span class="linenos">3728</span></a>        <span class="c1"># At first, the fitness is calculated for each solution in the final generation.</span>
</span><span id="GA.best_solution-3729"><a href="#GA.best_solution-3729"><span class="linenos">3729</span></a>        <span class="k">if</span> <span class="n">pop_fitness</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.best_solution-3730"><a href="#GA.best_solution-3730"><span class="linenos">3730</span></a>            <span class="n">pop_fitness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_pop_fitness</span><span class="p">()</span>
</span><span id="GA.best_solution-3731"><a href="#GA.best_solution-3731"><span class="linenos">3731</span></a>        <span class="c1"># Then return the index of that solution corresponding to the best fitness.</span>
</span><span id="GA.best_solution-3732"><a href="#GA.best_solution-3732"><span class="linenos">3732</span></a>        <span class="n">best_match_idx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pop_fitness</span> <span class="o">==</span> <span class="n">numpy</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pop_fitness</span><span class="p">))[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="GA.best_solution-3733"><a href="#GA.best_solution-3733"><span class="linenos">3733</span></a>
</span><span id="GA.best_solution-3734"><a href="#GA.best_solution-3734"><span class="linenos">3734</span></a>        <span class="n">best_solution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="GA.best_solution-3735"><a href="#GA.best_solution-3735"><span class="linenos">3735</span></a>        <span class="n">best_solution_fitness</span> <span class="o">=</span> <span class="n">pop_fitness</span><span class="p">[</span><span class="n">best_match_idx</span><span class="p">]</span>
</span><span id="GA.best_solution-3736"><a href="#GA.best_solution-3736"><span class="linenos">3736</span></a>        <span class="c1"># print(best_solution_fitness)</span>
</span><span id="GA.best_solution-3737"><a href="#GA.best_solution-3737"><span class="linenos">3737</span></a>        <span class="k">return</span> <span class="n">best_solution</span><span class="p">,</span> <span class="n">best_solution_fitness</span><span class="p">,</span> <span class="n">best_match_idx</span>
</span></pre></div>


            <div class="docstring"><p>Returns information about the best solution found by the genetic algorithm.
Accepts the following parameters:
    pop_fitness: An optional parameter holding the fitness values of the solutions in the current population. If None, then the cal_pop_fitness() method is called to calculate the fitness of the population.
The following are returned:
    -best_solution: Best solution in the current population.
    -best_solution_fitness: Fitness value of the best solution.
    -best_match_idx: Index of the best solution in the current population.</p>
</div>


                            </div>
                            <div id="GA.plot_result" class="classattr">
                                        <input id="GA.plot_result-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_result</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="s1">&#39;PyGAD - Generation vs. Fitness&#39;</span>,</span><span class="param">	<span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Generation&#39;</span>,</span><span class="param">	<span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Fitness&#39;</span>,</span><span class="param">	<span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span>,</span><span class="param">	<span class="n">font_size</span><span class="o">=</span><span class="mi">14</span>,</span><span class="param">	<span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,</span><span class="param">	<span class="n">color</span><span class="o">=</span><span class="s1">&#39;#3870FF&#39;</span>,</span><span class="param">	<span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.plot_result-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.plot_result"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.plot_result-3739"><a href="#GA.plot_result-3739"><span class="linenos">3739</span></a>    <span class="k">def</span> <span class="nf">plot_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA.plot_result-3740"><a href="#GA.plot_result-3740"><span class="linenos">3740</span></a>                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="GA.plot_result-3741"><a href="#GA.plot_result-3741"><span class="linenos">3741</span></a>                    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA.plot_result-3742"><a href="#GA.plot_result-3742"><span class="linenos">3742</span></a>                    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="GA.plot_result-3743"><a href="#GA.plot_result-3743"><span class="linenos">3743</span></a>                    <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA.plot_result-3744"><a href="#GA.plot_result-3744"><span class="linenos">3744</span></a>                    <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA.plot_result-3745"><a href="#GA.plot_result-3745"><span class="linenos">3745</span></a>                    <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA.plot_result-3746"><a href="#GA.plot_result-3746"><span class="linenos">3746</span></a>                    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA.plot_result-3747"><a href="#GA.plot_result-3747"><span class="linenos">3747</span></a>                    <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.plot_result-3748"><a href="#GA.plot_result-3748"><span class="linenos">3748</span></a>
</span><span id="GA.plot_result-3749"><a href="#GA.plot_result-3749"><span class="linenos">3749</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">suppress_warnings</span><span class="p">:</span>
</span><span id="GA.plot_result-3750"><a href="#GA.plot_result-3750"><span class="linenos">3750</span></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="GA.plot_result-3751"><a href="#GA.plot_result-3751"><span class="linenos">3751</span></a>                <span class="s2">&quot;Please use the plot_fitness() method instead of plot_result(). The plot_result() method will be removed in the future.&quot;</span><span class="p">)</span>
</span><span id="GA.plot_result-3752"><a href="#GA.plot_result-3752"><span class="linenos">3752</span></a>
</span><span id="GA.plot_result-3753"><a href="#GA.plot_result-3753"><span class="linenos">3753</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_fitness</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
</span><span id="GA.plot_result-3754"><a href="#GA.plot_result-3754"><span class="linenos">3754</span></a>                                 <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span>
</span><span id="GA.plot_result-3755"><a href="#GA.plot_result-3755"><span class="linenos">3755</span></a>                                 <span class="n">ylabel</span><span class="o">=</span><span class="n">ylabel</span><span class="p">,</span>
</span><span id="GA.plot_result-3756"><a href="#GA.plot_result-3756"><span class="linenos">3756</span></a>                                 <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_result-3757"><a href="#GA.plot_result-3757"><span class="linenos">3757</span></a>                                 <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
</span><span id="GA.plot_result-3758"><a href="#GA.plot_result-3758"><span class="linenos">3758</span></a>                                 <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
</span><span id="GA.plot_result-3759"><a href="#GA.plot_result-3759"><span class="linenos">3759</span></a>                                 <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
</span><span id="GA.plot_result-3760"><a href="#GA.plot_result-3760"><span class="linenos">3760</span></a>                                 <span class="n">save_dir</span><span class="o">=</span><span class="n">save_dir</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="GA.plot_fitness" class="classattr">
                                        <input id="GA.plot_fitness-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_fitness</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="s1">&#39;PyGAD - Generation vs. Fitness&#39;</span>,</span><span class="param">	<span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Generation&#39;</span>,</span><span class="param">	<span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Fitness&#39;</span>,</span><span class="param">	<span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span>,</span><span class="param">	<span class="n">font_size</span><span class="o">=</span><span class="mi">14</span>,</span><span class="param">	<span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,</span><span class="param">	<span class="n">color</span><span class="o">=</span><span class="s1">&#39;#3870FF&#39;</span>,</span><span class="param">	<span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.plot_fitness-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.plot_fitness"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.plot_fitness-3762"><a href="#GA.plot_fitness-3762"><span class="linenos">3762</span></a>    <span class="k">def</span> <span class="nf">plot_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3763"><a href="#GA.plot_fitness-3763"><span class="linenos">3763</span></a>                     <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. Fitness&quot;</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3764"><a href="#GA.plot_fitness-3764"><span class="linenos">3764</span></a>                     <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3765"><a href="#GA.plot_fitness-3765"><span class="linenos">3765</span></a>                     <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Fitness&quot;</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3766"><a href="#GA.plot_fitness-3766"><span class="linenos">3766</span></a>                     <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3767"><a href="#GA.plot_fitness-3767"><span class="linenos">3767</span></a>                     <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3768"><a href="#GA.plot_fitness-3768"><span class="linenos">3768</span></a>                     <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3769"><a href="#GA.plot_fitness-3769"><span class="linenos">3769</span></a>                     <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3770"><a href="#GA.plot_fitness-3770"><span class="linenos">3770</span></a>                     <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.plot_fitness-3771"><a href="#GA.plot_fitness-3771"><span class="linenos">3771</span></a>
</span><span id="GA.plot_fitness-3772"><a href="#GA.plot_fitness-3772"><span class="linenos">3772</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.plot_fitness-3773"><a href="#GA.plot_fitness-3773"><span class="linenos">3773</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes how the fitness value evolved by generation. Can only be called after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="GA.plot_fitness-3774"><a href="#GA.plot_fitness-3774"><span class="linenos">3774</span></a>
</span><span id="GA.plot_fitness-3775"><a href="#GA.plot_fitness-3775"><span class="linenos">3775</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA.plot_fitness-3776"><a href="#GA.plot_fitness-3776"><span class="linenos">3776</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA.plot_fitness-3777"><a href="#GA.plot_fitness-3777"><span class="linenos">3777</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA.plot_fitness-3778"><a href="#GA.plot_fitness-3778"><span class="linenos">3778</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA.plot_fitness-3779"><a href="#GA.plot_fitness-3779"><span class="linenos">3779</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA.plot_fitness-3780"><a href="#GA.plot_fitness-3780"><span class="linenos">3780</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA.plot_fitness-3781"><a href="#GA.plot_fitness-3781"><span class="linenos">3781</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA.plot_fitness-3782"><a href="#GA.plot_fitness-3782"><span class="linenos">3782</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="GA.plot_fitness-3783"><a href="#GA.plot_fitness-3783"><span class="linenos">3783</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA.plot_fitness-3784"><a href="#GA.plot_fitness-3784"><span class="linenos">3784</span></a>
</span><span id="GA.plot_fitness-3785"><a href="#GA.plot_fitness-3785"><span class="linenos">3785</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA.plot_fitness-3786"><a href="#GA.plot_fitness-3786"><span class="linenos">3786</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.plot_fitness-3787"><a href="#GA.plot_fitness-3787"><span class="linenos">3787</span></a>
</span><span id="GA.plot_fitness-3788"><a href="#GA.plot_fitness-3788"><span class="linenos">3788</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_fitness-3789"><a href="#GA.plot_fitness-3789"><span class="linenos">3789</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_fitness-3790"><a href="#GA.plot_fitness-3790"><span class="linenos">3790</span></a>                <span class="s2">&quot;The plot_fitness() (i.e. plot_result()) method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.plot_fitness-3791"><a href="#GA.plot_fitness-3791"><span class="linenos">3791</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA.plot_fitness-3792"><a href="#GA.plot_fitness-3792"><span class="linenos">3792</span></a>
</span><span id="GA.plot_fitness-3793"><a href="#GA.plot_fitness-3793"><span class="linenos">3793</span></a>        <span class="c1">#        if self.run_completed == False:</span>
</span><span id="GA.plot_fitness-3794"><a href="#GA.plot_fitness-3794"><span class="linenos">3794</span></a>        <span class="c1">#            if not self.suppress_warnings: warnings.warn(&quot;Warning calling the plot_result() method: \nGA is not executed yet and there are no results to display. Please call the run() method before calling the plot_result() method.\n&quot;)</span>
</span><span id="GA.plot_fitness-3795"><a href="#GA.plot_fitness-3795"><span class="linenos">3795</span></a>
</span><span id="GA.plot_fitness-3796"><a href="#GA.plot_fitness-3796"><span class="linenos">3796</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="GA.plot_fitness-3797"><a href="#GA.plot_fitness-3797"><span class="linenos">3797</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_fitness-3798"><a href="#GA.plot_fitness-3798"><span class="linenos">3798</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3799"><a href="#GA.plot_fitness-3799"><span class="linenos">3799</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA.plot_fitness-3800"><a href="#GA.plot_fitness-3800"><span class="linenos">3800</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3801"><a href="#GA.plot_fitness-3801"><span class="linenos">3801</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3802"><a href="#GA.plot_fitness-3802"><span class="linenos">3802</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA.plot_fitness-3803"><a href="#GA.plot_fitness-3803"><span class="linenos">3803</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions_fitness</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3804"><a href="#GA.plot_fitness-3804"><span class="linenos">3804</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3805"><a href="#GA.plot_fitness-3805"><span class="linenos">3805</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3806"><a href="#GA.plot_fitness-3806"><span class="linenos">3806</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3807"><a href="#GA.plot_fitness-3807"><span class="linenos">3807</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3808"><a href="#GA.plot_fitness-3808"><span class="linenos">3808</span></a>
</span><span id="GA.plot_fitness-3809"><a href="#GA.plot_fitness-3809"><span class="linenos">3809</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.plot_fitness-3810"><a href="#GA.plot_fitness-3810"><span class="linenos">3810</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA.plot_fitness-3811"><a href="#GA.plot_fitness-3811"><span class="linenos">3811</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA.plot_fitness-3812"><a href="#GA.plot_fitness-3812"><span class="linenos">3812</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA.plot_fitness-3813"><a href="#GA.plot_fitness-3813"><span class="linenos">3813</span></a>
</span><span id="GA.plot_fitness-3814"><a href="#GA.plot_fitness-3814"><span class="linenos">3814</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span></pre></div>


            <div class="docstring"><p>Creates, shows, and returns a figure that summarizes how the fitness value evolved by generation. Can only be called after completing at least 1 generation. If no generation is completed, an exception is raised.</p>

<p>Accepts the following:
    title: Figure title.
    xlabel: Label on the X-axis.
    ylabel: Label on the Y-axis.
    linewidth: Line width of the plot. Defaults to 3.
    font_size: Font size for the labels and title. Defaults to 14.
    plot_type: Type of the plot which can be either "plot" (default), "scatter", or "bar".
    color: Color of the plot which defaults to "#3870FF".
    save_dir: Directory to save the figure.</p>

<p>Returns the figure.</p>
</div>


                            </div>
                            <div id="GA.plot_new_solution_rate" class="classattr">
                                        <input id="GA.plot_new_solution_rate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_new_solution_rate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="s1">&#39;PyGAD - Generation vs. New Solution Rate&#39;</span>,</span><span class="param">	<span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Generation&#39;</span>,</span><span class="param">	<span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;New Solution Rate&#39;</span>,</span><span class="param">	<span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span>,</span><span class="param">	<span class="n">font_size</span><span class="o">=</span><span class="mi">14</span>,</span><span class="param">	<span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,</span><span class="param">	<span class="n">color</span><span class="o">=</span><span class="s1">&#39;#3870FF&#39;</span>,</span><span class="param">	<span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.plot_new_solution_rate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.plot_new_solution_rate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.plot_new_solution_rate-3816"><a href="#GA.plot_new_solution_rate-3816"><span class="linenos">3816</span></a>    <span class="k">def</span> <span class="nf">plot_new_solution_rate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3817"><a href="#GA.plot_new_solution_rate-3817"><span class="linenos">3817</span></a>                               <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Generation vs. New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3818"><a href="#GA.plot_new_solution_rate-3818"><span class="linenos">3818</span></a>                               <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Generation&quot;</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3819"><a href="#GA.plot_new_solution_rate-3819"><span class="linenos">3819</span></a>                               <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;New Solution Rate&quot;</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3820"><a href="#GA.plot_new_solution_rate-3820"><span class="linenos">3820</span></a>                               <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3821"><a href="#GA.plot_new_solution_rate-3821"><span class="linenos">3821</span></a>                               <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3822"><a href="#GA.plot_new_solution_rate-3822"><span class="linenos">3822</span></a>                               <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3823"><a href="#GA.plot_new_solution_rate-3823"><span class="linenos">3823</span></a>                               <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3824"><a href="#GA.plot_new_solution_rate-3824"><span class="linenos">3824</span></a>                               <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.plot_new_solution_rate-3825"><a href="#GA.plot_new_solution_rate-3825"><span class="linenos">3825</span></a>
</span><span id="GA.plot_new_solution_rate-3826"><a href="#GA.plot_new_solution_rate-3826"><span class="linenos">3826</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.plot_new_solution_rate-3827"><a href="#GA.plot_new_solution_rate-3827"><span class="linenos">3827</span></a><span class="sd">        Creates, shows, and returns a figure that summarizes the rate of exploring new solutions. This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="GA.plot_new_solution_rate-3828"><a href="#GA.plot_new_solution_rate-3828"><span class="linenos">3828</span></a>
</span><span id="GA.plot_new_solution_rate-3829"><a href="#GA.plot_new_solution_rate-3829"><span class="linenos">3829</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA.plot_new_solution_rate-3830"><a href="#GA.plot_new_solution_rate-3830"><span class="linenos">3830</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA.plot_new_solution_rate-3831"><a href="#GA.plot_new_solution_rate-3831"><span class="linenos">3831</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA.plot_new_solution_rate-3832"><a href="#GA.plot_new_solution_rate-3832"><span class="linenos">3832</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA.plot_new_solution_rate-3833"><a href="#GA.plot_new_solution_rate-3833"><span class="linenos">3833</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA.plot_new_solution_rate-3834"><a href="#GA.plot_new_solution_rate-3834"><span class="linenos">3834</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA.plot_new_solution_rate-3835"><a href="#GA.plot_new_solution_rate-3835"><span class="linenos">3835</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA.plot_new_solution_rate-3836"><a href="#GA.plot_new_solution_rate-3836"><span class="linenos">3836</span></a><span class="sd">            color: Color of the plot which defaults to &quot;#3870FF&quot;.</span>
</span><span id="GA.plot_new_solution_rate-3837"><a href="#GA.plot_new_solution_rate-3837"><span class="linenos">3837</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA.plot_new_solution_rate-3838"><a href="#GA.plot_new_solution_rate-3838"><span class="linenos">3838</span></a>
</span><span id="GA.plot_new_solution_rate-3839"><a href="#GA.plot_new_solution_rate-3839"><span class="linenos">3839</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA.plot_new_solution_rate-3840"><a href="#GA.plot_new_solution_rate-3840"><span class="linenos">3840</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.plot_new_solution_rate-3841"><a href="#GA.plot_new_solution_rate-3841"><span class="linenos">3841</span></a>
</span><span id="GA.plot_new_solution_rate-3842"><a href="#GA.plot_new_solution_rate-3842"><span class="linenos">3842</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3843"><a href="#GA.plot_new_solution_rate-3843"><span class="linenos">3843</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_new_solution_rate-3844"><a href="#GA.plot_new_solution_rate-3844"><span class="linenos">3844</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.plot_new_solution_rate-3845"><a href="#GA.plot_new_solution_rate-3845"><span class="linenos">3845</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA.plot_new_solution_rate-3846"><a href="#GA.plot_new_solution_rate-3846"><span class="linenos">3846</span></a>
</span><span id="GA.plot_new_solution_rate-3847"><a href="#GA.plot_new_solution_rate-3847"><span class="linenos">3847</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3848"><a href="#GA.plot_new_solution_rate-3848"><span class="linenos">3848</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_new_solution_rate-3849"><a href="#GA.plot_new_solution_rate-3849"><span class="linenos">3849</span></a>                <span class="s2">&quot;The plot_new_solution_rate() method works only when save_solutions=True in the constructor of the pygad.GA class.&quot;</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3850"><a href="#GA.plot_new_solution_rate-3850"><span class="linenos">3850</span></a>
</span><span id="GA.plot_new_solution_rate-3851"><a href="#GA.plot_new_solution_rate-3851"><span class="linenos">3851</span></a>        <span class="n">unique_solutions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span id="GA.plot_new_solution_rate-3852"><a href="#GA.plot_new_solution_rate-3852"><span class="linenos">3852</span></a>        <span class="n">num_unique_solutions_per_generation</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="GA.plot_new_solution_rate-3853"><a href="#GA.plot_new_solution_rate-3853"><span class="linenos">3853</span></a>        <span class="k">for</span> <span class="n">generation_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">):</span>
</span><span id="GA.plot_new_solution_rate-3854"><a href="#GA.plot_new_solution_rate-3854"><span class="linenos">3854</span></a>
</span><span id="GA.plot_new_solution_rate-3855"><a href="#GA.plot_new_solution_rate-3855"><span class="linenos">3855</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3856"><a href="#GA.plot_new_solution_rate-3856"><span class="linenos">3856</span></a>
</span><span id="GA.plot_new_solution_rate-3857"><a href="#GA.plot_new_solution_rate-3857"><span class="linenos">3857</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">generation_idx</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA.plot_new_solution_rate-3858"><a href="#GA.plot_new_solution_rate-3858"><span class="linenos">3858</span></a>            <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sol_per_pop</span>
</span><span id="GA.plot_new_solution_rate-3859"><a href="#GA.plot_new_solution_rate-3859"><span class="linenos">3859</span></a>
</span><span id="GA.plot_new_solution_rate-3860"><a href="#GA.plot_new_solution_rate-3860"><span class="linenos">3860</span></a>            <span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]:</span>
</span><span id="GA.plot_new_solution_rate-3861"><a href="#GA.plot_new_solution_rate-3861"><span class="linenos">3861</span></a>                <span class="n">unique_solutions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">sol</span><span class="p">))</span>
</span><span id="GA.plot_new_solution_rate-3862"><a href="#GA.plot_new_solution_rate-3862"><span class="linenos">3862</span></a>
</span><span id="GA.plot_new_solution_rate-3863"><a href="#GA.plot_new_solution_rate-3863"><span class="linenos">3863</span></a>            <span class="n">len_after</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_solutions</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3864"><a href="#GA.plot_new_solution_rate-3864"><span class="linenos">3864</span></a>
</span><span id="GA.plot_new_solution_rate-3865"><a href="#GA.plot_new_solution_rate-3865"><span class="linenos">3865</span></a>            <span class="n">generation_num_unique_solutions</span> <span class="o">=</span> <span class="n">len_after</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="GA.plot_new_solution_rate-3866"><a href="#GA.plot_new_solution_rate-3866"><span class="linenos">3866</span></a>            <span class="n">num_unique_solutions_per_generation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generation_num_unique_solutions</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3867"><a href="#GA.plot_new_solution_rate-3867"><span class="linenos">3867</span></a>
</span><span id="GA.plot_new_solution_rate-3868"><a href="#GA.plot_new_solution_rate-3868"><span class="linenos">3868</span></a>        <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="GA.plot_new_solution_rate-3869"><a href="#GA.plot_new_solution_rate-3869"><span class="linenos">3869</span></a>        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3870"><a href="#GA.plot_new_solution_rate-3870"><span class="linenos">3870</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">num_unique_solutions_per_generation</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3871"><a href="#GA.plot_new_solution_rate-3871"><span class="linenos">3871</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3872"><a href="#GA.plot_new_solution_rate-3872"><span class="linenos">3872</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3873"><a href="#GA.plot_new_solution_rate-3873"><span class="linenos">3873</span></a>                                      <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3874"><a href="#GA.plot_new_solution_rate-3874"><span class="linenos">3874</span></a>        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3875"><a href="#GA.plot_new_solution_rate-3875"><span class="linenos">3875</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">),</span> <span class="n">num_unique_solutions_per_generation</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3876"><a href="#GA.plot_new_solution_rate-3876"><span class="linenos">3876</span></a>                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3877"><a href="#GA.plot_new_solution_rate-3877"><span class="linenos">3877</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3878"><a href="#GA.plot_new_solution_rate-3878"><span class="linenos">3878</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3879"><a href="#GA.plot_new_solution_rate-3879"><span class="linenos">3879</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3880"><a href="#GA.plot_new_solution_rate-3880"><span class="linenos">3880</span></a>
</span><span id="GA.plot_new_solution_rate-3881"><a href="#GA.plot_new_solution_rate-3881"><span class="linenos">3881</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.plot_new_solution_rate-3882"><a href="#GA.plot_new_solution_rate-3882"><span class="linenos">3882</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA.plot_new_solution_rate-3883"><a href="#GA.plot_new_solution_rate-3883"><span class="linenos">3883</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA.plot_new_solution_rate-3884"><a href="#GA.plot_new_solution_rate-3884"><span class="linenos">3884</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA.plot_new_solution_rate-3885"><a href="#GA.plot_new_solution_rate-3885"><span class="linenos">3885</span></a>
</span><span id="GA.plot_new_solution_rate-3886"><a href="#GA.plot_new_solution_rate-3886"><span class="linenos">3886</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span></pre></div>


            <div class="docstring"><p>Creates, shows, and returns a figure that summarizes the rate of exploring new solutions. This method works only when save_solutions=True in the constructor of the pygad.GA class.</p>

<p>Accepts the following:
    title: Figure title.
    xlabel: Label on the X-axis.
    ylabel: Label on the Y-axis.
    linewidth: Line width of the plot. Defaults to 3.
    font_size: Font size for the labels and title. Defaults to 14.
    plot_type: Type of the plot which can be either "plot" (default), "scatter", or "bar".
    color: Color of the plot which defaults to "#3870FF".
    save_dir: Directory to save the figure.</p>

<p>Returns the figure.</p>
</div>


                            </div>
                            <div id="GA.plot_genes" class="classattr">
                                        <input id="GA.plot_genes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_genes</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="s1">&#39;PyGAD - Gene&#39;</span>,</span><span class="param">	<span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Gene&#39;</span>,</span><span class="param">	<span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Value&#39;</span>,</span><span class="param">	<span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span>,</span><span class="param">	<span class="n">font_size</span><span class="o">=</span><span class="mi">14</span>,</span><span class="param">	<span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,</span><span class="param">	<span class="n">graph_type</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span>,</span><span class="param">	<span class="n">fill_color</span><span class="o">=</span><span class="s1">&#39;#3870FF&#39;</span>,</span><span class="param">	<span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span>,</span><span class="param">	<span class="n">solutions</span><span class="o">=</span><span class="s1">&#39;all&#39;</span>,</span><span class="param">	<span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.plot_genes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.plot_genes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.plot_genes-3888"><a href="#GA.plot_genes-3888"><span class="linenos">3888</span></a>    <span class="k">def</span> <span class="nf">plot_genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="GA.plot_genes-3889"><a href="#GA.plot_genes-3889"><span class="linenos">3889</span></a>                   <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PyGAD - Gene&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3890"><a href="#GA.plot_genes-3890"><span class="linenos">3890</span></a>                   <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Gene&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3891"><a href="#GA.plot_genes-3891"><span class="linenos">3891</span></a>                   <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3892"><a href="#GA.plot_genes-3892"><span class="linenos">3892</span></a>                   <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
</span><span id="GA.plot_genes-3893"><a href="#GA.plot_genes-3893"><span class="linenos">3893</span></a>                   <span class="n">font_size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
</span><span id="GA.plot_genes-3894"><a href="#GA.plot_genes-3894"><span class="linenos">3894</span></a>                   <span class="n">plot_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3895"><a href="#GA.plot_genes-3895"><span class="linenos">3895</span></a>                   <span class="n">graph_type</span><span class="o">=</span><span class="s2">&quot;plot&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3896"><a href="#GA.plot_genes-3896"><span class="linenos">3896</span></a>                   <span class="n">fill_color</span><span class="o">=</span><span class="s2">&quot;#3870FF&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3897"><a href="#GA.plot_genes-3897"><span class="linenos">3897</span></a>                   <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3898"><a href="#GA.plot_genes-3898"><span class="linenos">3898</span></a>                   <span class="n">solutions</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
</span><span id="GA.plot_genes-3899"><a href="#GA.plot_genes-3899"><span class="linenos">3899</span></a>                   <span class="n">save_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="GA.plot_genes-3900"><a href="#GA.plot_genes-3900"><span class="linenos">3900</span></a>
</span><span id="GA.plot_genes-3901"><a href="#GA.plot_genes-3901"><span class="linenos">3901</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.plot_genes-3902"><a href="#GA.plot_genes-3902"><span class="linenos">3902</span></a><span class="sd">        Creates, shows, and returns a figure with number of subplots equal to the number of genes. Each subplot shows the gene value for each generation.</span>
</span><span id="GA.plot_genes-3903"><a href="#GA.plot_genes-3903"><span class="linenos">3903</span></a><span class="sd">        This method works only when save_solutions=True in the constructor of the pygad.GA class.</span>
</span><span id="GA.plot_genes-3904"><a href="#GA.plot_genes-3904"><span class="linenos">3904</span></a><span class="sd">        It also works only after completing at least 1 generation. If no generation is completed, an exception is raised.</span>
</span><span id="GA.plot_genes-3905"><a href="#GA.plot_genes-3905"><span class="linenos">3905</span></a>
</span><span id="GA.plot_genes-3906"><a href="#GA.plot_genes-3906"><span class="linenos">3906</span></a><span class="sd">        Accepts the following:</span>
</span><span id="GA.plot_genes-3907"><a href="#GA.plot_genes-3907"><span class="linenos">3907</span></a><span class="sd">            title: Figure title.</span>
</span><span id="GA.plot_genes-3908"><a href="#GA.plot_genes-3908"><span class="linenos">3908</span></a><span class="sd">            xlabel: Label on the X-axis.</span>
</span><span id="GA.plot_genes-3909"><a href="#GA.plot_genes-3909"><span class="linenos">3909</span></a><span class="sd">            ylabel: Label on the Y-axis.</span>
</span><span id="GA.plot_genes-3910"><a href="#GA.plot_genes-3910"><span class="linenos">3910</span></a><span class="sd">            linewidth: Line width of the plot. Defaults to 3.</span>
</span><span id="GA.plot_genes-3911"><a href="#GA.plot_genes-3911"><span class="linenos">3911</span></a><span class="sd">            font_size: Font size for the labels and title. Defaults to 14.</span>
</span><span id="GA.plot_genes-3912"><a href="#GA.plot_genes-3912"><span class="linenos">3912</span></a><span class="sd">            plot_type: Type of the plot which can be either &quot;plot&quot; (default), &quot;scatter&quot;, or &quot;bar&quot;.</span>
</span><span id="GA.plot_genes-3913"><a href="#GA.plot_genes-3913"><span class="linenos">3913</span></a><span class="sd">            graph_type: Type of the graph which can be either &quot;plot&quot; (default), &quot;boxplot&quot;, or &quot;histogram&quot;.</span>
</span><span id="GA.plot_genes-3914"><a href="#GA.plot_genes-3914"><span class="linenos">3914</span></a><span class="sd">            fill_color: Fill color of the graph which defaults to &quot;#3870FF&quot;. This has no effect if graph_type=&quot;plot&quot;.</span>
</span><span id="GA.plot_genes-3915"><a href="#GA.plot_genes-3915"><span class="linenos">3915</span></a><span class="sd">            color: Color of the plot which defaults to &quot;black&quot;.</span>
</span><span id="GA.plot_genes-3916"><a href="#GA.plot_genes-3916"><span class="linenos">3916</span></a><span class="sd">            solutions: Defaults to &quot;all&quot; which means use all solutions. If &quot;best&quot; then only the best solutions are used.</span>
</span><span id="GA.plot_genes-3917"><a href="#GA.plot_genes-3917"><span class="linenos">3917</span></a><span class="sd">            save_dir: Directory to save the figure.</span>
</span><span id="GA.plot_genes-3918"><a href="#GA.plot_genes-3918"><span class="linenos">3918</span></a>
</span><span id="GA.plot_genes-3919"><a href="#GA.plot_genes-3919"><span class="linenos">3919</span></a><span class="sd">        Returns the figure.</span>
</span><span id="GA.plot_genes-3920"><a href="#GA.plot_genes-3920"><span class="linenos">3920</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.plot_genes-3921"><a href="#GA.plot_genes-3921"><span class="linenos">3921</span></a>
</span><span id="GA.plot_genes-3922"><a href="#GA.plot_genes-3922"><span class="linenos">3922</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_genes-3923"><a href="#GA.plot_genes-3923"><span class="linenos">3923</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_genes-3924"><a href="#GA.plot_genes-3924"><span class="linenos">3924</span></a>                <span class="s2">&quot;The plot_genes() method can only be called after completing at least 1 generation but (</span><span class="si">{generations_completed}</span><span class="s2">) is completed.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.plot_genes-3925"><a href="#GA.plot_genes-3925"><span class="linenos">3925</span></a>                    <span class="n">generations_completed</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span><span class="p">))</span>
</span><span id="GA.plot_genes-3926"><a href="#GA.plot_genes-3926"><span class="linenos">3926</span></a>
</span><span id="GA.plot_genes-3927"><a href="#GA.plot_genes-3927"><span class="linenos">3927</span></a>        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GA.plot_genes-3928"><a href="#GA.plot_genes-3928"><span class="linenos">3928</span></a>            <span class="k">if</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3929"><a href="#GA.plot_genes-3929"><span class="linenos">3929</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_solutions</span><span class="p">:</span>
</span><span id="GA.plot_genes-3930"><a href="#GA.plot_genes-3930"><span class="linenos">3930</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="p">)</span>
</span><span id="GA.plot_genes-3931"><a href="#GA.plot_genes-3931"><span class="linenos">3931</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3932"><a href="#GA.plot_genes-3932"><span class="linenos">3932</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_genes-3933"><a href="#GA.plot_genes-3933"><span class="linenos">3933</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;all&#39; can only be called if &#39;save_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="GA.plot_genes-3934"><a href="#GA.plot_genes-3934"><span class="linenos">3934</span></a>            <span class="k">elif</span> <span class="n">solutions</span> <span class="o">==</span> <span class="s1">&#39;best&#39;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3935"><a href="#GA.plot_genes-3935"><span class="linenos">3935</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_best_solutions</span><span class="p">:</span>
</span><span id="GA.plot_genes-3936"><a href="#GA.plot_genes-3936"><span class="linenos">3936</span></a>                    <span class="n">solutions_to_plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_solutions</span>
</span><span id="GA.plot_genes-3937"><a href="#GA.plot_genes-3937"><span class="linenos">3937</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3938"><a href="#GA.plot_genes-3938"><span class="linenos">3938</span></a>                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_genes-3939"><a href="#GA.plot_genes-3939"><span class="linenos">3939</span></a>                        <span class="s2">&quot;The plot_genes() method with solutions=&#39;best&#39; can only be called if &#39;save_best_solutions=True&#39; in the pygad.GA class constructor.&quot;</span><span class="p">)</span>
</span><span id="GA.plot_genes-3940"><a href="#GA.plot_genes-3940"><span class="linenos">3940</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3941"><a href="#GA.plot_genes-3941"><span class="linenos">3941</span></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
</span><span id="GA.plot_genes-3942"><a href="#GA.plot_genes-3942"><span class="linenos">3942</span></a>                    <span class="s2">&quot;The solutions parameter can be either &#39;all&#39; or &#39;best&#39; but </span><span class="si">{solutions}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.plot_genes-3943"><a href="#GA.plot_genes-3943"><span class="linenos">3943</span></a>                        <span class="n">solutions</span><span class="o">=</span><span class="n">solutions</span><span class="p">))</span>
</span><span id="GA.plot_genes-3944"><a href="#GA.plot_genes-3944"><span class="linenos">3944</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3945"><a href="#GA.plot_genes-3945"><span class="linenos">3945</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The solutions parameter must be a string but </span><span class="si">{solutions_type}</span><span class="s2"> found.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="GA.plot_genes-3946"><a href="#GA.plot_genes-3946"><span class="linenos">3946</span></a>                <span class="n">solutions_type</span><span class="o">=</span><span class="nb">type</span><span class="p">(</span><span class="n">solutions</span><span class="p">)))</span>
</span><span id="GA.plot_genes-3947"><a href="#GA.plot_genes-3947"><span class="linenos">3947</span></a>
</span><span id="GA.plot_genes-3948"><a href="#GA.plot_genes-3948"><span class="linenos">3948</span></a>        <span class="k">if</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3949"><a href="#GA.plot_genes-3949"><span class="linenos">3949</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="GA.plot_genes-3950"><a href="#GA.plot_genes-3950"><span class="linenos">3950</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="GA.plot_genes-3951"><a href="#GA.plot_genes-3951"><span class="linenos">3951</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="GA.plot_genes-3952"><a href="#GA.plot_genes-3952"><span class="linenos">3952</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="GA.plot_genes-3953"><a href="#GA.plot_genes-3953"><span class="linenos">3953</span></a>
</span><span id="GA.plot_genes-3954"><a href="#GA.plot_genes-3954"><span class="linenos">3954</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.plot_genes-3955"><a href="#GA.plot_genes-3955"><span class="linenos">3955</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="GA.plot_genes-3956"><a href="#GA.plot_genes-3956"><span class="linenos">3956</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="GA.plot_genes-3957"><a href="#GA.plot_genes-3957"><span class="linenos">3957</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="GA.plot_genes-3958"><a href="#GA.plot_genes-3958"><span class="linenos">3958</span></a>                <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3959"><a href="#GA.plot_genes-3959"><span class="linenos">3959</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3960"><a href="#GA.plot_genes-3960"><span class="linenos">3960</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3961"><a href="#GA.plot_genes-3961"><span class="linenos">3961</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_genes-3962"><a href="#GA.plot_genes-3962"><span class="linenos">3962</span></a>                               <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3963"><a href="#GA.plot_genes-3963"><span class="linenos">3963</span></a>                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3964"><a href="#GA.plot_genes-3964"><span class="linenos">3964</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">generations_completed</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_genes-3965"><a href="#GA.plot_genes-3965"><span class="linenos">3965</span></a>                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3966"><a href="#GA.plot_genes-3966"><span class="linenos">3966</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-3967"><a href="#GA.plot_genes-3967"><span class="linenos">3967</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3968"><a href="#GA.plot_genes-3968"><span class="linenos">3968</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-3969"><a href="#GA.plot_genes-3969"><span class="linenos">3969</span></a>
</span><span id="GA.plot_genes-3970"><a href="#GA.plot_genes-3970"><span class="linenos">3970</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_genes-3971"><a href="#GA.plot_genes-3971"><span class="linenos">3971</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-3972"><a href="#GA.plot_genes-3972"><span class="linenos">3972</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GA.plot_genes-3973"><a href="#GA.plot_genes-3973"><span class="linenos">3973</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3974"><a href="#GA.plot_genes-3974"><span class="linenos">3974</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-3975"><a href="#GA.plot_genes-3975"><span class="linenos">3975</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_genes-3976"><a href="#GA.plot_genes-3976"><span class="linenos">3976</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-3977"><a href="#GA.plot_genes-3977"><span class="linenos">3977</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span id="GA.plot_genes-3978"><a href="#GA.plot_genes-3978"><span class="linenos">3978</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="GA.plot_genes-3979"><a href="#GA.plot_genes-3979"><span class="linenos">3979</span></a>                        <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3980"><a href="#GA.plot_genes-3980"><span class="linenos">3980</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3981"><a href="#GA.plot_genes-3981"><span class="linenos">3981</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3982"><a href="#GA.plot_genes-3982"><span class="linenos">3982</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.plot_genes-3983"><a href="#GA.plot_genes-3983"><span class="linenos">3983</span></a>                                                  <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3984"><a href="#GA.plot_genes-3984"><span class="linenos">3984</span></a>                        <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3985"><a href="#GA.plot_genes-3985"><span class="linenos">3985</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.plot_genes-3986"><a href="#GA.plot_genes-3986"><span class="linenos">3986</span></a>                                              <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-3987"><a href="#GA.plot_genes-3987"><span class="linenos">3987</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-3988"><a href="#GA.plot_genes-3988"><span class="linenos">3988</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-3989"><a href="#GA.plot_genes-3989"><span class="linenos">3989</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.plot_genes-3990"><a href="#GA.plot_genes-3990"><span class="linenos">3990</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</span><span id="GA.plot_genes-3991"><a href="#GA.plot_genes-3991"><span class="linenos">3991</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="GA.plot_genes-3992"><a href="#GA.plot_genes-3992"><span class="linenos">3992</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="GA.plot_genes-3993"><a href="#GA.plot_genes-3993"><span class="linenos">3993</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="GA.plot_genes-3994"><a href="#GA.plot_genes-3994"><span class="linenos">3994</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA.plot_genes-3995"><a href="#GA.plot_genes-3995"><span class="linenos">3995</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="GA.plot_genes-3996"><a href="#GA.plot_genes-3996"><span class="linenos">3996</span></a>                                <span class="k">break</span>
</span><span id="GA.plot_genes-3997"><a href="#GA.plot_genes-3997"><span class="linenos">3997</span></a>                            <span class="k">if</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-3998"><a href="#GA.plot_genes-3998"><span class="linenos">3998</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_genes-3999"><a href="#GA.plot_genes-3999"><span class="linenos">3999</span></a>                                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-4000"><a href="#GA.plot_genes-4000"><span class="linenos">4000</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-4001"><a href="#GA.plot_genes-4001"><span class="linenos">4001</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.plot_genes-4002"><a href="#GA.plot_genes-4002"><span class="linenos">4002</span></a>                                                              <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_genes-4003"><a href="#GA.plot_genes-4003"><span class="linenos">4003</span></a>                                                              <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-4004"><a href="#GA.plot_genes-4004"><span class="linenos">4004</span></a>                            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-4005"><a href="#GA.plot_genes-4005"><span class="linenos">4005</span></a>                                <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="GA.plot_genes-4006"><a href="#GA.plot_genes-4006"><span class="linenos">4006</span></a>                                                          <span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">,</span>
</span><span id="GA.plot_genes-4007"><a href="#GA.plot_genes-4007"><span class="linenos">4007</span></a>                                                          <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-4008"><a href="#GA.plot_genes-4008"><span class="linenos">4008</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4009"><a href="#GA.plot_genes-4009"><span class="linenos">4009</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GA.plot_genes-4010"><a href="#GA.plot_genes-4010"><span class="linenos">4010</span></a>
</span><span id="GA.plot_genes-4011"><a href="#GA.plot_genes-4011"><span class="linenos">4011</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="GA.plot_genes-4012"><a href="#GA.plot_genes-4012"><span class="linenos">4012</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA.plot_genes-4013"><a href="#GA.plot_genes-4013"><span class="linenos">4013</span></a>
</span><span id="GA.plot_genes-4014"><a href="#GA.plot_genes-4014"><span class="linenos">4014</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;boxplot&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-4015"><a href="#GA.plot_genes-4015"><span class="linenos">4015</span></a>            <span class="n">fig</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
</span><span id="GA.plot_genes-4016"><a href="#GA.plot_genes-4016"><span class="linenos">4016</span></a>
</span><span id="GA.plot_genes-4017"><a href="#GA.plot_genes-4017"><span class="linenos">4017</span></a>            <span class="c1"># Create an axes instance</span>
</span><span id="GA.plot_genes-4018"><a href="#GA.plot_genes-4018"><span class="linenos">4018</span></a>            <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
</span><span id="GA.plot_genes-4019"><a href="#GA.plot_genes-4019"><span class="linenos">4019</span></a>            <span class="n">boxeplots</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">,</span>
</span><span id="GA.plot_genes-4020"><a href="#GA.plot_genes-4020"><span class="linenos">4020</span></a>                                   <span class="n">labels</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">),</span>
</span><span id="GA.plot_genes-4021"><a href="#GA.plot_genes-4021"><span class="linenos">4021</span></a>                                   <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.plot_genes-4022"><a href="#GA.plot_genes-4022"><span class="linenos">4022</span></a>            <span class="c1"># adding horizontal grid lines</span>
</span><span id="GA.plot_genes-4023"><a href="#GA.plot_genes-4023"><span class="linenos">4023</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span id="GA.plot_genes-4024"><a href="#GA.plot_genes-4024"><span class="linenos">4024</span></a>
</span><span id="GA.plot_genes-4025"><a href="#GA.plot_genes-4025"><span class="linenos">4025</span></a>            <span class="k">for</span> <span class="n">box</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;boxes&#39;</span><span class="p">]:</span>
</span><span id="GA.plot_genes-4026"><a href="#GA.plot_genes-4026"><span class="linenos">4026</span></a>                <span class="c1"># change outline color</span>
</span><span id="GA.plot_genes-4027"><a href="#GA.plot_genes-4027"><span class="linenos">4027</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA.plot_genes-4028"><a href="#GA.plot_genes-4028"><span class="linenos">4028</span></a>                <span class="c1"># change fill color https://color.adobe.com/create/color-wheel</span>
</span><span id="GA.plot_genes-4029"><a href="#GA.plot_genes-4029"><span class="linenos">4029</span></a>                <span class="n">box</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-4030"><a href="#GA.plot_genes-4030"><span class="linenos">4030</span></a>
</span><span id="GA.plot_genes-4031"><a href="#GA.plot_genes-4031"><span class="linenos">4031</span></a>            <span class="k">for</span> <span class="n">whisker</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;whiskers&#39;</span><span class="p">]:</span>
</span><span id="GA.plot_genes-4032"><a href="#GA.plot_genes-4032"><span class="linenos">4032</span></a>                <span class="n">whisker</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA.plot_genes-4033"><a href="#GA.plot_genes-4033"><span class="linenos">4033</span></a>            <span class="k">for</span> <span class="n">median</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;medians&#39;</span><span class="p">]:</span>
</span><span id="GA.plot_genes-4034"><a href="#GA.plot_genes-4034"><span class="linenos">4034</span></a>                <span class="n">median</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA.plot_genes-4035"><a href="#GA.plot_genes-4035"><span class="linenos">4035</span></a>            <span class="k">for</span> <span class="n">cap</span> <span class="ow">in</span> <span class="n">boxeplots</span><span class="p">[</span><span class="s1">&#39;caps&#39;</span><span class="p">]:</span>
</span><span id="GA.plot_genes-4036"><a href="#GA.plot_genes-4036"><span class="linenos">4036</span></a>                <span class="n">cap</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="n">linewidth</span><span class="p">)</span>
</span><span id="GA.plot_genes-4037"><a href="#GA.plot_genes-4037"><span class="linenos">4037</span></a>
</span><span id="GA.plot_genes-4038"><a href="#GA.plot_genes-4038"><span class="linenos">4038</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4039"><a href="#GA.plot_genes-4039"><span class="linenos">4039</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4040"><a href="#GA.plot_genes-4040"><span class="linenos">4040</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4041"><a href="#GA.plot_genes-4041"><span class="linenos">4041</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA.plot_genes-4042"><a href="#GA.plot_genes-4042"><span class="linenos">4042</span></a>
</span><span id="GA.plot_genes-4043"><a href="#GA.plot_genes-4043"><span class="linenos">4043</span></a>        <span class="k">elif</span> <span class="n">graph_type</span> <span class="o">==</span> <span class="s2">&quot;histogram&quot;</span><span class="p">:</span>
</span><span id="GA.plot_genes-4044"><a href="#GA.plot_genes-4044"><span class="linenos">4044</span></a>            <span class="c1"># num_rows will be always be &gt;= 1</span>
</span><span id="GA.plot_genes-4045"><a href="#GA.plot_genes-4045"><span class="linenos">4045</span></a>            <span class="c1"># num_cols can only be 0 if num_genes=1</span>
</span><span id="GA.plot_genes-4046"><a href="#GA.plot_genes-4046"><span class="linenos">4046</span></a>            <span class="n">num_rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="mf">5.0</span><span class="p">))</span>
</span><span id="GA.plot_genes-4047"><a href="#GA.plot_genes-4047"><span class="linenos">4047</span></a>            <span class="n">num_cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span> <span class="o">/</span> <span class="n">num_rows</span><span class="p">))</span>
</span><span id="GA.plot_genes-4048"><a href="#GA.plot_genes-4048"><span class="linenos">4048</span></a>
</span><span id="GA.plot_genes-4049"><a href="#GA.plot_genes-4049"><span class="linenos">4049</span></a>            <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="GA.plot_genes-4050"><a href="#GA.plot_genes-4050"><span class="linenos">4050</span></a>                <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="GA.plot_genes-4051"><a href="#GA.plot_genes-4051"><span class="linenos">4051</span></a>                <span class="c1"># There is only a single gene</span>
</span><span id="GA.plot_genes-4052"><a href="#GA.plot_genes-4052"><span class="linenos">4052</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span>
</span><span id="GA.plot_genes-4053"><a href="#GA.plot_genes-4053"><span class="linenos">4053</span></a>                                                     <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
</span><span id="GA.plot_genes-4054"><a href="#GA.plot_genes-4054"><span class="linenos">4054</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
</span><span id="GA.plot_genes-4055"><a href="#GA.plot_genes-4055"><span class="linenos">4055</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4056"><a href="#GA.plot_genes-4056"><span class="linenos">4056</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-4057"><a href="#GA.plot_genes-4057"><span class="linenos">4057</span></a>                <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-4058"><a href="#GA.plot_genes-4058"><span class="linenos">4058</span></a>
</span><span id="GA.plot_genes-4059"><a href="#GA.plot_genes-4059"><span class="linenos">4059</span></a>                <span class="k">if</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_genes-4060"><a href="#GA.plot_genes-4060"><span class="linenos">4060</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-4061"><a href="#GA.plot_genes-4061"><span class="linenos">4061</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="GA.plot_genes-4062"><a href="#GA.plot_genes-4062"><span class="linenos">4062</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="GA.plot_genes-4063"><a href="#GA.plot_genes-4063"><span class="linenos">4063</span></a>                             <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA.plot_genes-4064"><a href="#GA.plot_genes-4064"><span class="linenos">4064</span></a>                             <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA.plot_genes-4065"><a href="#GA.plot_genes-4065"><span class="linenos">4065</span></a>                    <span class="n">axs</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4066"><a href="#GA.plot_genes-4066"><span class="linenos">4066</span></a>                <span class="k">elif</span> <span class="n">num_cols</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="GA.plot_genes-4067"><a href="#GA.plot_genes-4067"><span class="linenos">4067</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">num_cols</span><span class="p">)</span>
</span><span id="GA.plot_genes-4068"><a href="#GA.plot_genes-4068"><span class="linenos">4068</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="GA.plot_genes-4069"><a href="#GA.plot_genes-4069"><span class="linenos">4069</span></a>                    <span class="k">for</span> <span class="n">gene_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
</span><span id="GA.plot_genes-4070"><a href="#GA.plot_genes-4070"><span class="linenos">4070</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.plot_genes-4071"><a href="#GA.plot_genes-4071"><span class="linenos">4071</span></a>                                           <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA.plot_genes-4072"><a href="#GA.plot_genes-4072"><span class="linenos">4072</span></a>                                           <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA.plot_genes-4073"><a href="#GA.plot_genes-4073"><span class="linenos">4073</span></a>                        <span class="n">axs</span><span class="p">[</span><span class="n">gene_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4074"><a href="#GA.plot_genes-4074"><span class="linenos">4074</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="GA.plot_genes-4075"><a href="#GA.plot_genes-4075"><span class="linenos">4075</span></a>                    <span class="n">gene_idx</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="GA.plot_genes-4076"><a href="#GA.plot_genes-4076"><span class="linenos">4076</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figwidth</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="GA.plot_genes-4077"><a href="#GA.plot_genes-4077"><span class="linenos">4077</span></a>                    <span class="n">fig</span><span class="o">.</span><span class="n">set_figheight</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">num_rows</span><span class="p">)</span>
</span><span id="GA.plot_genes-4078"><a href="#GA.plot_genes-4078"><span class="linenos">4078</span></a>                    <span class="k">for</span> <span class="n">row_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_rows</span><span class="p">):</span>
</span><span id="GA.plot_genes-4079"><a href="#GA.plot_genes-4079"><span class="linenos">4079</span></a>                        <span class="k">for</span> <span class="n">col_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cols</span><span class="p">):</span>
</span><span id="GA.plot_genes-4080"><a href="#GA.plot_genes-4080"><span class="linenos">4080</span></a>                            <span class="k">if</span> <span class="n">gene_idx</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_genes</span><span class="p">:</span>
</span><span id="GA.plot_genes-4081"><a href="#GA.plot_genes-4081"><span class="linenos">4081</span></a>                                <span class="c1"># axs[row_idx, col_idx].remove()</span>
</span><span id="GA.plot_genes-4082"><a href="#GA.plot_genes-4082"><span class="linenos">4082</span></a>                                <span class="k">break</span>
</span><span id="GA.plot_genes-4083"><a href="#GA.plot_genes-4083"><span class="linenos">4083</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">solutions_to_plot</span><span class="p">[:,</span> <span class="n">gene_idx</span><span class="p">],</span>
</span><span id="GA.plot_genes-4084"><a href="#GA.plot_genes-4084"><span class="linenos">4084</span></a>                                                       <span class="n">color</span><span class="o">=</span><span class="n">fill_color</span><span class="p">,</span>
</span><span id="GA.plot_genes-4085"><a href="#GA.plot_genes-4085"><span class="linenos">4085</span></a>                                                       <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
</span><span id="GA.plot_genes-4086"><a href="#GA.plot_genes-4086"><span class="linenos">4086</span></a>                            <span class="n">axs</span><span class="p">[</span><span class="n">row_idx</span><span class="p">,</span> <span class="n">col_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Gene &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">gene_idx</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">)</span>
</span><span id="GA.plot_genes-4087"><a href="#GA.plot_genes-4087"><span class="linenos">4087</span></a>                            <span class="n">gene_idx</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="GA.plot_genes-4088"><a href="#GA.plot_genes-4088"><span class="linenos">4088</span></a>
</span><span id="GA.plot_genes-4089"><a href="#GA.plot_genes-4089"><span class="linenos">4089</span></a>            <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.001</span><span class="p">)</span>
</span><span id="GA.plot_genes-4090"><a href="#GA.plot_genes-4090"><span class="linenos">4090</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span><span id="GA.plot_genes-4091"><a href="#GA.plot_genes-4091"><span class="linenos">4091</span></a>
</span><span id="GA.plot_genes-4092"><a href="#GA.plot_genes-4092"><span class="linenos">4092</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">save_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.plot_genes-4093"><a href="#GA.plot_genes-4093"><span class="linenos">4093</span></a>            <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">save_dir</span><span class="p">,</span>
</span><span id="GA.plot_genes-4094"><a href="#GA.plot_genes-4094"><span class="linenos">4094</span></a>                                      <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</span><span id="GA.plot_genes-4095"><a href="#GA.plot_genes-4095"><span class="linenos">4095</span></a>
</span><span id="GA.plot_genes-4096"><a href="#GA.plot_genes-4096"><span class="linenos">4096</span></a>        <span class="n">matplotlib</span><span class="o">.</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="GA.plot_genes-4097"><a href="#GA.plot_genes-4097"><span class="linenos">4097</span></a>
</span><span id="GA.plot_genes-4098"><a href="#GA.plot_genes-4098"><span class="linenos">4098</span></a>        <span class="k">return</span> <span class="n">fig</span>
</span></pre></div>


            <div class="docstring"><p>Creates, shows, and returns a figure with number of subplots equal to the number of genes. Each subplot shows the gene value for each generation.
This method works only when save_solutions=True in the constructor of the pygad.GA class.
It also works only after completing at least 1 generation. If no generation is completed, an exception is raised.</p>

<p>Accepts the following:
    title: Figure title.
    xlabel: Label on the X-axis.
    ylabel: Label on the Y-axis.
    linewidth: Line width of the plot. Defaults to 3.
    font_size: Font size for the labels and title. Defaults to 14.
    plot_type: Type of the plot which can be either "plot" (default), "scatter", or "bar".
    graph_type: Type of the graph which can be either "plot" (default), "boxplot", or "histogram".
    fill_color: Fill color of the graph which defaults to "#3870FF". This has no effect if graph_type="plot".
    color: Color of the plot which defaults to "black".
    solutions: Defaults to "all" which means use all solutions. If "best" then only the best solutions are used.
    save_dir: Directory to save the figure.</p>

<p>Returns the figure.</p>
</div>


                            </div>
                            <div id="GA.close_parallel" class="classattr">
                                        <input id="GA.close_parallel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close_parallel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.close_parallel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.close_parallel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.close_parallel-4101"><a href="#GA.close_parallel-4101"><span class="linenos">4101</span></a>    <span class="k">def</span> <span class="nf">close_parallel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="GA.close_parallel-4102"><a href="#GA.close_parallel-4102"><span class="linenos">4102</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel_processing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GA.close_parallel-4103"><a href="#GA.close_parallel-4103"><span class="linenos">4103</span></a>            <span class="c1"># print(&#39;before close&#39;)</span>
</span><span id="GA.close_parallel-4104"><a href="#GA.close_parallel-4104"><span class="linenos">4104</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="GA.close_parallel-4105"><a href="#GA.close_parallel-4105"><span class="linenos">4105</span></a>            <span class="c1"># print(&#39;after close&#39;)</span>
</span><span id="GA.close_parallel-4106"><a href="#GA.close_parallel-4106"><span class="linenos">4106</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span id="GA.close_parallel-4107"><a href="#GA.close_parallel-4107"><span class="linenos">4107</span></a>            <span class="c1"># print(&#39;after join&#39;)</span>
</span><span id="GA.close_parallel-4108"><a href="#GA.close_parallel-4108"><span class="linenos">4108</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_pool</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
</span><span id="GA.close_parallel-4109"><a href="#GA.close_parallel-4109"><span class="linenos">4109</span></a>            <span class="c1"># print(&#39;after terminate&#39;)</span>
</span></pre></div>


    

                            </div>
                            <div id="GA.save" class="classattr">
                                        <input id="GA.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GA.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GA.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GA.save-4111"><a href="#GA.save-4111"><span class="linenos">4111</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="GA.save-4112"><a href="#GA.save-4112"><span class="linenos">4112</span></a>
</span><span id="GA.save-4113"><a href="#GA.save-4113"><span class="linenos">4113</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GA.save-4114"><a href="#GA.save-4114"><span class="linenos">4114</span></a><span class="sd">        Saves the genetic algorithm instance:</span>
</span><span id="GA.save-4115"><a href="#GA.save-4115"><span class="linenos">4115</span></a><span class="sd">            -filename: Name of the file to save the instance. No extension is needed.</span>
</span><span id="GA.save-4116"><a href="#GA.save-4116"><span class="linenos">4116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GA.save-4117"><a href="#GA.save-4117"><span class="linenos">4117</span></a>
</span><span id="GA.save-4118"><a href="#GA.save-4118"><span class="linenos">4118</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.pkl&quot;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="GA.save-4119"><a href="#GA.save-4119"><span class="linenos">4119</span></a>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Saves the genetic algorithm instance:
    -filename: Name of the file to save the instance. No extension is needed.</p>
</div>


                            </div>
                </section>
                <section id="load">
                            <input id="load-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="load-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#load"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="load-4122"><a href="#load-4122"><span class="linenos">4122</span></a><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
</span><span id="load-4123"><a href="#load-4123"><span class="linenos">4123</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="load-4124"><a href="#load-4124"><span class="linenos">4124</span></a><span class="sd">    Reads a saved instance of the genetic algorithm:</span>
</span><span id="load-4125"><a href="#load-4125"><span class="linenos">4125</span></a><span class="sd">        -filename: Name of the file to read the instance. No extension is needed.</span>
</span><span id="load-4126"><a href="#load-4126"><span class="linenos">4126</span></a><span class="sd">    Returns the genetic algorithm instance.</span>
</span><span id="load-4127"><a href="#load-4127"><span class="linenos">4127</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="load-4128"><a href="#load-4128"><span class="linenos">4128</span></a>
</span><span id="load-4129"><a href="#load-4129"><span class="linenos">4129</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="load-4130"><a href="#load-4130"><span class="linenos">4130</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.pkl&quot;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span><span id="load-4131"><a href="#load-4131"><span class="linenos">4131</span></a>            <span class="n">ga_in</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span><span id="load-4132"><a href="#load-4132"><span class="linenos">4132</span></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
</span><span id="load-4133"><a href="#load-4133"><span class="linenos">4133</span></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
</span><span id="load-4134"><a href="#load-4134"><span class="linenos">4134</span></a>            <span class="s2">&quot;Error reading the file </span><span class="si">{filename}</span><span class="s2">. Please check your inputs.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">))</span>
</span><span id="load-4135"><a href="#load-4135"><span class="linenos">4135</span></a>    <span class="k">except</span><span class="p">:</span>
</span><span id="load-4136"><a href="#load-4136"><span class="linenos">4136</span></a>        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span>
</span><span id="load-4137"><a href="#load-4137"><span class="linenos">4137</span></a>            <span class="s2">&quot;Error loading the file. If the file already exists, please reload all the functions previously used (e.g. fitness function).&quot;</span><span class="p">)</span>
</span><span id="load-4138"><a href="#load-4138"><span class="linenos">4138</span></a>    <span class="k">return</span> <span class="n">ga_in</span>
</span></pre></div>


            <div class="docstring"><p>Reads a saved instance of the genetic algorithm:
    -filename: Name of the file to read the instance. No extension is needed.
Returns the genetic algorithm instance.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>